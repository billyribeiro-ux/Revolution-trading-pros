(()=>{"use strict";var e={n:r=>{var o=r&&r.__esModule?()=>r.default:()=>r;return e.d(o,{a:o}),o},d:(r,o)=>{for(var t in o)e.o(o,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:o[t]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)};const r=window.wp.i18n,o=window.jQuery;var t=e.n(o);const{confirm:i,location:n,parseInt:_}=window;t()(document).ready((function(e){const o=WC_PRE_ORDERS_ADMIN.is_subscriptions_synchronization_supported,t=WC_PRE_ORDERS_ADMIN.is_subscriptions_trial_periods_supported,s=e('textarea[name="wc_pre_orders_action_email_message"]');let p=null;WC_PRE_ORDERS_ADMIN?.order_data&&("shop_order"===window.pagenow||"woocommerce_page_wc-orders"===window.pagenow&&1===e("form#order").length?e("form#post,form#order").on("submit",(function(o){const t=e("#post_ID").val();if(!t)return;const n=WC_PRE_ORDERS_ADMIN.order_data[t];if(!n)return;if(!n.is_pre_order||n.is_paid||n.pre_order_has_payment_token||!n.pre_order_will_be_charged_upon_release||"pre-ordered"!==n.order_status||!["wc-processing","wc-completed"].includes(e("#order_status").val()))return;let _="";return _+=(0,r.__)("This order contains a pre-order item that requires payment.","woocommerce-pre-orders")+"\n\n",_+=(0,r.sprintf)(
// translators: %s: The new order status.
// translators: %s: The new order status.
(0,r.__)("Changing the status of this order to %s will not email the customer prompting them to pay the balance.","woocommerce-pre-orders"),e("#order_status option:selected").text())+"\n\n",_+=(0,r.__)('To email the customer and prompt them for payment, change the status to "Pending Payment".',"woocommerce-pre-orders")+"\n\n",_+=(0,r.__)("Are you sure you want to continue?","woocommerce-pre-orders"),i(_)?void 0:(o.preventDefault(),!1)})):"edit-shop_order"!==window.pagenow&&"woocommerce_page_wc-orders"!==window.pagenow||e("#doaction, #doaction2").on("click",(function(o){if(["mark_processing","mark_completed"].includes(e("#bulk-action-selector-top").val()))return function(o){const t=e('input[name="post[]"]:checked, input[name="id[]"]:checked').map((function(){return 1*e(this).val()})).filter((function(e,r){const o=WC_PRE_ORDERS_ADMIN.order_data[r];return!!o&&o.is_pre_order&&!o.is_paid&&!o.pre_order_has_payment_token&&o.pre_order_will_be_charged_upon_release&&"pre-ordered"===o.order_status}));if(!t.length)return;let n="";return n+=(0,r.__)("This change contains pre-order items that require payment.","woocommerce-pre-orders")+"\n\n",n+=(0,r.sprintf)(
// translators: %s: The new order status.
// translators: %s: The new order status.
(0,r.__)("Changing the status of orders to %s will not email the customer prompting them to pay the balance.","woocommerce-pre-orders"),"mark_processing"===e("#bulk-action-selector-top").val()?(0,r.__)("Processing","woocommerce-pre-orders"):(0,r.__)("Completed","woocommerce-pre-orders"))+"\n\n",n+=(0,r.__)('To email the customer and prompt them for payment, change the status to "Pending Payment".',"woocommerce-pre-orders")+"\n\n",n+=(0,r.__)("The following orders are affected:","woocommerce-pre-orders")+"\n",t.each((function(e,r){const o=WC_PRE_ORDERS_ADMIN.order_data[r];n+="#"+o.order_display_number+"\n"})),n+="\n",n+=(0,r.__)("Are you sure you want to continue?","woocommerce-pre-orders"),i(n)?void 0:(o.preventDefault(),!1)}(o)})));const a=()=>{if(!WC_PRE_ORDERS_ADMIN?.product_data)return;let r,i=!0,n=!0,s=!0,p=!1,a=!1;const c=e("#product-type").val();r="variable-subscription"===c?"#variable_product_options":"subscription"===c?"#general_product_data":"",o||e(`${r} .wc_input_subscription_payment_sync`).each((function(){"0"!==e(this).val().trim()&&(i=!1)})),t||e(`${r} .wc_input_subscription_trial_length`).each((function(){const r=e(this).val().trim();0!==_(r)&&""!==r&&(i=!1)})),e("#_wc_pre_orders_enabled").is(":checked")?(n=o,s=t):(n=!0,s=!0),p=!(n&&s||"subscription"!==c),a=!(n&&s||"variable-subscription"!==c),i?(e("#_wc_pre_orders_enabled").prop("disabled",!1),e("p.wc-pre-orders-notice-subscriptions-compatibility--pre-orders").hide()):(e("#_wc_pre_orders_enabled").prop("disabled",!0),e("p.wc-pre-orders-notice-subscriptions-compatibility--pre-orders").show()),n?e(".wc_input_subscription_payment_sync").prop("disabled",!1):e(".wc_input_subscription_payment_sync").prop("disabled",!0),s?(e(".wc_input_subscription_trial_length").prop("disabled",!1),e(".wc_input_subscription_trial_period").prop("disabled",!1)):(e(".wc_input_subscription_trial_length").prop("disabled",!0),e(".wc_input_subscription_trial_period").prop("disabled",!0)),p?e("#general_product_data .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").show():e("#general_product_data .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").hide(),a?e("#variable_product_options .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").show():e("#variable_product_options .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").hide()};(()=>{if(WC_PRE_ORDERS_ADMIN?.product_data){if(!o&&WC_PRE_ORDERS_ADMIN?.product_data?.has_synced_subs&&(e("#_wc_pre_orders_enabled").prop("disabled",!0),e("p.wc-pre-orders-notice-subscriptions-compatibility--pre-orders").show()),!t&&WC_PRE_ORDERS_ADMIN?.product_data?.has_trial_period&&(e("#_wc_pre_orders_enabled").prop("disabled",!0),e("p.wc-pre-orders-notice-subscriptions-compatibility--pre-orders").show()),WC_PRE_ORDERS_ADMIN?.product_data?.is_pre_order&&(o||e(".wc_input_subscription_payment_sync").prop("disabled",!0),t||(e(".wc_input_subscription_trial_length").prop("disabled",!0),e(".wc_input_subscription_trial_period").prop("disabled",!0))),(!o&&WC_PRE_ORDERS_ADMIN?.product_data?.has_synced_subs||!t&&WC_PRE_ORDERS_ADMIN?.product_data?.has_trial_period)&&WC_PRE_ORDERS_ADMIN?.product_data?.is_pre_order){let _;o||t?o?t||(_=(0,r.__)("Subscription trial periods are not available for pre-orders.","woocommerce-pre-orders")):_=(0,r.__)("Synchronized subscription renewal dates are not available for pre-orders.","woocommerce-pre-orders"):_=(0,r.__)("Synchronized subscription renewal dates and subscription trial periods are not available for pre-orders.","woocommerce-pre-orders"),i(_+"\n\n"+(0,r.__)("Do you want to disable pre-orders for this product?","woocommerce-pre-orders"))?(e("#_wc_pre_orders_enabled").prop("checked",!1),e("#_wc_pre_orders_enabled").trigger("change")):n.assign(WC_PRE_ORDERS_ADMIN.product_admin_page)}e("#general_product_data .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").length&&e("#general_product_data .wc-pre-orders-notice-subscriptions-compatibility--pricing-page").prependTo("#general_product_data .subscription_pricing:first")}})(),e('input[name="_wc_pre_orders_availability_datetime"]').length?p=e('input[name="_wc_pre_orders_availability_datetime"]'):e('input[name="wc_pre_orders_action_new_availability_date"]').length&&(p=e('input[name="wc_pre_orders_action_new_availability_date"]')),null!==p&&p.datetimepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,timezone:WC_PRE_ORDERS_ADMIN.datepickerTimezone}),s.length&&e('input[name="wc_pre_orders_action_enable_email_notification"]').on("change",(function(){e(this).is(":checked")?(s.closest("tr").show(),s.attr("required","required")):(s.removeAttr("required"),s.closest("tr").hide())})).trigger("change"),!1===WC_PRE_ORDERS_ADMIN.is_subscriptions_supported&&e("body").on("woocommerce-product-type-change",(function(r,o){"variable-subscription"===o&&e("li.pre_orders_options").hide()})),e("body").on("change",".wc_input_subscription_payment_sync, .wc_input_subscription_trial_length",a),e("#_wc_pre_orders_enabled").on("change",a),e("body").on("woocommerce_variations_loaded",a),e("body").on("woocommerce-product-type-change",(function(r,o){"variable-subscription"===o||"subscription"===o?a():(e("#_wc_pre_orders_enabled").prop("disabled",!1),e("p.wc-pre-orders-notice-subscriptions-compatibility").hide())}))}))})();