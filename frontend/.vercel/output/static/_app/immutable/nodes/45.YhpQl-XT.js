import{z as se,p as re,o as te,a3 as ae,f as K,a9 as le,i as oe,w as q,q as o,e as a,D as ie,bJ as v,g as r,bG as ne,h as G,j as de,c as t,aP as p,as as ve,aX as d,at as ce,bH as c,r as i,bK as ue,x as M,O as me}from"../chunks/C_QN0JMx.js";import{b as N}from"../chunks/lN6oCIqA.js";var pe=K("<div> </div>"),fe=K('<div class="smtp-settings svelte-1ryl396"><div class="page-header svelte-1ryl396"><div><h1 class="svelte-1ryl396">SMTP Email Configuration</h1> <p class="svelte-1ryl396">Configure your email server settings for sending emails</p></div></div> <!> <div class="settings-card svelte-1ryl396"><form><div class="form-grid svelte-1ryl396"><div class="form-group svelte-1ryl396"><label for="host" class="svelte-1ryl396">SMTP Host</label> <input id="host" type="text" placeholder="smtp.gmail.com" required class="svelte-1ryl396"/></div> <div class="form-group svelte-1ryl396"><label for="port" class="svelte-1ryl396">Port</label> <input id="port" type="number" required class="svelte-1ryl396"/></div> <div class="form-group svelte-1ryl396"><label for="encryption" class="svelte-1ryl396">Encryption</label> <select id="encryption" class="svelte-1ryl396"><option>TLS</option><option>SSL</option><option>None</option></select></div> <div class="form-group full-width svelte-1ryl396"><label for="username" class="svelte-1ryl396">Username</label> <input id="username" type="text" placeholder="your-email@gmail.com" class="svelte-1ryl396"/></div> <div class="form-group full-width svelte-1ryl396"><label for="password" class="svelte-1ryl396">Password / App Password</label> <input id="password" type="password" placeholder="Enter password" class="svelte-1ryl396"/></div> <div class="form-group svelte-1ryl396"><label for="from_address" class="svelte-1ryl396">From Email</label> <input id="from_address" type="email" placeholder="noreply@revolutiontradingpros.com" required class="svelte-1ryl396"/></div> <div class="form-group svelte-1ryl396"><label for="from_name" class="svelte-1ryl396">From Name</label> <input id="from_name" type="text" placeholder="Revolution Trading Pros" required class="svelte-1ryl396"/></div></div> <div class="form-actions svelte-1ryl396"><button type="button" class="btn-secondary svelte-1ryl396"> </button> <button type="submit" class="btn-primary svelte-1ryl396"> </button></div></form></div></div>');function _e(X,Y){re(Y,!1);let s=p({provider:"smtp",host:"",port:587,username:"",password:"",encryption:"tls",from_address:"",from_name:"Revolution Trading Pros"}),f=p(!1),l=p(""),n=p("success"),u=p(!1);te(async()=>{await B()});async function B(){try{const e=await N("/admin/email/settings");t(s,e)}catch{}}async function I(){t(f,!0),t(l,"");try{await N("/admin/email/settings",{method:"POST",body:JSON.stringify(r(s))}),t(l,"Settings saved successfully!"),t(n,"success")}catch{t(l,"Failed to save settings"),t(n,"error")}finally{t(f,!1)}}async function Q(){if(t(u,!0),t(l,""),!r(s).host||!r(s).port||!r(s).from_address){t(l,"Please fill in all required fields (Host, Port, From Email) before testing."),t(n,"error"),t(u,!1);return}try{const e=await N("/admin/email/settings/test",{method:"POST",body:JSON.stringify(r(s))});e&&e.success===!0?(t(l,e.message||"Connection test successful! Email delivery is working."),t(n,"success")):e&&e.success===!1?(t(l,e.error||e.message||"Connection test failed. Please check your SMTP credentials."),t(n,"error")):(t(l,e?.message||"Test completed. Check your inbox for a test email."),t(n,"success"))}catch(e){e.name==="TypeError"&&e.message==="Failed to fetch"?t(l,"Network error: Unable to reach the server. Please check your internet connection and try again."):e.status===401?t(l,"Authentication error: Please log in again and retry."):e.status===403?t(l,"Permission denied: You do not have access to test email settings."):e.status===500?t(l,"Server error: The email test failed on the server. Please check your SMTP configuration."):e.message?t(l,`Test failed: ${e.message}`):t(l,"Test failed: An unexpected error occurred. Please try again."),t(n,"error")}finally{t(u,!1)}}ae();var g=fe();le("1ryl396",e=>{ve(()=>{ce.title="Email Settings | Admin | Revolution Trading Pros"})});var O=a(o(g),2);{var V=e=>{var y=pe(),ee=o(y,!0);i(y),q(()=>{me(y,1,`alert alert-${r(n)??""}`,"svelte-1ryl396"),M(ee,r(l))}),G(e,y)};oe(O,e=>{r(l)&&e(V)})}var $=a(O,2),_=o($),b=o(_),h=o(b),A=a(o(h),2);c(A),i(h);var P=a(h,2),H=a(o(P),2);c(H),i(P);var S=a(P,2),w=a(o(S),2);q(()=>{r(s),ue(()=>{})});var T=o(w);T.value=T.__value="tls";var x=a(T);x.value=x.__value="ssl";var J=a(x);J.value=J.__value="null",i(w),i(S);var k=a(S,2),R=a(o(k),2);c(R),i(k);var E=a(k,2),L=a(o(E),2);c(L),i(E);var C=a(E,2),U=a(o(C),2);c(U),i(C);var j=a(C,2),z=a(o(j),2);c(z),i(j),i(b);var D=a(b,2),m=o(D);m.__click=Q;var W=o(m,!0);i(m);var F=a(m,2),Z=o(F,!0);i(F),i(D),i(_),i($),i(g),q(()=>{m.disabled=r(u),M(W,r(u)?"Testing...":"Test Connection"),F.disabled=r(f),M(Z,r(f)?"Saving...":"Save Settings")}),ie("submit",_,I),v(A,()=>r(s).host,e=>d(s,r(s).host=e)),v(H,()=>r(s).port,e=>d(s,r(s).port=e)),ne(w,()=>r(s).encryption,e=>d(s,r(s).encryption=e)),v(R,()=>r(s).username,e=>d(s,r(s).username=e)),v(L,()=>r(s).password,e=>d(s,r(s).password=e)),v(U,()=>r(s).from_address,e=>d(s,r(s).from_address=e)),v(z,()=>r(s).from_name,e=>d(s,r(s).from_name=e)),G(X,g),de()}se(["click"]);export{_e as component};
