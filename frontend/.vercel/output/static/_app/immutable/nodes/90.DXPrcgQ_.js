import{z as te,p as se,o as ae,a3 as oe,f as u,a9 as re,bt as N,i as m,h as d,j as ne,as as ie,q as s,e as r,c as k,aP as P,g as o,at as le,H as C,r as t,k as ce,d as U,bC as de,R as ve,w as $,x as w,aq as pe,d7 as fe,N as _e,Q as ue}from"../chunks/C_QN0JMx.js";var he=u('<div class="site-info svelte-2xdplf"><strong class="svelte-2xdplf">Site:</strong> <br/> <strong class="svelte-2xdplf">Permission:</strong> </div>'),xe=u('<div class="status-card connected svelte-2xdplf"><!> <h3 class="svelte-2xdplf">Connected</h3> <p class="svelte-2xdplf">Your site is connected to Google Search Console</p> <!></div>'),ge=u('<div class="status-card disconnected svelte-2xdplf"><!> <h3 class="svelte-2xdplf">Not Connected</h3> <p class="svelte-2xdplf">Connect to Google Search Console to import analytics data</p> <button class="btn-primary svelte-2xdplf"><!> Connect with Google</button></div>'),ye=u('<div class="site-card svelte-2xdplf"><div class="site-url svelte-2xdplf"> </div> <div class="site-permission svelte-2xdplf"> </div></div>'),me=u('<div class="sites-section svelte-2xdplf"><h2 class="svelte-2xdplf">Available Sites</h2> <div class="sites-list svelte-2xdplf"></div></div>'),we=u('<div class="actions-section svelte-2xdplf"><h2 class="svelte-2xdplf">Actions</h2> <div class="action-buttons svelte-2xdplf"><button class="action-btn svelte-2xdplf"><!> </button> <button class="action-btn svelte-2xdplf"><!> Update Keyword Rankings</button></div></div> <!>',1),be=u('<div class="gsc-page svelte-2xdplf"><header class="page-header svelte-2xdplf"><div><h1 class="svelte-2xdplf"><!> Google Search Console</h1> <p class="svelte-2xdplf">Connect and sync data from Google Search Console</p></div></header> <div class="connection-status svelte-2xdplf"><!></div> <!></div>');function ke(q,K){se(K,!1);let c=P(null),F=P([]),b=P(!1);ae(()=>{B()});async function B(){try{const e=await fetch("/api/seo/gsc/status");k(c,await e.json()),o(c).connected&&E()}catch{}finally{}}async function E(){try{const a=await(await fetch("/api/seo/gsc/sites")).json();k(F,a.sites||[])}catch{}}async function H(){try{const a=await(await fetch("/api/seo/gsc/auth-url")).json();a.auth_url&&(window.location.href=a.auth_url)}catch{alert("Failed to initiate connection")}}async function J(){const e=new Date(Date.now()-2592e6).toISOString().split("T")[0],a=new Date().toISOString().split("T")[0];k(b,!0);try{const h=await(await fetch("/api/seo/gsc/import-analytics",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({start_date:e,end_date:a})})).json();alert(`Successfully imported ${h.count} analytics records`)}catch{alert("Failed to import analytics data")}finally{k(b,!1)}}async function L(){try{const a=await(await fetch("/api/seo/gsc/update-keywords",{method:"POST"})).json();alert(`Updated ${a.count} keywords`)}catch{alert("Failed to update keywords")}}oe();var j=be();re("2xdplf",e=>{ie(()=>{le.title="Google Search Console | SEO"})});var z=s(j),T=s(z),A=s(T),M=s(A);N(M,{size:32}),C(),t(A),C(2),t(T),t(z);var D=r(z,2),Q=s(D);{var Y=e=>{var a=ce(),v=U(a);{var h=n=>{var i=xe(),l=s(i);pe(l,{size:48});var f=r(l,6);{var g=y=>{var _=he(),x=r(s(_)),S=r(x,4);t(_),$(()=>{w(x,` ${o(c).site_info.site_url??""}`),w(S,` ${o(c).site_info.permission_level??""}`)}),d(y,_)};m(f,y=>{o(c).site_info&&y(g)})}t(i),d(n,i)},p=n=>{var i=ge(),l=s(i);fe(l,{size:48});var f=r(l,6);f.__click=H;var g=s(f);N(g,{size:20}),C(),t(f),t(i),d(n,i)};m(v,n=>{o(c).connected?n(h):n(p,!1)})}d(e,a)};m(Q,e=>{o(c)&&e(Y)})}t(D);var V=r(D,2);{var W=e=>{var a=we(),v=U(a),h=r(s(v),2),p=s(h);p.__click=J;var n=s(p);de(n,{size:20});var i=r(n);t(p);var l=r(p,2);l.__click=L;var f=s(l);ve(f,{size:20}),C(),t(l),t(h),t(v);var g=r(v,2);{var y=_=>{var x=me(),S=r(s(x),2);_e(S,5,()=>o(F),ue,(X,I)=>{var G=ye(),O=s(G),Z=s(O,!0);t(O);var R=r(O,2),ee=s(R,!0);t(R),t(G),$(()=>{w(Z,o(I).site_url),w(ee,o(I).permission_level)}),d(X,G)}),t(S),t(x),d(_,x)};m(g,_=>{o(F).length>0&&_(y)})}$(()=>{p.disabled=o(b),w(i,` ${o(b)?"Importing...":"Import Analytics Data"}`)}),d(e,a)};m(V,e=>{o(c)?.connected&&e(W)})}t(j),d(q,j),ne()}te(["click"]);export{ke as component};
