import{z as De,p as Fe,o as Ne,a3 as Se,f as o,a9 as Ce,F as U,e as v,bM as $,i as y,h as i,j as Le,as as Pe,q as a,c,aP as B,at as Te,H as ee,r as e,g as t,k as G,d as I,w as x,x as p,c2 as je,N as ae,bU as qe,bV as He,Q as te,b6 as Qe}from"../chunks/C_QN0JMx.js";import{u as se,A as Re}from"../chunks/BIaWRQrO.js";var Ve=o('<div class="loading svelte-1p497kv"><div class="spinner svelte-1p497kv"></div> <p>Loading users...</p></div>'),Ye=o('<div class="error-state svelte-1p497kv"><p class="svelte-1p497kv"> </p> <button class="btn-secondary svelte-1p497kv">Try Again</button></div>'),Be=o('<div class="empty-state svelte-1p497kv"><!> <h3 class="svelte-1p497kv">No users found</h3> <p class="svelte-1p497kv">Add your first admin user to get started</p> <button class="btn-primary svelte-1p497kv"><!> Add Admin User</button></div>'),Ge=o('<div class="user-full-name svelte-1p497kv"> </div>'),Ie=o('<span class="role-badge svelte-1p497kv"><!> </span>'),Je=o('<span class="role-badge user svelte-1p497kv">User</span>'),Ke=o('<tr class="svelte-1p497kv"><td class="svelte-1p497kv"><div class="user-info svelte-1p497kv"><div class="user-avatar svelte-1p497kv"> </div> <div><div class="user-name svelte-1p497kv"> </div> <!></div></div></td><td class="email svelte-1p497kv"> </td><td class="svelte-1p497kv"><div class="roles svelte-1p497kv"><!></div></td><td class="date svelte-1p497kv"> </td><td class="svelte-1p497kv"><div class="actions svelte-1p497kv"><button class="action-btn edit svelte-1p497kv" title="Edit user"><!></button> <button class="action-btn delete svelte-1p497kv" title="Delete user"><!></button></div></td></tr>'),Oe=o('<div class="users-table svelte-1p497kv"><table class="svelte-1p497kv"><thead class="svelte-1p497kv"><tr><th class="svelte-1p497kv">Name</th><th class="svelte-1p497kv">Email</th><th class="svelte-1p497kv">Roles</th><th class="svelte-1p497kv">Created</th><th class="svelte-1p497kv">Actions</th></tr></thead><tbody class="svelte-1p497kv"></tbody></table></div>'),We=o('<div class="admin-page svelte-1p497kv"><div class="page-header svelte-1p497kv"><div><h1 class="svelte-1p497kv">Users Management</h1> <p class="svelte-1p497kv">Manage admin users and permissions</p></div> <button class="btn-primary svelte-1p497kv"><!> Add Admin User</button></div> <!></div>');function $e(re,ve){Fe(ve,!1);let w=B(!0),z=B([]),_=B("");Ne(async()=>{await E()});async function E(){c(w,!0),c(_,"");try{const s=await se.list();c(z,s.data||[])}catch(s){if(s instanceof Re)if(s.status===401){U("/login");return}else s.status===403?c(_,"You are not authorized to view users."):c(_,s.message);else c(_,"Error connecting to server")}finally{c(w,!1)}}async function le(s){if(confirm("Are you sure you want to delete this user?"))try{await se.delete(s),await E()}catch{alert("Failed to delete user")}}function ie(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}Se();var M=We();Ce("1p497kv",s=>{Pe(()=>{Te.title="Users Management | Admin"})});var D=a(M),F=v(a(D),2);F.__click=()=>U("/admin/users/create");var de=a(F);$(de,{size:18}),ee(),e(F),e(D);var oe=v(D,2);{var ne=s=>{var b=Ve();i(s,b)},ce=s=>{var b=G(),pe=I(b);{var _e=u=>{var m=Ye(),h=a(m),N=a(h,!0);e(h);var S=v(h,2);S.__click=E,e(m),x(()=>p(N,t(_))),i(u,m)},ue=u=>{var m=G(),h=I(m);{var N=k=>{var n=Be(),g=a(n);je(g,{size:64,stroke:1});var f=v(g,6);f.__click=()=>U("/admin/users/create");var C=a(f);$(C,{size:18}),ee(),e(f),e(n),i(k,n)},S=k=>{var n=Oe(),g=a(n),f=v(a(g));ae(f,5,()=>t(z),te,(C,r)=>{var L=Ke(),P=a(L),J=a(P),T=a(J),me=a(T,!0);e(T);var K=v(T,2),j=a(K),ke=a(j,!0);e(j);var fe=v(j,2);{var be=l=>{var d=Ge(),V=a(d);e(d),x(()=>p(V,`${t(r).first_name??""}
												${t(r).last_name??""}`)),i(l,d)};y(fe,l=>{(t(r).first_name||t(r).last_name)&&l(be)})}e(K),e(J),e(P);var q=v(P),he=a(q,!0);e(q);var H=v(q),O=a(H),ge=a(O);{var ye=l=>{var d=G(),V=I(d);ae(V,1,()=>t(r).roles,te,(ze,Ee)=>{var Y=Ie(),Z=a(Y);Qe(Z,{size:14});var Me=v(Z);e(Y),x(()=>p(Me,` ${t(Ee).name??""}`)),i(ze,Y)}),i(l,d)},Ae=l=>{var d=Je();i(l,d)};y(ge,l=>{t(r).roles&&t(r).roles.length>0?l(ye):l(Ae,!1)})}e(O),e(H);var Q=v(H),Ue=a(Q,!0);e(Q);var W=v(Q),X=a(W),A=a(X);A.__click=()=>U(`/admin/users/edit/${t(r).id}`);var xe=a(A);qe(xe,{size:16}),e(A);var R=v(A,2);R.__click=()=>le(t(r).id);var we=a(R);He(we,{size:16}),e(R),e(X),e(W),e(L),x((l,d)=>{p(me,l),p(ke,t(r).name||"Unnamed User"),p(he,t(r).email),p(Ue,d)},[()=>t(r).name?.charAt(0).toUpperCase()||"U",()=>ie(t(r).created_at)]),i(C,L)}),e(f),e(g),e(n),i(k,n)};y(h,k=>{t(z).length===0?k(N):k(S,!1)},!0)}i(u,m)};y(pe,u=>{t(_)?u(_e):u(ue,!1)},!0)}i(s,b)};y(oe,s=>{t(w)?s(ne):s(ce,!1)})}e(M),i(re,M),Le()}De(["click"]);export{$e as component};
