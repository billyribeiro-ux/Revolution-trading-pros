import{z as wt,p as kt,o as Lt,f as n,a9 as Ct,c2 as je,ao as St,e as l,ay as $t,N as Y,aR as Rt,P as Ft,i as Z,w as _,bJ as zt,g as s,bG as Me,h as v,j as At,E as jt,dQ as b,s as ee,B as L,as as Mt,q as t,c as te,at as qt,r as e,H as qe,bH as Et,Q as Ee,x as d,n as ae,k as Pe,d as He,_ as Pt,F as Ht}from"../chunks/C_QN0JMx.js";import{c as Ot}from"../chunks/L2eW2QSs.js";import{c as Oe,a as Qe,i as se,e as le}from"../chunks/CQFACQS9.js";var Qt=n('<meta name="description" content="Enterprise CRM contact management"/>'),Tt=n("<option> </option>"),Bt=n("<option> </option>"),Dt=n('<div class="mb-4 rounded-xl border border-rose-700/60 bg-rose-950/40 px-4 py-3 text-sm text-rose-200"> </div>'),It=n('<tr><td colspan="9" class="px-4 py-8 text-center text-slate-400">Loading contacts…</td></tr>'),Nt=n('<tr><td colspan="9" class="px-4 py-8 text-center text-slate-500">No contacts found.</td></tr>'),Ut=n('<tr class="cursor-pointer border-t border-slate-800/60 hover:bg-slate-800/40"><td class="px-4 py-3"><div class="flex flex-col"><span class="font-medium text-slate-50"> </span> <span class="text-xs text-slate-400"> </span></div></td><td class="px-4 py-3 text-xs"><span class="rounded-full bg-slate-800/80 px-2 py-1 text-slate-200"> </span></td><td class="px-4 py-3 text-xs text-slate-300"> </td><td class="px-4 py-3"><div class="flex items-center gap-2"><div class="h-1.5 w-16 overflow-hidden rounded-full bg-slate-800"><div class="h-full rounded-full bg-emerald-400"></div></div> <span class="text-xs text-slate-200"> </span></div></td><td class="px-4 py-3 text-xs text-slate-200"> </td><td class="px-4 py-3 text-xs text-slate-200"> </td><td class="px-4 py-3 text-xs text-slate-200"> </td><td class="px-4 py-3 text-xs text-slate-300"> </td><td class="px-4 py-3 text-xs text-slate-400"> </td></tr>'),Gt=n('<div class="min-h-screen bg-slate-950/95 text-slate-50"><div class="mx-auto max-w-7xl px-6 py-8"><div class="mb-6 flex flex-wrap items-center justify-between gap-4"><div class="flex items-center gap-3"><div class="flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-500/20 text-indigo-400"><!></div> <div><h1 class="text-2xl font-semibold tracking-tight">Contacts</h1> <p class="text-sm text-slate-400">RevolutionCRM-L8-System · 360° view of every relationship</p></div></div> <div class="flex items-center gap-2 text-xs text-slate-400"><span class="rounded-full bg-emerald-500/10 px-3 py-1 text-emerald-300">Lead Scoring L8</span> <span class="rounded-full bg-sky-500/10 px-3 py-1 text-sky-300">Behavior Linked</span></div></div> <div class="mb-6 flex flex-wrap items-center gap-3 rounded-2xl border border-slate-800/80 bg-slate-900/70 p-4"><div class="flex flex-1 items-center gap-2 rounded-xl border border-slate-800 bg-slate-900/80 px-3 py-2"><!> <input id="contact-search" class="w-full bg-transparent text-sm text-slate-100 outline-none placeholder:text-slate-500" placeholder="Search by name, email, title"/></div> <div class="flex items-center gap-2 text-xs text-slate-300"><!> <select class="rounded-lg border border-slate-800 bg-slate-900/80 px-2 py-1 text-xs"></select> <select class="rounded-lg border border-slate-800 bg-slate-900/80 px-2 py-1 text-xs"></select></div> <button class="rounded-xl bg-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-400 disabled:opacity-60"> </button></div> <div class="mb-6 grid gap-4 md:grid-cols-3"><div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4"><div class="flex items-center justify-between"><div><p class="text-xs uppercase tracking-wide text-slate-500">Total Contacts</p> <p class="mt-1 text-2xl font-semibold"> </p></div> <div class="rounded-xl bg-slate-800/80 p-2"><!></div></div></div> <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4"><div class="flex items-center justify-between"><div><p class="text-xs uppercase tracking-wide text-slate-500">High-Intent Leads</p> <p class="mt-1 text-2xl font-semibold"> </p></div> <div class="rounded-xl bg-emerald-500/10 p-2"><!></div></div></div> <div class="rounded-2xl border border-slate-800 bg-slate-900/70 p-4"><div class="flex items-center justify-between"><div><p class="text-xs uppercase tracking-wide text-slate-500">At-Risk Customers</p> <p class="mt-1 text-2xl font-semibold"> </p></div> <div class="rounded-xl bg-rose-500/10 p-2"><!></div></div></div></div> <!> <div class="overflow-hidden rounded-2xl border border-slate-800/80 bg-slate-900/70"><div class="max-h-[70vh] overflow-auto"><table class="min-w-full text-sm"><thead class="sticky top-0 bg-slate-900/95 text-left text-xs uppercase tracking-wide text-slate-500"><tr><th class="px-4 py-3">Contact</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Lifecycle</th><th class="px-4 py-3">Lead Score</th><th class="px-4 py-3">Health</th><th class="px-4 py-3">Engagement</th><th class="px-4 py-3">MRR</th><th class="px-4 py-3">Owner</th><th class="px-4 py-3">Last Activity</th></tr></thead><tbody><!></tbody></table></div></div></div></div>');function Wt(Te,Be){kt(Be,!0);const C=()=>L(se,"$isLoading",g),re=()=>L(le,"$error",g),De=()=>L(Oe,"$contactFilters",g),p=()=>L(Qe,"$contacts",g),[g,Ie]=jt();let S=ee(""),m=ee("all"),f=ee("all");const Ne=[{value:"all",label:"All statuses"},{value:"lead",label:"Leads"},{value:"prospect",label:"Prospects"},{value:"customer",label:"Customers"},{value:"churned",label:"Churned"},{value:"unqualified",label:"Unqualified"}],Ue=[{value:"all",label:"All lifecycle stages"},{value:"subscriber",label:"Subscribers"},{value:"lead",label:"Leads"},{value:"mql",label:"MQLs"},{value:"sql",label:"SQLs"},{value:"opportunity",label:"Opportunities"},{value:"customer",label:"Customers"},{value:"evangelist",label:"Evangelists"}];Lt(async()=>{await $()});async function $(){b(se,!0),b(le,null);try{b(Oe,{search:s(S)||void 0,status:s(m)!=="all"?s(m):void 0,lifecycle_stage:s(f)!=="all"?s(f):void 0,sort_by:"created_at",sort_order:"desc",per_page:100});const a=await Ot.getContacts(De());Qe.set(a.data)}catch{b(le,"Failed to load contacts. Please try again.")}finally{b(se,!1)}}function Ge(a){Ht(`/crm/contacts/${a.id}`)}let Je=ae(()=>p().length),Ke=ae(()=>p().filter(a=>a.lead_score>=75).length),Ve=ae(()=>p().filter(a=>a.status==="customer"&&a.health_score<50).length);var R=Gt();Ct("1x6471",a=>{var r=Qt();Mt(()=>{qt.title="CRM Contacts | Revolution Trading Pros"}),v(a,r)});var de=t(R),F=t(de),ie=t(F),oe=t(ie),We=t(oe);je(We,{size:22}),e(oe),qe(2),e(ie),qe(2),e(F);var z=l(F,2),A=t(z),ve=t(A);St(ve,{size:18,class:"text-slate-500"});var j=l(ve,2);Et(j),j.__keydown=a=>a.key==="Enter"&&$(),e(A);var M=l(A,2),ne=t(M);$t(ne,{size:16,class:"text-slate-500"});var h=l(ne,2);Y(h,21,()=>Ne,Ee,(a,r)=>{var i=Tt(),u=t(i,!0);e(i);var c={};_(()=>{d(u,s(r).label),c!==(c=s(r).value)&&(i.value=(i.__value=s(r).value)??"")}),v(a,i)}),e(h);var q=l(h,2);Y(q,21,()=>Ue,Ee,(a,r)=>{var i=Bt(),u=t(i,!0);e(i);var c={};_(()=>{d(u,s(r).label),c!==(c=s(r).value)&&(i.value=(i.__value=s(r).value)??"")}),v(a,i)}),e(q),e(M);var y=l(M,2);y.__click=$;var Xe=t(y,!0);e(y),e(z);var E=l(z,2),P=t(E),ce=t(P),H=t(ce),pe=l(t(H),2),Ye=t(pe,!0);e(pe),e(H);var xe=l(H,2),Ze=t(xe);je(Ze,{size:20,class:"text-indigo-400"}),e(xe),e(ce),e(P);var O=l(P,2),ue=t(O),Q=t(ue),_e=l(t(Q),2),et=t(_e,!0);e(_e),e(Q);var be=l(Q,2),tt=t(be);Rt(tt,{size:20,class:"text-emerald-400"}),e(be),e(ue),e(O);var ge=l(O,2),me=t(ge),T=t(me),fe=l(t(T),2),at=t(fe,!0);e(fe),e(T);var he=l(T,2),st=t(he);Ft(st,{size:20,class:"text-rose-400"}),e(he),e(me),e(ge),e(E);var ye=l(E,2);{var lt=a=>{var r=Dt(),i=t(r,!0);e(r),_(()=>d(i,re())),v(a,r)};Z(ye,a=>{re()&&a(lt)})}var we=l(ye,2),ke=t(we),Le=t(ke),Ce=l(t(Le)),rt=t(Ce);{var dt=a=>{var r=It();v(a,r)},it=a=>{var r=Pe(),i=He(r);{var u=x=>{var w=Nt();v(x,w)},c=x=>{var w=Pe(),ot=He(w);Y(ot,1,p,B=>B.id,(B,o)=>{var k=Ut();k.__click=()=>Ge(s(o));var D=t(k),Se=t(D),I=t(Se),vt=t(I,!0);e(I);var $e=l(I,2),nt=t($e,!0);e($e),e(Se),e(D);var N=l(D),Re=t(N),ct=t(Re,!0);e(Re),e(N);var U=l(N),pt=t(U,!0);e(U);var G=l(U),Fe=t(G),J=t(Fe),xt=t(J);e(J);var ze=l(J,2),ut=t(ze,!0);e(ze),e(Fe),e(G);var K=l(G),_t=t(K,!0);e(K);var V=l(K),bt=t(V,!0);e(V);var W=l(V),gt=t(W,!0);e(W);var X=l(W),mt=t(X,!0);e(X);var Ae=l(X),ft=t(Ae,!0);e(Ae),e(k),_((ht,yt)=>{d(vt,s(o).full_name),d(nt,s(o).email),d(ct,s(o).status),d(pt,s(o).lifecycle_stage),Pt(xt,`width: ${s(o).lead_score}%`),d(ut,s(o).lead_score),d(_t,s(o).health_score),d(bt,s(o).engagement_score),d(gt,ht),d(mt,s(o).owner?.name??"—"),d(ft,yt)},[()=>s(o).subscription_mrr>0?`$${s(o).subscription_mrr.toFixed(0)}`:"—",()=>s(o).last_activity_at?new Date(s(o).last_activity_at).toLocaleDateString():"—"]),v(B,k)}),v(x,w)};Z(i,x=>{p().length?x(c,!1):x(u)},!0)}v(a,r)};Z(rt,a=>{C()&&!p().length?a(dt):a(it,!1)})}e(Ce),e(Le),e(ke),e(we),e(de),e(R),_(()=>{y.disabled=C(),d(Xe,C()?"Loading…":"Apply filters"),d(Ye,s(Je)),d(et,s(Ke)),d(at,s(Ve))}),zt(j,()=>s(S),a=>te(S,a)),Me(h,()=>s(m),a=>te(m,a)),Me(q,()=>s(f),a=>te(f,a)),v(Te,R),At(),Ie()}wt(["keydown","click"]);export{Wt as component};
