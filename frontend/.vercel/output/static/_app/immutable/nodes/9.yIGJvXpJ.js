import{z as Ze,p as et,b as tt,B as J,F as W,s as D,A as at,o as rt,k as H,a9 as st,d as k,i as h,h as o,j as it,E as ot,f as v,as as lt,c as d,at as nt,q as s,e as l,g as e,r as i,H as ct,w as E,x as b,v as X,N as fe,Q as dt,O as Z,K as vt}from"../chunks/C_QN0JMx.js";import{isAuthenticated as ut,authStore as ee,sessionInvalidated as gt}from"../chunks/D3S43Cfl.js";import{a as T}from"../chunks/BGaU0aUD.js";var pt=v('<meta name="description" content="Manage your active sessions and devices"/>'),ht=v('<div class="mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3"><svg class="w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <div><p class="font-medium text-amber-800">Session Notice</p> <p class="text-sm text-amber-700">Your previous session was ended because you signed in from another device.</p></div></div>'),ft=v('<div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-700"> <button class="ml-2 underline">Retry</button></div>'),mt=v('<span class="flex items-center gap-2"><svg class="animate-spin h-4 w-4" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Refreshing...</span>'),_t=v('<div class="p-6 border-b border-gray-100 last:border-b-0 animate-pulse"><div class="flex items-start gap-4"><div class="w-12 h-12 bg-gray-200 rounded-lg"></div> <div class="flex-1"><div class="h-5 bg-gray-200 rounded w-48 mb-2"></div> <div class="h-4 bg-gray-100 rounded w-64 mb-1"></div> <div class="h-4 bg-gray-100 rounded w-32"></div></div> <div class="w-20 h-8 bg-gray-200 rounded"></div></div></div>'),bt=v(`<div class="p-12 text-center text-gray-500"><svg class="w-12 h-12 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> <p class="text-lg font-medium">No active sessions</p> <p class="text-sm">You don't have any active sessions.</p></div>`),xt=v('<span class="px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-full">This device</span>'),yt=v('<span class="text-gray-400">â€¢</span> ',1),wt=v('<span class="flex items-center gap-1"><svg class="animate-spin h-3 w-3" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Revoking...</span>'),kt=v('<div><div class="flex items-start gap-4"><div><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></div> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><h3 class="font-semibold text-gray-900 truncate"> </h3> <!></div> <div class="text-sm text-gray-600 space-y-0.5"><p><span class="text-gray-500">IP:</span> <!></p> <p><span class="text-gray-500">Last active:</span> </p> <p><span class="text-gray-500">Signed in:</span> </p></div></div> <div><button><!></button></div></div></div>'),Mt=v(`<div class="min-h-[calc(100vh-120px)] bg-gray-50 py-12 px-4"><div class="max-w-4xl mx-auto"><div class="mb-8"><nav class="text-sm mb-4"><a href="/account" class="text-blue-600 hover:underline">Account</a> <span class="mx-2 text-gray-400">/</span> <span class="text-gray-600">Sessions</span></nav> <h1 class="text-3xl font-bold text-gray-900">Active Sessions</h1> <p class="mt-2 text-gray-600">Manage your active sessions across devices. If you notice any suspicious activity, revoke
					the session immediately.</p></div> <!> <!> <div class="mb-6 flex flex-wrap gap-3"><button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"><!></button> <button class="px-4 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 disabled:opacity-50 transition-colors"> </button> <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors"> </button></div> <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"><!></div> <div class="mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg"><h3 class="font-medium text-blue-900 mb-2">Security Information</h3> <ul class="text-sm text-blue-800 space-y-1"><li class="flex items-start gap-2"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span>For security, only one active session is allowed at a time.</span></li> <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span>Signing in on a new device will automatically sign you out from others.</span></li> <li class="flex items-start gap-2"><svg class="w-4 h-4 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> <span>If you see a session you don't recognize, revoke it and change your password.</span></li></ul></div> <div class="mt-8"><a href="/account" class="text-blue-600 hover:underline flex items-center gap-2"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Back to Account</a></div></div></div>`),St=v('<div class="min-h-[calc(100vh-120px)] flex items-center justify-center"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading...</p></div></div>');function Ct(me,_e){et(_e,!0);const be=()=>J(ut,"$isAuthenticated",P),$=()=>J(ee,"$authStore",P),xe=()=>J(gt,"$sessionInvalidated",P),[P,ye]=ot();tt(()=>{!be()&&!$().isLoading&&!$().isInitializing&&W("/login?redirect=/account/sessions",{replaceState:!0})});let m=D(at([])),M=D(!0),x=D(null),S=D(null),p=D(!1);rt(async()=>{await j()});async function j(){d(M,!0),d(x,null);try{const t=await T.getSessions();d(m,t.sessions,!0)}catch(t){d(x,t instanceof Error?t.message:"Failed to load sessions",!0)}finally{d(M,!1)}}async function we(t){if(e(S))return;const u=e(m).find(f=>f.session_id===t);if(!(u?.is_current&&!confirm("This will log you out. Are you sure?"))){d(S,t,!0);try{await T.revokeSession(t),d(m,e(m).filter(f=>f.session_id!==t),!0),u?.is_current&&(ee.clearAuth(),W("/login?reason=session_revoked",{replaceState:!0}))}catch(f){d(x,f instanceof Error?f.message:"Failed to revoke session",!0)}finally{d(S,null)}}}async function ke(){if(!e(p)&&confirm("This will log you out from all devices. Are you sure?")){d(p,!0);try{await T.logoutAllDevices(!1),ee.clearAuth(),W("/login?reason=logged_out_all",{replaceState:!0})}catch(t){d(x,t instanceof Error?t.message:"Failed to logout from all devices",!0),d(p,!1)}}}async function Me(){if(!e(p)&&confirm("This will log you out from all other devices. Continue?")){d(p,!0);try{const t=await T.logoutAllDevices(!0);await j(),alert(`Logged out from ${t.revoked_count} device(s)`)}catch(t){d(x,t instanceof Error?t.message:"Failed to logout from other devices",!0)}finally{d(p,!1)}}}function te(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Se(t){switch(t){case"desktop":return"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z";case"mobile":return"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z";case"tablet":return"M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z";default:return"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"}}var ae=H();st("1x3a60q",t=>{var u=pt();lt(()=>{nt.title="Active Sessions - Revolution Trading Pros"}),o(t,u)});var Ae=k(ae);{var ze=t=>{var u=Mt(),f=s(u),re=l(s(f),2);{var Ce=r=>{var c=ht();o(r,c)};h(re,r=>{xe()&&r(Ce)})}var se=l(re,2);{var Be=r=>{var c=ft(),y=s(c),L=l(y);L.__click=j,i(c),E(()=>b(y,`${e(x)??""} `)),o(r,c)};h(se,r=>{e(x)&&r(Be)})}var N=l(se,2),A=s(N);A.__click=j;var De=s(A);{var He=r=>{var c=mt();o(r,c)},je=r=>{var c=X("Refresh");o(r,c)};h(De,r=>{e(M)?r(He):r(je,!1)})}i(A);var z=l(A,2);z.__click=Me;var Fe=s(z,!0);i(z);var F=l(z,2);F.__click=ke;var Re=s(F,!0);i(F),i(N);var ie=l(N,2),Ve=s(ie);{var Ie=r=>{var c=H(),y=k(c);fe(y,16,()=>Array(3),dt,(L,oe)=>{var _=_t();o(L,_)}),o(r,c)},Ee=r=>{var c=H(),y=k(c);{var L=_=>{var R=bt();o(_,R)},oe=_=>{var R=H(),Te=k(R);fe(Te,17,()=>e(m),q=>q.session_id,(q,a)=>{var V=kt();let le;var ne=s(V),I=s(ne);let ce;var de=s(I),$e=s(de);i(de),i(I);var O=l(I,2),Y=s(O),K=s(Y),Pe=s(K,!0);i(K);var Ne=l(K,2);{var qe=n=>{var g=xt();o(n,g)};h(Ne,n=>{e(a).is_current&&n(qe)})}i(Y);var ve=l(Y,2),Q=s(ve),ue=l(s(Q)),Oe=l(ue);{var Ye=n=>{var g=yt(),B=l(k(g));E(()=>b(B,` ${e(a).location??""}`)),o(n,g)};h(Oe,n=>{e(a).location&&n(Ye)})}i(Q);var U=l(Q,2),Ke=l(s(U));i(U);var ge=l(U,2),Qe=l(s(ge));i(ge),i(ve),i(O);var pe=l(O,2),C=s(pe);let he;C.__click=()=>we(e(a).session_id);var Ue=s(C);{var Ge=n=>{var g=wt();o(n,g)},Je=n=>{var g=H(),B=k(g);{var We=w=>{var G=X("Sign out");o(w,G)},Xe=w=>{var G=X("Revoke");o(w,G)};h(B,w=>{e(a).is_current?w(We):w(Xe,!1)},!0)}o(n,g)};h(Ue,n=>{e(S)===e(a).session_id?n(Ge):n(Je,!1)})}i(C),i(pe),i(ne),i(V),E((n,g,B)=>{le=Z(V,1,"p-6 border-b border-gray-100 last:border-b-0 hover:bg-gray-50 transition-colors",null,le,{"bg-blue-50":e(a).is_current}),ce=Z(I,1,"w-12 h-12 rounded-lg flex items-center justify-center",null,ce,{"bg-blue-100":e(a).is_current,"text-blue-600":e(a).is_current,"bg-gray-100":!e(a).is_current,"text-gray-600":!e(a).is_current}),vt($e,"d",n),b(Pe,e(a).device_description||e(a).device_name),b(ue,` ${e(a).ip_address??""} `),b(Ke,` ${g??""}`),b(Qe,` ${B??""}`),he=Z(C,1,"px-3 py-1.5 text-sm font-medium rounded-lg transition-colors disabled:opacity-50",null,he,{"bg-red-100":!e(a).is_current,"text-red-700":!e(a).is_current,"hover:bg-red-200":!e(a).is_current,"bg-gray-100":e(a).is_current,"text-gray-700":e(a).is_current,"hover:bg-gray-200":e(a).is_current}),C.disabled=e(S)===e(a).session_id},[()=>Se(e(a).device_type),()=>te(e(a).last_activity_at),()=>te(e(a).created_at)]),o(q,V)}),o(_,R)};h(y,_=>{e(m).length===0?_(L):_(oe,!1)},!0)}o(r,c)};h(Ve,r=>{e(M)&&e(m).length===0?r(Ie):r(Ee,!1)})}i(ie),ct(4),i(f),i(u),E(()=>{A.disabled=e(M),z.disabled=e(p)||e(m).length<=1,b(Fe,e(p)?"Processing...":"Sign out other devices"),F.disabled=e(p),b(Re,e(p)?"Processing...":"Sign out all devices")}),o(t,u)},Le=t=>{var u=St();o(t,u)};h(Ae,t=>{$().user?t(ze):t(Le,!1)})}o(me,ae),it(),ye()}Ze(["click"]);export{Ct as component};
