import{z as Bt,p as Nt,s as L,A as Pt,o as It,f as z,a9 as Ht,d as ye,F as Re,q as a,aM as Lt,aH as Qt,i as Q,ao as Rt,e as l,ay as Zt,g as e,w as U,bJ as Se,bG as Gt,h as y,j as Jt,E as Ot,n as R,c as n,aN as Vt,B as ze,at as Xt,H as E,r as t,bH as te,x as o,aa as Yt,M as Ze,U as Ge,dz as Kt,dA as Wt,P as ea,cY as ta,k as aa,Z as sa,N as Je,Q as Oe,bI as la,aF as va,bA as ra,O as Ve,b_ as Xe,c$ as ia,cZ as da}from"../chunks/C_QN0JMx.js";import{s as Z,e as Me}from"../chunks/CZr5Exml.js";var oa=z('<button class="btn-email svelte-13kktq8"><!> </button>'),na=z('<div class="stats-grid svelte-13kktq8"><div class="stat-card svelte-13kktq8"><div class="stat-icon purple svelte-13kktq8"><!></div> <div class="stat-value svelte-13kktq8"> </div> <div class="stat-label svelte-13kktq8">Total Members</div></div> <div class="stat-card svelte-13kktq8"><div class="stat-icon emerald svelte-13kktq8"><!></div> <div class="stat-value svelte-13kktq8"> </div> <div class="stat-label svelte-13kktq8">Active</div></div> <div class="stat-card svelte-13kktq8"><div class="stat-icon blue svelte-13kktq8"><!></div> <div class="stat-value svelte-13kktq8"> </div> <div class="stat-label svelte-13kktq8">Trial</div></div> <div class="stat-card svelte-13kktq8"><div class="stat-icon red svelte-13kktq8"><!></div> <div class="stat-value svelte-13kktq8"> </div> <div class="stat-label svelte-13kktq8">Churned</div></div> <div class="stat-card svelte-13kktq8"><div class="stat-icon gold svelte-13kktq8"><!></div> <div class="stat-value svelte-13kktq8"> </div> <div class="stat-label svelte-13kktq8">Total Revenue</div></div></div>'),ca=z('<div class="loading-state svelte-13kktq8"><div class="loader svelte-13kktq8"></div> <p>Loading members...</p></div>'),ka=z('<div class="empty-state svelte-13kktq8"><!> <h3 class="svelte-13kktq8">No members found</h3> <p>No members have subscribed to this service yet</p></div>'),_a=z('<tr><td class="checkbox-col svelte-13kktq8"><input type="checkbox" class="svelte-13kktq8"/></td><td class="svelte-13kktq8"><div class="member-info svelte-13kktq8"><div class="member-avatar svelte-13kktq8"> </div> <div class="member-details"><div class="member-name svelte-13kktq8"> </div> <div class="member-email svelte-13kktq8"> </div></div></div></td><td class="svelte-13kktq8"><span> </span></td><td class="svelte-13kktq8"><span class="plan-name svelte-13kktq8"> </span></td><td class="svelte-13kktq8"><span class="revenue svelte-13kktq8"> </span></td><td class="svelte-13kktq8"><span class="date svelte-13kktq8"> </span></td><td class="svelte-13kktq8"><div class="actions svelte-13kktq8"><button class="action-btn svelte-13kktq8" title="View Details"><!></button> <button class="action-btn svelte-13kktq8" title="Send Email"><!></button></div></td></tr>'),ua=z('<div class="pagination svelte-13kktq8"><div class="pagination-info svelte-13kktq8"> </div> <div class="pagination-controls svelte-13kktq8"><button class="page-btn svelte-13kktq8"><!></button> <span class="page-indicator svelte-13kktq8"> </span> <button class="page-btn svelte-13kktq8"><!></button></div></div>'),ba=z('<table class="members-table svelte-13kktq8"><thead class="svelte-13kktq8"><tr><th class="checkbox-col svelte-13kktq8"><input type="checkbox" class="svelte-13kktq8"/></th><th class="svelte-13kktq8">Member</th><th class="svelte-13kktq8">Status</th><th class="svelte-13kktq8">Plan</th><th class="svelte-13kktq8">Revenue</th><th class="svelte-13kktq8">Start Date</th><th class="svelte-13kktq8">Actions</th></tr></thead><tbody class="svelte-13kktq8"></tbody></table> <!>',1),pa=z('<button class="template-btn svelte-13kktq8"> </button>'),ma=z('<div class="modal-overlay svelte-13kktq8" role="dialog" tabindex="-1" aria-modal="true"><div class="modal-content svelte-13kktq8" role="document"><div class="modal-header svelte-13kktq8"><h2 class="svelte-13kktq8"> </h2> <button class="close-btn svelte-13kktq8"><!></button></div> <div class="modal-body svelte-13kktq8"><div class="template-selector svelte-13kktq8"><span class="selector-label svelte-13kktq8">Quick Templates</span> <div class="template-buttons svelte-13kktq8"></div></div> <div class="form-group svelte-13kktq8"><label for="email-subject" class="svelte-13kktq8">Subject</label> <input id="email-subject" type="text" placeholder="Email subject..." class="svelte-13kktq8"/></div> <div class="form-group svelte-13kktq8"><label for="email-body" class="svelte-13kktq8">Body</label> <textarea id="email-body" rows="10" placeholder="Email body..." class="svelte-13kktq8"></textarea></div></div> <div class="modal-footer svelte-13kktq8"><button class="btn-secondary svelte-13kktq8">Cancel</button> <button class="btn-primary svelte-13kktq8"><!> Send Email</button></div></div></div>'),qa=z('<div class="service-members-page svelte-13kktq8"><div class="page-header"><button class="back-btn svelte-13kktq8"><!> Back to Members</button> <div class="header-content svelte-13kktq8"><div class="header-title svelte-13kktq8"><div class="title-icon svelte-13kktq8"><!></div> <div><h1 class="svelte-13kktq8"> </h1> <p class="service-type svelte-13kktq8"> </p></div></div> <!></div></div> <!> <div class="toolbar svelte-13kktq8"><div class="search-box svelte-13kktq8"><!> <input type="text" placeholder="Search members..." class="svelte-13kktq8"/></div> <div class="filter-group svelte-13kktq8"><!> <select class="svelte-13kktq8"><option>All Status</option><option>Active</option><option>Trial</option><option>Cancelled</option><option>Expired</option></select></div></div> <div class="members-table-container svelte-13kktq8"><!></div></div> <!>',1);function fa(Ye,Ke){Nt(Ke,!0);const We=()=>ze(Yt,"$page",ae),G=()=>ze(Z,"$serviceMembersStore",ae),et=()=>ze(Me,"$emailStore",ae),[ae,tt]=Ot();let J=R(()=>Number(We().params.id)),se=R(()=>G().service),P=R(()=>G().stats),I=R(()=>G().members),_=R(()=>G().pagination),at=R(()=>G().loading),Y=L(""),O=L(""),v=L(Pt(new Set)),C=L(!1),V=L(""),X=L("");It(async()=>{await Z.loadServiceMembers(e(J)),await Me.loadTemplates()});async function st(){await Z.loadServiceMembers(e(J),{search:e(Y),status:e(O)})}async function lt(s){n(O,s,!0),await Z.loadServiceMembers(e(J),{search:e(Y),status:s})}function vt(s){e(v).has(s)?e(v).delete(s):e(v).add(s),n(v,e(v),!0)}function rt(){e(v).size===e(I).length?e(v).clear():e(I).forEach(s=>e(v).add(s.id)),n(v,e(v),!0)}async function it(){if(e(v).size!==0)try{const s=await Me.sendBulkEmail({member_ids:Array.from(e(v)),subject:e(V),body:e(X),personalize:!0});alert(s.message),n(C,!1),e(v).clear(),n(v,e(v),!0)}catch{alert("Failed to send emails")}}function dt(s){n(V,s.subject,!0),n(X,s.body||"",!0)}function ot(s){switch(s){case"active":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"trial":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"churned":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}}function $e(s){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}function nt(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function ct(s){return s.first_name&&s.last_name?`${s.first_name[0]}${s.last_name[0]}`.toUpperCase():s.name?.slice(0,2).toUpperCase()||"U"}var we=qa();Ht("13kktq8",s=>{Vt(()=>{Xt.title=`${(e(se)?.name||"Service")??""} Members | Revolution Trading Pros`})});var le=ye(we),ve=a(le),K=a(ve);K.__click=()=>Re("/admin/members");var kt=a(K);Lt(kt,{size:20}),E(),t(K);var Ee=l(K,2),re=a(Ee),ie=a(re),_t=a(ie);Qt(_t,{size:28}),t(ie);var Ce=l(ie,2),de=a(Ce),ut=a(de,!0);t(de);var Ae=l(de,2),bt=a(Ae,!0);t(Ae),t(Ce),t(re);var pt=l(re,2);{var mt=s=>{var d=oa();d.__click=()=>n(C,!0);var u=a(d);Ze(u,{size:18});var m=l(u);t(d),U(()=>o(m,` Email (${e(v).size??""})`)),y(s,d)};Q(pt,s=>{e(v).size>0&&s(mt)})}t(Ee),t(ve);var je=l(ve,2);{var qt=s=>{var d=na(),u=a(d),m=a(u),D=a(m);Ge(D,{size:24}),t(m);var q=l(m,2),b=a(q,!0);t(q),E(2),t(u);var h=l(u,2),g=a(h),A=a(g);Kt(A,{size:24}),t(g);var j=l(g,2),M=a(j,!0);t(j),E(2),t(h);var $=l(h,2),F=a($),H=a(F);Wt(H,{size:24}),t(F);var f=l(F,2),r=a(f,!0);t(f),E(2),t($);var c=l($,2),S=a(c),i=a(S);ea(i,{size:24}),t(S);var k=l(S,2),p=a(k,!0);t(k),E(2),t(c);var x=l(c,2),w=a(x),T=a(w);ta(T,{size:24}),t(w);var B=l(w,2),N=a(B,!0);t(B),E(2),t(x),t(d),U(pe=>{o(b,e(P).total_members),o(M,e(P).active_members),o(r,e(P).trial_members),o(p,e(P).churned_members),o(N,pe)},[()=>$e(e(P).total_revenue)]),y(s,d)};Q(je,s=>{e(P)&&s(qt)})}var oe=l(je,2),ne=a(oe),Fe=a(ne);Rt(Fe,{size:18});var ce=l(Fe,2);te(ce),ce.__keydown=s=>s.key==="Enter"&&st(),t(ne);var Te=l(ne,2),Ue=a(Te);Zt(Ue,{size:16});var W=l(Ue,2);W.__change=()=>lt(e(O));var ke=a(W);ke.value=ke.__value="";var _e=l(ke);_e.value=_e.__value="active";var ue=l(_e);ue.value=ue.__value="trial";var be=l(ue);be.value=be.__value="cancelled";var De=l(be);De.value=De.__value="expired",t(W),t(Te),t(oe);var Be=l(oe,2),ht=a(Be);{var gt=s=>{var d=ca();y(s,d)},ft=s=>{var d=aa(),u=ye(d);{var m=q=>{var b=ka(),h=a(b);Ge(h,{size:64,stroke:1}),E(4),t(b),y(q,b)},D=q=>{var b=ba(),h=ye(b),g=a(h),A=a(g),j=a(A),M=a(j);te(M),M.__change=rt,t(j),E(6),t(A),t(g);var $=l(g);Je($,21,()=>e(I),Oe,(f,r)=>{var c=_a();let S;var i=a(c),k=a(i);te(k),k.__change=()=>vt(e(r).id),t(i);var p=l(i),x=a(p),w=a(x),T=a(w,!0);t(w);var B=l(w,2),N=a(B),pe=a(N,!0);t(N);var Ne=l(N,2),St=a(Ne,!0);t(Ne),t(B),t(x),t(p);var me=l(p),qe=a(me),zt=a(qe,!0);t(qe),t(me);var he=l(me),Pe=a(he),Mt=a(Pe,!0);t(Pe),t(he);var ge=l(he),Ie=a(ge),$t=a(Ie,!0);t(Ie),t(ge);var fe=l(ge),He=a(fe),wt=a(He,!0);t(He),t(fe);var Le=l(fe),Qe=a(Le),ee=a(Qe);ee.__click=()=>Re(`/admin/members/${e(r).id}`);var Et=a(ee);ra(Et,{size:16}),t(ee);var xe=l(ee,2);xe.__click=()=>{e(v).clear(),e(v).add(e(r).id),n(v,e(v),!0),n(C,!0)};var Ct=a(xe);Ze(Ct,{size:16}),t(xe),t(Qe),t(Le),t(c),U((At,jt,Ft,Tt,Ut,Dt)=>{S=Ve(c,1,"svelte-13kktq8",null,S,At),Xe(k,jt),o(T,Ft),o(pe,e(r).name),o(St,e(r).email),Ve(qe,1,`status-badge ${Tt??""}`,"svelte-13kktq8"),o(zt,e(r).status_label),o(Mt,e(r).current_plan||"-"),o($t,Ut),o(wt,Dt)},[()=>({selected:e(v).has(e(r).id)}),()=>e(v).has(e(r).id),()=>ct(e(r)),()=>ot(e(r).status),()=>$e(e(r).total_spent),()=>nt(e(r).joined_at)]),y(f,c)}),t($),t(h);var F=l(h,2);{var H=f=>{var r=ua(),c=a(r),S=a(c);t(c);var i=l(c,2),k=a(i);k.__click=()=>Z.loadServiceMembers(e(J),{page:e(_).current_page-1});var p=a(k);ia(p,{size:18}),t(k);var x=l(k,2),w=a(x);t(x);var T=l(x,2);T.__click=()=>Z.loadServiceMembers(e(J),{page:e(_).current_page+1});var B=a(T);da(B,{size:18}),t(T),t(i),t(r),U(N=>{o(S,`Showing ${(e(_).current_page-1)*e(_).per_page+1} to ${N??""} of ${e(_).total??""}`),k.disabled=e(_).current_page===1,o(w,`Page ${e(_).current_page??""} of ${e(_).last_page??""}`),T.disabled=e(_).current_page===e(_).last_page},[()=>Math.min(e(_).current_page*e(_).per_page,e(_).total)]),y(f,r)};Q(F,f=>{e(_)&&f(H)})}U(()=>Xe(M,e(v).size===e(I).length&&e(I).length>0)),y(q,b)};Q(u,q=>{e(I).length===0?q(m):q(D,!1)},!0)}y(s,d)};Q(ht,s=>{e(at)?s(gt):s(ft,!1)})}t(Be),t(le);var xt=l(le,2);{var yt=s=>{var d=ma();d.__click=()=>n(C,!1),d.__keydown=i=>i.key==="Escape"&&n(C,!1);var u=a(d);u.__click=i=>i.stopPropagation(),u.__keydown=i=>i.stopPropagation();var m=a(u),D=a(m),q=a(D);t(D);var b=l(D,2);b.__click=()=>n(C,!1);var h=a(b);sa(h,{size:20}),t(b),t(m);var g=l(m,2),A=a(g),j=l(a(A),2);Je(j,5,()=>et().presetTemplates,Oe,(i,k)=>{var p=pa();p.__click=()=>dt(e(k));var x=a(p,!0);t(p),U(()=>o(x,e(k).name)),y(i,p)}),t(j),t(A);var M=l(A,2),$=l(a(M),2);te($),t(M);var F=l(M,2),H=l(a(F),2);la(H),t(F),t(g);var f=l(g,2),r=a(f);r.__click=()=>n(C,!1);var c=l(r,2);c.__click=it;var S=a(c);va(S,{size:18}),E(),t(c),t(f),t(u),t(d),U(()=>{o(q,`Send Email to ${e(v).size??""} Member${e(v).size>1?"s":""}`),c.disabled=!e(V)||!e(X)}),Se($,()=>e(V),i=>n(V,i)),Se(H,()=>e(X),i=>n(X,i)),y(s,d)};Q(xt,s=>{e(C)&&s(yt)})}U(()=>{o(ut,e(se)?.name||"Loading..."),o(bt,e(se)?.type||"")}),Se(ce,()=>e(Y),s=>n(Y,s)),Gt(W,()=>e(O),s=>n(O,s)),y(Ye,we),Jt(),tt()}Bt(["click","keydown","change"]);export{fa as component};
