import{z as $e,p as Ce,s as F,A as Fe,o as Me,f as c,a9 as ze,q as e,aM as Ae,i as _,h as o,j as Re,E as je,F as Ee,aN as Se,e as s,c as h,g as a,n as Be,at as Le,H as Ft,r as t,B as Te,aa as Ie,k as Mt,d as zt,w as u,x as i,ax as Ne,M as Pe,aQ as De,K as At,da as He,N as Qe,Q as Ve}from"../chunks/C_QN0JMx.js";import{c as Rt}from"../chunks/L2eW2QSs.js";var qe=c('<div class="flex h-64 items-center justify-center text-slate-400">Loading contact…</div>'),Ke=c('<div class="rounded-xl border border-rose-700/60 bg-rose-950/40 px-4 py-3 text-sm text-rose-200"> </div>'),Oe=c('<span class="rounded-full bg-emerald-500/10 px-2 py-1 text-emerald-300"> </span>'),Ue=c('<div class="flex items-center gap-2"><!> <a class="hover:underline"> </a></div>'),Ge=c('<p class="py-8 text-center text-xs text-slate-500">No timeline events yet.</p>'),Je=c('<p class="mt-1 text-[11px] text-slate-300"> </p>'),We=c('<p class="mt-1 text-[11px] text-slate-500"> </p>'),Xe=c('<li class="flex gap-3"><div class="mt-1 h-2 w-2 flex-shrink-0 rounded-full bg-sky-400"></div> <div class="flex-1 border-l border-slate-800 pl-3"><div class="flex items-center justify-between gap-2"><p class="text-[13px] font-medium text-slate-100"> </p> <span class="text-[11px] text-slate-500"> </span></div> <!> <!></div></li>'),Ye=c('<ol class="space-y-3 text-xs"></ol>'),Ze=c('<div class="grid gap-6 md:grid-cols-[minmax(0,2fr)_minmax(0,1.5fr)]"><div class="space-y-4"><div class="rounded-2xl border border-slate-800/80 bg-slate-900/70 p-5"><div class="flex items-start gap-4"><div class="flex h-14 w-14 items-center justify-center rounded-full bg-slate-800/80"><!></div> <div class="flex-1"><h1 class="text-xl font-semibold leading-tight"> </h1> <p class="text-xs text-slate-400"> </p> <div class="mt-2 flex flex-wrap items-center gap-3 text-xs text-slate-300"><span class="rounded-full bg-slate-800/80 px-2 py-1"> </span> <span class="rounded-full bg-slate-800/80 px-2 py-1"> </span> <!></div></div></div> <div class="mt-4 grid gap-3 text-xs text-slate-300 md:grid-cols-2"><div class="flex items-center gap-2"><!> <a class="hover:underline"> </a></div> <!></div> <div class="mt-4 grid gap-3 text-xs text-slate-400 md:grid-cols-3"><div><p class="text-[11px] uppercase tracking-wide text-slate-500">Lead Score</p> <p class="mt-1 text-lg font-semibold text-slate-50"> </p></div> <div><p class="text-[11px] uppercase tracking-wide text-slate-500">Health</p> <p class="mt-1 text-lg font-semibold text-slate-50"> </p></div> <div><p class="text-[11px] uppercase tracking-wide text-slate-500">Engagement</p> <p class="mt-1 text-lg font-semibold text-slate-50"> </p></div></div></div> <div class="rounded-2xl border border-slate-800/80 bg-slate-900/70 p-5"><div class="mb-3 flex items-center gap-2 text-sm font-medium text-slate-100"><!> Activity Timeline</div> <!></div></div> <div class="space-y-4"><div class="rounded-2xl border border-slate-800/80 bg-slate-900/70 p-4 text-xs"><p class="text-[11px] uppercase tracking-wide text-slate-500">Email Engagement</p> <div class="mt-3 grid grid-cols-2 gap-3"><div><p class="text-[11px] text-slate-400">Opens</p> <p class="text-lg font-semibold text-slate-50"> </p></div> <div><p class="text-[11px] text-slate-400">Clicks</p> <p class="text-lg font-semibold text-slate-50"> </p></div></div></div> <div class="rounded-2xl border border-slate-800/80 bg-slate-900/70 p-4 text-xs"><p class="text-[11px] uppercase tracking-wide text-slate-500">Behavior Signals</p> <div class="mt-3 space-y-2 text-[11px] text-slate-300"><p> </p> <p> </p> <p> </p> <p> </p></div></div> <div class="rounded-2xl border border-slate-800/80 bg-slate-900/70 p-4 text-xs"><p class="text-[11px] uppercase tracking-wide text-slate-500">Value & Revenue</p> <div class="mt-3 space-y-2 text-[11px] text-slate-300"><p> </p> <p> </p> <p> </p></div></div></div></div>'),ta=c('<div class="flex h-64 items-center justify-center text-slate-400">Contact not found.</div>'),ea=c('<div class="min-h-screen bg-slate-950/95 text-slate-50"><div class="mx-auto max-w-6xl px-6 py-6"><button class="mb-4 inline-flex items-center gap-2 text-xs text-slate-400 hover:text-slate-200"><!> Back to contacts</button> <!></div></div>');function ra(jt,Et){Ce(Et,!0);const St=()=>Te(Ie,"$page",Bt),[Bt,Lt]=je();let r=F(null),M=F(Fe([])),z=F(!0),w=F(null),at=Be(()=>St().params.id);Me(async()=>{await Tt()});async function Tt(){h(z,!0),h(w,null);try{h(r,await Rt.getContact(a(at)),!0),h(M,await Rt.getContactTimeline(a(at)),!0)}catch{h(w,"Failed to load contact. Please try again.")}finally{h(z,!1)}}function It(){Ee("/crm/contacts")}var A=ea();ze("1gzvxh1",n=>{Se(()=>{Le.title=a(r)?`${a(r).full_name} | CRM Contact`:"Contact | CRM"})});var st=e(A),$=e(st);$.__click=It;var Nt=e($);Ae(Nt,{size:16}),Ft(),t($);var Pt=s($,2);{var Dt=n=>{var C=qe();o(n,C)},Ht=n=>{var C=Mt(),Qt=zt(C);{var Vt=g=>{var f=Ke(),R=e(f,!0);t(f),u(()=>i(R,a(w))),o(g,f)},qt=g=>{var f=Mt(),R=zt(f);{var Kt=b=>{var y=Ze(),j=e(y),E=e(j),S=e(E),B=e(S),Ut=e(B);Ne(Ut,{size:32,class:"text-indigo-300"}),t(B);var rt=s(B,2),L=e(rt),Gt=e(L,!0);t(L);var T=s(L,2),Jt=e(T,!0);t(T);var it=s(T,2),I=e(it),Wt=e(I,!0);t(I);var N=s(I,2),Xt=e(N,!0);t(N);var Yt=s(N,2);{var Zt=l=>{var v=Oe(),x=e(v);t(v),u(d=>i(x,`${a(r).subscription_status??""} · $${d??""} MRR`),[()=>a(r).subscription_mrr.toFixed(0)]),o(l,v)};_(Yt,l=>{a(r).subscription_status!=="none"&&l(Zt)})}t(it),t(rt),t(S);var P=s(S,2),D=e(P),lt=e(D);Pe(lt,{size:14,class:"text-slate-400"});var H=s(lt,2),te=e(H,!0);t(H),t(D);var ee=s(D,2);{var ae=l=>{var v=Ue(),x=e(v);He(x,{size:14,class:"text-slate-400"});var d=s(x,2),k=e(d,!0);t(d),t(v),u(()=>{At(d,"href",`tel:${a(r).phone}`),i(k,a(r).phone)}),o(l,v)};_(ee,l=>{a(r).phone&&l(ae)})}t(P);var vt=s(P,2),Q=e(vt),dt=s(e(Q),2),se=e(dt,!0);t(dt),t(Q);var V=s(Q,2),ot=s(e(V),2),re=e(ot,!0);t(ot),t(V);var ct=s(V,2),pt=s(e(ct),2),ie=e(pt,!0);t(pt),t(ct),t(vt),t(E);var nt=s(E,2),q=e(nt),le=e(q);De(le,{size:18,class:"text-sky-400"}),Ft(),t(q);var ve=s(q,2);{var de=l=>{var v=Ge();o(l,v)},oe=l=>{var v=Ye();Qe(v,21,()=>a(M),Ve,(x,d)=>{var k=Xe(),wt=s(e(k),2),Z=e(wt),tt=e(Z),be=e(tt,!0);t(tt);var $t=s(tt,2),he=e($t,!0);t($t),t(Z);var Ct=s(Z,2);{var ye=p=>{var m=Je(),et=e(m,!0);t(m),u(()=>i(et,a(d).description)),o(p,m)};_(Ct,p=>{a(d).description&&p(ye)})}var ke=s(Ct,2);{var we=p=>{var m=We(),et=e(m);t(m),u(()=>i(et,`by ${a(d).created_by.name??""}`)),o(p,m)};_(ke,p=>{a(d).created_by&&p(we)})}t(wt),t(k),u(p=>{i(be,a(d).title),i(he,p)},[()=>new Date(a(d).occurred_at).toLocaleString()]),o(x,k)}),t(v),o(l,v)};_(ve,l=>{a(M).length?l(oe,!1):l(de)})}t(nt),t(j);var xt=s(j,2),K=e(xt),_t=s(e(K),2),O=e(_t),mt=s(e(O),2),ce=e(mt,!0);t(mt),t(O);var ut=s(O,2),gt=s(e(ut),2),pe=e(gt,!0);t(gt),t(ut),t(_t),t(K);var U=s(K,2),ft=s(e(U),2),G=e(ft),ne=e(G);t(G);var J=s(G,2),xe=e(J);t(J);var W=s(J,2),_e=e(W);t(W);var bt=s(W,2),me=e(bt);t(bt),t(ft),t(U);var ht=s(U,2),yt=s(e(ht),2),X=e(yt),ue=e(X);t(X);var Y=s(X,2),ge=e(Y);t(Y);var kt=s(Y,2),fe=e(kt);t(kt),t(yt),t(ht),t(xt),t(y),u((l,v,x,d)=>{i(Gt,a(r).full_name),i(Jt,a(r).job_title),i(Wt,a(r).status),i(Xt,a(r).lifecycle_stage),At(H,"href",`mailto:${a(r).email}`),i(te,a(r).email),i(se,a(r).lead_score),i(re,a(r).health_score),i(ie,a(r).engagement_score),i(ce,a(r).email_opens),i(pe,a(r).email_clicks),i(ne,`Avg Engagement Score: ${l??""}`),i(xe,`Avg Intent Score: ${v??""}`),i(_e,`Friction Events: ${a(r).friction_events_count??""}`),i(me,`Total Sessions: ${a(r).total_sessions??""}`),i(ue,`MRR: $${x??""}`),i(ge,`LTV: $${d??""}`),i(fe,`Deals: ${a(r).deals_count??""}`)},[()=>a(r).avg_engagement_score.toFixed(1),()=>a(r).avg_intent_score.toFixed(1),()=>a(r).subscription_mrr.toFixed(0),()=>a(r).lifetime_value.toFixed(0)]),o(b,y)},Ot=b=>{var y=ta();o(b,y)};_(R,b=>{a(r)?b(Kt):b(Ot,!1)},!0)}o(g,f)};_(Qt,g=>{a(w)?g(Vt):g(qt,!1)},!0)}o(n,C)};_(Pt,n=>{a(z)&&!a(r)?n(Dt):n(Ht,!1)})}t(st),t(A),o(jt,A),Re(),Lt()}$e(["click"]);export{ra as component};
