import{z as wt,p as kt,dy as Ct,o as Vt,C as Tt,f as c,a9 as Rt,aI as Ps,i as n,e as t,bN as Ee,R as Ut,w as b,af as _e,h as v,j as Pt,E as Ht,c as $,s as fe,g as a,as as At,q as s,aT as Dt,at as It,r as e,H as K,B as ts,O as se,x as o,ah as Me,aq as Et,d7 as Mt,P as rs,bq as Hs,d as re,N as ia,l as la,n as ca,Q as na,dh as As,bf as vs,be as is,aK as Le,_ as ue,ai as Lt,v as Ne,k as pe,d6 as da,dL as oa,aj as ba,b3 as ls,dN as Nt,F as _a,aZ as cs,bA as qt,K as Ft,b1 as Ot,c4 as ua,b8 as jt,dO as Wt,al as Ds,Z as $t,S as Bt,bE as Kt,dP as Qt}from"../chunks/C_QN0JMx.js";import{getAuthToken as pa}from"../chunks/D3S43Cfl.js";import{c as Is,g as Yt,s as Zt,o as Gt}from"../chunks/KfBlM_pv.js";import{a as ge}from"../chunks/ByEkyPua.js";var Xt=c('<div class="error-indicator svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz"> </span></div>'),Jt=c('<div class="loading-state svelte-1cb9ebz"><div class="loading-spinner svelte-1cb9ebz"></div> <p class="svelte-1cb9ebz">Checking site health...</p></div>'),er=c('<div class="stat-item good svelte-1cb9ebz"><!> <span class="stat-value svelte-1cb9ebz"> </span> <span class="stat-label svelte-1cb9ebz">Passed</span></div> <div class="stat-item warning svelte-1cb9ebz"><!> <span class="stat-value svelte-1cb9ebz"> </span> <span class="stat-label svelte-1cb9ebz">Warnings</span></div> <div class="stat-item critical svelte-1cb9ebz"><!> <span class="stat-value svelte-1cb9ebz"> </span> <span class="stat-label svelte-1cb9ebz">Critical</span></div>',1),sr=c('<div class="stat-item unknown svelte-1cb9ebz"><!> <span class="stat-value svelte-1cb9ebz">â€”</span> <span class="stat-label svelte-1cb9ebz">No data</span></div>'),ar=c('<button><!> <span class="svelte-1cb9ebz"> </span></button>'),tr=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Response Time</span> <span class="metric-value svelte-1cb9ebz"> </span></div>'),rr=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Memory Usage</span> <span class="metric-value svelte-1cb9ebz"> </span></div>'),vr=c('<p class="no-data svelte-1cb9ebz">Run tests to see performance metrics</p>'),ir=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">SSL Certificate</span> <span> </span></div>'),lr=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Vulnerabilities</span> <span> </span></div>'),cr=c('<p class="no-data svelte-1cb9ebz">Run tests to check security status</p>'),nr=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Status</span> <span> </span></div>'),dr=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Database Size</span> <span class="metric-value svelte-1cb9ebz"> </span></div>'),or=c('<p class="no-data svelte-1cb9ebz">Run tests to check database health</p>'),br=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">PHP Version</span> <span class="metric-value svelte-1cb9ebz"> </span></div>'),_r=c('<div class="metric svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Web Server</span> <span class="metric-value svelte-1cb9ebz"> </span></div>'),ur=c('<p class="no-data svelte-1cb9ebz">Run tests to see server info</p>'),pr=c('<button class="api-health-action error svelte-1cb9ebz">View Issues</button>'),zr=c('<span class="api-health-status svelte-1cb9ebz">All connections healthy</span>'),mr=c('<a class="check-action svelte-1cb9ebz"> <!></a>'),hr=c('<button class="check-action svelte-1cb9ebz"> </button>'),fr=c('<div><div class="check-icon svelte-1cb9ebz"><!></div> <div class="check-info svelte-1cb9ebz"><h4 class="svelte-1cb9ebz"> </h4> <p class="svelte-1cb9ebz"> </p></div> <!></div>'),gr=c('<div class="checks-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">All Health Checks</h3> <div class="checks-list svelte-1cb9ebz"></div></div>'),yr=c('<div class="overview-grid svelte-1cb9ebz"><div class="overview-card performance svelte-1cb9ebz"><div class="card-header svelte-1cb9ebz"><div class="card-icon svelte-1cb9ebz"><!></div> <div class="card-title svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Performance</h3> <p class="svelte-1cb9ebz">Response times and resource usage</p></div></div> <div class="card-metrics svelte-1cb9ebz"><!> <!> <!></div> <button class="card-action svelte-1cb9ebz"><span class="svelte-1cb9ebz">View Details</span> <!></button></div> <div class="overview-card security svelte-1cb9ebz"><div class="card-header svelte-1cb9ebz"><div class="card-icon svelte-1cb9ebz"><!></div> <div class="card-title svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Security</h3> <p class="svelte-1cb9ebz">SSL, headers, and vulnerabilities</p></div></div> <div class="card-metrics svelte-1cb9ebz"><!> <!> <!></div> <button class="card-action svelte-1cb9ebz"><span class="svelte-1cb9ebz">View Details</span> <!></button></div> <div class="overview-card database svelte-1cb9ebz"><div class="card-header svelte-1cb9ebz"><div class="card-icon svelte-1cb9ebz"><!></div> <div class="card-title svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Database</h3> <p class="svelte-1cb9ebz">Connection and query performance</p></div></div> <div class="card-metrics svelte-1cb9ebz"><!> <!> <!></div> <button class="card-action svelte-1cb9ebz"><span class="svelte-1cb9ebz">View Details</span> <!></button></div> <div class="overview-card server svelte-1cb9ebz"><div class="card-header svelte-1cb9ebz"><div class="card-icon svelte-1cb9ebz"><!></div> <div class="card-title svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Server</h3> <p class="svelte-1cb9ebz">PHP, web server, and environment</p></div></div> <div class="card-metrics svelte-1cb9ebz"><!> <!> <!></div> <button class="card-action svelte-1cb9ebz"><span class="svelte-1cb9ebz">View Details</span> <!></button></div></div> <div class="api-health-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">API Connections Health</h3> <div class="api-health-grid svelte-1cb9ebz"><div class="api-health-card svelte-1cb9ebz"><div class="api-health-header svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Connected APIs</span></div> <div class="api-health-value svelte-1cb9ebz"> </div> <button class="api-health-action svelte-1cb9ebz">Manage Connections</button></div> <div><div class="api-health-header svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Connection Issues</span></div> <div class="api-health-value svelte-1cb9ebz"> </div> <!></div> <div class="api-health-card svelte-1cb9ebz"><div class="api-health-header svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Overall API Health</span></div> <div class="api-health-value svelte-1cb9ebz"> </div> <div class="api-health-bar svelte-1cb9ebz"><div class="api-health-progress svelte-1cb9ebz"></div></div></div></div></div> <!>',1),xr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Response Time</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Sr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Memory Usage</span> <span class="metric-value large svelte-1cb9ebz"> </span> <div class="metric-bar svelte-1cb9ebz"><div class="metric-progress svelte-1cb9ebz"></div></div></div></div>'),wr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">CPU Usage</span> <span class="metric-value large svelte-1cb9ebz"> </span> <div class="metric-bar svelte-1cb9ebz"><div class="metric-progress svelte-1cb9ebz"></div></div></div></div>'),kr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Disk Usage</span> <span class="metric-value large svelte-1cb9ebz"> </span> <div class="metric-bar svelte-1cb9ebz"><div class="metric-progress svelte-1cb9ebz"></div></div></div></div>'),Cr=c('<div class="metrics-grid svelte-1cb9ebz"><!> <!> <!> <!></div>'),Vr=c('<div class="empty-state svelte-1cb9ebz"><!> <h4 class="svelte-1cb9ebz">No Performance Data</h4> <p class="svelte-1cb9ebz">Run health tests to collect performance metrics</p> <button class="run-tests-btn svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Run Tests</span></button></div>'),Tr=c('<div class="detail-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Performance Metrics</h3> <!></div>'),Rr=c('<span class="metric-detail svelte-1cb9ebz"> </span>'),Ur=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Security Headers</span> <span class="metric-value large svelte-1cb9ebz"> </span> <div class="metric-bar svelte-1cb9ebz"><div class="metric-progress svelte-1cb9ebz"></div></div></div></div>'),Pr=c('<div class="metric-status good svelte-1cb9ebz"><!></div>'),Hr=c('<div class="metrics-grid svelte-1cb9ebz"><div><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">SSL Certificate</span> <span class="metric-value large svelte-1cb9ebz"> </span> <!></div> <div class="metric-status svelte-1cb9ebz"><!></div></div> <!> <div><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Vulnerabilities</span> <span> </span></div> <!></div></div>'),Ar=c('<div class="empty-state svelte-1cb9ebz"><!> <h4 class="svelte-1cb9ebz">No Security Data</h4> <p class="svelte-1cb9ebz">Run health tests to check security status</p> <button class="run-tests-btn svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Run Tests</span></button></div>'),Dr=c('<div class="detail-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Security Status</h3> <!></div>'),Ir=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Query Response</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Er=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Database Size</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Mr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Tables</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Lr=c('<div class="metrics-grid svelte-1cb9ebz"><div><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Connection Status</span> <span class="metric-value large svelte-1cb9ebz">Connected</span></div> <div class="metric-status good svelte-1cb9ebz"><!></div></div> <!> <!> <!></div>'),Nr=c('<div><!> <h4 class="svelte-1cb9ebz"> </h4> <p class="svelte-1cb9ebz"> </p> <button class="run-tests-btn svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Run Tests</span></button></div>'),qr=c('<div class="detail-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Database Health</h3> <!></div>'),Fr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">PHP Version</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Or=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Web Server</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),jr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Operating System</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),Wr=c('<div class="metric-card svelte-1cb9ebz"><div class="metric-icon svelte-1cb9ebz"><!></div> <div class="metric-content svelte-1cb9ebz"><span class="metric-label svelte-1cb9ebz">Uptime</span> <span class="metric-value large svelte-1cb9ebz"> </span></div></div>'),$r=c('<div class="metrics-grid svelte-1cb9ebz"><!> <!> <!> <!></div>'),Br=c('<div class="empty-state svelte-1cb9ebz"><!> <h4 class="svelte-1cb9ebz">No Server Data</h4> <p class="svelte-1cb9ebz">Run health tests to collect server information</p> <button class="run-tests-btn svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz">Run Tests</span></button></div>'),Kr=c('<div class="detail-section svelte-1cb9ebz"><h3 class="svelte-1cb9ebz">Server Information</h3> <!></div>'),Qr=c('<div class="last-updated svelte-1cb9ebz"><!> <span class="svelte-1cb9ebz"> </span></div>'),Yr=c('<div class="score-section svelte-1cb9ebz"><div class="score-card svelte-1cb9ebz"><div class="score-ring svelte-1cb9ebz"><svg viewBox="0 0 120 120" class="svelte-1cb9ebz"><circle class="ring-bg svelte-1cb9ebz" cx="60" cy="60" r="54"></circle><circle class="ring-progress svelte-1cb9ebz" cx="60" cy="60" r="54"></circle></svg> <div class="score-value svelte-1cb9ebz"><span class="score-number svelte-1cb9ebz"> </span> <span class="score-unit svelte-1cb9ebz">%</span></div></div> <div class="score-info svelte-1cb9ebz"><h2 class="score-label svelte-1cb9ebz"> </h2> <p class="score-description svelte-1cb9ebz"><!></p></div></div> <div class="quick-stats svelte-1cb9ebz"><!></div></div> <div class="tabs-section svelte-1cb9ebz"><div class="tabs svelte-1cb9ebz"></div></div> <div class="tab-content svelte-1cb9ebz"><!></div> <!>',1),Zr=c(`<div class="site-health-dashboard svelte-1cb9ebz"><div class="animated-bg svelte-1cb9ebz"><div class="blob blob-1 svelte-1cb9ebz"></div> <div class="blob blob-2 svelte-1cb9ebz"></div> <div class="blob blob-3 svelte-1cb9ebz"></div></div> <header class="dashboard-header svelte-1cb9ebz"><div class="header-content svelte-1cb9ebz"><div class="header-icon svelte-1cb9ebz"><!></div> <div class="header-text svelte-1cb9ebz"><h1 class="svelte-1cb9ebz">Site Health</h1> <p class="svelte-1cb9ebz">Monitor your site's performance, security, and overall health</p></div></div> <div class="header-actions svelte-1cb9ebz"><div class="connections-status svelte-1cb9ebz"><div><!> <span class="svelte-1cb9ebz"> </span></div> <!></div> <button class="action-btn run-tests svelte-1cb9ebz"><span><!></span> <span class="svelte-1cb9ebz"> </span></button> <button class="action-btn refresh svelte-1cb9ebz"><span><!></span></button></div></header> <!></div>`);function sv(za,ma){kt(ma,!0);const qe=()=>ts(Yt,"$connectedCount",Fe),Ce=()=>ts(Zt,"$servicesWithErrors",Fe),Ve=()=>ts(Re,"$scoreDisplay",Fe),ns=()=>ts(Gt,"$overallHealth",Fe),[Fe,ha]=Ht();let Es=fe(!0),Oe=fe(!1),ne=fe(!1),fa=fe(!1),r=fe(null),Te=fe(null),ve=fe("overview");const Re=Ct(0,{duration:1500,easing:Dt});Vt(async()=>{await Is.load(),Is.startAutoRefresh(),await Ms(),$(Es,!1),setTimeout(()=>{$(fa,!0)},100)}),Tt(()=>{Is.stopAutoRefresh()});async function Ms(){const i=pa();if(!i){ge.error("Authentication required");return}try{const E=await fetch("/api/admin/site-health",{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(E.ok){const ie=await E.json();$(r,Ls(ie),!0),$(Te,new Date,!0),Re.set(a(r).overallScore)}else $(r,Ns(),!0),$(Te,new Date,!0),Re.set(0)}catch{$(r,Ns(),!0),Re.set(0)}}function Ls(i){return{overallScore:i.overall_score??0,checks:(i.checks??[]).map(E=>({...E,lastChecked:E.lastChecked?new Date(E.lastChecked):null})),performance:{responseTime:i.performance?.response_time??null,memoryUsage:i.performance?.memory_usage??null,cpuUsage:i.performance?.cpu_usage??null,diskUsage:i.performance?.disk_usage??null},security:{sslValid:i.security?.ssl_valid??null,sslExpiry:i.security?.ssl_expiry?new Date(i.security.ssl_expiry):null,headersScore:i.security?.headers_score??null,vulnerabilities:i.security?.vulnerabilities??0},database:{connected:i.database?.connected??!1,responseTime:i.database?.response_time??null,size:i.database?.size??null,tables:i.database?.tables??null},server:{phpVersion:i.server?.php_version??null,webServer:i.server?.web_server??null,os:i.server?.os??null,uptime:i.server?.uptime??null}}}function Ns(){return{overallScore:0,checks:[],performance:{responseTime:null,memoryUsage:null,cpuUsage:null,diskUsage:null},security:{sslValid:null,sslExpiry:null,headersScore:null,vulnerabilities:0},database:{connected:!1,responseTime:null,size:null,tables:null},server:{phpVersion:null,webServer:null,os:null,uptime:null}}}async function Ue(){$(ne,!0),ge.info("Running site health tests...");const i=pa();if(!i){ge.error("Authentication required"),$(ne,!1);return}try{const E=await fetch("/api/admin/site-health/run-tests",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(E.ok){const ie=await E.json();$(r,Ls(ie),!0),$(Te,new Date,!0),Re.set(a(r).overallScore),ge.success("Health tests completed")}else ge.error("Failed to run health tests")}catch{ge.error("Failed to run health tests")}$(ne,!1)}async function ga(){$(Oe,!0);try{await Ms(),ge.success("Health data refreshed")}finally{$(Oe,!1)}}function je(i){return i>=90?"#10b981":i>=70?"#f59e0b":i>=50?"#f97316":"#ef4444"}function ya(i){return i>=90?"Excellent":i>=70?"Good":i>=50?"Needs Attention":"Critical"}function xa(i){switch(i){case"good":return da;case"warning":return rs;case"critical":return oa;default:return ba}}function Sa(i){switch(i){case"good":return"#10b981";case"warning":return"#f59e0b";case"critical":return"#ef4444";default:return"#64748b"}}function ds(i){return i<1e3?`${Math.round(i)}ms`:`${(i/1e3).toFixed(2)}s`}const wa=[{id:"overview",label:"Overview",icon:Ps},{id:"performance",label:"Performance",icon:As},{id:"security",label:"Security",icon:vs},{id:"database",label:"Database",icon:is},{id:"server",label:"Server",icon:Le}];var os=Zr();Rt("1cb9ebz",i=>{At(()=>{It.title="Site Health | Admin"})});var We=t(s(os),2),bs=s(We),qs=s(bs),ka=s(qs);Ps(ka,{size:32}),e(qs),K(2),e(bs);var Fs=t(bs,2),_s=s(Fs),$e=s(_s);let Os;var js=s($e);{var Ca=i=>{Et(i,{size:14})},Va=i=>{Mt(i,{size:14})};n(js,i=>{qe()>0?i(Ca):i(Va,!1)})}var Ws=t(js,2),Ta=s(Ws);e(Ws),e($e);var Ra=t($e,2);{var Ua=i=>{var E=Xt(),ie=s(E);rs(ie,{size:14});var ye=t(ie,2),xe=s(ye);e(ye),e(E),b(()=>o(xe,`${Ce().length??""} with issues`)),v(i,E)};n(Ra,i=>{Ce().length>0&&i(Ua)})}e(_s);var Pe=t(_s,2);Pe.__click=Ue;var Be=s(Pe);let $s;var Pa=s(Be);Ee(Pa,{size:18}),e(Be);var Bs=t(Be,2),Ha=s(Bs,!0);e(Bs),e(Pe);var Ke=t(Pe,2);Ke.__click=ga;var us=s(Ke);let Ks;var Aa=s(us);Ut(Aa,{size:18}),e(us),e(Ke),e(Fs),e(We);var Da=t(We,2);{var Ia=i=>{var E=Jt();_e(1,E,()=>Hs),v(i,E)},Ea=i=>{var E=Yr(),ie=re(E),ye=s(ie),xe=s(ye),ps=s(xe),Ma=t(s(ps));e(ps);var Qs=t(ps,2),Ys=s(Qs),La=s(Ys,!0);e(Ys),K(2),e(Qs),e(xe);var Zs=t(xe,2),Qe=s(Zs),Na=s(Qe,!0);e(Qe);var Gs=t(Qe,2),qa=s(Gs);{var Fa=S=>{var y=Ne("Your site is in great shape! All systems are functioning optimally.");v(S,y)},Oa=S=>{var y=pe(),N=re(y);{var M=H=>{var q=Ne("Your site is healthy with minor areas for improvement.");v(H,q)},G=H=>{var q=pe(),ee=re(q);{var ae=C=>{var U=Ne("Several issues need attention to improve site health.");v(C,U)},le=C=>{var U=pe(),Q=re(U);{var Y=V=>{var w=Ne("Critical issues detected. Immediate action recommended.");v(V,w)},A=V=>{var w=Ne("Run health tests to check your site's status.");v(V,w)};n(Q,V=>{a(r)&&a(r).overallScore>0?V(Y):V(A,!1)},!0)}v(C,U)};n(ee,C=>{a(r)&&a(r).overallScore>=50?C(ae):C(le,!1)},!0)}v(H,q)};n(N,H=>{a(r)&&a(r).overallScore>=70?H(M):H(G,!1)},!0)}v(S,y)};n(qa,S=>{a(r)&&a(r).overallScore>=90?S(Fa):S(Oa,!1)})}e(Gs),e(Zs),e(ye);var Xs=t(ye,2),ja=s(Xs);{var Wa=S=>{var y=er(),N=re(y),M=s(N);da(M,{size:20});var G=t(M,2),H=s(G,!0);e(G),K(2),e(N);var q=t(N,2),ee=s(q);rs(ee,{size:20});var ae=t(ee,2),le=s(ae,!0);e(ae),K(2),e(q);var C=t(q,2),U=s(C);oa(U,{size:20});var Q=t(U,2),Y=s(Q,!0);e(Q),K(2),e(C),b((A,V,w)=>{o(H,A),o(le,V),o(Y,w)},[()=>a(r).checks.filter(A=>A.status==="good").length,()=>a(r).checks.filter(A=>A.status==="warning").length,()=>a(r).checks.filter(A=>A.status==="critical").length]),v(S,y)},$a=S=>{var y=sr(),N=s(y);ba(N,{size:20}),K(4),e(y),v(S,y)};n(ja,S=>{a(r)?S(Wa):S($a,!1)})}e(Xs),e(ie);var Ye=t(ie,2),Js=s(Ye);ia(Js,21,()=>wa,na,(S,y)=>{const N=ca(()=>a(y).icon);var M=ar();let G;M.__click=()=>$(ve,a(y).id,!0);var H=s(M);la(H,()=>a(N),(ae,le)=>{le(ae,{size:18})});var q=t(H,2),ee=s(q,!0);e(q),e(M),b(()=>{G=se(M,1,"tab svelte-1cb9ebz",null,G,{active:a(ve)===a(y).id}),o(ee,a(y).label)}),v(S,M)}),e(Js),e(Ye);var Ze=t(Ye,2),Ba=s(Ze);{var Ka=S=>{var y=yr(),N=re(y),M=s(N),G=s(M),H=s(G),q=s(H);As(q,{size:24}),e(H),K(2),e(G);var ee=t(G,2),ae=s(ee);{var le=l=>{var d=tr(),x=t(s(d),2),O=s(x,!0);e(x),e(d),b(I=>o(O,I),[()=>ds(a(r).performance.responseTime)]),v(l,d)};n(ae,l=>{a(r)?.performance.responseTime!==null&&l(le)})}var C=t(ae,2);{var U=l=>{var d=rr(),x=t(s(d),2),O=s(x);e(x),e(d),b(()=>o(O,`${a(r).performance.memoryUsage??""}%`)),v(l,d)};n(C,l=>{a(r)?.performance.memoryUsage!==null&&l(U)})}var Q=t(C,2);{var Y=l=>{var d=vr();v(l,d)};n(Q,l=>{a(r)?.performance.responseTime===null&&a(r)?.performance.memoryUsage===null&&l(Y)})}e(ee);var A=t(ee,2);A.__click=()=>$(ve,"performance");var V=t(s(A),2);ls(V,{size:16}),e(A),e(M);var w=t(M,2),B=s(w),Z=s(B),X=s(Z);vs(X,{size:24}),e(Z),K(2),e(B);var z=t(B,2),p=s(z);{var m=l=>{var d=ir(),x=t(s(d),2);let O;var I=s(x,!0);e(x),e(d),b(()=>{O=se(x,1,"metric-value svelte-1cb9ebz",null,O,{good:a(r).security.sslValid,bad:!a(r).security.sslValid}),o(I,a(r).security.sslValid?"Valid":"Invalid")}),v(l,d)};n(p,l=>{a(r)?.security.sslValid!==null&&l(m)})}var F=t(p,2);{var f=l=>{var d=lr(),x=t(s(d),2);let O;var I=s(x,!0);e(x),e(d),b(()=>{O=se(x,1,"metric-value svelte-1cb9ebz",null,O,{good:a(r).security.vulnerabilities===0,bad:a(r).security.vulnerabilities>0}),o(I,a(r).security.vulnerabilities)}),v(l,d)};n(F,l=>{a(r)?.security.vulnerabilities!==void 0&&l(f)})}var g=t(F,2);{var T=l=>{var d=cr();v(l,d)};n(g,l=>{a(r)?.security.sslValid===null&&l(T)})}e(z);var k=t(z,2);k.__click=()=>$(ve,"security");var D=t(s(k),2);ls(D,{size:16}),e(k),e(w);var ce=t(w,2),te=s(ce),ze=s(te),be=s(ze);is(be,{size:24}),e(ze),K(2),e(te);var de=t(te,2),_=s(de);{var h=l=>{var d=nr(),x=t(s(d),2);let O;var I=s(x,!0);e(x),e(d),b(()=>{O=se(x,1,"metric-value svelte-1cb9ebz",null,O,{good:a(r).database.connected,bad:!a(r).database.connected}),o(I,a(r).database.connected?"Connected":"Disconnected")}),v(l,d)};n(_,l=>{a(r)?.database.connected!==void 0&&l(h)})}var u=t(_,2);{var j=l=>{var d=dr(),x=t(s(d),2),O=s(x,!0);e(x),e(d),b(()=>o(O,a(r).database.size)),v(l,d)};n(u,l=>{a(r)?.database.size&&l(j)})}var R=t(u,2);{var P=l=>{var d=or();v(l,d)};n(R,l=>{!a(r)?.database.connected&&a(r)?.database.size===null&&l(P)})}e(de);var W=t(de,2);W.__click=()=>$(ve,"database");var He=t(s(W),2);ls(He,{size:16}),e(W),e(ce);var L=t(ce,2),J=s(L),oe=s(J),Ae=s(oe);Le(Ae,{size:24}),e(oe),K(2),e(J);var Se=t(J,2),we=s(Se);{var zs=l=>{var d=br(),x=t(s(d),2),O=s(x,!0);e(x),e(d),b(()=>o(O,a(r).server.phpVersion)),v(l,d)};n(we,l=>{a(r)?.server.phpVersion&&l(zs)})}var De=t(we,2);{var ms=l=>{var d=_r(),x=t(s(d),2),O=s(x,!0);e(x),e(d),b(()=>o(O,a(r).server.webServer)),v(l,d)};n(De,l=>{a(r)?.server.webServer&&l(ms)})}var hs=t(De,2);{var Ga=l=>{var d=ur();v(l,d)};n(hs,l=>{!a(r)?.server.phpVersion&&!a(r)?.server.webServer&&l(Ga)})}e(Se);var fs=t(Se,2);fs.__click=()=>$(ve,"server");var Xa=t(s(fs),2);ls(Xa,{size:16}),e(fs),e(L),e(N);var Ge=t(N,2),ea=t(s(Ge),2),gs=s(ea),ys=s(gs),Ja=s(ys);Nt(Ja,{size:20}),K(2),e(ys);var xs=t(ys,2),et=s(xs,!0);e(xs);var st=t(xs,2);st.__click=()=>_a("/admin/connections"),e(gs);var Xe=t(gs,2);let sa;var Ss=s(Xe),at=s(Ss);rs(at,{size:20}),K(2),e(Ss);var ws=t(Ss,2),tt=s(ws,!0);e(ws);var rt=t(ws,2);{var vt=l=>{var d=pr();d.__click=()=>_a("/admin/connections"),v(l,d)},it=l=>{var d=zr();v(l,d)};n(rt,l=>{Ce().length>0?l(vt):l(it,!1)})}e(Xe);var aa=t(Xe,2),ks=s(aa),lt=s(ks);Ps(lt,{size:20}),K(2),e(ks);var Cs=t(ks,2),ct=s(Cs);e(Cs);var ta=t(Cs,2),nt=s(ta);e(ta),e(aa),e(ea),e(Ge);var dt=t(Ge,2);{var ot=l=>{var d=gr(),x=t(s(d),2);ia(x,21,()=>a(r).checks,na,(O,I,bt)=>{const _t=ca(()=>xa(a(I).status));var Ie=fr();let ra;var Je=s(Ie),ut=s(Je);la(ut,()=>a(_t),(me,es)=>{es(me,{size:20})}),e(Je);var Vs=t(Je,2),Ts=s(Vs),pt=s(Ts,!0);e(Ts);var va=t(Ts,2),zt=s(va,!0);e(va),e(Vs);var mt=t(Vs,2);{var ht=me=>{var es=pe(),ft=re(es);{var gt=ke=>{var he=mr(),ss=s(he),Rs=t(ss);qt(Rs,{size:14}),e(he),b(()=>{Ft(he,"href",a(I).action.href),o(ss,`${a(I).action.label??""} `)}),v(ke,he)},yt=ke=>{var he=pe(),ss=re(he);{var Rs=Us=>{var as=hr();as.__click=function(...St){a(I).action.onClick?.apply(this,St)};var xt=s(as,!0);e(as),b(()=>o(xt,a(I).action.label)),v(Us,as)};n(ss,Us=>{a(I).action.onClick&&Us(Rs)},!0)}v(ke,he)};n(ft,ke=>{a(I).action.href?ke(gt):ke(yt,!1)})}v(me,es)};n(mt,me=>{a(I).action&&me(ht)})}e(Ie),b(me=>{ra=se(Ie,1,"check-item svelte-1cb9ebz",null,ra,{good:a(I).status==="good",warning:a(I).status==="warning",critical:a(I).status==="critical"}),ue(Je,`color: ${me??""}`),o(pt,a(I).name),o(zt,a(I).message)},[()=>Sa(a(I).status)]),_e(1,Ie,()=>Me,()=>({y:10,duration:300,delay:50*bt})),v(O,Ie)}),e(x),e(d),_e(1,d,()=>Me,()=>({y:20,duration:500,delay:400})),v(l,d)};n(dt,l=>{a(r)&&a(r).checks.length>0&&l(ot)})}b(l=>{o(et,qe()),sa=se(Xe,1,"api-health-card svelte-1cb9ebz",null,sa,{"has-errors":Ce().length>0}),o(tt,Ce().length),o(ct,`${ns()??""}%`),ue(nt,`width: ${ns()??""}%; background: ${l??""}`)},[()=>je(ns())]),_e(1,Ge,()=>Me,()=>({y:20,duration:500,delay:300})),v(S,y)},Qa=S=>{var y=pe(),N=re(y);{var M=H=>{var q=Tr(),ee=t(s(q),2);{var ae=C=>{var U=Cr(),Q=s(U);{var Y=z=>{var p=xr(),m=s(p),F=s(m);cs(F,{size:24}),e(m);var f=t(m,2),g=t(s(f),2),T=s(g,!0);e(g),e(f),e(p),b(k=>o(T,k),[()=>ds(a(r).performance.responseTime)]),v(z,p)};n(Q,z=>{a(r)?.performance.responseTime!==null&&z(Y)})}var A=t(Q,2);{var V=z=>{var p=Sr(),m=s(p),F=s(m);Le(F,{size:24}),e(m);var f=t(m,2),g=t(s(f),2),T=s(g);e(g);var k=t(g,2),D=s(k);e(k),e(f),e(p),b(()=>{o(T,`${a(r).performance.memoryUsage??""}%`),ue(D,`width: ${a(r).performance.memoryUsage??""}%`)}),v(z,p)};n(A,z=>{a(r)?.performance.memoryUsage!==null&&z(V)})}var w=t(A,2);{var B=z=>{var p=wr(),m=s(p),F=s(m);Ot(F,{size:24}),e(m);var f=t(m,2),g=t(s(f),2),T=s(g);e(g);var k=t(g,2),D=s(k);e(k),e(f),e(p),b(()=>{o(T,`${a(r).performance.cpuUsage??""}%`),ue(D,`width: ${a(r).performance.cpuUsage??""}%`)}),v(z,p)};n(w,z=>{a(r)?.performance.cpuUsage!==null&&z(B)})}var Z=t(w,2);{var X=z=>{var p=kr(),m=s(p),F=s(m);ua(F,{size:24}),e(m);var f=t(m,2),g=t(s(f),2),T=s(g);e(g);var k=t(g,2),D=s(k);e(k),e(f),e(p),b(()=>{o(T,`${a(r).performance.diskUsage??""}%`),ue(D,`width: ${a(r).performance.diskUsage??""}%`)}),v(z,p)};n(Z,z=>{a(r)?.performance.diskUsage!==null&&z(X)})}e(U),v(C,U)},le=C=>{var U=Vr(),Q=s(U);As(Q,{size:48});var Y=t(Q,6);Y.__click=Ue;var A=s(Y);Ee(A,{size:18}),K(2),e(Y),e(U),b(()=>Y.disabled=a(ne)),v(C,U)};n(ee,C=>{a(r)?.performance.responseTime!==null||a(r)?.performance.memoryUsage!==null?C(ae):C(le,!1)})}e(q),v(H,q)},G=H=>{var q=pe(),ee=re(q);{var ae=C=>{var U=Dr(),Q=t(s(U),2);{var Y=V=>{var w=Hr(),B=s(w);let Z;var X=s(B),z=s(X);jt(z,{size:24}),e(X);var p=t(X,2),m=t(s(p),2),F=s(m,!0);e(m);var f=t(m,2);{var g=L=>{var J=Rr(),oe=s(J);e(J),b(Ae=>o(oe,`Expires: ${Ae??""}`),[()=>a(r).security.sslExpiry.toLocaleDateString()]),v(L,J)};n(f,L=>{a(r).security.sslExpiry&&L(g)})}e(p);var T=t(p,2),k=s(T);{var D=L=>{Ds(L,{size:24})},ce=L=>{$t(L,{size:24})};n(k,L=>{a(r).security.sslValid?L(D):L(ce,!1)})}e(T),e(B);var te=t(B,2);{var ze=L=>{var J=Ur(),oe=s(J),Ae=s(oe);vs(Ae,{size:24}),e(oe);var Se=t(oe,2),we=t(s(Se),2),zs=s(we);e(we);var De=t(we,2),ms=s(De);e(De),e(Se),e(J),b(hs=>{o(zs,`${a(r).security.headersScore??""}%`),ue(ms,`width: ${a(r).security.headersScore??""}%; background: ${hs??""}`)},[()=>je(a(r).security.headersScore)]),v(L,J)};n(te,L=>{a(r).security.headersScore!==null&&L(ze)})}var be=t(te,2);let de;var _=s(be),h=s(_);Wt(h,{size:24}),e(_);var u=t(_,2),j=t(s(u),2);let R;var P=s(j,!0);e(j),e(u);var W=t(u,2);{var He=L=>{var J=Pr(),oe=s(J);Ds(oe,{size:24}),e(J),v(L,J)};n(W,L=>{a(r).security.vulnerabilities===0&&L(He)})}e(be),e(w),b(()=>{Z=se(B,1,"metric-card ssl svelte-1cb9ebz",null,Z,{valid:a(r).security.sslValid,invalid:!a(r).security.sslValid}),o(F,a(r).security.sslValid?"Valid":"Invalid"),de=se(be,1,"metric-card svelte-1cb9ebz",null,de,{critical:a(r).security.vulnerabilities>0}),R=se(j,1,"metric-value large svelte-1cb9ebz",null,R,{good:a(r).security.vulnerabilities===0}),o(P,a(r).security.vulnerabilities)}),v(V,w)},A=V=>{var w=Ar(),B=s(w);vs(B,{size:48});var Z=t(B,6);Z.__click=Ue;var X=s(Z);Ee(X,{size:18}),K(2),e(Z),e(w),b(()=>Z.disabled=a(ne)),v(V,w)};n(Q,V=>{a(r)?.security.sslValid!==null?V(Y):V(A,!1)})}e(U),v(C,U)},le=C=>{var U=pe(),Q=re(U);{var Y=V=>{var w=qr(),B=t(s(w),2);{var Z=z=>{var p=Lr(),m=s(p);let F;var f=s(m),g=s(f);is(g,{size:24}),e(f);var T=t(f,4),k=s(T);Ds(k,{size:24}),e(T),e(m);var D=t(m,2);{var ce=_=>{var h=Ir(),u=s(h),j=s(u);cs(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(He=>o(W,He),[()=>ds(a(r).database.responseTime)]),v(_,h)};n(D,_=>{a(r).database.responseTime!==null&&_(ce)})}var te=t(D,2);{var ze=_=>{var h=Er(),u=s(h),j=s(u);ua(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).database.size)),v(_,h)};n(te,_=>{a(r).database.size&&_(ze)})}var be=t(te,2);{var de=_=>{var h=Mr(),u=s(h),j=s(u);Bt(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).database.tables)),v(_,h)};n(be,_=>{a(r).database.tables!==null&&_(de)})}e(p),b(()=>F=se(m,1,"metric-card connection svelte-1cb9ebz",null,F,{connected:a(r).database.connected})),v(z,p)},X=z=>{var p=Nr();let m;var F=s(p);is(F,{size:48});var f=t(F,2),g=s(f,!0);e(f);var T=t(f,2),k=s(T,!0);e(T);var D=t(T,2);D.__click=Ue;var ce=s(D);Ee(ce,{size:18}),K(2),e(D),e(p),b(()=>{m=se(p,1,"empty-state svelte-1cb9ebz",null,m,{error:a(r)?.database.connected===!1}),o(g,a(r)?.database.connected===!1?"Database Disconnected":"No Database Data"),o(k,a(r)?.database.connected===!1?"Unable to connect to database":"Run health tests to check database status"),D.disabled=a(ne)}),v(z,p)};n(B,z=>{a(r)?.database.connected?z(Z):z(X,!1)})}e(w),v(V,w)},A=V=>{var w=pe(),B=re(w);{var Z=X=>{var z=Kr(),p=t(s(z),2);{var m=f=>{var g=$r(),T=s(g);{var k=_=>{var h=Fr(),u=s(h),j=s(u);Kt(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).server.phpVersion)),v(_,h)};n(T,_=>{a(r).server.phpVersion&&_(k)})}var D=t(T,2);{var ce=_=>{var h=Or(),u=s(h),j=s(u);Qt(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).server.webServer)),v(_,h)};n(D,_=>{a(r).server.webServer&&_(ce)})}var te=t(D,2);{var ze=_=>{var h=jr(),u=s(h),j=s(u);Le(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).server.os)),v(_,h)};n(te,_=>{a(r).server.os&&_(ze)})}var be=t(te,2);{var de=_=>{var h=Wr(),u=s(h),j=s(u);cs(j,{size:24}),e(u);var R=t(u,2),P=t(s(R),2),W=s(P,!0);e(P),e(R),e(h),b(()=>o(W,a(r).server.uptime)),v(_,h)};n(be,_=>{a(r).server.uptime&&_(de)})}e(g),v(f,g)},F=f=>{var g=Br(),T=s(g);Le(T,{size:48});var k=t(T,6);k.__click=Ue;var D=s(k);Ee(D,{size:18}),K(2),e(k),e(g),b(()=>k.disabled=a(ne)),v(f,g)};n(p,f=>{a(r)?.server.phpVersion||a(r)?.server.webServer?f(m):f(F,!1)})}e(z),v(X,z)};n(B,X=>{a(ve)==="server"&&X(Z)},!0)}v(V,w)};n(Q,V=>{a(ve)==="database"?V(Y):V(A,!1)},!0)}v(C,U)};n(ee,C=>{a(ve)==="security"?C(ae):C(le,!1)},!0)}v(H,q)};n(N,H=>{a(ve)==="performance"?H(M):H(G,!1)},!0)}v(S,y)};n(Ba,S=>{a(ve)==="overview"?S(Ka):S(Qa,!1)})}e(Ze);var Ya=t(Ze,2);{var Za=S=>{var y=Qr(),N=s(y);cs(N,{size:14});var M=t(N,2),G=s(M);e(M),e(y),b(H=>o(G,`Last updated: ${H??""}`),[()=>a(Te).toLocaleString()]),_e(1,y,()=>Hs,()=>({delay:500})),v(S,y)};n(Ya,S=>{a(Te)&&S(Za)})}b((S,y,N,M)=>{ue(xe,`--score-color: ${S??""}`),ue(Ma,`stroke-dashoffset: ${339.3-339.3*Ve()/100}`),o(La,y),ue(Qe,`color: ${N??""}`),o(Na,M)},[()=>je(Ve()),()=>Math.round(Ve()),()=>je(Ve()),()=>ya(Math.round(Ve()))]),_e(1,ie,()=>Lt,()=>({duration:500,start:.9,delay:100})),_e(1,Ye,()=>Me,()=>({y:20,duration:500,delay:200})),_e(1,Ze,()=>Hs,()=>({duration:200})),v(i,E)};n(Da,i=>{a(Es)?i(Ia):i(Ea,!1)})}e(os),b(()=>{Os=se($e,1,"connection-indicator svelte-1cb9ebz",null,Os,{healthy:qe()>0}),o(Ta,`${qe()??""} APIs Connected`),Pe.disabled=a(ne),$s=se(Be,1,"icon-wrapper svelte-1cb9ebz",null,$s,{spinning:a(ne)}),o(Ha,a(ne)?"Running...":"Run Tests"),Ke.disabled=a(Oe),Ks=se(us,1,"icon-wrapper svelte-1cb9ebz",null,Ks,{spinning:a(Oe)})}),_e(1,We,()=>Me,()=>({y:-20,duration:500,delay:100})),v(za,os),Pt(),ha()}wt(["click"]);export{sv as component};
