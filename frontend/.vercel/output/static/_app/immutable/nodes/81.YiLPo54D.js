import{z as ue,p as fe,aP as M,o as be,a3 as ye,f as u,a9 as xe,e as s,R as we,by as ke,i as T,w as C,bJ as re,g as e,h as m,j as $e,c as O,as as Te,q as r,bL as Ce,aX as ve,at as Se,H as Pe,r as t,bH as ce,x as h,N as Re,Q as Fe,k as ze,d as Ae,l as H,O as B,aR as Ie,dB as Me,cn as Oe}from"../chunks/C_QN0JMx.js";var je=u("<div><!> </div>"),De=u("<div><!> </div>"),Le=u("<div><!> </div>"),Ne=u("<div><!> </div>"),Ue=u('<div class="metrics-grid svelte-vhc719"><div class="metric-card svelte-vhc719"><div class="metric-label svelte-vhc719">Total Impressions</div> <div class="metric-value svelte-vhc719"> </div> <!></div> <div class="metric-card svelte-vhc719"><div class="metric-label svelte-vhc719">Total Clicks</div> <div class="metric-value svelte-vhc719"> </div> <!></div> <div class="metric-card svelte-vhc719"><div class="metric-label svelte-vhc719">Average CTR</div> <div class="metric-value svelte-vhc719"> </div> <!></div> <div class="metric-card svelte-vhc719"><div class="metric-label svelte-vhc719">Average Position</div> <div class="metric-value svelte-vhc719"> </div> <!></div></div>'),qe=u('<tr class="svelte-vhc719"><td class="svelte-vhc719"><div class="url-cell svelte-vhc719"> </div></td><td class="number svelte-vhc719"> </td><td class="number svelte-vhc719"> </td><td class="number svelte-vhc719"> </td><td class="number svelte-vhc719"> </td></tr>'),Ee=u('<div class="top-pages-section svelte-vhc719"><h2 class="svelte-vhc719">Top Performing Pages</h2> <div class="pages-table svelte-vhc719"><table class="svelte-vhc719"><thead><tr><th class="svelte-vhc719">URL</th><th class="svelte-vhc719">Impressions</th><th class="svelte-vhc719">Clicks</th><th class="svelte-vhc719">CTR</th><th class="svelte-vhc719">Avg. Position</th></tr></thead><tbody class="svelte-vhc719"></tbody></table></div></div>'),He=u('<div class="empty-state svelte-vhc719"><h3 class="svelte-vhc719">No analytics data available</h3> <p class="svelte-vhc719">Connect Google Search Console or wait for data to accumulate</p> <a href="/admin/seo/search-console" class="btn-primary svelte-vhc719">Connect Search Console</a></div>'),Be=u('<div class="analytics-page svelte-vhc719"><header class="page-header svelte-vhc719"><div><h1 class="svelte-vhc719">SEO Analytics</h1> <p class="svelte-vhc719">Track search performance and insights</p></div> <button class="btn-secondary svelte-vhc719"><!> Refresh</button></header> <div class="date-range-picker svelte-vhc719"><!> <input type="date" class="svelte-vhc719"/> <span>to</span> <input type="date" class="svelte-vhc719"/></div> <!> <!></div>');function Je(ie,ne){fe(ne,!1);let x=M(null),G=M([]),i=M(null),S=M(!1),p=M({start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]});be(()=>{j()});async function j(){O(S,!0);try{await Promise.all([oe(),le(),de()])}finally{O(S,!1)}}async function oe(){const a=new URLSearchParams({start_date:e(p).start,end_date:e(p).end});try{const _=await(await fetch(`/api/seo/analytics/stats?${a}`)).json();O(x,_.stats)}catch{}}async function le(){const a=new URLSearchParams({start_date:e(p).start,end_date:e(p).end,metric:"clicks",limit:"10"});try{const _=await(await fetch(`/api/seo/analytics/top-pages?${a}`)).json();O(G,_.data||[])}catch{}}async function de(){try{const a=await fetch("/api/seo/analytics/comparison");O(i,await a.json())}catch{}}function D(a){return new Intl.NumberFormat().format(a)}function L(a){return a==="up"?Ie:a==="down"?Me:Oe}function N(a){return a==="up"?"positive":a==="down"?"negative":"neutral"}ye();var J=Be();xe("vhc719",a=>{Te(()=>{Se.title="SEO Analytics | Admin"})});var Q=r(J),U=s(r(Q),2);U.__click=j;var he=r(U);{let a=Ce(()=>e(S)?"spinning":"");we(he,{size:18,get class(){return e(a)}})}Pe(),t(U),t(Q);var X=s(Q,2),te=r(X);ke(te,{size:20});var q=s(te,2);ce(q),q.__change=j;var K=s(q,4);ce(K),K.__change=j,t(X);var se=s(X,2);{var _e=a=>{var l=Ue(),_=r(l),f=s(r(_),2),b=r(f,!0);t(f);var P=s(f,2);{var y=c=>{var v=je(),d=r(v);H(d,()=>L(e(i).change.impressions.direction),(n,o)=>{o(n,{size:16})});var g=s(d);t(v),C((n,o)=>{B(v,1,`metric-change ${n??""}`,"svelte-vhc719"),h(g,` ${o??""}%`)},[()=>N(e(i).change.impressions.direction),()=>Math.abs(e(i).change.impressions.percentage)]),m(c,v)};T(P,c=>{e(i)?.change?.impressions&&c(y)})}t(_);var w=s(_,2),k=s(r(w),2),E=r(k,!0);t(k);var V=s(k,2);{var R=c=>{var v=De(),d=r(v);H(d,()=>L(e(i).change.clicks.direction),(n,o)=>{o(n,{size:16})});var g=s(d);t(v),C((n,o)=>{B(v,1,`metric-change ${n??""}`,"svelte-vhc719"),h(g,` ${o??""}%`)},[()=>N(e(i).change.clicks.direction),()=>Math.abs(e(i).change.clicks.percentage)]),m(c,v)};T(V,c=>{e(i)?.change?.clicks&&c(R)})}t(w);var F=s(w,2),$=s(r(F),2),W=r($);t($);var z=s($,2);{var Y=c=>{var v=Le(),d=r(v);H(d,()=>L(e(i).change.ctr.direction),(n,o)=>{o(n,{size:16})});var g=s(d);t(v),C((n,o)=>{B(v,1,`metric-change ${n??""}`,"svelte-vhc719"),h(g,` ${o??""}%`)},[()=>N(e(i).change.ctr.direction),()=>Math.abs(e(i).change.ctr.percentage)]),m(c,v)};T(z,c=>{e(i)?.change?.ctr&&c(Y)})}t(F);var A=s(F,2),I=s(r(A),2),Z=r(I,!0);t(I);var ee=s(I,2);{var ae=c=>{var v=Ne(),d=r(v);H(d,()=>L(e(i).change.position.direction),(n,o)=>{o(n,{size:16})});var g=s(d);t(v),C((n,o)=>{B(v,1,`metric-change ${n??""}`,"svelte-vhc719"),h(g,` ${o??""}%`)},[()=>N(e(i).change.position.direction),()=>Math.abs(e(i).change.position.percentage)]),m(c,v)};T(ee,c=>{e(i)?.change?.position&&c(ae)})}t(A),t(l),C((c,v,d,g)=>{h(b,c),h(E,v),h(W,`${d??""}%`),h(Z,g)},[()=>D(e(x).total_impressions||0),()=>D(e(x).total_clicks||0),()=>(e(x).avg_ctr*100).toFixed(2),()=>e(x).avg_position?e(x).avg_position.toFixed(1):"—"]),m(a,l)};T(se,a=>{e(x)&&a(_e)})}var pe=s(se,2);{var me=a=>{var l=Ee(),_=s(r(l),2),f=r(_),b=s(r(f));Re(b,5,()=>e(G),Fe,(P,y)=>{var w=qe(),k=r(w),E=r(k),V=r(E,!0);t(E),t(k);var R=s(k),F=r(R,!0);t(R);var $=s(R),W=r($,!0);t($);var z=s($),Y=r(z);t(z);var A=s(z),I=r(A,!0);t(A),t(w),C((Z,ee,ae,c)=>{h(V,e(y).url),h(F,Z),h(W,ee),h(Y,`${ae??""}%`),h(I,c)},[()=>D(e(y).total_impressions||0),()=>D(e(y).total_clicks||0),()=>(e(y).avg_ctr*100).toFixed(2),()=>e(y).avg_position?e(y).avg_position.toFixed(1):"—"]),m(P,w)}),t(b),t(f),t(_),t(l),m(a,l)},ge=a=>{var l=ze(),_=Ae(l);{var f=b=>{var P=He();m(b,P)};T(_,b=>{e(S)||b(f)},!0)}m(a,l)};T(pe,a=>{e(G).length>0?a(me):a(ge,!1)})}t(J),C(()=>U.disabled=e(S)),re(q,()=>e(p).start,a=>ve(p,e(p).start=a)),re(K,()=>e(p).end,a=>ve(p,e(p).end=a)),m(ie,J),$e()}ue(["click","change"]);export{Je as component};
