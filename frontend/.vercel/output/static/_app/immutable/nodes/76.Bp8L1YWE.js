import{z as Ie,p as Fe,s as I,A as Ee,o as $e,b as De,g as e,f as n,a9 as Ne,F,e as l,bM as W,N as X,i as k,h as v,j as je,c as f,as as qe,q as s,at as Be,H as Y,r as a,Q as Z,a2 as E,dg as ee,b1 as te,dA as ae,l as se,n as re,w as M,O as ie,x as m,k as oe,d as le,bU as He,bV as Le}from"../chunks/C_QN0JMx.js";import{p as ve,A as Oe}from"../chunks/BIaWRQrO.js";var Qe=n("<button><!> </button>"),Se=n('<div class="loading svelte-6t53h5"><div class="spinner svelte-6t53h5"></div> <p>Loading products...</p></div>'),Ue=n('<div class="alert error svelte-6t53h5"> </div>'),Ve=n('<div class="empty-state svelte-6t53h5"><!> <h3 class="svelte-6t53h5">No products found</h3> <p class="svelte-6t53h5"> </p> <button class="btn-primary svelte-6t53h5"><!> Add Product</button></div>'),Ge=n('<span class="status-badge active svelte-6t53h5">Active</span>'),Je=n('<span class="status-badge inactive svelte-6t53h5">Inactive</span>'),Ke=n('<p class="description svelte-6t53h5"> </p>'),Re=n('<div class="product-card svelte-6t53h5"><div class="product-header svelte-6t53h5"><div><!> </div> <div class="product-status svelte-6t53h5"><!></div></div> <div class="product-content svelte-6t53h5"><h3 class="svelte-6t53h5"> </h3> <!> <div class="product-price svelte-6t53h5"> </div></div> <div class="product-actions svelte-6t53h5"><button class="action-btn edit svelte-6t53h5" title="Edit"><!></button> <button class="action-btn delete svelte-6t53h5" title="Delete"><!></button></div></div>'),We=n('<div class="products-grid svelte-6t53h5"></div>'),Xe=n('<div class="admin-page svelte-6t53h5"><div class="page-header svelte-6t53h5"><div><h1 class="svelte-6t53h5">Products Management</h1> <p class="svelte-6t53h5">Manage courses, indicators, and memberships</p></div> <button class="btn-primary svelte-6t53h5"><!> Add Product</button></div> <div class="type-filter svelte-6t53h5"></div> <!></div>');function et(ne,ce){Fe(ce,!0);let $=I(!0),D=I(Ee([])),y=I(""),p=I("all");const de=[{value:"all",label:"All Products",icon:E},{value:"course",label:"Courses",icon:ee},{value:"indicator",label:"Indicators",icon:te},{value:"membership",label:"Memberships",icon:ae}];$e(async()=>{await N()});async function N(){f($,!0),f(y,"");try{const t={};e(p)!=="all"&&(t.type=e(p));const r=await ve.list(t);f(D,r.data||[],!0)}catch(t){if(t instanceof Oe){if(t.status===401){F("/login");return}f(y,t.message,!0)}else f(y,"Failed to load products")}finally{f($,!1)}}async function ue(t,r){if(confirm(`Delete "${r}"? This action cannot be undone.`))try{await ve.delete(t),await N()}catch{alert("Failed to delete product")}}function pe(t){return{course:ee,indicator:te,membership:ae,bundle:E}[t]||E}function _e(t){return{course:"bg-blue-500",indicator:"bg-purple-500",membership:"bg-yellow-500",bundle:"bg-green-500"}[t]||"bg-gray-500"}De(()=>{e(p)&&N()});var j=Xe();Ne("6t53h5",t=>{qe(()=>{Be.title="Products Management | Admin"})});var q=s(j),B=l(s(q),2);B.__click=()=>F("/admin/products/create");var he=s(B);W(he,{size:18}),Y(),a(B),a(q);var H=l(q,2);X(H,21,()=>de,Z,(t,r)=>{const z=re(()=>e(r).icon);var _=Qe();let P;_.__click=()=>f(p,e(r).value,!0);var c=s(_);se(c,()=>e(z),(x,L)=>{L(x,{size:20})});var u=l(c);a(_),M(()=>{P=ie(_,1,"type-btn svelte-6t53h5",null,P,{active:e(p)===e(r).value}),m(u,` ${e(r).label??""}`)}),v(t,_)}),a(H);var be=l(H,2);{var fe=t=>{var r=Se();v(t,r)},me=t=>{var r=oe(),z=le(r);{var _=c=>{var u=Ue(),x=s(u,!0);a(u),M(()=>m(x,e(y))),v(c,u)},P=c=>{var u=oe(),x=le(u);{var L=g=>{var h=Ve(),w=s(h);E(w,{size:64,stroke:1});var i=l(w,4),O=s(i);a(i);var b=l(i,2);b.__click=()=>F("/admin/products/create");var A=s(b);W(A,{size:18}),Y(),a(b),a(h),M(()=>m(O,`Create your first ${(e(p)==="all"?"product":e(p))??""}`)),v(g,h)},ge=g=>{var h=We();X(h,21,()=>e(D),Z,(w,i)=>{const O=re(()=>pe(e(i).type));var b=Re(),A=s(b),T=s(A),V=s(T);se(V,()=>e(O),(o,d)=>{d(o,{size:16})});var ye=l(V);a(T);var G=l(T,2),xe=s(G);{var Ae=o=>{var d=Ge();v(o,d)},ke=o=>{var d=Je();v(o,d)};k(xe,o=>{e(i).is_active?o(Ae):o(ke,!1)})}a(G),a(A);var Q=l(A,2),S=s(Q),Me=s(S,!0);a(S);var J=l(S,2);{var ze=o=>{var d=Ke(),Ce=s(d,!0);a(d),M(()=>m(Ce,e(i).description)),v(o,d)};k(J,o=>{e(i).description&&o(ze)})}var K=l(J,2),Pe=s(K);a(K),a(Q);var R=l(Q,2),C=s(R);C.__click=()=>F(`/admin/products/edit/${e(i).id}`);var we=s(C);He(we,{size:16}),a(C);var U=l(C,2);U.__click=()=>ue(e(i).id,e(i).name);var Te=s(U);Le(Te,{size:16}),a(U),a(R),a(b),M(o=>{ie(T,1,`product-type ${o??""}`,"svelte-6t53h5"),m(ye,` ${e(i).type??""}`),m(Me,e(i).name),m(Pe,`$${e(i).price??""}`)},[()=>_e(e(i).type)]),v(w,b)}),a(h),v(g,h)};k(x,g=>{e(D).length===0?g(L):g(ge,!1)},!0)}v(c,u)};k(z,c=>{e(y)?c(_):c(P,!1)},!0)}v(t,r)};k(be,t=>{e($)?t(fe):t(me,!1)})}a(j),v(ne,j),je()}Ie(["click"]);export{et as component};
