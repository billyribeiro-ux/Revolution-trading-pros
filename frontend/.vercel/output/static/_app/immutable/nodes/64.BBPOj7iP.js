import{z as la,p as ia,o as ba,a3 as da,f as z,a9 as na,F as ca,q as t,aM as ma,aH as xt,by as ua,w as $,e as s,R as Rt,bC as oa,i as H,bG as ha,g as a,h as _,j as ka,c as k,aP as C,as as _a,at as pa,H as p,r as e,bK as ga,d as Fe,N as D,Q as S,k as fa,S as ya,x as n,U as xa,cY as Ra,b1 as wt,_ as ae,a$ as Mt,K as I,bh as K,O as x,aR as se,dB as ve}from"../chunks/C_QN0JMx.js";var wa=z('<div class="skeleton skeleton-metric svelte-1umk7bb"></div>'),Ma=z('<div class="loading-grid svelte-1umk7bb"></div> <div class="skeleton skeleton-chart svelte-1umk7bb"></div>',1),$a=z('<div class="not-connected-state svelte-1umk7bb"><div class="not-connected-card svelte-1umk7bb"><div class="not-connected-icon svelte-1umk7bb"><!></div> <h2 class="svelte-1umk7bb">Member Analytics Not Available</h2> <p class="svelte-1umk7bb"> </p> <div class="not-connected-actions svelte-1umk7bb"><a href="/admin/connections" class="btn-connect svelte-1umk7bb"><!> Connect Analytics</a> <button class="btn-retry svelte-1umk7bb"><!> Retry</button></div> <div class="analytics-features svelte-1umk7bb"><h3 class="svelte-1umk7bb">Available when connected:</h3> <ul class="svelte-1umk7bb"><li class="svelte-1umk7bb">Real-time member metrics & growth trends</li> <li class="svelte-1umk7bb">Monthly Recurring Revenue (MRR) tracking</li> <li class="svelte-1umk7bb">Cohort retention analysis</li> <li class="svelte-1umk7bb">Churn reason insights</li> <li class="svelte-1umk7bb">Segment performance breakdowns</li></ul></div></div></div>'),Ca=z('<div class="bar-group svelte-1umk7bb"><div class="bar-container svelte-1umk7bb"><div class="bar bar-members svelte-1umk7bb"></div></div> <div class="bar-mini-group svelte-1umk7bb"><div class="bar bar-new svelte-1umk7bb"></div> <div class="bar bar-churned svelte-1umk7bb"></div></div> <span class="bar-label svelte-1umk7bb"> </span></div>'),za=Mt('<line x1="0" x2="600" stroke="rgba(148, 163, 184, 0.1)" stroke-dasharray="4" class="svelte-1umk7bb"></line>'),Aa=Mt('<circle r="5" fill="#34d399" class="svelte-1umk7bb"></circle>'),Ga=z('<span class="svelte-1umk7bb"> </span>'),ja=z('<tr class="svelte-1umk7bb"><td class="cohort-name svelte-1umk7bb"> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td></tr>'),La=z('<div class="reason-item svelte-1umk7bb"><div class="reason-info svelte-1umk7bb"><span class="reason-name svelte-1umk7bb"> </span> <span class="reason-count svelte-1umk7bb"> </span></div> <div class="reason-bar-container svelte-1umk7bb"><div class="reason-bar svelte-1umk7bb"></div></div> <span class="reason-percentage svelte-1umk7bb"> </span></div>'),Da=z('<tr class="svelte-1umk7bb"><td class="segment-name svelte-1umk7bb"> </td><td class="svelte-1umk7bb"> </td><td class="revenue svelte-1umk7bb"> </td><td> </td></tr>'),Sa=z('<div class="metrics-grid svelte-1umk7bb"><div class="metric-card svelte-1umk7bb"><div class="metric-header svelte-1umk7bb"><div class="metric-icon purple svelte-1umk7bb"><!></div> <div><!> </div></div> <div class="metric-value svelte-1umk7bb"> </div> <div class="metric-label svelte-1umk7bb">Total Members</div></div> <div class="metric-card svelte-1umk7bb"><div class="metric-header svelte-1umk7bb"><div class="metric-icon emerald svelte-1umk7bb"><!></div> <div><!> </div></div> <div class="metric-value svelte-1umk7bb"> </div> <div class="metric-label svelte-1umk7bb">Monthly Recurring Revenue</div></div> <div class="metric-card svelte-1umk7bb"><div class="metric-header svelte-1umk7bb"><div><!></div> <div><!> </div></div> <div class="metric-value svelte-1umk7bb"> </div> <div class="metric-label svelte-1umk7bb">Churn Rate</div></div> <div class="metric-card svelte-1umk7bb"><div class="metric-header svelte-1umk7bb"><div class="metric-icon blue svelte-1umk7bb"><!></div> <div><!> </div></div> <div class="metric-value svelte-1umk7bb"> </div> <div class="metric-label svelte-1umk7bb">Average LTV</div></div></div> <div class="charts-grid svelte-1umk7bb"><div class="chart-card svelte-1umk7bb"><div class="chart-header svelte-1umk7bb"><h3 class="svelte-1umk7bb">Member Growth</h3> <div class="chart-legend svelte-1umk7bb"><span class="legend-item svelte-1umk7bb"><span class="legend-dot purple svelte-1umk7bb"></span> Total</span> <span class="legend-item svelte-1umk7bb"><span class="legend-dot emerald svelte-1umk7bb"></span> New</span> <span class="legend-item svelte-1umk7bb"><span class="legend-dot red svelte-1umk7bb"></span> Churned</span></div></div> <div class="chart-body svelte-1umk7bb"><div class="bar-chart svelte-1umk7bb"></div></div></div> <div class="chart-card svelte-1umk7bb"><div class="chart-header svelte-1umk7bb"><h3 class="svelte-1umk7bb">Revenue Trend</h3> <div class="chart-legend svelte-1umk7bb"><span class="legend-item svelte-1umk7bb"><span class="legend-dot emerald svelte-1umk7bb"></span> MRR</span></div></div> <div class="chart-body svelte-1umk7bb"><div class="line-chart svelte-1umk7bb"><svg viewBox="0 0 600 200" class="line-chart-svg svelte-1umk7bb"><!><path fill="url(#gradient)" opacity="0.3" class="svelte-1umk7bb"></path><path fill="none" stroke="#34d399" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svelte-1umk7bb"></path><!><defs class="svelte-1umk7bb"><linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%" class="svelte-1umk7bb"><stop offset="0%" style="stop-color:#34d399;stop-opacity:0.4" class="svelte-1umk7bb"></stop><stop offset="100%" style="stop-color:#34d399;stop-opacity:0" class="svelte-1umk7bb"></stop></linearGradient></defs></svg> <div class="line-chart-labels svelte-1umk7bb"></div></div></div></div></div> <div class="chart-card full-width svelte-1umk7bb"><div class="chart-header svelte-1umk7bb"><h3 class="svelte-1umk7bb">Retention Cohort Analysis</h3> <p class="chart-subtitle svelte-1umk7bb">Monthly retention rates by signup cohort</p></div> <div class="chart-body svelte-1umk7bb"><div class="cohort-table svelte-1umk7bb"><table class="svelte-1umk7bb"><thead class="svelte-1umk7bb"><tr class="svelte-1umk7bb"><th class="svelte-1umk7bb">Cohort</th><th class="svelte-1umk7bb">Month 0</th><th class="svelte-1umk7bb">Month 1</th><th class="svelte-1umk7bb">Month 2</th><th class="svelte-1umk7bb">Month 3</th><th class="svelte-1umk7bb">Month 4</th><th class="svelte-1umk7bb">Month 5</th></tr></thead><tbody class="svelte-1umk7bb"></tbody></table></div></div></div> <div class="bottom-grid svelte-1umk7bb"><div class="chart-card svelte-1umk7bb"><div class="chart-header svelte-1umk7bb"><h3 class="svelte-1umk7bb">Churn Reasons</h3></div> <div class="chart-body svelte-1umk7bb"><div class="reasons-list svelte-1umk7bb"></div></div></div> <div class="chart-card svelte-1umk7bb"><div class="chart-header svelte-1umk7bb"><h3 class="svelte-1umk7bb">Segment Performance</h3></div> <div class="chart-body svelte-1umk7bb"><div class="segment-table svelte-1umk7bb"><table class="svelte-1umk7bb"><thead class="svelte-1umk7bb"><tr class="svelte-1umk7bb"><th class="svelte-1umk7bb">Segment</th><th class="svelte-1umk7bb">Members</th><th class="svelte-1umk7bb">Revenue</th><th class="svelte-1umk7bb">Churn</th></tr></thead><tbody class="svelte-1umk7bb"></tbody></table></div></div></div></div>',1),Fa=z('<div class="analytics-page svelte-1umk7bb"><div class="page-header svelte-1umk7bb"><button class="back-btn svelte-1umk7bb"><!> Back to Members</button> <div class="header-content svelte-1umk7bb"><div class="header-title svelte-1umk7bb"><div class="title-icon svelte-1umk7bb"><!></div> <div class="svelte-1umk7bb"><h1 class="svelte-1umk7bb">Member Analytics</h1> <p class="subtitle svelte-1umk7bb">Comprehensive insights and metrics</p></div></div> <div class="header-actions svelte-1umk7bb"><div class="date-filter svelte-1umk7bb"><!> <select class="svelte-1umk7bb"><option class="svelte-1umk7bb">Last 7 days</option><option class="svelte-1umk7bb">Last 30 days</option><option class="svelte-1umk7bb">Last 90 days</option><option class="svelte-1umk7bb">Last 12 months</option></select></div> <button class="btn-secondary svelte-1umk7bb"><!> Refresh</button> <button class="btn-primary svelte-1umk7bb"><!> Export Report</button></div></div></div> <!></div>');function Na($t,Ct){ia(Ct,!1);let re=C(!0),A=C("30d"),Te=!1,V=C(null),le=C(!1),c=C({totalMembers:null,memberGrowth:null,mrr:null,mrrGrowth:null,churnRate:null,churnChange:null,avgLtv:null,ltvGrowth:null}),q=C([]),Ne=C([]),j=C([]),Pe=C([]),Ue=C([]);ba(async()=>{await Z()});async function Z(){k(re,!0),k(V,null);try{const[d,G,L,F,U,g]=await Promise.allSettled([fetch(`/api/admin/members/analytics/metrics?range=${a(A)}`),fetch(`/api/admin/members/analytics/growth?range=${a(A)}`),fetch(`/api/admin/members/analytics/cohorts?range=${a(A)}`),fetch(`/api/admin/members/analytics/revenue?range=${a(A)}`),fetch(`/api/admin/members/analytics/churn-reasons?range=${a(A)}`),fetch(`/api/admin/members/analytics/segments?range=${a(A)}`)]);let m=!1;if(d.status==="fulfilled"&&d.value.ok){const i=await d.value.json();i&&typeof i.totalMembers=="number"&&(k(c,i),m=!0)}if(G.status==="fulfilled"&&G.value.ok){const i=await G.value.json();Array.isArray(i)&&i.length>0&&(k(q,i),m=!0)}if(L.status==="fulfilled"&&L.value.ok){const i=await L.value.json();Array.isArray(i)&&i.length>0&&(k(Ne,i),m=!0)}if(F.status==="fulfilled"&&F.value.ok){const i=await F.value.json();Array.isArray(i)&&i.length>0&&(k(j,i),m=!0)}if(U.status==="fulfilled"&&U.value.ok){const i=await U.value.json();Array.isArray(i)&&i.length>0&&(k(Pe,i),m=!0)}if(g.status==="fulfilled"&&g.value.ok){const i=await g.value.json();Array.isArray(i)&&i.length>0&&(k(Ue,i),m=!0)}Te=m,k(le,m),m||k(V,"Member analytics data is not available. Ensure your analytics service is connected and configured.")}catch{Te=!1,k(le,!1),k(V,"Failed to connect to analytics service. Please check your connection settings.")}finally{k(re,!1)}}function ie(d){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(d)}function Be(d){return new Intl.NumberFormat("en-US").format(d)}function P(d){return d===0?"bg-slate-800/50":d>=90?"bg-emerald-500/60":d>=80?"bg-emerald-500/40":d>=70?"bg-yellow-500/40":d>=60?"bg-orange-500/40":"bg-red-500/40"}function be(d){return Math.max(...d)}da();var de=Fa();na("1umk7bb",d=>{_a(()=>{pa.title="Member Analytics | Revolution Trading Pros"})});var ne=t(de),J=t(ne);J.__click=()=>ca("/admin/members");var zt=t(J);ma(zt,{size:20}),p(),e(J);var Ee=s(J,2),ce=t(Ee),He=t(ce),At=t(He);xt(At,{size:28}),e(He),p(2),e(ce);var Ie=s(ce,2),me=t(Ie),Ke=t(me);ua(Ke,{size:18});var W=s(Ke,2);$(()=>{a(A),ga(()=>{})}),W.__change=Z;var ue=t(W);ue.value=ue.__value="7d";var oe=s(ue);oe.value=oe.__value="30d";var he=s(oe);he.value=he.__value="90d";var Ve=s(he);Ve.value=Ve.__value="12m",e(W),e(me);var X=s(me,2);X.__click=Z;var Gt=t(X);Rt(Gt,{size:18}),p(),e(X);var qe=s(X,2),jt=t(qe);oa(jt,{size:18}),p(),e(qe),e(Ie),e(Ee),e(ne);var Lt=s(ne,2);{var Dt=d=>{var G=Ma(),L=Fe(G);D(L,4,()=>[1,2,3,4],S,(F,U)=>{var g=wa();_(F,g)}),e(L),p(2),_(d,G)},St=d=>{var G=fa(),L=Fe(G);{var F=g=>{var m=$a(),i=t(m),T=t(i),O=t(T);xt(O,{size:40}),e(T);var N=s(T,4),ke=t(N,!0);e(N);var B=s(N,2),E=t(B),_e=t(E);ya(_e,{size:18}),p(),e(E);var Q=s(E,2);Q.__click=Z;var pe=t(Q);Rt(pe,{size:18}),p(),e(Q),e(B),p(2),e(i),e(m),$(()=>n(ke,a(V)||"Connect your analytics service to view real member metrics, growth data, and churn analysis.")),_(g,m)},U=g=>{var m=Sa(),i=Fe(m),T=t(i),O=t(T),N=t(O),ke=t(N);xa(ke,{size:24}),e(N);var B=s(N,2),E=t(B);{var _e=v=>{se(v,{size:16})},Q=v=>{ve(v,{size:16})};H(E,v=>{a(c).memberGrowth>=0?v(_e):v(Q,!1)})}var pe=s(E);e(B),e(O);var Oe=s(O,2),Ft=t(Oe,!0);e(Oe),p(2),e(T);var ge=s(T,2),fe=t(ge),ye=t(fe),Tt=t(ye);Ra(Tt,{size:24}),e(ye);var xe=s(ye,2),Qe=t(xe);{var Nt=v=>{se(v,{size:16})},Pt=v=>{ve(v,{size:16})};H(Qe,v=>{a(c).mrrGrowth>=0?v(Nt):v(Pt,!1)})}var Ut=s(Qe);e(xe),e(fe);var Ye=s(fe,2),Bt=t(Ye,!0);e(Ye),p(2),e(ge);var Re=s(ge,2),we=t(Re),ee=t(we),Et=t(ee);wt(Et,{size:24}),e(ee);var Me=s(ee,2),Ze=t(Me);{var Ht=v=>{ve(v,{size:16})},It=v=>{se(v,{size:16})};H(Ze,v=>{a(c).churnChange<=0?v(Ht):v(It,!1)})}var Kt=s(Ze);e(Me),e(we);var Je=s(we,2),Vt=t(Je);e(Je),p(2),e(Re);var We=s(Re,2),$e=t(We),Ce=t($e),qt=t(Ce);wt(qt,{size:24}),e(Ce);var ze=s(Ce,2),Xe=t(ze);{var Ot=v=>{se(v,{size:16})},Qt=v=>{ve(v,{size:16})};H(Xe,v=>{a(c).ltvGrowth>=0?v(Ot):v(Qt,!1)})}var Yt=s(Xe);e(ze),e($e);var et=s($e,2),Zt=t(et,!0);e(et),p(2),e(We),e(i);var Ae=s(i,2),Ge=t(Ae),tt=s(t(Ge),2),at=t(tt);D(at,5,()=>a(q),S,(v,r)=>{var l=Ca(),b=t(l),R=t(b);e(b);var u=s(b,2),w=t(u),o=s(w,2);e(u);var f=s(u,2),y=t(f,!0);e(f),e(l),$((h,M,Y)=>{ae(R,`height: ${h??""}%`),ae(w,`height: ${M??""}px`),ae(o,`height: ${Y??""}px`),n(y,a(r).month)},[()=>a(r).members/be(a(q).map(h=>h.members))*100,()=>a(r).new/be(a(q).map(h=>h.new))*60,()=>a(r).churned/be(a(q).map(h=>h.churned))*60]),_(v,l)}),e(at),e(tt),e(Ge);var st=s(Ge,2),vt=s(t(st),2),rt=t(vt),je=t(rt),lt=t(je);D(lt,0,()=>[0,1,2,3,4],S,(v,r)=>{var l=za();$(()=>{I(l,"y1",r*50),I(l,"y2",r*50)}),_(v,l)});var it=s(lt),bt=s(it),Jt=s(bt);D(Jt,1,()=>a(j),S,(v,r,l)=>{var b=Aa();$(()=>{I(b,"cx",l/(a(j).length-1)*600),I(b,"cy",200-a(r).mrr/1e5*180)}),_(v,b)}),p(),e(je);var dt=s(je,2);D(dt,5,()=>a(j),S,(v,r)=>{var l=Ga(),b=t(l,!0);e(l),$(()=>n(b,a(r).month)),_(v,l)}),e(dt),e(rt),e(vt),e(st),e(Ae);var Le=s(Ae,2),nt=s(t(Le),2),ct=t(nt),mt=t(ct),ut=s(t(mt));D(ut,5,()=>a(Ne),S,(v,r)=>{var l=ja(),b=t(l),R=t(b,!0);e(b);var u=s(b),w=t(u);e(u);var o=s(u),f=t(o);e(o);var y=s(o),h=t(y);e(y);var M=s(y),Y=t(M);e(M);var te=s(M),Wt=t(te);e(te);var Se=s(te),Xt=t(Se);e(Se),e(l),$((ea,ta,aa,sa,va,ra)=>{n(R,a(r).cohort),x(u,1,ea,"svelte-1umk7bb"),n(w,`${a(r).m0??""}%`),x(o,1,ta,"svelte-1umk7bb"),n(f,`${(a(r).m1||"-")??""}%`),x(y,1,aa,"svelte-1umk7bb"),n(h,`${(a(r).m2||"-")??""}%`),x(M,1,sa,"svelte-1umk7bb"),n(Y,`${(a(r).m3||"-")??""}%`),x(te,1,va,"svelte-1umk7bb"),n(Wt,`${(a(r).m4||"-")??""}%`),x(Se,1,ra,"svelte-1umk7bb"),n(Xt,`${(a(r).m5||"-")??""}%`)},[()=>K(P(a(r).m0)),()=>K(P(a(r).m1)),()=>K(P(a(r).m2)),()=>K(P(a(r).m3)),()=>K(P(a(r).m4)),()=>K(P(a(r).m5))]),_(v,l)}),e(ut),e(mt),e(ct),e(nt),e(Le);var ot=s(Le,2),De=t(ot),ht=s(t(De),2),kt=t(ht);D(kt,5,()=>a(Pe),S,(v,r)=>{var l=La(),b=t(l),R=t(b),u=t(R,!0);e(R);var w=s(R,2),o=t(w);e(w),e(b);var f=s(b,2),y=t(f);e(f);var h=s(f,2),M=t(h);e(h),e(l),$(()=>{n(u,a(r).reason),n(o,`${a(r).count??""} members`),ae(y,`width: ${a(r).percentage??""}%`),n(M,`${a(r).percentage??""}%`)}),_(v,l)}),e(kt),e(ht),e(De);var _t=s(De,2),pt=s(t(_t),2),gt=t(pt),ft=t(gt),yt=s(t(ft));D(yt,5,()=>a(Ue),S,(v,r)=>{var l=Da(),b=t(l),R=t(b,!0);e(b);var u=s(b),w=t(u,!0);e(u);var o=s(u),f=t(o,!0);e(o);var y=s(o),h=t(y);e(y),e(l),$((M,Y)=>{n(R,a(r).segment),n(w,M),n(f,Y),x(y,1,`churn-rate ${a(r).churnRate<=2?"low":a(r).churnRate<=5?"medium":"high"}`,"svelte-1umk7bb"),n(h,`${a(r).churnRate??""}%`)},[()=>Be(a(r).count),()=>ie(a(r).revenue)]),_(v,l)}),e(yt),e(ft),e(gt),e(pt),e(_t),e(ot),$((v,r,l,b,R,u,w,o,f)=>{x(B,1,`metric-trend ${a(c).memberGrowth>=0?"positive":"negative"}`,"svelte-1umk7bb"),n(pe,` ${v??""}%`),n(Ft,r),x(xe,1,`metric-trend ${a(c).mrrGrowth>=0?"positive":"negative"}`,"svelte-1umk7bb"),n(Ut,` ${l??""}%`),n(Bt,b),x(ee,1,`metric-icon ${a(c).churnChange<=0?"emerald":"red"}`,"svelte-1umk7bb"),x(Me,1,`metric-trend ${a(c).churnChange<=0?"positive":"negative"}`,"svelte-1umk7bb"),n(Kt,` ${R??""}%`),n(Vt,`${a(c).churnRate??""}%`),x(ze,1,`metric-trend ${a(c).ltvGrowth>=0?"positive":"negative"}`,"svelte-1umk7bb"),n(Yt,` ${u??""}%`),n(Zt,w),I(it,"d",`M 0 200 ${o??""} L 600 200 Z`),I(bt,"d",`M ${f??""}`)},[()=>Math.abs(a(c).memberGrowth),()=>Be(a(c).totalMembers),()=>Math.abs(a(c).mrrGrowth),()=>ie(a(c).mrr),()=>Math.abs(a(c).churnChange),()=>Math.abs(a(c).ltvGrowth),()=>ie(a(c).avgLtv),()=>a(j).map((v,r)=>{const l=r/(a(j).length-1)*600,b=200-v.mrr/1e5*180;return`L ${l} ${b}`}).join(" "),()=>a(j).map((v,r)=>{const l=r/(a(j).length-1)*600,b=200-v.mrr/1e5*180;return`${r===0?"M":"L"} ${l} ${b}`}).join(" ")]),_(g,m)};H(L,g=>{!a(le)||a(V)?g(F):g(U,!1)},!0)}_(d,G)};H(Lt,d=>{a(re)?d(Dt):d(St,!1)})}e(de),ha(W,()=>a(A),d=>k(A,d)),_($t,de),ka()}la(["click","change"]);export{Na as component};
