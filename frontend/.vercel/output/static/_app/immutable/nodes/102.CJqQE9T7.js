import{z as ya,p as xa,s as T,A as Ye,b as Ut,g as e,o as Sa,f as _,a9 as wa,d as ue,i as S,q as s,R as ka,e as r,bM as Ot,ao as Va,N as se,w as y,bJ as Se,bG as Ze,h as n,j as Ra,c as d,as as Ta,n as pe,at as za,r as a,H,bH as fe,Q as re,al as gt,x as m,bx as Aa,Z as bt,k as Ie,_ as we,bI as Ba,cW as Ca,O as et,bO as $t,aS as Ht,aH as Ea,K as yt,v as xt,aD as jt,bU as Da,bN as Ma,bV as Pa,c2 as La}from"../chunks/C_QN0JMx.js";import{a as N}from"../chunks/lN6oCIqA.js";const U={rooms:"/api/trading-rooms",roomBySlug:v=>`/api/trading-rooms/${v}`,roomVideos:v=>`/api/trading-rooms/${v}/videos`,traders:"/api/trading-rooms/traders",admin:{rooms:"/api/admin/trading-rooms",roomById:v=>`/api/admin/trading-rooms/${v}`,traders:"/api/admin/trading-rooms/traders",traderById:v=>`/api/admin/trading-rooms/traders/${v}`,videos:"/api/admin/trading-rooms/videos",videosByRoom:v=>`/api/admin/trading-rooms/videos/${v}`,videoById:v=>`/api/admin/trading-rooms/videos/${v}`,videosBulk:"/api/admin/trading-rooms/videos/bulk"}},Fa={list:async v=>N.get(U.rooms,v),getBySlug:async v=>N.get(U.roomBySlug(v)),create:async v=>N.post(U.admin.rooms,v),update:async(v,ee)=>N.put(U.admin.roomById(v),ee),delete:async v=>N.delete(U.admin.roomById(v))},Ia={list:async v=>N.get(U.admin.traders,v),create:async v=>N.post(U.admin.traders,v),update:async(v,ee)=>N.put(U.admin.traderById(v),ee),delete:async v=>N.delete(U.admin.traderById(v))},Na={listByRoom:async(v,ee)=>N.get(U.roomVideos(v),ee),adminListByRoom:async(v,ee)=>N.get(U.admin.videosByRoom(v),ee),create:async v=>N.post(U.admin.videos,v),update:async(v,ee)=>N.put(U.admin.videoById(v),ee),delete:async v=>N.delete(U.admin.videoById(v)),bulkCreate:async v=>N.post(U.admin.videosBulk,{videos:v})},ge={rooms:Fa,traders:Ia,videos:Na};var Ua=_('<div class="alert alert-success svelte-e8ihs5"><!> </div>'),Oa=_('<div class="alert alert-error svelte-e8ihs5"><!> <button class="alert-close svelte-e8ihs5"><!></button></div>'),$a=_('<div class="room-selector loading svelte-e8ihs5"><div class="spinner svelte-e8ihs5"></div> <p class="svelte-e8ihs5">Loading rooms...</p></div>'),Ha=_('<div class="room-selector empty svelte-e8ihs5"><!> <p class="svelte-e8ihs5">No trading rooms found. Create rooms in the Trading Rooms admin.</p></div>'),ja=_('<button><span class="room-name"> </span> <span class="room-count svelte-e8ihs5"> </span></button>'),Ka=_('<p class="no-rooms svelte-e8ihs5">No trading rooms</p>'),Qa=_('<button><span class="room-name"> </span> <span class="room-count svelte-e8ihs5"> </span></button>'),Wa=_('<p class="no-rooms svelte-e8ihs5">No alert services</p>'),qa=_('<div class="room-selector svelte-e8ihs5"><div class="room-group"><h3 class="room-group-title svelte-e8ihs5"><!> Trading Rooms</h3> <div class="room-tabs svelte-e8ihs5"><!> <!></div></div> <div class="room-group"><h3 class="room-group-title svelte-e8ihs5"><!> Alert Services</h3> <div class="room-tabs svelte-e8ihs5"><!> <!></div></div></div>'),Ga=_('<div class="selected-room-header svelte-e8ihs5"><div class="selected-room-info svelte-e8ihs5"><h2 class="svelte-e8ihs5"> </h2> <span class="room-type-badge svelte-e8ihs5"> </span></div> <div class="selected-room-stats svelte-e8ihs5"><div class="stat svelte-e8ihs5"><span class="stat-value svelte-e8ihs5"> </span> <span class="stat-label svelte-e8ihs5">Videos</span></div> <div class="stat svelte-e8ihs5"><span class="stat-value svelte-e8ihs5"> </span> <span class="stat-label svelte-e8ihs5">Total Views</span></div> <div class="stat svelte-e8ihs5"><span class="stat-value svelte-e8ihs5"> </span> <span class="stat-label svelte-e8ihs5">Published</span></div></div></div>'),Ja=_("<option> </option>"),Xa=_("<option> </option>"),Ya=_('<div class="loading-state svelte-e8ihs5"><div class="spinner svelte-e8ihs5"></div> <p>Loading videos...</p></div>'),Za=_('<div class="error-state svelte-e8ihs5"><p> </p> <button>Try Again</button></div>'),es=_('<div class="empty-state svelte-e8ihs5"><!> <h3 class="svelte-e8ihs5">No videos found</h3> <p class="svelte-e8ihs5"><!></p> <button class="btn-primary svelte-e8ihs5"><!> Add Video</button></div>'),ts=_('<img alt="" class="svelte-e8ihs5"/>'),as=_('<div class="thumbnail-placeholder-small svelte-e8ihs5"><!></div>'),ss=_('<span class="duration-badge svelte-e8ihs5"> </span>'),rs=_('<span class="category-tag svelte-e8ihs5"> </span>'),is=_('<span class="category-more svelte-e8ihs5"> </span>'),os=_('<img alt="" class="trader-avatar svelte-e8ihs5"/>'),ls=_('<div class="trader-avatar-placeholder svelte-e8ihs5"><!></div>'),ds=_("<!> Published",1),ns=_("<!> Draft",1),vs=_('<tr class="svelte-e8ihs5"><td class="video-cell svelte-e8ihs5"><div class="video-thumbnail-small svelte-e8ihs5"><!> <!></div> <div class="video-info svelte-e8ihs5"><span class="video-title svelte-e8ihs5"> </span> <span class="video-platform svelte-e8ihs5"> </span></div></td><td class="categories-cell svelte-e8ihs5"><div class="category-tags svelte-e8ihs5"><!> <!></div></td><td class="svelte-e8ihs5"><div class="trader-cell svelte-e8ihs5"><!> <span> </span></div></td><td class="svelte-e8ihs5"> </td><td class="svelte-e8ihs5"> </td><td class="svelte-e8ihs5"><button><!></button></td><td class="svelte-e8ihs5"><div class="action-buttons svelte-e8ihs5"><button class="btn-icon svelte-e8ihs5" title="Edit"><!></button> <button class="btn-icon svelte-e8ihs5" title="Preview"><!></button> <button class="btn-icon danger svelte-e8ihs5" title="Delete"><!></button></div></td></tr>'),cs=_('<div class="videos-table-wrapper svelte-e8ihs5"><table class="videos-table svelte-e8ihs5"><thead><tr><th class="svelte-e8ihs5">Video</th><th class="svelte-e8ihs5">Categories</th><th class="svelte-e8ihs5">Trader</th><th class="svelte-e8ihs5">Date</th><th class="svelte-e8ihs5">Views</th><th class="svelte-e8ihs5">Status</th><th class="svelte-e8ihs5">Actions</th></tr></thead><tbody></tbody></table></div>'),_s=_("<option> </option>"),us=_("<option> </option>"),ps=_('<div class="form-group svelte-e8ihs5"><label for="room-select" class="svelte-e8ihs5">Upload to Room/Service</label> <select id="room-select" class="svelte-e8ihs5"><optgroup label="Trading Rooms"></optgroup><optgroup label="Alert Services"></optgroup></select></div>'),hs=_('<span class="detected-platform svelte-e8ihs5"> </span>'),ms=_('<button type="button"><!> </button>'),fs=_('<span class="selected-tag svelte-e8ihs5"> <button type="button" class="svelte-e8ihs5"><!></button></span>'),gs=_('<div class="selected-categories svelte-e8ihs5"><span class="selected-count svelte-e8ihs5"> </span> <!></div>'),bs=_("<option> </option>"),ys=_('<span class="btn-spinner svelte-e8ihs5"></span> Saving...',1),xs=_('<div class="modal-overlay svelte-e8ihs5" role="button" tabindex="0"><div class="modal modal-large svelte-e8ihs5" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-e8ihs5"><h2 class="svelte-e8ihs5"> </h2> <button class="modal-close svelte-e8ihs5" type="button" aria-label="Close">&times;</button></div> <div class="modal-body svelte-e8ihs5"><!> <div class="form-group svelte-e8ihs5"><label for="video-url" class="svelte-e8ihs5">Video URL</label> <input type="url" id="video-url" placeholder="https://vimeo.com/..." class="svelte-e8ihs5"/> <span class="form-hint svelte-e8ihs5">Supports: Vimeo, YouTube, Bunny.net, Wistia, or direct URL <!></span></div> <div class="form-group svelte-e8ihs5"><label for="video-title" class="svelte-e8ihs5">Title</label> <input type="text" id="video-title" placeholder="Risk Management Fundamentals" class="svelte-e8ihs5"/></div> <div class="form-group svelte-e8ihs5"><label for="video-description" class="svelte-e8ihs5">Description</label> <textarea id="video-description" rows="3" placeholder="Brief description of the video content..." class="svelte-e8ihs5"></textarea></div> <div class="form-group svelte-e8ihs5"><label class="svelte-e8ihs5"><!> Categories (select all that apply)</label> <div class="categories-grid svelte-e8ihs5"></div> <!></div> <div class="form-row svelte-e8ihs5"><div class="form-group svelte-e8ihs5"><label for="trader-select" class="svelte-e8ihs5">Trader</label> <select id="trader-select" class="svelte-e8ihs5"><option>Select trader...</option><!></select></div> <div class="form-group svelte-e8ihs5"><label for="video-date" class="svelte-e8ihs5">Video Date</label> <input type="date" id="video-date" class="svelte-e8ihs5"/></div></div> <div class="form-group svelte-e8ihs5"><label for="thumbnail-url" class="svelte-e8ihs5">Thumbnail URL (optional)</label> <input type="url" id="thumbnail-url" placeholder="https://..." class="svelte-e8ihs5"/></div> <div class="form-options svelte-e8ihs5"><label class="checkbox-label svelte-e8ihs5"><input type="checkbox" class="svelte-e8ihs5"/> <span>Publish immediately</span></label> <label class="checkbox-label svelte-e8ihs5"><input type="checkbox" class="svelte-e8ihs5"/> <span>Feature this video</span></label></div></div> <div class="modal-footer svelte-e8ihs5"><button class="btn-secondary svelte-e8ihs5" type="button">Cancel</button> <button class="btn-primary svelte-e8ihs5"><!></button></div></div></div>'),Ss=_('<div class="videos-page svelte-e8ihs5"><!> <!> <div class="page-header svelte-e8ihs5"><div><h1 class="svelte-e8ihs5">Trading Room Videos</h1> <p class="page-description svelte-e8ihs5">Manage daily videos with category tags for each room and service</p></div> <div class="header-actions svelte-e8ihs5"><button class="btn-refresh svelte-e8ihs5"><!></button> <button class="btn-primary svelte-e8ihs5"><!> Add Video</button></div></div> <!> <!> <div class="filters-bar svelte-e8ihs5"><div class="search-box svelte-e8ihs5"><!> <label for="search-videos" class="sr-only svelte-e8ihs5">Search videos or categories</label> <input type="text" id="search-videos" placeholder="Search videos, categories..." class="svelte-e8ihs5"/></div> <div class="filter-group"><label for="category-filter" class="sr-only svelte-e8ihs5">Filter by category</label> <select id="category-filter" class="filter-select svelte-e8ihs5"><option>All Categories</option><!></select></div> <div class="filter-group"><label for="trader-filter" class="sr-only svelte-e8ihs5">Filter by trader</label> <select id="trader-filter" class="filter-select svelte-e8ihs5"><option>All Traders</option><!></select></div></div> <!></div> <!>',1);function Vs(v,ee){xa(ee,!0);const tt=[{id:"risk-management",name:"Risk Management",color:"#ef4444"},{id:"options-strategies",name:"Options Strategies",color:"#f59e0b"},{id:"macro-structure",name:"Macro Structure",color:"#10b981"},{id:"micro-structure",name:"Micro Structure",color:"#06b6d4"},{id:"psychology",name:"Psychology",color:"#8b5cf6"},{id:"technical-analysis",name:"Technical Analysis",color:"#3b82f6"},{id:"fundamentals",name:"Fundamentals",color:"#ec4899"},{id:"trade-setups",name:"Trade Setups",color:"#14b8a6"},{id:"market-review",name:"Market Review",color:"#6366f1"},{id:"earnings",name:"Earnings",color:"#f97316"},{id:"futures",name:"Futures",color:"#84cc16"},{id:"forex",name:"Forex",color:"#22c55e"},{id:"crypto",name:"Crypto",color:"#a855f7"},{id:"small-accounts",name:"Small Accounts",color:"#eab308"},{id:"position-sizing",name:"Position Sizing",color:"#0ea5e9"},{id:"entry-exit",name:"Entry & Exit",color:"#d946ef"},{id:"scanner-setups",name:"Scanner Setups",color:"#64748b"},{id:"indicators",name:"Indicators",color:"#fb7185"}];function at(t){return tt.find(i=>i.id===t)}let be=T(Ye([])),E=T(null),st=T(Ye([])),ke=T(Ye([])),Ve=T(!0),Ne=T(!0),O=T(""),Ue=T(""),St=T(1),Kt=T(1),Qt=T(0),Re=T(""),Te=T("all"),ze=T("all"),he=T(!1),ie=T(!1),Oe=T(null),$e=T(!1),wt=T(!1),l=T(Ye({trading_room_id:0,trader_id:null,title:"",description:"",video_url:"",video_platform:"vimeo",thumbnail_url:"",video_date:new Date().toISOString().split("T")[0],is_published:!0,is_featured:!1,categories:[]}));function kt(t){e(l).categories.indexOf(t)===-1?e(l).categories=[...e(l).categories,t]:e(l).categories=e(l).categories.filter(c=>c!==t)}function Vt(t){return e(l).categories.includes(t)}async function Wt(){d(Ne,!0),d(O,"");try{const[t,i]=await Promise.all([ge.rooms.list({with_counts:!0}),ge.traders.list({active_only:!0})]);t.success&&(d(be,t.data,!0),e(be).length>0&&!e(E)&&d(E,e(be)[0],!0)),i.success&&d(st,i.data,!0)}catch(t){d(O,t instanceof Error?t.message:"Failed to load rooms and traders",!0)}finally{d(Ne,!1)}}async function me(){if(e(E)){d(Ve,!0),d(O,"");try{const t=await ge.videos.adminListByRoom(e(E).slug,{published_only:!1,per_page:50,page:e(St)});t.success&&t.data&&(d(ke,t.data.data.map(i=>({...i,categories:i.tags||[]})),!0),d(Kt,t.data.last_page,!0),d(Qt,t.data.total,!0))}catch(t){d(O,t instanceof Error?t.message:"Failed to load videos",!0)}finally{d(Ve,!1)}}}function He(t){d(Ue,t,!0),setTimeout(()=>{d(Ue,"")},3e3)}function Rt(t){d(E,t,!0),d(St,1),me()}function Tt(){d(l,{trading_room_id:e(E)?.id||0,trader_id:null,title:"",description:"",video_url:"",video_platform:"vimeo",thumbnail_url:"",video_date:new Date().toISOString().split("T")[0],is_published:!0,is_featured:!1,categories:[]},!0),d(he,!0)}function qt(t){d(Oe,t,!0),d(l,{trading_room_id:t.trading_room_id,trader_id:t.trader_id||null,title:t.title,description:t.description||"",video_url:t.video_url,video_platform:t.video_platform,thumbnail_url:t.thumbnail_url||"",video_date:typeof t.video_date=="string"?t.video_date.split("T")[0]:t.video_date,is_published:t.is_published,is_featured:t.is_featured,categories:t.categories||[]},!0),d(ie,!0)}async function Gt(){d($e,!0),d(O,"");try{const t={trading_room_id:e(l).trading_room_id,trader_id:e(l).trader_id,title:e(l).title,description:e(l).description,video_url:e(l).video_url,video_platform:e(l).video_platform,thumbnail_url:e(l).thumbnail_url||void 0,video_date:e(l).video_date,is_published:e(l).is_published,is_featured:e(l).is_featured,tags:e(l).categories};e(Oe)?(await ge.videos.update(e(Oe).id,t)).success&&He("Video updated successfully"):(await ge.videos.create(t)).success&&He("Video created successfully"),d(he,!1),d(ie,!1),d(Oe,null),await me()}catch(t){d(O,t instanceof Error?t.message:"Failed to save video",!0)}finally{d($e,!1)}}async function Jt(t){if(confirm(`Are you sure you want to delete "${t.title}"?`)){d(wt,!0),d(O,"");try{(await ge.videos.delete(t.id)).success&&(He("Video deleted successfully"),await me())}catch(i){d(O,i instanceof Error?i.message:"Failed to delete video",!0)}finally{d(wt,!1)}}}async function Xt(t){try{const i=!t.is_published;(await ge.videos.update(t.id,{is_published:i})).success&&(t.is_published=i,He(`Video ${i?"published":"unpublished"}`))}catch(i){d(O,i instanceof Error?i.message:"Failed to update video",!0)}}function Yt(t){if(!t)return"";const i=Math.floor(t/3600),c=Math.floor(t%3600/60),g=t%60;return i>0?`${i}:${c.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`:`${c}:${g.toString().padStart(2,"0")}`}function Zt(t){return new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function zt(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}function ea(t){return t.includes("vimeo.com")?"vimeo":t.includes("youtube.com")||t.includes("youtu.be")?"youtube":t.includes("bunny.net")?"bunny":t.includes("wistia.com")?"wistia":"direct"}Ut(()=>{e(l).video_url&&(e(l).video_platform=ea(e(l).video_url))});const rt=pe(()=>e(be).filter(t=>t.type==="trading_room")),it=pe(()=>e(be).filter(t=>t.type==="alert_service")),At=pe(()=>e(ke).filter(t=>{const i=e(Re).toLowerCase(),c=t.categories.map(k=>at(k)?.name.toLowerCase()||""),g=!e(Re)||t.title.toLowerCase().includes(i)||t.description?.toLowerCase().includes(i)||c.some(k=>k.includes(i)),w=e(Te)==="all"||t.trader_id?.toString()===e(Te),x=e(ze)==="all"||t.categories.includes(e(ze));return g&&w&&x})),ta=pe(()=>e(ke).reduce((t,i)=>t+i.views_count,0)),aa=pe(()=>e(ke).filter(t=>t.is_published).length);Sa(async()=>{await Wt(),e(E)&&await me()}),Ut(()=>{e(E)&&!e(Ne)&&me()});var Bt=Ss();wa("e8ihs5",t=>{Ta(()=>{za.title="Video Management - Trading Rooms | Admin"})});var ot=ue(Bt),Ct=s(ot);{var sa=t=>{var i=Ua(),c=s(i);gt(c,{size:18});var g=r(c);a(i),y(()=>m(g,` ${e(Ue)??""}`)),n(t,i)};S(Ct,t=>{e(Ue)&&t(sa)})}var Et=r(Ct,2);{var ra=t=>{var i=Oa(),c=s(i);Aa(c,{size:18});var g=r(c),w=r(g);w.__click=()=>d(O,"");var x=s(w);bt(x,{size:16}),a(w),a(i),y(()=>m(g,` ${e(O)??""} `)),n(t,i)};S(Et,t=>{e(O)&&t(ra)})}var lt=r(Et,2),Dt=r(s(lt),2),Ae=s(Dt);Ae.__click=()=>me();var ia=s(Ae);{let t=pe(()=>e(Ve)?"spinning":"");ka(ia,{size:18,get class(){return e(t)}})}a(Ae);var je=r(Ae,2);je.__click=Tt;var oa=s(je);Ot(oa,{size:18}),H(),a(je),a(Dt),a(lt);var Mt=r(lt,2);{var la=t=>{var i=$a();n(t,i)},da=t=>{var i=Ie(),c=ue(i);{var g=x=>{var k=Ha(),z=s(k);Ht(z,{size:32}),H(2),a(k),n(x,k)},w=x=>{var k=qa(),z=s(k),j=s(z),te=s(j);Ht(te,{size:16}),H(),a(j);var D=r(j,2),M=s(D);se(M,17,()=>e(rt),re,(F,V)=>{var A=ja();let le;A.__click=()=>Rt(e(V));let q;var G=s(A),de=s(G,!0);a(G);var ae=r(G,2),ne=s(ae,!0);a(ae),a(A),y(()=>{le=et(A,1,"room-tab svelte-e8ihs5",null,le,{active:e(E)?.id===e(V).id}),q=we(A,"",q,{"--room-color":e(V).color||"#6366f1"}),m(de,e(V).name),m(ne,e(V).daily_videos_count||0)}),n(F,A)});var $=r(M,2);{var K=F=>{var V=Ka();n(F,V)};S($,F=>{e(rt).length===0&&F(K)})}a(D),a(z);var oe=r(z,2),h=s(oe),Q=s(h);Ea(Q,{size:16}),H(),a(h);var P=r(h,2),W=s(P);se(W,17,()=>e(it),re,(F,V)=>{var A=Qa();let le;A.__click=()=>Rt(e(V));let q;var G=s(A),de=s(G,!0);a(G);var ae=r(G,2),ne=s(ae,!0);a(ae),a(A),y(()=>{le=et(A,1,"room-tab svelte-e8ihs5",null,le,{active:e(E)?.id===e(V).id}),q=we(A,"",q,{"--room-color":e(V).color||"#8b5cf6"}),m(de,e(V).name),m(ne,e(V).daily_videos_count||0)}),n(F,A)});var L=r(W,2);{var J=F=>{var V=Wa();n(F,V)};S(L,F=>{e(it).length===0&&F(J)})}a(P),a(oe),a(k),n(x,k)};S(c,x=>{e(be).length===0?x(g):x(w,!1)},!0)}n(t,i)};S(Mt,t=>{e(Ne)?t(la):t(da,!1)})}var Pt=r(Mt,2);{var na=t=>{var i=Ga();let c;var g=s(i),w=s(g),x=s(w,!0);a(w);var k=r(w,2),z=s(k,!0);a(k),a(g);var j=r(g,2),te=s(j),D=s(te),M=s(D,!0);a(D),H(2),a(te);var $=r(te,2),K=s($),oe=s(K,!0);a(K),H(2),a($);var h=r($,2),Q=s(h),P=s(Q,!0);a(Q),H(2),a(h),a(j),a(i),y(W=>{c=we(i,"",c,{"--room-color":e(E).color}),m(x,e(E).name),m(z,e(E).type==="trading_room"?"Trading Room":"Alert Service"),m(M,e(ke).length),m(oe,W),m(P,e(aa))},[()=>zt(e(ta))]),n(t,i)};S(Pt,t=>{e(E)&&t(na)})}var dt=r(Pt,2),nt=s(dt),Lt=s(nt);Va(Lt,{size:18});var Ft=r(Lt,4);fe(Ft),a(nt);var vt=r(nt,2),ct=r(s(vt),2),_t=s(ct);_t.value=_t.__value="all";var va=r(_t);se(va,17,()=>tt,re,(t,i)=>{var c=Ja(),g=s(c,!0);a(c);var w={};y(()=>{m(g,e(i).name),w!==(w=e(i).id)&&(c.value=(c.__value=e(i).id)??"")}),n(t,c)}),a(ct),a(vt);var It=r(vt,2),ut=r(s(It),2),pt=s(ut);pt.value=pt.__value="all";var ca=r(pt);se(ca,17,()=>e(st),re,(t,i)=>{var c=Xa(),g=s(c,!0);a(c);var w={};y(x=>{m(g,e(i).name),w!==(w=x)&&(c.value=(c.__value=x)??"")},[()=>e(i).id.toString()]),n(t,c)}),a(ut),a(It),a(dt);var _a=r(dt,2);{var ua=t=>{var i=Ya();n(t,i)},pa=t=>{var i=Ie(),c=ue(i);{var g=x=>{var k=Za(),z=s(k),j=s(z,!0);a(z);var te=r(z,2);te.__click=()=>me(),a(k),y(()=>m(j,e(O))),n(x,k)},w=x=>{var k=Ie(),z=ue(k);{var j=D=>{var M=es(),$=s(M);jt($,{size:64});var K=r($,4),oe=s(K);{var h=L=>{var J=xt("No videos match your filters. Try adjusting your search.");n(L,J)},Q=L=>{var J=xt();y(()=>m(J,`Add your first video to ${e(E)?.name??""}`)),n(L,J)};S(oe,L=>{e(Re)||e(ze)!=="all"||e(Te)!=="all"?L(h):L(Q,!1)})}a(K);var P=r(K,2);P.__click=Tt;var W=s(P);Ot(W,{size:18}),H(),a(P),a(M),n(D,M)},te=D=>{var M=cs(),$=s(M),K=r(s($));se(K,21,()=>e(At),re,(oe,h)=>{var Q=vs(),P=s(Q),W=s(P),L=s(W);{var J=p=>{var u=ts();y(()=>yt(u,"src",e(h).thumbnail_url)),n(p,u)},F=p=>{var u=as(),C=s(u);jt(C,{size:20}),a(u),n(p,u)};S(L,p=>{e(h).thumbnail_url?p(J):p(F,!1)})}var V=r(L,2);{var A=p=>{var u=ss(),C=s(u,!0);a(u),y(Je=>m(C,Je),[()=>Yt(e(h).duration)]),n(p,u)};S(V,p=>{e(h).duration&&p(A)})}a(W);var le=r(W,2),q=s(le),G=s(q,!0);a(q);var de=r(q,2),ae=s(de,!0);a(de),a(le),a(P);var ne=r(P),Be=s(ne),Ce=s(Be);se(Ce,17,()=>e(h).categories.slice(0,3),re,(p,u)=>{const C=pe(()=>at(e(u)));var Je=Ie(),fa=ue(Je);{var ga=ft=>{var Xe=rs();let Nt;var ba=s(Xe,!0);a(Xe),y(()=>{Nt=we(Xe,"",Nt,{"--tag-color":e(C).color}),m(ba,e(C).name)}),n(ft,Xe)};S(fa,ft=>{e(C)&&ft(ga)})}n(p,Je)});var Ee=r(Ce,2);{var Ke=p=>{var u=is(),C=s(u);a(u),y(()=>m(C,`+${e(h).categories.length-3}`)),n(p,u)};S(Ee,p=>{e(h).categories.length>3&&p(Ke)})}a(Be),a(ne);var ye=r(ne),xe=s(ye),De=s(xe);{var Qe=p=>{var u=os();y(()=>yt(u,"src",e(h).trader.photo_url)),n(p,u)},We=p=>{var u=ls(),C=s(u);La(C,{size:16}),a(u),n(p,u)};S(De,p=>{e(h).trader?.photo_url?p(Qe):p(We,!1)})}var Me=r(De,2),qe=s(Me,!0);a(Me),a(xe),a(ye);var ce=r(ye),ht=s(ce,!0);a(ce);var Pe=r(ce),mt=s(Pe,!0);a(Pe);var o=r(Pe),f=s(o);let b;f.__click=()=>Xt(e(h));var X=s(f);{var Y=p=>{var u=ds(),C=ue(u);gt(C,{size:14}),H(),n(p,u)},Z=p=>{var u=ns(),C=ue(u);bt(C,{size:14}),H(),n(p,u)};S(X,p=>{e(h).is_published?p(Y):p(Z,!1)})}a(f),a(o);var I=r(o),R=s(I),B=s(R);B.__click=()=>qt(e(h));var ve=s(B);Da(ve,{size:16}),a(B);var Le=r(B,2),Fe=s(Le);Ma(Fe,{size:16}),a(Le);var _e=r(Le,2);_e.__click=()=>Jt(e(h));var Ge=s(_e);Pa(Ge,{size:16}),a(_e),a(R),a(I),a(Q),y((p,u)=>{m(G,e(h).title),m(ae,e(h).video_platform),m(qe,e(h).trader?.name||"Unassigned"),m(ht,p),m(mt,u),b=et(f,1,"status-toggle svelte-e8ihs5",null,b,{published:e(h).is_published})},[()=>Zt(e(h).video_date),()=>zt(e(h).views_count)]),n(oe,Q)}),a(K),a($),a(M),n(D,M)};S(z,D=>{e(At).length===0?D(j):D(te,!1)},!0)}n(x,k)};S(c,x=>{e(O)?x(g):x(w,!1)},!0)}n(t,i)};S(_a,t=>{e(Ve)?t(ua):t(pa,!1)})}a(ot);var ha=r(ot,2);{var ma=t=>{var i=xs();i.__click=()=>{d(he,!1),d(ie,!1)},i.__keydown=o=>o.key==="Escape"&&(d(he,!1),d(ie,!1));var c=s(i);c.__click=o=>o.stopPropagation(),c.__keydown=o=>o.stopPropagation();var g=s(c),w=s(g),x=s(w,!0);a(w);var k=r(w,2);k.__click=()=>{d(he,!1),d(ie,!1)},a(g);var z=r(g,2),j=s(z);{var te=o=>{var f=ps(),b=r(s(f),2),X=s(b);se(X,21,()=>e(rt),re,(Z,I)=>{var R=_s(),B=s(R,!0);a(R);var ve={};y(()=>{m(B,e(I).name),ve!==(ve=e(I).id)&&(R.value=(R.__value=e(I).id)??"")}),n(Z,R)}),a(X);var Y=r(X);se(Y,21,()=>e(it),re,(Z,I)=>{var R=us(),B=s(R,!0);a(R);var ve={};y(()=>{m(B,e(I).name),ve!==(ve=e(I).id)&&(R.value=(R.__value=e(I).id)??"")}),n(Z,R)}),a(Y),a(b),a(f),Ze(b,()=>e(l).trading_room_id,Z=>e(l).trading_room_id=Z),n(o,f)};S(j,o=>{e(ie)||o(te)})}var D=r(j,2),M=r(s(D),2);fe(M);var $=r(M,2),K=r(s($));{var oe=o=>{var f=hs(),b=s(f);a(f),y(()=>m(b,`Detected: ${e(l).video_platform??""}`)),n(o,f)};S(K,o=>{e(l).video_platform!=="direct"&&o(oe)})}a($),a(D);var h=r(D,2),Q=r(s(h),2);fe(Q),a(h);var P=r(h,2),W=r(s(P),2);Ba(W),a(P);var L=r(P,2),J=s(L),F=s(J);Ca(F,{size:16,style:"display: inline; vertical-align: middle; margin-right: 4px;"}),H(),a(J);var V=r(J,2);se(V,21,()=>tt,re,(o,f)=>{var b=ms();let X;b.__click=()=>kt(e(f).id);let Y;var Z=s(b);{var I=B=>{gt(B,{size:14})};S(Z,B=>{Vt(e(f).id)&&B(I)})}var R=r(Z);a(b),y(B=>{X=et(b,1,"category-btn svelte-e8ihs5",null,X,B),Y=we(b,"",Y,{"--tag-color":e(f).color}),m(R,` ${e(f).name??""}`)},[()=>({selected:Vt(e(f).id)})]),n(o,b)}),a(V);var A=r(V,2);{var le=o=>{var f=gs(),b=s(f),X=s(b);a(b);var Y=r(b,2);se(Y,17,()=>e(l).categories,re,(Z,I)=>{const R=pe(()=>at(e(I)));var B=Ie(),ve=ue(B);{var Le=Fe=>{var _e=fs();let Ge;var p=s(_e),u=r(p);u.__click=()=>kt(e(I));var C=s(u);bt(C,{size:12}),a(u),a(_e),y(()=>{Ge=we(_e,"",Ge,{"--tag-color":e(R).color}),m(p,`${e(R).name??""} `),yt(u,"aria-label",`Remove ${e(R).name??""}`)}),n(Fe,_e)};S(ve,Fe=>{e(R)&&Fe(Le)})}n(Z,B)}),a(f),y(()=>m(X,`${e(l).categories.length??""} selected:`)),n(o,f)};S(A,o=>{e(l).categories.length>0&&o(le)})}a(L);var q=r(L,2),G=s(q),de=r(s(G),2),ae=s(de);ae.value=(ae.__value=null)??"";var ne=r(ae);se(ne,17,()=>e(st),re,(o,f)=>{var b=bs(),X=s(b,!0);a(b);var Y={};y(()=>{m(X,e(f).name),Y!==(Y=e(f).id)&&(b.value=(b.__value=e(f).id)??"")}),n(o,b)}),a(de),a(G);var Be=r(G,2),Ce=r(s(Be),2);fe(Ce),a(Be),a(q);var Ee=r(q,2),Ke=r(s(Ee),2);fe(Ke),a(Ee);var ye=r(Ee,2),xe=s(ye),De=s(xe);fe(De),H(2),a(xe);var Qe=r(xe,2),We=s(Qe);fe(We),H(2),a(Qe),a(ye),a(z);var Me=r(z,2),qe=s(Me);qe.__click=()=>{d(he,!1),d(ie,!1)};var ce=r(qe,2);ce.__click=Gt;var ht=s(ce);{var Pe=o=>{var f=ys();H(),n(o,f)},mt=o=>{var f=xt();y(()=>m(f,e(ie)?"Update Video":"Add Video")),n(o,f)};S(ht,o=>{e($e)?o(Pe):o(mt,!1)})}a(ce),a(Me),a(c),a(i),y(()=>{m(x,e(ie)?"Edit Video":"Add New Video"),ce.disabled=e($e)||!e(l).title||!e(l).video_url}),Se(M,()=>e(l).video_url,o=>e(l).video_url=o),Se(Q,()=>e(l).title,o=>e(l).title=o),Se(W,()=>e(l).description,o=>e(l).description=o),Ze(de,()=>e(l).trader_id,o=>e(l).trader_id=o),Se(Ce,()=>e(l).video_date,o=>e(l).video_date=o),Se(Ke,()=>e(l).thumbnail_url,o=>e(l).thumbnail_url=o),$t(De,()=>e(l).is_published,o=>e(l).is_published=o),$t(We,()=>e(l).is_featured,o=>e(l).is_featured=o),n(t,i)};S(ha,t=>{(e(he)||e(ie))&&t(ma)})}y(()=>{Ae.disabled=e(Ve),je.disabled=!e(E)}),Se(Ft,()=>e(Re),t=>d(Re,t)),Ze(ct,()=>e(ze),t=>d(ze,t)),Ze(ut,()=>e(Te),t=>d(Te,t)),n(v,Bt),Ra()}ya(["click","keydown"]);export{Vs as component};
