import{z as Tt,p as Mt,o as It,a3 as Pt,f as _,a9 as qt,d as me,F as be,q as a,aM as Ot,ay as Qe,R as Ut,c as i,e as s,aB as At,ao as We,i as H,w as E,h as c,j as Et,aP as Y,as as Nt,at as Lt,H as G,r as t,g as e,O as ve,x as k,bM as Te,k as Vt,N as j,Q as B,Z as Me,bH as pe,bK as de,bG as Ye,bJ as ge,al as et,aX as ie,_ as Ie,K as Ht,U as Pe,M as Ft,bU as tt,bV as qe,bZ as Rt,n as Gt,d0 as jt}from"../chunks/C_QN0JMx.js";import{a as ee}from"../chunks/ByEkyPua.js";var Bt=_('<button class="btn-primary svelte-1u41533"><!> New Segment</button>'),Kt=_('<button class="btn-primary svelte-1u41533"><!> New Tag</button>'),Xt=_('<div class="skeleton skeleton-card svelte-1u41533"></div>'),Zt=_('<div class="loading-grid svelte-1u41533"></div>'),Jt=_('<span class="system-badge svelte-1u41533">System</span>'),Qt=_('<span class="condition-tag svelte-1u41533"> </span>'),Wt=_('<button class="btn-icon svelte-1u41533" title="Edit"><!></button> <button class="btn-icon danger svelte-1u41533" title="Delete"><!></button>',1),Yt=_('<div><div class="segment-header svelte-1u41533"><div class="segment-info svelte-1u41533"><h3 class="svelte-1u41533"> </h3> <!></div> <div class="segment-count svelte-1u41533"><!> </div></div> <p class="segment-description svelte-1u41533"> </p> <div class="segment-conditions svelte-1u41533"></div> <div class="segment-footer svelte-1u41533"><span class="updated svelte-1u41533"> </span> <div class="segment-actions svelte-1u41533"><button class="btn-icon svelte-1u41533" title="View members"><!></button> <button class="btn-icon svelte-1u41533" title="Send campaign"><!></button> <!></div></div></div>'),ea=_('<div class="segments-grid svelte-1u41533"></div>'),ta=_('<div class="tag-card svelte-1u41533"><div class="tag-header svelte-1u41533"><div class="tag-name svelte-1u41533"><span class="tag-dot svelte-1u41533"></span> </div> <div class="tag-count svelte-1u41533"> </div></div> <div class="tag-actions svelte-1u41533"><button class="btn-secondary small svelte-1u41533"><!> View Members</button> <button class="btn-icon svelte-1u41533" title="Edit"><!></button> <button class="btn-icon danger svelte-1u41533" title="Delete"><!></button></div></div>'),aa=_('<div class="tags-grid svelte-1u41533"></div>'),sa=_('<span class="filter-pill svelte-1u41533"> </span>'),la=_('<div class="filter-card svelte-1u41533"><div class="filter-info svelte-1u41533"><h3 class="svelte-1u41533"> </h3> <div class="filter-meta svelte-1u41533"><span class="svelte-1u41533"> </span> <span class="svelte-1u41533"> </span></div></div> <div class="filter-pills svelte-1u41533"></div> <div class="filter-actions svelte-1u41533"><button class="btn-primary small svelte-1u41533">Apply Filter</button> <button class="btn-icon svelte-1u41533" title="Duplicate"><!></button> <button class="btn-icon danger svelte-1u41533" title="Delete"><!></button></div></div>'),ra=_('<div class="empty-state svelte-1u41533"><!> <h3 class="svelte-1u41533">No saved filters</h3> <p class="svelte-1u41533">Save filters from the Members page to quickly apply them later</p></div>'),ia=_('<div class="filters-list svelte-1u41533"><!> <!></div>'),na=_("<!> <!> <!>",1),oa=_('<option class="svelte-1u41533"> </option>'),va=_('<option class="svelte-1u41533"> </option>'),da=_('<div class="condition-row svelte-1u41533"><select class="svelte-1u41533"></select> <select class="svelte-1u41533"></select> <input type="text" placeholder="Value" class="svelte-1u41533"/> <button class="btn-icon danger svelte-1u41533"><!></button></div>'),ua=_('<div class="modal-overlay svelte-1u41533" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content large svelte-1u41533" role="document"><div class="modal-header svelte-1u41533"><h2 class="svelte-1u41533">Create Smart Segment</h2> <button class="close-btn svelte-1u41533"><!></button></div> <div class="modal-body svelte-1u41533"><div class="form-group svelte-1u41533"><label for="segment-name" class="svelte-1u41533">Segment Name</label> <input id="segment-name" type="text" placeholder="e.g., High Value Customers" class="svelte-1u41533"/></div> <div class="form-group svelte-1u41533"><label for="segment-description" class="svelte-1u41533">Description</label> <input id="segment-description" type="text" placeholder="Brief description of this segment" class="svelte-1u41533"/></div> <div class="conditions-section svelte-1u41533"><div class="conditions-header svelte-1u41533"><span class="conditions-label svelte-1u41533">Conditions</span> <span class="match-label svelte-1u41533">Members must match ALL conditions</span></div> <!> <button class="btn-secondary svelte-1u41533"><!> Add Condition</button></div></div> <div class="modal-footer svelte-1u41533"><button class="btn-secondary svelte-1u41533">Cancel</button> <button class="btn-primary svelte-1u41533"><!> Create Segment</button></div></div></div>'),ca=_("<button></button>"),_a=_('<div class="modal-overlay svelte-1u41533" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content svelte-1u41533" role="document"><div class="modal-header svelte-1u41533"><h2 class="svelte-1u41533">Create New Tag</h2> <button class="close-btn svelte-1u41533"><!></button></div> <div class="modal-body svelte-1u41533"><div class="form-group svelte-1u41533"><label for="tag-name" class="svelte-1u41533">Tag Name</label> <input id="tag-name" type="text" placeholder="e.g., VIP" class="svelte-1u41533"/></div> <div class="form-group svelte-1u41533"><span class="form-label svelte-1u41533">Tag Color</span> <div class="color-picker svelte-1u41533"></div></div> <div class="tag-preview svelte-1u41533"><span class="preview-label svelte-1u41533">Preview:</span> <span class="tag-badge svelte-1u41533"> </span></div></div> <div class="modal-footer svelte-1u41533"><button class="btn-secondary svelte-1u41533">Cancel</button> <button class="btn-primary svelte-1u41533"><!> Create Tag</button></div></div></div>'),ma=_('<div class="segments-page svelte-1u41533"><div class="page-header svelte-1u41533"><button class="back-btn svelte-1u41533"><!> Back to Members</button> <div class="header-content svelte-1u41533"><div class="header-title svelte-1u41533"><div class="title-icon svelte-1u41533"><!></div> <div class="svelte-1u41533"><h1 class="svelte-1u41533">Member Segments</h1> <p class="subtitle svelte-1u41533">Organize members with segments, tags, and filters</p></div></div> <div class="header-actions svelte-1u41533"><button class="btn-secondary svelte-1u41533"><!> Refresh</button></div></div></div> <div class="tabs-container svelte-1u41533"><div class="tabs svelte-1u41533"><button><!> </button> <button><!> </button> <button><!> </button></div> <div class="tab-actions svelte-1u41533"><!></div></div> <!></div> <!> <!>',1);function ga(at,st){Mt(st,!1);let fe=Y(!0),N=Y("segments"),K=Y([]),te=Y([]),re=Y([]),ae=Y(!1),se=Y(!1),m=Y({name:"",description:"",conditions:[]}),z=Y({name:"",color:"#6366f1"});const Oe=[{value:"status",label:"Member Status"},{value:"subscription_status",label:"Subscription Status"},{value:"total_spent",label:"Total Spent"},{value:"days_since_signup",label:"Days Since Signup"},{value:"days_since_last_order",label:"Days Since Last Order"},{value:"email_engagement",label:"Email Engagement"},{value:"product",label:"Has Product"},{value:"tag",label:"Has Tag"}],Ue={status:[{value:"eq",label:"Is"},{value:"neq",label:"Is not"}],subscription_status:[{value:"eq",label:"Is"},{value:"neq",label:"Is not"}],total_spent:[{value:"gt",label:"Greater than"},{value:"lt",label:"Less than"},{value:"eq",label:"Equals"},{value:"gte",label:"At least"},{value:"lte",label:"At most"}],days_since_signup:[{value:"gt",label:"Greater than"},{value:"lt",label:"Less than"},{value:"eq",label:"Equals"}],days_since_last_order:[{value:"gt",label:"Greater than"},{value:"lt",label:"Less than"}],email_engagement:[{value:"eq",label:"Is"}],product:[{value:"has",label:"Has"},{value:"not_has",label:"Does not have"}],tag:[{value:"has",label:"Has"},{value:"not_has",label:"Does not have"}]},lt=["#6366f1","#8b5cf6","#ec4899","#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#06b6d4","#3b82f6"];It(async()=>{await Ae()});async function Ae(){i(fe,!0),await new Promise(l=>setTimeout(l,500)),i(K,[{id:1,name:"High Value Customers",description:"Customers with LTV > $500",type:"smart",conditions:[{field:"total_spent",operator:"gt",value:500}],memberCount:847,lastUpdated:new Date(Date.now()-36e5).toISOString(),isSystem:!1},{id:2,name:"At Risk of Churn",description:"No activity in 30+ days",type:"smart",conditions:[{field:"days_since_last_order",operator:"gt",value:30},{field:"subscription_status",operator:"eq",value:"active"}],memberCount:620,lastUpdated:new Date(Date.now()-72e5).toISOString(),isSystem:!1},{id:3,name:"Active Subscribers",description:"All active paid subscribers",type:"smart",conditions:[{field:"subscription_status",operator:"eq",value:"active"}],memberCount:8420,lastUpdated:new Date(Date.now()-18e5).toISOString(),isSystem:!0},{id:4,name:"Trial Users",description:"Members on free trial",type:"smart",conditions:[{field:"status",operator:"eq",value:"trial"}],memberCount:2690,lastUpdated:new Date(Date.now()-36e5).toISOString(),isSystem:!0},{id:5,name:"Engaged Email Subscribers",description:"Opened email in last 7 days",type:"smart",conditions:[{field:"email_engagement",operator:"eq",value:"engaged"}],memberCount:3250,lastUpdated:new Date(Date.now()-864e5).toISOString(),isSystem:!1}]),i(te,[{id:1,name:"VIP",color:"#6366f1",memberCount:156},{id:2,name:"High Value",color:"#22c55e",memberCount:423},{id:3,name:"At Risk",color:"#ef4444",memberCount:89},{id:4,name:"New",color:"#3b82f6",memberCount:312},{id:5,name:"Engaged",color:"#14b8a6",memberCount:567},{id:6,name:"Support Priority",color:"#f97316",memberCount:34},{id:7,name:"Enterprise",color:"#8b5cf6",memberCount:78},{id:8,name:"Referrer",color:"#ec4899",memberCount:145}]),i(re,[{id:1,name:"High spenders this month",filters:{spending_tier:"whale",date_from:"2024-12-01"},createdAt:new Date(Date.now()-864e5*5).toISOString(),usageCount:12},{id:2,name:"New signups last week",filters:{status:"active",date_from:"2024-12-18"},createdAt:new Date(Date.now()-864e5*2).toISOString(),usageCount:8},{id:3,name:"Churned with high LTV",filters:{status:"churned",spending_tier:"high"},createdAt:new Date(Date.now()-864e5*10).toISOString(),usageCount:23}]),i(fe,!1)}function Ee(l){return l.toLocaleString()}function Ne(l){return new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function rt(){ie(m,e(m).conditions=[...e(m).conditions,{field:"status",operator:"eq",value:""}])}function it(l){ie(m,e(m).conditions=e(m).conditions.filter((r,n)=>n!==l))}function nt(){if(!e(m).name){ee.error("Please enter a segment name");return}if(e(m).conditions.length===0){ee.error("Please add at least one condition");return}const l={id:e(K).length+1,name:e(m).name,description:e(m).description,type:"smart",conditions:e(m).conditions,memberCount:Math.floor(Math.random()*1e3)+100,lastUpdated:new Date().toISOString(),isSystem:!1};i(K,[...e(K),l]),i(ae,!1),i(m,{name:"",description:"",conditions:[]}),ee.success("Segment created successfully")}function ot(){if(!e(z).name){ee.error("Please enter a tag name");return}const l={id:e(te).length+1,name:e(z).name,color:e(z).color,memberCount:0};i(te,[...e(te),l]),i(se,!1),i(z,{name:"",color:"#6366f1"}),ee.success("Tag created successfully")}function vt(l){if(e(K).find(n=>n.id===l)?.isSystem){ee.error("Cannot delete system segments");return}confirm("Delete this segment?")&&(i(K,e(K).filter(n=>n.id!==l)),ee.success("Segment deleted"))}function dt(l){confirm("Delete this tag? It will be removed from all members.")&&(i(te,e(te).filter(r=>r.id!==l)),ee.success("Tag deleted"))}function ut(l){confirm("Delete this saved filter?")&&(i(re,e(re).filter(r=>r.id!==l)),ee.success("Filter deleted"))}function ct(l){const r=new URLSearchParams;Object.entries(l.filters).forEach(([n,$])=>{r.set(n,String($))}),be(`/admin/members?${r.toString()}`)}function _t(l){be(`/admin/members?segment=${l.id}`)}Pt();var Le=ma();qt("1u41533",l=>{Nt(()=>{Lt.title="Member Segments | Revolution Trading Pros"})});var he=me(Le),ye=a(he),ue=a(ye);ue.__click=()=>be("/admin/members");var mt=a(ue);Ot(mt,{size:20}),G(),t(ue);var Ve=s(ue,2),Se=a(Ve),He=a(Se),bt=a(He);Qe(bt,{size:28}),t(He),G(2),t(Se);var Fe=s(Se,2),we=a(Fe);we.__click=Ae;var pt=a(we);Ut(pt,{size:18}),G(),t(we),t(Fe),t(Ve),t(ye);var ke=s(ye,2),Ce=a(ke),ne=a(Ce);ne.__click=()=>i(N,"segments");let Re;var Ge=a(ne);Qe(Ge,{size:18});var gt=s(Ge);t(ne);var oe=s(ne,2);oe.__click=()=>i(N,"tags");let je;var Be=a(oe);At(Be,{size:18});var ft=s(Be);t(oe);var ce=s(oe,2);ce.__click=()=>i(N,"saved");let Ke;var Xe=a(ce);We(Xe,{size:18});var ht=s(Xe);t(ce),t(Ce);var Ze=s(Ce,2),yt=a(Ze);{var St=l=>{var r=Bt();r.__click=()=>i(ae,!0);var n=a(r);Te(n,{size:18}),G(),t(r),c(l,r)},wt=l=>{var r=Vt(),n=me(r);{var $=C=>{var F=Kt();F.__click=()=>i(se,!0);var L=a(F);Te(L,{size:18}),G(),t(F),c(C,F)};H(n,C=>{e(N)==="tags"&&C($)},!0)}c(l,r)};H(yt,l=>{e(N)==="segments"?l(St):l(wt,!1)})}t(Ze),t(ke);var kt=s(ke,2);{var Ct=l=>{var r=Zt();j(r,4,()=>[1,2,3,4],B,(n,$)=>{var C=Xt();c(n,C)}),t(r),c(l,r)},Dt=l=>{var r=na(),n=me(r);{var $=h=>{var b=ea();j(b,5,()=>e(K),B,(O,v)=>{var y=Yt();let p;var d=a(y),S=a(d),w=a(S),I=a(w,!0);t(w);var g=s(w,2);{var o=D=>{var x=Jt();c(D,x)};H(g,D=>{e(v).isSystem&&D(o)})}t(S);var u=s(S,2),P=a(u);Pe(P,{size:16});var R=s(P);t(u),t(d);var T=s(d,2),U=a(T,!0);t(T);var A=s(T,2);j(A,5,()=>e(v).conditions,B,(D,x)=>{var le=Qt(),ze=a(le);t(le),E((W,$e)=>k(ze,`${W??""}
									${$e??""}
									${e(x).value??""}`),[()=>Oe.find(W=>W.value===e(x).field)?.label||e(x).field,()=>Ue[e(x).field]?.find(W=>W.value===e(x).operator)?.label||e(x).operator]),c(D,le)}),t(A);var Z=s(A,2),J=a(Z),q=a(J);t(J);var M=s(J,2),f=a(M);f.__click=()=>_t(e(v));var Q=a(f);Pe(Q,{size:16}),t(f);var V=s(f,2),_e=a(V);Ft(_e,{size:16}),t(V);var De=s(V,2);{var xe=D=>{var x=Wt(),le=me(x),ze=a(le);tt(ze,{size:16}),t(le);var W=s(le,2);W.__click=()=>vt(e(v).id);var $e=a(W);qe($e,{size:16}),t(W),c(D,x)};H(De,D=>{e(v).isSystem||D(xe)})}t(M),t(Z),t(y),E((D,x)=>{p=ve(y,1,"segment-card svelte-1u41533",null,p,{system:e(v).isSystem}),k(I,e(v).name),k(R,` ${D??""}`),k(U,e(v).description),k(q,`Updated ${x??""}`)},[()=>Ee(e(v).memberCount),()=>Ne(e(v).lastUpdated)]),c(O,y)}),t(b),c(h,b)};H(n,h=>{e(N)==="segments"&&h($)})}var C=s(n,2);{var F=h=>{var b=aa();j(b,5,()=>e(te),B,(O,v)=>{var y=ta(),p=a(y),d=a(p),S=s(a(d));t(d);var w=s(d,2),I=a(w);t(w),t(p);var g=s(p,2),o=a(g);o.__click=()=>be(`/admin/members?tag=${e(v).id}`);var u=a(o);Pe(u,{size:14}),G(),t(o);var P=s(o,2),R=a(P);tt(R,{size:16}),t(P);var T=s(P,2);T.__click=()=>dt(e(v).id);var U=a(T);qe(U,{size:16}),t(T),t(g),t(y),E(A=>{Ie(d,`--tag-color: ${e(v).color??""}`),k(S,` ${e(v).name??""}`),k(I,`${A??""} members`)},[()=>Ee(e(v).memberCount)]),c(O,y)}),t(b),c(h,b)};H(C,h=>{e(N)==="tags"&&h(F)})}var L=s(C,2);{var X=h=>{var b=ia(),O=a(b);j(O,1,()=>e(re),B,(p,d)=>{var S=la(),w=a(S),I=a(w),g=a(I,!0);t(I);var o=s(I,2),u=a(o),P=a(u);t(u);var R=s(u,2),T=a(R);t(R),t(o),t(w);var U=s(w,2);j(U,5,()=>Object.entries(e(d).filters),B,(Q,V)=>{var _e=Gt(()=>jt(e(V),2));let De=()=>e(_e)[0],xe=()=>e(_e)[1];var D=sa(),x=a(D);t(D),E(()=>k(x,`${De()??""}: ${xe()??""}`)),c(Q,D)}),t(U);var A=s(U,2),Z=a(A);Z.__click=()=>ct(e(d));var J=s(Z,2),q=a(J);Rt(q,{size:16}),t(J);var M=s(J,2);M.__click=()=>ut(e(d).id);var f=a(M);qe(f,{size:16}),t(M),t(A),t(S),E(Q=>{k(g,e(d).name),k(P,`Created ${Q??""}`),k(T,`Used ${e(d).usageCount??""} times`)},[()=>Ne(e(d).createdAt)]),c(p,S)});var v=s(O,2);{var y=p=>{var d=ra(),S=a(d);We(S,{size:48,stroke:1}),G(4),t(d),c(p,d)};H(v,p=>{e(re).length===0&&p(y)})}t(b),c(h,b)};H(L,h=>{e(N)==="saved"&&h(X)})}c(l,r)};H(kt,l=>{e(fe)?l(Ct):l(Dt,!1)})}t(he);var Je=s(he,2);{var xt=l=>{var r=ua();r.__click=()=>i(ae,!1),r.__keydown=o=>o.key==="Escape"&&i(ae,!1);var n=a(r);n.__click=o=>o.stopPropagation(),n.__keydown=o=>o.stopPropagation();var $=a(n),C=s(a($),2);C.__click=()=>i(ae,!1);var F=a(C);Me(F,{size:20}),t(C),t($);var L=s($,2),X=a(L),h=s(a(X),2);pe(h),t(X);var b=s(X,2),O=s(a(b),2);pe(O),t(b);var v=s(b,2),y=s(a(v),2);j(y,1,()=>e(m).conditions,B,(o,u,P)=>{var R=da(),T=a(R);E(()=>{e(u),de(()=>{})}),j(T,5,()=>Oe,B,(q,M)=>{var f=oa(),Q=a(f,!0);t(f);var V={};E(()=>{k(Q,e(M).label),V!==(V=e(M).value)&&(f.value=(f.__value=e(M).value)??"")}),c(q,f)}),t(T);var U=s(T,2);E(()=>{e(u),de(()=>{})}),j(U,5,()=>Ue[e(u).field]||[],B,(q,M)=>{var f=va(),Q=a(f,!0);t(f);var V={};E(()=>{k(Q,e(M).label),V!==(V=e(M).value)&&(f.value=(f.__value=e(M).value)??"")}),c(q,f)}),t(U);var A=s(U,2);pe(A);var Z=s(A,2);Z.__click=()=>it(P);var J=a(Z);Me(J,{size:16}),t(Z),t(R),Ye(T,()=>e(u).field,q=>(e(u).field=q,de(()=>e(m)))),Ye(U,()=>e(u).operator,q=>(e(u).operator=q,de(()=>e(m)))),ge(A,()=>e(u).value,q=>(e(u).value=q,de(()=>e(m)))),c(o,R)});var p=s(y,2);p.__click=rt;var d=a(p);Te(d,{size:16}),G(),t(p),t(v),t(L);var S=s(L,2),w=a(S);w.__click=()=>i(ae,!1);var I=s(w,2);I.__click=nt;var g=a(I);et(g,{size:18}),G(),t(I),t(S),t(n),t(r),ge(h,()=>e(m).name,o=>ie(m,e(m).name=o)),ge(O,()=>e(m).description,o=>ie(m,e(m).description=o)),c(l,r)};H(Je,l=>{e(ae)&&l(xt)})}var zt=s(Je,2);{var $t=l=>{var r=_a();r.__click=()=>i(se,!1),r.__keydown=g=>g.key==="Escape"&&i(se,!1);var n=a(r);n.__click=g=>g.stopPropagation(),n.__keydown=g=>g.stopPropagation();var $=a(n),C=s(a($),2);C.__click=()=>i(se,!1);var F=a(C);Me(F,{size:20}),t(C),t($);var L=s($,2),X=a(L),h=s(a(X),2);pe(h),t(X);var b=s(X,2),O=s(a(b),2);j(O,5,()=>lt,B,(g,o)=>{var u=ca();let P;u.__click=()=>ie(z,e(z).color=e(o)),E(()=>{P=ve(u,1,"color-option svelte-1u41533",null,P,{selected:e(z).color===e(o)}),Ie(u,`background-color: ${e(o)??""}`),Ht(u,"aria-label",`Select color ${e(o)??""}`)}),c(g,u)}),t(O),t(b);var v=s(b,2),y=s(a(v),2),p=a(y,!0);t(y),t(v),t(L);var d=s(L,2),S=a(d);S.__click=()=>i(se,!1);var w=s(S,2);w.__click=ot;var I=a(w);et(I,{size:18}),G(),t(w),t(d),t(n),t(r),E(()=>{Ie(y,`background-color: ${e(z).color??""}20; color: ${e(z).color??""}; border-color: ${e(z).color??""}40`),k(p,e(z).name||"Tag Name")}),ge(h,()=>e(z).name,g=>ie(z,e(z).name=g)),c(l,r)};H(zt,l=>{e(se)&&l($t)})}E(()=>{Re=ve(ne,1,"svelte-1u41533",null,Re,{active:e(N)==="segments"}),k(gt,` Smart Segments (${e(K).length??""})`),je=ve(oe,1,"svelte-1u41533",null,je,{active:e(N)==="tags"}),k(ft,` Tags (${e(te).length??""})`),Ke=ve(ce,1,"svelte-1u41533",null,Ke,{active:e(N)==="saved"}),k(ht,` Saved Filters (${e(re).length??""})`)}),c(at,Le),Et()}Tt(["click","keydown"]);export{ga as component};
