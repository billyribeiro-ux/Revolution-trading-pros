import{z as Ve,p as $e,o as Le,a3 as He,f as p,a9 as Te,i as D,h as d,j as Ee,E as qe,as as Fe,e as s,q as e,c as u,aP as w,B as Me,at as Qe,r as a,g as t,R as je,bL as Ge,w as C,O as ba,k as Ie,d as Ja,J as Je,H as r,aV as q,aZ as Ke,aH as Oe,bP as fa,bz as ka,bB as Ue,bQ as We,bN as j,x as n,N as ya,Q as za,_ as Xe}from"../chunks/C_QN0JMx.js";import{a as Ze}from"../chunks/lN6oCIqA.js";import{c as Ye,b as as}from"../chunks/KfBlM_pv.js";import{A as es}from"../chunks/BvIese_r.js";import{S as ss}from"../chunks/szWSpB32.js";var ts=p('<div class="header-actions svelte-1op24a7"><div class="period-selector svelte-1op24a7"><button>24H</button> <button>7D</button> <button>30D</button></div> <button class="btn-refresh svelte-1op24a7"><!></button></div>'),vs=p('<div class="error-banner svelte-1op24a7"> </div>'),is=p('<div class="empty-state svelte-1op24a7"><!> <p class="svelte-1op24a7">No click data available yet</p></div>'),rs=p('<div class="click-item svelte-1op24a7"><span class="click-rank svelte-1op24a7"></span> <div class="click-info svelte-1op24a7"><span class="click-element svelte-1op24a7"> </span> <span class="click-page svelte-1op24a7"> </span></div> <span class="click-count svelte-1op24a7"> </span></div>'),ls=p('<div class="click-list svelte-1op24a7"></div>'),os=p('<div class="empty-state svelte-1op24a7"><!> <p class="svelte-1op24a7">No scroll data available yet</p></div>'),ns=p('<div class="scroll-item svelte-1op24a7"><div class="scroll-info svelte-1op24a7"><span class="scroll-page svelte-1op24a7"> </span> <span class="scroll-views svelte-1op24a7"> </span></div> <div class="scroll-bar-wrap svelte-1op24a7"><div class="scroll-bar svelte-1op24a7"></div></div> <span class="scroll-depth svelte-1op24a7"> </span></div>'),cs=p('<div class="scroll-list svelte-1op24a7"></div>'),ds=p('<div class="empty-state svelte-1op24a7"><!> <p class="svelte-1op24a7">No session recordings available</p> <span class="empty-hint svelte-1op24a7">Session recordings help you understand user behavior</span></div>'),ps=p('<div class="recording-card svelte-1op24a7"><div class="recording-preview svelte-1op24a7"><!></div> <div class="recording-info svelte-1op24a7"><span class="recording-duration svelte-1op24a7"> </span> <span class="recording-pages svelte-1op24a7"> </span> <span class="recording-date svelte-1op24a7"> </span></div> <button class="btn-play svelte-1op24a7"><!> Watch</button></div>'),_s=p('<div class="recordings-grid svelte-1op24a7"></div>'),ms=p('<!> <div class="metrics-grid svelte-1op24a7"><div class="metric-card svelte-1op24a7"><div class="metric-icon blue svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Total Sessions</span></div> <div class="metric-trend positive svelte-1op24a7"><!> <span>12.5%</span></div></div> <div class="metric-card svelte-1op24a7"><div class="metric-icon purple svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Avg. Session Duration</span></div> <div class="metric-trend positive svelte-1op24a7"><!> <span>8.3%</span></div></div> <div class="metric-card svelte-1op24a7"><div class="metric-icon cyan svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Pages / Session</span></div> <div class="metric-trend positive svelte-1op24a7"><!> <span>5.2%</span></div></div> <div class="metric-card svelte-1op24a7"><div class="metric-icon green svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Avg. Scroll Depth</span></div> <div class="metric-trend positive svelte-1op24a7"><!> <span>3.1%</span></div></div> <div class="metric-card svelte-1op24a7"><div class="metric-icon orange svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Click Rate</span></div> <div class="metric-trend negative svelte-1op24a7"><!> <span>1.2%</span></div></div> <div class="metric-card svelte-1op24a7"><div class="metric-icon pink svelte-1op24a7"><!></div> <div class="metric-content svelte-1op24a7"><span class="metric-value svelte-1op24a7"> </span> <span class="metric-label svelte-1op24a7">Heatmap Views</span></div> <div class="metric-trend positive svelte-1op24a7"><!> <span>15.7%</span></div></div></div> <div class="content-grid svelte-1op24a7"><div class="panel svelte-1op24a7"><div class="panel-header svelte-1op24a7"><h3 class="svelte-1op24a7"><!> Top Click Elements</h3> <a href="/admin/analytics/heatmaps" class="panel-link svelte-1op24a7">View Heatmaps</a></div> <div class="panel-content svelte-1op24a7"><!></div></div> <div class="panel svelte-1op24a7"><div class="panel-header svelte-1op24a7"><h3 class="svelte-1op24a7"><!> Scroll Depth by Page</h3></div> <div class="panel-content svelte-1op24a7"><!></div></div> <div class="panel full-width svelte-1op24a7"><div class="panel-header svelte-1op24a7"><h3 class="svelte-1op24a7"><!> Recent Session Recordings</h3> <a href="/admin/analytics/recordings" class="panel-link svelte-1op24a7">View All</a></div> <div class="panel-content svelte-1op24a7"><!></div></div></div>',1),us=p('<div class="behavior-page svelte-1op24a7"><div class="page-header svelte-1op24a7"><div><h1 class="svelte-1op24a7">Behavior Tracking</h1> <p class="page-description svelte-1op24a7">Analyze user interactions, clicks, scrolls, and session recordings</p></div> <!></div> <!></div>');function ys(Ka,Oa){$e(Oa,!1);const G=()=>Me(as,"$isBehaviorConnected",Ua),[Ua,Wa]=qe();let A=w(!0),xa=w(!0),F=w(""),P=w("7d"),S=w({totalSessions:0,avgSessionDuration:"0s",pagesPerSession:0,scrollDepth:0,clickRate:0,heatmapViews:0}),I=w([]),J=w([]),K=w([]);async function O(){u(A,!0),u(F,"");try{const l=await Ze.get(`/api/admin/analytics/behavior?period=${t(P)}`),o=l?.data||l;o&&(u(S,{totalSessions:o.total_sessions||0,avgSessionDuration:o.avg_session_duration||"0s",pagesPerSession:o.pages_per_session||0,scrollDepth:o.avg_scroll_depth||0,clickRate:o.click_rate||0,heatmapViews:o.heatmap_views||0}),u(I,o.top_clicks||[]),u(J,o.top_scrolls||[]),u(K,o.recordings||[]))}catch(l){u(F,l instanceof Error?l.message:"Failed to load behavior data")}finally{u(A,!1)}}function U(l){u(P,l),O()}Le(async()=>{await Ye.load(),u(xa,!1),G()?await O():u(A,!1)}),He();var W=us();Te("1op24a7",l=>{Fe(()=>{Qe.title="Behavior Tracking - Admin Dashboard"})});var X=e(W),Xa=s(e(X),2);{var Za=l=>{var o=ts(),R=e(o),B=e(R);B.__click=()=>U("24h");let M;var g=s(B,2);g.__click=()=>U("7d");let N;var V=s(g,2);V.__click=()=>U("30d");let Q;a(R);var y=s(R,2);y.__click=O;var $=e(y);{let L=Ge(()=>t(A)?"spinning":"");je($,{size:18,get class(){return t(L)}})}a(y),a(o),C(()=>{M=ba(B,1,"svelte-1op24a7",null,M,{active:t(P)==="24h"}),N=ba(g,1,"svelte-1op24a7",null,N,{active:t(P)==="7d"}),Q=ba(V,1,"svelte-1op24a7",null,Q,{active:t(P)==="30d"}),y.disabled=t(A)}),d(l,o)};D(Xa,l=>{G()&&l(Za)})}a(X);var Ya=s(X,2);{var ae=l=>{ss(l,{variant:"dashboard"})},ee=l=>{var o=Ie(),R=Ja(o);{var B=g=>{es(g,{serviceName:"Behavior Analytics",description:"Connect an analytics platform to track user behavior, record sessions, and generate heatmaps for deeper insights.",serviceKey:"google_analytics",icon:"ðŸ”",color:"#10b981",features:["Track user sessions and interactions","Record and replay user sessions","Generate click and scroll heatmaps","Analyze page engagement metrics","Identify UX issues and opportunities"]})},M=g=>{var N=ms(),V=Ja(N);{var Q=i=>{var v=vs(),c=e(v,!0);a(v),C(()=>n(c,t(F))),d(i,v)};D(V,i=>{t(F)&&i(Q)})}var y=s(V,2),$=e(y),L=e($),se=e(L);Je(se,{size:24}),a(L);var Z=s(L,2),wa=e(Z),te=e(wa,!0);a(wa),r(2),a(Z);var Sa=s(Z,2),ve=e(Sa);q(ve,{size:14}),r(2),a(Sa),a($);var Y=s($,2),aa=e(Y),ie=e(aa);Ke(ie,{size:24}),a(aa);var ea=s(aa,2),Da=e(ea),re=e(Da,!0);a(Da),r(2),a(ea);var Ca=s(ea,2),le=e(Ca);q(le,{size:14}),r(2),a(Ca),a(Y);var sa=s(Y,2),ta=e(sa),oe=e(ta);Oe(oe,{size:24}),a(ta);var va=s(ta,2),Aa=e(va),ne=e(Aa,!0);a(Aa),r(2),a(va);var Pa=s(va,2),ce=e(Pa);q(ce,{size:14}),r(2),a(Pa),a(sa);var ia=s(sa,2),ra=e(ia),de=e(ra);fa(de,{size:24}),a(ra);var la=s(ra,2),Ra=e(la),pe=e(Ra);a(Ra),r(2),a(la);var Ba=s(la,2),_e=e(Ba);q(_e,{size:14}),r(2),a(Ba),a(ia);var oa=s(ia,2),na=e(oa),me=e(na);ka(me,{size:24}),a(na);var ca=s(na,2),Na=e(ca),ue=e(Na);a(Na),r(2),a(ca);var Va=s(ca,2),ge=e(Va);Ue(ge,{size:14}),r(2),a(Va),a(oa);var $a=s(oa,2),da=e($a),he=e(da);We(he,{size:24}),a(da);var pa=s(da,2),La=e(pa),be=e(La,!0);a(La),r(2),a(pa);var Ha=s(pa,2),fe=e(Ha);q(fe,{size:14}),r(2),a(Ha),a($a),a(y);var Ta=s(y,2),_a=e(Ta),ma=e(_a),Ea=e(ma),ke=e(Ea);ka(ke,{size:20}),r(),a(Ea),r(2),a(ma);var qa=s(ma,2),ye=e(qa);{var ze=i=>{var v=is(),c=e(v);ka(c,{size:32}),r(2),a(v),d(i,v)},xe=i=>{var v=ls();ya(v,5,()=>t(I),za,(c,_,f)=>{var m=rs(),z=e(m);z.textContent=f+1;var k=s(z,2),h=e(k),H=e(h,!0);a(h);var b=s(h,2),T=e(b,!0);a(b),a(k);var x=s(k,2),E=e(x,!0);a(x),a(m),C(()=>{n(H,t(_).element),n(T,t(_).page),n(E,t(_).count)}),d(c,m)}),a(v),d(i,v)};D(ye,i=>{t(I).length===0?i(ze):i(xe,!1)})}a(qa),a(_a);var ua=s(_a,2),ga=e(ua),Fa=e(ga),we=e(Fa);fa(we,{size:20}),r(),a(Fa),a(ga);var Ma=s(ga,2),Se=e(Ma);{var De=i=>{var v=os(),c=e(v);fa(c,{size:32}),r(2),a(v),d(i,v)},Ce=i=>{var v=cs();ya(v,5,()=>t(J),za,(c,_)=>{var f=ns(),m=e(f),z=e(m),k=e(z,!0);a(z);var h=s(z,2),H=e(h);a(h),a(m);var b=s(m,2),T=e(b);a(b);var x=s(b,2),E=e(x);a(x),a(f),C(()=>{n(k,t(_).page),n(H,`${t(_).views??""} views`),Xe(T,`width: ${t(_).avgDepth??""}%`),n(E,`${t(_).avgDepth??""}%`)}),d(c,f)}),a(v),d(i,v)};D(Se,i=>{t(J).length===0?i(De):i(Ce,!1)})}a(Ma),a(ua);var Qa=s(ua,2),ha=e(Qa),ja=e(ha),Ae=e(ja);j(Ae,{size:20}),r(),a(ja),r(2),a(ha);var Ga=s(ha,2),Pe=e(Ga);{var Re=i=>{var v=ds(),c=e(v);j(c,{size:32}),r(4),a(v),d(i,v)},Be=i=>{var v=_s();ya(v,5,()=>t(K),za,(c,_)=>{var f=ps(),m=e(f),z=e(m);j(z,{size:24}),a(m);var k=s(m,2),h=e(k),H=e(h,!0);a(h);var b=s(h,2),T=e(b);a(b);var x=s(b,2),E=e(x,!0);a(x),a(k);var Ia=s(k,2),Ne=e(Ia);j(Ne,{size:16}),r(),a(Ia),a(f),C(()=>{n(H,t(_).duration),n(T,`${t(_).pages??""} pages`),n(E,t(_).date)}),d(c,f)}),a(v),d(i,v)};D(Pe,i=>{t(K).length===0?i(Re):i(Be,!1)})}a(Ga),a(Qa),a(Ta),C((i,v,c)=>{n(te,i),n(re,t(S).avgSessionDuration),n(ne,v),n(pe,`${t(S).scrollDepth??""}%`),n(ue,`${t(S).clickRate??""}%`),n(be,c)},[()=>t(S).totalSessions.toLocaleString(),()=>t(S).pagesPerSession.toFixed(1),()=>t(S).heatmapViews.toLocaleString()]),d(g,N)};D(R,g=>{G()?g(M,!1):g(B)},!0)}d(l,o)};D(Ya,l=>{t(xa)?l(ae):l(ee,!1)})}a(W),d(Ka,W),Ee(),Wa()}Ve(["click"]);export{ys as component};
