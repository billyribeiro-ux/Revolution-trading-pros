import{z as re,p as le,o as ve,a3 as ne,f as u,F as M,e as r,i as N,h as o,j as ce,q as t,c as l,aP as j,r as a,g as s,k as L,d as O,w as P,x as h,N as de,bU as ue,H as Q,bV as pe,O as _e,Q as he}from"../chunks/C_QN0JMx.js";import{a as T,A as fe}from"../chunks/BIaWRQrO.js";var me=u('<div class="loading svelte-ilu2h8">Loading coupons...</div>'),ge=u('<div class="error svelte-ilu2h8"> </div>'),be=u('<div class="empty-state svelte-ilu2h8"><p>No coupons yet. Create your first coupon!</p></div>'),ye=u('<div class="coupon-card svelte-ilu2h8"><div class="coupon-header svelte-ilu2h8"><div class="coupon-code svelte-ilu2h8"> </div> <div> </div></div> <div class="coupon-details svelte-ilu2h8"><span class="coupon-type svelte-ilu2h8"> </span> <span class="coupon-value svelte-ilu2h8"> </span></div> <div class="coupon-actions svelte-ilu2h8"><button class="action-btn edit svelte-ilu2h8"><!> Edit</button> <button class="action-btn delete svelte-ilu2h8"><!> Delete</button></div></div>'),xe=u('<div class="coupons-grid svelte-ilu2h8"></div>'),we=u('<div class="admin-page svelte-ilu2h8"><div class="page-header svelte-ilu2h8"><h1 class="svelte-ilu2h8">Coupons Management</h1> <button class="btn-primary svelte-ilu2h8">+ Create Coupon</button></div> <!></div>');function Ce(U,V){le(V,!1);let m=j(!0),g=j([]),v=j("");ve(async()=>{await q()});async function q(){l(m,!0),l(v,"");try{const e=await T.list();l(g,e.data||[])}catch(e){if(e instanceof fe)if(e.status===401){M("/login");return}else e.status===403?l(v,"You are not authorized to view coupons."):l(v,e.message);else l(v,"Error connecting to server")}finally{l(m,!1)}}async function Y(e){if(confirm("Are you sure you want to delete this coupon?"))try{await T.delete(e),await q()}catch{alert("Failed to delete coupon")}}ne();var b=we(),y=t(b),B=r(t(y),2);B.__click=()=>M("/admin/coupons/create"),a(y);var G=r(y,2);{var J=e=>{var p=me();o(e,p)},K=e=>{var p=L(),R=O(p);{var S=n=>{var c=ge(),x=t(c,!0);a(c),P(()=>h(x,s(v))),o(n,c)},W=n=>{var c=L(),x=O(c);{var X=d=>{var _=be();o(d,_)},Z=d=>{var _=xe();de(_,5,()=>s(g),he,($,i)=>{var w=ye(),k=t(w),A=t(k),ee=t(A,!0);a(A);var C=r(A,2);let D;var ae=t(C,!0);a(C),a(k);var z=r(k,2),E=t(z),te=t(E,!0);a(E);var H=r(E,2),se=t(H);a(H),a(z);var I=r(z,2),f=t(I);f.__click=()=>M(`/admin/coupons/edit/${s(i).id}`);var ie=t(f);ue(ie,{size:16}),Q(),a(f);var F=r(f,2);F.__click=()=>Y(s(i).id);var oe=t(F);pe(oe,{size:16}),Q(),a(F),a(I),a(w),P(()=>{h(ee,s(i).code),D=_e(C,1,"coupon-status svelte-ilu2h8",null,D,{active:s(i).is_active}),h(ae,s(i).is_active?"Active":"Inactive"),h(te,s(i).type),h(se,`${s(i).value??""}${s(i).type==="percentage"?"%":"$"} off`)}),o($,w)}),a(_),o(d,_)};N(x,d=>{s(g).length===0?d(X):d(Z,!1)},!0)}o(n,c)};N(R,n=>{s(v)?n(S):n(W,!1)},!0)}o(e,p)};N(G,e=>{s(m)?e(J):e(K,!1)})}a(b),o(U,b),ce()}re(["click"]);export{Ce as component};
