import{z as ee,p as te,o as se,a3 as re,f as i,a9 as ve,q as e,e as s,c as P,i as O,w as D,h as n,j as le,aP as X,as as de,at as ne,r as a,g as t,O as Y,x as r,d as wa,H as j,N as ea,_ as ie,n as Pa,Q as ta,k as ce,d0 as Va}from"../chunks/C_QN0JMx.js";import{e as oe}from"../chunks/rZTkdfva.js";import{g as he,a as _e,b as ye,c as pe,e as ue}from"../chunks/3r80v9Z5.js";import{g as me,s as be}from"../chunks/Cefv-2g3.js";const ge=!1,fe=!1,He=Object.freeze(Object.defineProperty({__proto__:null,prerender:ge,ssr:fe},Symbol.toStringTag,{value:"Module"}));var xe=i('<div class="category-bar-item svelte-yha86d"><div class="category-bar-header svelte-yha86d"><span class="category-name svelte-yha86d"> </span> <span class="category-value svelte-yha86d"> </span></div> <div class="category-bar-track svelte-yha86d"><div></div></div></div>'),ke=i('<section class="section svelte-yha86d"><h2 class="svelte-yha86d">Key Metrics</h2> <div class="metrics-grid svelte-yha86d"><div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Total Interactions</span></div> <div class="metric-card highlight-green svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Accept All Rate</span></div> <div class="metric-card highlight-red svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Reject All Rate</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Custom Preferences</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Avg. Decision Time</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Banner Impressions</span></div></div></section> <section class="section svelte-yha86d"><h2 class="svelte-yha86d">Category Consent Rates</h2> <div class="category-bars svelte-yha86d"></div></section>',1),we=i('<div class="insight-item svelte-yha86d"><span class="insight-icon svelte-yha86d">üí°</span> <span> </span></div>'),Ae=i('<section class="section svelte-yha86d"><h2 class="svelte-yha86d">Insights</h2> <div class="insights-list svelte-yha86d"></div></section>'),Ce=i('<div class="tab-content svelte-yha86d"><!> <!> <section class="section svelte-yha86d"><h2 class="svelte-yha86d">Policy Version</h2> <div class="version-info svelte-yha86d"><p class="svelte-yha86d"><strong>Current Version:</strong> </p> <p class="svelte-yha86d"><strong>Last Updated:</strong> </p></div></section></div>'),Re=i('<section class="section svelte-yha86d"><h2 class="svelte-yha86d">Audit Statistics</h2> <div class="metrics-grid small svelte-yha86d"><div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Total Entries</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Consent Given</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Consent Updated</span></div> <div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Consent Revoked</span></div></div></section>'),Te=i('<span class="categories-list"> </span>'),De=i('<tr><td class="svelte-yha86d"> </td><td class="svelte-yha86d"><span> </span></td><td class="svelte-yha86d"> </td><td class="svelte-yha86d"><!></td></tr>'),je=i('<div class="table-wrapper svelte-yha86d"><table class="data-table svelte-yha86d"><thead><tr><th class="svelte-yha86d">Timestamp</th><th class="svelte-yha86d">Action</th><th class="svelte-yha86d">Method</th><th class="svelte-yha86d">Categories</th></tr></thead><tbody></tbody></table></div>'),Le=i('<p class="empty-state svelte-yha86d">No audit entries yet.</p>'),Be=i('<div class="tab-content svelte-yha86d"><!> <section class="section svelte-yha86d"><h2 class="svelte-yha86d"> </h2> <!></section></div>'),Se=i('<tr><td class="svelte-yha86d"><code class="svelte-yha86d"> </code></td><td class="svelte-yha86d"> </td><td class="svelte-yha86d"> </td><td class="svelte-yha86d"> </td></tr>'),$e=i('<section class="section svelte-yha86d"><h2 class="category-header svelte-yha86d"><span> </span> </h2> <div class="table-wrapper svelte-yha86d"><table class="data-table svelte-yha86d"><thead><tr><th class="svelte-yha86d">Name</th><th class="svelte-yha86d">Purpose</th><th class="svelte-yha86d">Duration</th><th class="svelte-yha86d">Type</th></tr></thead><tbody></tbody></table></div></section>'),Me=i('<section class="section svelte-yha86d"><h2 class="svelte-yha86d">Cookie Summary</h2> <div class="metrics-grid small svelte-yha86d"><div class="metric-card svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Total Cookies</span></div> <div class="metric-card highlight-green svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Categorized</span></div> <div class="metric-card highlight-yellow svelte-yha86d"><span class="metric-value svelte-yha86d"> </span> <span class="metric-label svelte-yha86d">Uncategorized</span></div></div></section> <!>',1),Oe=i('<p class="empty-state svelte-yha86d">Loading cookie data...</p>'),Ue=i('<div class="tab-content svelte-yha86d"><!></div>'),ze=i('<tr><td class="svelte-yha86d"><strong> </strong></td><td class="svelte-yha86d"> </td><td class="highlight-green svelte-yha86d"> </td><td class="highlight-red svelte-yha86d"> </td><td class="svelte-yha86d"> </td><td class="svelte-yha86d"> </td></tr>'),Ie=i('<div class="table-wrapper svelte-yha86d"><table class="data-table svelte-yha86d"><thead><tr><th class="svelte-yha86d">Variant</th><th class="svelte-yha86d">Impressions</th><th class="svelte-yha86d">Accept Rate</th><th class="svelte-yha86d">Reject Rate</th><th class="svelte-yha86d">Customize Rate</th><th class="svelte-yha86d">Avg. Decision Time</th></tr></thead><tbody></tbody></table></div>'),Ee=i('<p class="empty-state svelte-yha86d">No A/B test data yet. Tests will be recorded as users interact with the consent banner.</p>'),Ne=i('<div class="tab-content svelte-yha86d"><section class="section svelte-yha86d"><div class="section-header svelte-yha86d"><h2 class="svelte-yha86d">A/B Test Results</h2> <button class="btn btn-secondary btn-sm svelte-yha86d">Export A/B Data</button></div> <!></section></div>'),Pe=i('<div class="dashboard svelte-yha86d"><header class="header svelte-yha86d"><div class="header-content"><h1 class="svelte-yha86d">Consent Analytics Dashboard</h1> <p class="svelte-yha86d">Monitor consent metrics, audit logs, and A/B test performance</p></div> <div class="header-actions svelte-yha86d"><button class="btn btn-secondary svelte-yha86d"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M16 21h5v-5"></path></svg> Refresh</button> <button class="btn btn-primary svelte-yha86d"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg> Export All Data</button></div></header> <div class="quick-actions svelte-yha86d"><a href="/admin/consent/settings" class="action-card svelte-yha86d"><span class="action-icon svelte-yha86d">‚öôÔ∏è</span> <span class="action-label svelte-yha86d">Settings</span> <span class="action-desc svelte-yha86d">Configure consent system</span></a> <a href="/admin/consent/templates" class="action-card svelte-yha86d"><span class="action-icon svelte-yha86d">üé®</span> <span class="action-label svelte-yha86d">Templates</span> <span class="action-desc svelte-yha86d">Customize banner design</span></a></div> <nav class="tabs svelte-yha86d"><button>Overview</button> <button>Audit Log</button> <button>Cookies</button> <button>A/B Tests</button></nav> <!> <!> <!> <!></div>');function Je(qa,Fa){te(Fa,!1);let V=X(null),ia=X([]),Z=X(null),aa=X(null),pa=X([]),Aa=me(),ua=X([]),L=X("overview");se(()=>{Ca()});function Ca(){const v=he();P(V,v.analytics),P(ua,v.insights),P(ia,_e()),P(Z,ye()),P(aa,be()),P(pa,pe())}function Ga(){const v=oe();Ra(v,"consent-data-export.json")}function Ha(){const v=ue();Ra(v,"ab-test-export.json")}function Ra(v,_){const B=new Blob([v],{type:"application/json"}),S=URL.createObjectURL(B),b=document.createElement("a");b.href=S,b.download=_,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(S)}function Ja(v){return new Date(v).toLocaleString()}function K(v){return`${(v*100).toFixed(1)}%`}function Ta(v){return v<1e3?`${v}ms`:`${(v/1e3).toFixed(1)}s`}re();var ma=Pe();ve("yha86d",v=>{de(()=>{ne.title="Consent Analytics | Admin"})});var ba=e(ma),Da=s(e(ba),2),ja=e(Da);ja.__click=Ca;var Ka=s(ja,2);Ka.__click=Ga,a(Da),a(ba);var ga=s(ba,4),fa=e(ga);let La;fa.__click=()=>P(L,"overview");var xa=s(fa,2);let Ba;xa.__click=()=>P(L,"audit");var ka=s(xa,2);let Sa;ka.__click=()=>P(L,"cookies");var $a=s(ka,2);let Ma;$a.__click=()=>P(L,"ab-tests"),a(ga);var Oa=s(ga,2);{var Qa=v=>{var _=Ce(),B=e(_);{var S=o=>{var l=ke(),y=wa(l),d=s(e(y),2),h=e(d),p=e(h),C=e(p,!0);a(p),j(2),a(h);var u=s(h,2),f=e(u),z=e(f,!0);a(f),j(2),a(u);var x=s(u,2),k=e(x),$=e(k,!0);a(k),j(2),a(x);var E=s(x,2),q=e(E),F=e(q,!0);a(q),j(2),a(E);var w=s(E,2),R=e(w),N=e(R,!0);a(R),j(2),a(w);var M=s(w,2),ca=e(M),oa=e(ca,!0);a(ca),j(2),a(M),a(d),a(y);var sa=s(y,2),ra=s(e(sa),2);ea(ra,5,()=>Object.entries(t(V).categoryRates),ta,(va,H)=>{var J=Pa(()=>Va(t(H),2));let Q=()=>t(J)[0],G=()=>t(J)[1];var la=xe(),W=e(la),da=e(W),na=e(da,!0);a(da);var ha=s(da,2),_a=e(ha,!0);a(ha),a(W);var ya=s(W,2),Ia=e(ya);let Ea,Na;a(ya),a(la),D(ae=>{r(na,Q()),r(_a,ae),Ea=Y(Ia,1,"category-bar-fill svelte-yha86d",null,Ea,{low:G()<.3,medium:G()>=.3&&G()<.6,high:G()>=.6}),Na=ie(Ia,"",Na,{width:`${G()*100}%`})},[()=>K(G())]),n(va,la)}),a(ra),a(sa),D((va,H,J,Q)=>{r(C,t(V).totalInteractions),r(z,va),r($,H),r(F,J),r(N,Q),r(oa,t(V).bannerImpressions)},[()=>K(t(V).acceptAllRate),()=>K(t(V).rejectAllRate),()=>K(t(V).customRate),()=>Ta(t(V).avgTimeToDecision)]),n(o,l)};O(B,o=>{t(V)&&o(S)})}var b=s(B,2);{var A=o=>{var l=Ae(),y=s(e(l),2);ea(y,5,()=>t(ua),ta,(d,h)=>{var p=we(),C=s(e(p),2),u=e(C,!0);a(C),a(p),D(()=>r(u,t(h))),n(d,p)}),a(y),a(l),n(o,l)};O(b,o=>{t(ua).length>0&&o(A)})}var U=s(b,2),I=s(e(U),2),g=e(I),T=s(e(g));a(g);var c=s(g,2),m=s(e(c));a(c),a(I),a(U),a(_),D(()=>{r(T,` ${Aa.version}`),r(m,` ${Aa.formattedDate??""}`)}),n(v,_)};O(Oa,v=>{t(L)==="overview"&&v(Qa)})}var Ua=s(Oa,2);{var Wa=v=>{var _=Be(),B=e(_);{var S=c=>{var m=Re(),o=s(e(m),2),l=e(o),y=e(l),d=e(y,!0);a(y),j(2),a(l);var h=s(l,2),p=e(h),C=e(p,!0);a(p),j(2),a(h);var u=s(h,2),f=e(u),z=e(f,!0);a(f),j(2),a(u);var x=s(u,2),k=e(x),$=e(k,!0);a(k),j(2),a(x),a(o),a(m),D(()=>{r(d,t(Z).totalEntries),r(C,t(Z).consentGivenCount),r(z,t(Z).consentUpdatedCount),r($,t(Z).consentRevokedCount)}),n(c,m)};O(B,c=>{t(Z)&&c(S)})}var b=s(B,2),A=e(b),U=e(A);a(A);var I=s(A,2);{var g=c=>{var m=je(),o=e(m),l=s(e(o));ea(l,5,()=>t(ia).slice().reverse(),ta,(y,d)=>{var h=De(),p=e(h),C=e(p,!0);a(p);var u=s(p),f=e(u);let z;var x=e(f,!0);a(f),a(u);var k=s(u),$=e(k,!0);a(k);var E=s(k),q=e(E);{var F=w=>{var R=Te(),N=e(R,!0);a(R),D(M=>r(N,M),[()=>Object.entries(t(d).categories).filter(([,M])=>M).map(([M])=>M).join(", ")||"None"]),n(w,R)};O(q,w=>{t(d).categories&&w(F)})}a(E),a(h),D((w,R)=>{r(C,w),z=Y(f,1,"action-badge svelte-yha86d",null,z,{given:t(d).action==="consent_given",updated:t(d).action==="consent_updated",revoked:t(d).action==="consent_revoked"}),r(x,R),r($,t(d).method||"N/A")},[()=>Ja(t(d).timestamp),()=>t(d).action.replace("consent_","")]),n(y,h)}),a(l),a(o),a(m),n(c,m)},T=c=>{var m=Le();n(c,m)};O(I,c=>{t(ia).length>0?c(g):c(T,!1)})}a(b),a(_),D(()=>r(U,`Audit Log (${t(ia).length??""} entries)`)),n(v,_)};O(Ua,v=>{t(L)==="audit"&&v(Wa)})}var za=s(Ua,2);{var Xa=v=>{var _=Ue(),B=e(_);{var S=A=>{var U=Me(),I=wa(U),g=s(e(I),2),T=e(g),c=e(T),m=e(c,!0);a(c),j(2),a(T);var o=s(T,2),l=e(o),y=e(l,!0);a(l),j(2),a(o);var d=s(o,2),h=e(d),p=e(h,!0);a(h),j(2),a(d),a(g),a(I);var C=s(I,2);ea(C,1,()=>Object.entries(t(aa).byCategory),ta,(u,f)=>{var z=Pa(()=>Va(t(f),2));let x=()=>t(z)[0],k=()=>t(z)[1];var $=ce(),E=wa($);{var q=F=>{var w=$e(),R=e(w),N=e(R),M=e(N,!0);a(N);var ca=s(N);a(R);var oa=s(R,2),sa=e(oa),ra=s(e(sa));ea(ra,5,k,ta,(va,H)=>{var J=Se(),Q=e(J),G=e(Q),la=e(G,!0);a(G),a(Q);var W=s(Q),da=e(W,!0);a(W);var na=s(W),ha=e(na,!0);a(na);var _a=s(na),ya=e(_a,!0);a(_a),a(J),D(()=>{r(la,t(H).name),r(da,t(H).purpose||"Unknown"),r(ha,t(H).duration||"Session"),r(ya,t(H).type||"Unknown")}),n(va,J)}),a(ra),a(sa),a(oa),a(w),D(()=>{Y(N,1,`category-badge ${x()??""}`,"svelte-yha86d"),r(M,x()),r(ca,` (${k().length??""} cookies)`)}),n(F,w)};O(E,F=>{k().length>0&&F(q)})}n(u,$)}),D(()=>{r(m,t(aa).totalCookies),r(y,t(aa).categorizedCookies),r(p,t(aa).uncategorizedCookies)}),n(A,U)},b=A=>{var U=Oe();n(A,U)};O(B,A=>{t(aa)?A(S):A(b,!1)})}a(_),n(v,_)};O(za,v=>{t(L)==="cookies"&&v(Xa)})}var Ya=s(za,2);{var Za=v=>{var _=Ne(),B=e(_),S=e(B),b=s(e(S),2);b.__click=Ha,a(S);var A=s(S,2);{var U=g=>{var T=Ie(),c=e(T),m=s(e(c));ea(m,5,()=>t(pa),ta,(o,l)=>{var y=ze(),d=e(y),h=e(d),p=e(h,!0);a(h),a(d);var C=s(d),u=e(C,!0);a(C);var f=s(C),z=e(f,!0);a(f);var x=s(f),k=e(x,!0);a(x);var $=s(x),E=e($,!0);a($);var q=s($),F=e(q,!0);a(q),a(y),D((w,R,N,M)=>{r(p,t(l).variantId),r(u,t(l).impressions),r(z,w),r(k,R),r(E,N),r(F,M)},[()=>K(t(l).acceptRate),()=>K(t(l).rejectRate),()=>K(t(l).customizeRate),()=>Ta(t(l).avgTimeToDecision)]),n(o,y)}),a(m),a(c),a(T),n(g,T)},I=g=>{var T=Ee();n(g,T)};O(A,g=>{t(pa).length>0?g(U):g(I,!1)})}a(B),a(_),n(v,_)};O(Ya,v=>{t(L)==="ab-tests"&&v(Za)})}a(ma),D(()=>{La=Y(fa,1,"tab svelte-yha86d",null,La,{active:t(L)==="overview"}),Ba=Y(xa,1,"tab svelte-yha86d",null,Ba,{active:t(L)==="audit"}),Sa=Y(ka,1,"tab svelte-yha86d",null,Sa,{active:t(L)==="cookies"}),Ma=Y($a,1,"tab svelte-yha86d",null,Ma,{active:t(L)==="ab-tests"})}),n(qa,ma),le()}ee(["click"]);export{Je as component,He as universal};
