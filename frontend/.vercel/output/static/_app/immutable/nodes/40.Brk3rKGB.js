import{z as xt,p as yt,s as g,A as Le,o as zt,f as b,a9 as wt,q as t,R as kt,bM as Ne,M as ce,bN as Ct,U as Et,dk as At,ao as Mt,N as Pe,i as ne,w as P,bJ as Rt,g as a,bG as Ft,h as m,j as Lt,c,as as Nt,e as l,n as Te,x as i,at as Pt,r as e,H as S,bH as Tt,Q as De,k as Oe,d as Ue,aZ as Dt,J as Ot,bU as Ut,bZ as Ht,bV as Jt,O as Qt,K as He}from"../chunks/C_QN0JMx.js";import{c as me}from"../chunks/L2eW2QSs.js";var Vt=b("<option> </option>"),Zt=b('<div class="loading-state svelte-1mqldbm"><div class="spinner svelte-1mqldbm"></div> <p>Loading sequences...</p></div>'),$t=b('<div class="error-state svelte-1mqldbm"><p> </p> <button>Try Again</button></div>'),jt=b('<div class="empty-state svelte-1mqldbm"><!> <h3 class="svelte-1mqldbm">No sequences found</h3> <p class="svelte-1mqldbm">Create your first email sequence to start automating your campaigns</p> <a href="/admin/crm/sequences/new" class="btn-primary svelte-1mqldbm"><!> Create Sequence</a></div>'),Gt=b('<tr class="svelte-1mqldbm"><td class="svelte-1mqldbm"><div class="sequence-cell svelte-1mqldbm"><div class="sequence-icon svelte-1mqldbm"><!></div> <div class="sequence-info svelte-1mqldbm"><span class="sequence-title svelte-1mqldbm"> </span> <span class="sequence-meta svelte-1mqldbm"><!> </span></div></div></td><td class="svelte-1mqldbm"><span> </span></td><td class="svelte-1mqldbm"> </td><td class="svelte-1mqldbm"> </td><td class="svelte-1mqldbm"> </td><td class="svelte-1mqldbm"> </td><td class="svelte-1mqldbm"><div class="action-buttons svelte-1mqldbm"><a class="btn-icon svelte-1mqldbm" title="View"><!></a> <a class="btn-icon svelte-1mqldbm" title="Edit"><!></a> <button class="btn-icon svelte-1mqldbm" title="Duplicate"><!></button> <button class="btn-icon danger svelte-1mqldbm" title="Delete"><!></button></div></td></tr>'),It=b('<div class="table-container svelte-1mqldbm"><table class="data-table svelte-1mqldbm"><thead><tr><th class="svelte-1mqldbm">Sequence</th><th class="svelte-1mqldbm">Status</th><th class="svelte-1mqldbm">Emails</th><th class="svelte-1mqldbm">Subscribers</th><th class="svelte-1mqldbm">Open Rate</th><th class="svelte-1mqldbm">Click Rate</th><th class="svelte-1mqldbm">Actions</th></tr></thead><tbody class="svelte-1mqldbm"></tbody></table></div>'),Kt=b('<div class="sequences-page svelte-1mqldbm"><div class="page-header svelte-1mqldbm"><div><h1 class="svelte-1mqldbm">Email Sequences</h1> <p class="page-description svelte-1mqldbm">Create automated drip campaigns for your contacts</p></div> <div class="header-actions svelte-1mqldbm"><button class="btn-refresh svelte-1mqldbm"><!></button> <a href="/admin/crm/sequences/new" class="btn-primary svelte-1mqldbm"><!> New Sequence</a></div></div> <div class="stats-grid svelte-1mqldbm"><div class="stat-card svelte-1mqldbm"><div class="stat-icon blue svelte-1mqldbm"><!></div> <div class="stat-content svelte-1mqldbm"><span class="stat-value svelte-1mqldbm"> </span> <span class="stat-label svelte-1mqldbm">Total Sequences</span></div></div> <div class="stat-card svelte-1mqldbm"><div class="stat-icon green svelte-1mqldbm"><!></div> <div class="stat-content svelte-1mqldbm"><span class="stat-value svelte-1mqldbm"> </span> <span class="stat-label svelte-1mqldbm">Active</span></div></div> <div class="stat-card svelte-1mqldbm"><div class="stat-icon purple svelte-1mqldbm"><!></div> <div class="stat-content svelte-1mqldbm"><span class="stat-value svelte-1mqldbm"> </span> <span class="stat-label svelte-1mqldbm">Total Subscribers</span></div></div> <div class="stat-card svelte-1mqldbm"><div class="stat-icon amber svelte-1mqldbm"><!></div> <div class="stat-content svelte-1mqldbm"><span class="stat-value svelte-1mqldbm"> </span> <span class="stat-label svelte-1mqldbm">Emails Sent</span></div></div></div> <div class="filters-bar svelte-1mqldbm"><div class="search-box svelte-1mqldbm"><!> <input type="text" placeholder="Search sequences..." class="svelte-1mqldbm"/></div> <select class="filter-select svelte-1mqldbm"></select></div> <!></div>');function Xt(Je,Qe){yt(Qe,!0);let u=g(Le([])),x=g(!0),_=g(""),y=g(""),q=g("all"),z=g(Le({total:0,active:0,totalSubscribers:0,totalSent:0}));const Ve=[{value:"all",label:"All Sequences"},{value:"draft",label:"Draft"},{value:"active",label:"Active"},{value:"paused",label:"Paused"},{value:"completed",label:"Completed"}];async function w(){c(x,!0),c(_,"");try{const s={search:a(y)||void 0,status:a(q)!=="all"?a(q):void 0},r=await me.getSequences(s);c(u,r.data||[],!0),c(z,{total:a(u).length,active:a(u).filter(v=>v.status==="active").length,totalSubscribers:a(u).reduce((v,n)=>v+n.subscribers_count,0),totalSent:a(u).reduce((v,n)=>v+n.total_sent,0)},!0)}catch(s){c(_,s instanceof Error?s.message:"Failed to load sequences",!0)}finally{c(x,!1)}}async function Ze(s){try{await me.duplicateSequence(s),await w()}catch(r){c(_,r instanceof Error?r.message:"Failed to duplicate sequence",!0)}}async function $e(s){if(confirm("Are you sure you want to delete this sequence?"))try{await me.deleteSequence(s),await w()}catch(r){c(_,r instanceof Error?r.message:"Failed to delete sequence",!0)}}function k(s){return s.toLocaleString()}function oe(s,r){return s===0?"0%":(r/s*100).toFixed(1)+"%"}function je(s){return{draft:"bg-slate-500/20 text-slate-400",active:"bg-emerald-500/20 text-emerald-400",paused:"bg-amber-500/20 text-amber-400",completed:"bg-blue-500/20 text-blue-400"}[s]}let be=Te(()=>a(u).filter(s=>{const r=!a(y)||s.title.toLowerCase().includes(a(y).toLowerCase()),v=a(q)==="all"||s.status===a(q);return r&&v}));zt(()=>{w()});var T=Kt();wt("1mqldbm",s=>{Nt(()=>{Pt.title="Email Sequences - FluentCRM Pro"})});var D=t(T),ue=l(t(D),2),C=t(ue);C.__click=()=>w();var Ge=t(C);{let s=Te(()=>a(x)?"spinning":"");kt(Ge,{size:18,get class(){return a(s)}})}e(C);var _e=l(C,2),Ie=t(_e);Ne(Ie,{size:18}),S(),e(_e),e(ue),e(D);var O=l(D,2),U=t(O),H=t(U),Ke=t(H);ce(Ke,{size:24}),e(H);var qe=l(H,2),pe=t(qe),Be=t(pe,!0);e(pe),S(2),e(qe),e(U);var J=l(U,2),Q=t(J),We=t(Q);Ct(We,{size:24}),e(Q);var fe=l(Q,2),he=t(fe),Xe=t(he,!0);e(he),S(2),e(fe),e(J);var V=l(J,2),Z=t(V),Ye=t(Z);Et(Ye,{size:24}),e(Z);var ge=l(Z,2),Se=t(ge),et=t(Se,!0);e(Se),S(2),e(ge),e(V);var xe=l(V,2),$=t(xe),tt=t($);At(tt,{size:24}),e($);var ye=l($,2),ze=t(ye),at=t(ze,!0);e(ze),S(2),e(ye),e(xe),e(O);var j=l(O,2),G=t(j),we=t(G);Mt(we,{size:18});var ke=l(we,2);Tt(ke),e(G);var I=l(G,2);Pe(I,21,()=>Ve,De,(s,r)=>{var v=Vt(),n=t(v,!0);e(v);var R={};P(()=>{i(n,a(r).label),R!==(R=a(r).value)&&(v.value=(v.__value=a(r).value)??"")}),m(s,v)}),e(I),e(j);var st=l(j,2);{var lt=s=>{var r=Zt();m(s,r)},rt=s=>{var r=Oe(),v=Ue(r);{var n=p=>{var f=$t(),E=t(f),K=t(E,!0);e(E);var B=l(E,2);B.__click=()=>w(),e(f),P(()=>i(K,a(_))),m(p,f)},R=p=>{var f=Oe(),E=Ue(f);{var K=h=>{var o=jt(),A=t(o);ce(A,{size:48});var M=l(A,6),W=t(M);Ne(W,{size:18}),S(),e(M),e(o),m(h,o)},B=h=>{var o=It(),A=t(o),M=l(t(A));Pe(M,21,()=>a(be),De,(W,d)=>{var X=Gt(),Y=t(X),Ce=t(Y),ee=t(Ce),vt=t(ee);ce(vt,{size:20}),e(ee);var Ee=l(ee,2),te=t(Ee),dt=t(te,!0);e(te);var Ae=l(te,2),Me=t(Ae);Dt(Me,{size:12});var it=l(Me);e(Ae),e(Ee),e(Ce),e(Y);var ae=l(Y),se=t(ae),ct=t(se,!0);e(se),e(ae);var le=l(ae),nt=t(le,!0);e(le);var re=l(le),mt=t(re,!0);e(re);var ve=l(re),ot=t(ve,!0);e(ve);var de=l(ve),bt=t(de,!0);e(de);var Re=l(de),Fe=t(Re),F=t(Fe),ut=t(F);Ot(ut,{size:16}),e(F);var L=l(F,2),_t=t(L);Ut(_t,{size:16}),e(L);var N=l(L,2);N.__click=()=>Ze(a(d).id);var qt=t(N);Ht(qt,{size:16}),e(N);var ie=l(N,2);ie.__click=()=>$e(a(d).id);var pt=t(ie);Jt(pt,{size:16}),e(ie),e(Fe),e(Re),e(X),P((ft,ht,gt,St)=>{i(dt,a(d).title),i(it,` ${a(d).emails_count??""} emails`),Qt(se,1,`status-badge ${ft??""}`,"svelte-1mqldbm"),i(ct,a(d).status),i(nt,a(d).emails_count),i(mt,ht),i(ot,gt),i(bt,St),He(F,"href",`/admin/crm/sequences/${a(d).id??""}`),He(L,"href",`/admin/crm/sequences/${a(d).id??""}/edit`)},[()=>je(a(d).status),()=>k(a(d).subscribers_count),()=>oe(a(d).total_sent,a(d).total_opened),()=>oe(a(d).total_sent,a(d).total_clicked)]),m(W,X)}),e(M),e(A),e(o),m(h,o)};ne(E,h=>{a(be).length===0?h(K):h(B,!1)},!0)}m(p,f)};ne(v,p=>{a(_)?p(n):p(R,!1)},!0)}m(s,r)};ne(st,s=>{a(x)?s(lt):s(rt,!1)})}e(T),P((s,r,v,n)=>{C.disabled=a(x),i(Be,s),i(Xe,r),i(et,v),i(at,n)},[()=>k(a(z).total),()=>k(a(z).active),()=>k(a(z).totalSubscribers),()=>k(a(z).totalSent)]),Rt(ke,()=>a(y),s=>c(y,s)),Ft(I,()=>a(q),s=>c(q,s)),m(Je,T),Lt()}xt(["click"]);export{Xt as component};
