import{p as zt,s as P,A as ot,o as Bt,b as Ft,g as t,f as v,a9 as qt,i as L,h as i,j as It,c as b,as as Nt,e as s,q as a,at as kt,bM as Dt,H as dt,r,d as g,w as m,x as u,k as nt,N as Ot,M as Qt,v as Et,n as Ht,K as W,O as Jt,da as Kt,Q as Rt}from"../chunks/C_QN0JMx.js";import{B as Ut,I as Gt,S as Vt,C as x,a as Wt}from"../chunks/ButKoJq5.js";import{B as Xt}from"../chunks/COvxyfnH.js";import{T as Yt}from"../chunks/CX5HRabs.js";import"../chunks/l0sNRNKZ.js";import"../chunks/Div_5PT3.js";import{c as Zt}from"../chunks/L2eW2QSs.js";var te=v('<a href="/admin/contacts/new" class="flex items-center gap-2"><!> Add Contact</a>'),ee=v('<p class="text-sm text-gray-600">Total Contacts</p> <p class="text-2xl font-bold mt-1"> </p>',1),ae=v('<p class="text-sm text-gray-600">Customers</p> <p class="text-2xl font-bold mt-1 text-green-600"> </p>',1),re=v('<p class="text-sm text-gray-600">Prospects</p> <p class="text-2xl font-bold mt-1 text-blue-600"> </p>',1),se=v('<p class="text-sm text-gray-600">Leads</p> <p class="text-2xl font-bold mt-1 text-yellow-600"> </p>',1),le=v('<div class="text-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading contacts...</p></div>'),oe=v('<div class="text-center py-12"><p class="text-gray-500">No contacts found.</p> <p class="text-sm text-gray-400 mt-2">Form submissions will automatically create contacts here.</p></div>'),de=v('<a class="flex items-center gap-2 text-gray-600 hover:text-blue-600"><!> </a>'),ne=v('<span class="text-gray-400">—</span>'),ie=v('<tr><td><a class="font-semibold text-blue-600 hover:text-blue-700"> </a></td><td><a class="flex items-center gap-2 text-gray-600 hover:text-blue-600"><!> </a></td><td><!></td><td> </td><td><!></td><td><span> </span></td><td class="text-gray-600"> </td></tr>'),ve=v('<div class="flex justify-center gap-2 mt-4"><p class="text-sm text-gray-600"> </p></div>'),ue=v("<!> <!>",1),ce=v('<div><div class="flex items-center justify-between mb-6"><div><h1 class="text-3xl font-bold text-gray-900">Contacts</h1> <p class="text-gray-600 mt-1">Manage your contact list and leads</p></div> <!></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><!> <!></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"><!> <!> <!> <!></div> <!></div>');function $e(it,vt){zt(vt,!0);let h=P(ot([])),M=P(!0),j=P(""),w=P(""),$=P(ot({current_page:1,last_page:1,total:0}));const ut=[{value:"",label:"All Statuses"},{value:"lead",label:"Lead"},{value:"prospect",label:"Prospect"},{value:"customer",label:"Customer"},{value:"churned",label:"Churned"},{value:"unqualified",label:"Unqualified"}];Bt(async()=>{await z()});async function z(){try{b(M,!0);const e=await Zt.getContacts({search:t(j)||void 0,status:t(w)||void 0,per_page:25});b(h,e.data||[],!0),e.meta&&b($,{current_page:e.meta.current_page,last_page:e.meta.last_page,total:e.meta.total},!0)}catch{Wt({type:"error",message:"Failed to load contacts"})}finally{b(M,!1)}}function ct(e){switch(e){case"customer":return"success";case"prospect":return"info";case"lead":return"warning";case"churned":return"default";default:return"default"}}Ft(()=>{t(w)!==""&&z()});let X;function pt(){clearTimeout(X),X=setTimeout(()=>{z()},300)}var B=ce();qt("dszp7e",e=>{Nt(()=>{kt.title="Contacts | Revolution Admin"})});var F=a(B),_t=s(a(F),2);Ut(_t,{children:(e,p)=>{var l=te(),d=a(l);Dt(d,{size:20}),dt(),r(l),i(e,l)},$$slots:{default:!0}}),r(F);var q=s(F,2),Y=a(q);Gt(Y,{placeholder:"Search contacts...",oninput:pt,get value(){return t(j)},set value(e){b(j,e,!0)}});var ft=s(Y,2);Vt(ft,{get options(){return ut},placeholder:"Filter by status",get value(){return t(w)},set value(e){b(w,e,!0)}}),r(q);var I=s(q,2),Z=a(I);x(Z,{children:(e,p)=>{var l=ee(),d=s(g(l),2),_=a(d,!0);r(d),m(()=>u(_,t($).total)),i(e,l)},$$slots:{default:!0}});var tt=s(Z,2);x(tt,{children:(e,p)=>{var l=ae(),d=s(g(l),2),_=a(d,!0);r(d),m(o=>u(_,o),[()=>t(h).filter(o=>o.status==="customer").length]),i(e,l)},$$slots:{default:!0}});var et=s(tt,2);x(et,{children:(e,p)=>{var l=re(),d=s(g(l),2),_=a(d,!0);r(d),m(o=>u(_,o),[()=>t(h).filter(o=>o.status==="prospect").length]),i(e,l)},$$slots:{default:!0}});var mt=s(et,2);x(mt,{children:(e,p)=>{var l=se(),d=s(g(l),2),_=a(d,!0);r(d),m(o=>u(_,o),[()=>t(h).filter(o=>o.status==="lead").length]),i(e,l)},$$slots:{default:!0}}),r(I);var gt=s(I,2);{var xt=e=>{x(e,{children:(p,l)=>{var d=le();i(p,d)},$$slots:{default:!0}})},ht=e=>{var p=nt(),l=g(p);{var d=o=>{x(o,{children:(C,N)=>{var k=oe();i(C,k)},$$slots:{default:!0}})},_=o=>{var C=ue(),N=g(C);x(N,{padding:!1,children:(y,S)=>{Yt(y,{headers:["Name","Email","Phone","Job Title","Status","Lead Score","Last Activity"],children:(T,at)=>{var rt=nt(),bt=g(rt);Ot(bt,17,()=>t(h),Rt,(yt,n)=>{var D=ie(),O=a(D),Q=a(O),Pt=a(Q,!0);r(Q),r(O);var E=s(O),H=a(E),st=a(H);Qt(st,{size:16});var wt=s(st);r(H),r(E);var J=s(E),Ct=a(J);{var St=c=>{var f=de(),V=a(f);Kt(V,{size:16});var A=s(V);r(f),m(()=>{W(f,"href",`tel:${t(n).phone??""}`),u(A,` ${t(n).phone??""}`)}),i(c,f)},Tt=c=>{var f=ne();i(c,f)};L(Ct,c=>{t(n).phone?c(St):c(Tt,!1)})}r(J);var K=s(J),At=a(K,!0);r(K);var R=s(K),Lt=a(R);{let c=Ht(()=>ct(t(n).status));Xt(Lt,{get variant(){return t(c)},children:(f,V)=>{dt();var A=Et();m(()=>u(A,t(n).status)),i(f,A)},$$slots:{default:!0}})}r(R);var U=s(R),G=a(U),Mt=a(G,!0);r(G),r(U);var lt=s(U),jt=a(lt,!0);r(lt),r(D),m(c=>{W(Q,"href",`/admin/contacts/${t(n).id??""}`),u(Pt,t(n).full_name||`${t(n).first_name} ${t(n).last_name}`),W(H,"href",`mailto:${t(n).email??""}`),u(wt,` ${t(n).email??""}`),u(At,t(n).job_title||"—"),Jt(G,1,`font-medium ${t(n).lead_score>=70?"text-green-600":t(n).lead_score>=40?"text-yellow-600":"text-gray-500"}`),u(Mt,t(n).lead_score||0),u(jt,c)},[()=>t(n).last_activity_at?new Date(t(n).last_activity_at).toLocaleDateString():"—"]),i(yt,D)}),i(T,rt)},$$slots:{default:!0}})},$$slots:{default:!0}});var k=s(N,2);{var $t=y=>{var S=ve(),T=a(S),at=a(T);r(T),r(S),m(()=>u(at,`Page ${t($).current_page??""} of ${t($).last_page??""} (${t($).total??""} contacts)`)),i(y,S)};L(k,y=>{t($).last_page>1&&y($t)})}i(o,C)};L(l,o=>{t(h).length===0?o(d):o(_,!1)},!0)}i(e,p)};L(gt,e=>{t(M)?e(xt):e(ht,!1)})}r(B),i(it,B),It()}export{$e as component};
