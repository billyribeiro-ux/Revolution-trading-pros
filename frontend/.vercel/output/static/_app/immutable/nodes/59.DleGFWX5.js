import{z as va,p as na,s as se,A as Ue,b as ca,B as da,c as W,g as e,f as u,a9 as ua,aM as ma,N as H,i as x,D as pa,h as c,j as _a,E as ba,aa as ka,as as za,q as t,e as s,at as fa,H as re,r as a,Q,F as ga,w as b,O as G,x as p,al as ha,v as ya,n as Z,bH as X,bI as De,bJ as j,bG as oe,l as xa,aD as Ia,bD as Ra,dp as wa,dq as Ua,dr as Da,c0 as Sa,Z as Ca,bM as La,d1 as Se,ds as Ce,K as Ta}from"../chunks/C_QN0JMx.js";import{l as Le}from"../chunks/ChgkinvD.js";import{R as Pa}from"../chunks/-T5RjOxz.js";var qa=u('<div><div class="step-number svelte-19ukczm"><!></div> <div class="step-info svelte-19ukczm"><span class="step-title svelte-19ukczm"> </span> <span class="step-desc svelte-19ukczm"> </span></div></div>'),Aa=u('<p class="error-message svelte-19ukczm"> </p>'),Fa=u('<div class="form-step svelte-19ukczm"><div class="step-header svelte-19ukczm"><h2 class="svelte-19ukczm">Which Trading Room(s) is this lesson for?</h2> <p class="svelte-19ukczm">Select one or more trading rooms where this lesson will be available.</p></div> <!> <!></div>'),$a=u('<span class="error-text svelte-19ukczm"> </span>'),Na=u('<span class="error-text svelte-19ukczm"> </span>'),Oa=u("<option> </option>"),Ba=u('<span class="error-text svelte-19ukczm"> </span>'),Ea=u("<option> </option>"),Ma=u('<span class="error-text svelte-19ukczm"> </span>'),Va=u("<option> </option>"),Wa=u('<div class="form-group svelte-19ukczm"><label for="module" class="svelte-19ukczm">Module (Optional)</label> <select id="module" class="svelte-19ukczm"><option>No module</option><!></select></div>'),Ha=u('<div class="form-step svelte-19ukczm"><div class="step-header svelte-19ukczm"><h2 class="svelte-19ukczm">Lesson Details</h2> <p class="svelte-19ukczm">Enter the basic information about this lesson.</p></div> <div class="form-grid svelte-19ukczm"><div class="form-group full-width svelte-19ukczm"><label for="title" class="svelte-19ukczm">Title <span class="required svelte-19ukczm">*</span></label> <input type="text" id="title" placeholder="Enter lesson title"/> <!></div> <div class="form-group full-width svelte-19ukczm"><label for="description" class="svelte-19ukczm">Short Description <span class="required svelte-19ukczm">*</span></label> <textarea id="description" placeholder="Brief description (shown in listings)" rows="2"></textarea> <!></div> <div class="form-group full-width svelte-19ukczm"><label for="fullDescription" class="svelte-19ukczm">Full Description</label> <textarea id="fullDescription" placeholder="Detailed description (shown on lesson page)" rows="4" class="svelte-19ukczm"></textarea></div> <div class="form-group svelte-19ukczm"><label for="trainer" class="svelte-19ukczm">Trainer <span class="required svelte-19ukczm">*</span></label> <select id="trainer"><option>Select trainer...</option><!></select> <!></div> <div class="form-group svelte-19ukczm"><label for="category" class="svelte-19ukczm">Category <span class="required svelte-19ukczm">*</span></label> <select id="category"><option>Select category...</option><!></select> <!></div> <!> <div class="form-group svelte-19ukczm"><label for="duration" class="svelte-19ukczm">Duration</label> <input type="text" id="duration" placeholder="e.g., 45:00 or 1:30:00" class="svelte-19ukczm"/></div></div></div>'),ja=u('<button type="button"><!> <span class="type-label svelte-19ukczm"> </span> <span class="type-desc svelte-19ukczm"> </span></button>'),Ja=u('<span class="error-text svelte-19ukczm"> </span>'),Ka=u('<div class="form-group svelte-19ukczm"><label for="videoUrl" class="svelte-19ukczm">Video URL <span class="required svelte-19ukczm">*</span></label> <input type="url" id="videoUrl" placeholder="https://..."/> <span class="helper-text svelte-19ukczm">Supports YouTube, Vimeo, Wistia, or direct video URLs (S3, etc.)</span> <!></div>'),Qa=u('<div class="preview-section svelte-19ukczm"><label>Preview</label> <div class="preview-image svelte-19ukczm"><img alt="Preview" class="svelte-19ukczm"/></div></div>'),Ga=u('<div class="form-step svelte-19ukczm"><div class="step-header svelte-19ukczm"><h2 class="svelte-19ukczm">Lesson Content</h2> <p class="svelte-19ukczm">Select the content type and add your lesson material.</p></div> <div class="type-selector svelte-19ukczm"><label class="label svelte-19ukczm">Content Type</label> <div class="type-options svelte-19ukczm"></div></div> <!> <div class="form-grid svelte-19ukczm"><div class="form-group svelte-19ukczm"><label for="thumbnailUrl" class="svelte-19ukczm">Thumbnail URL</label> <input type="url" id="thumbnailUrl" placeholder="https://..." class="svelte-19ukczm"/> <span class="helper-text svelte-19ukczm">Image shown in listings (16:9 ratio recommended)</span></div> <div class="form-group svelte-19ukczm"><label for="posterUrl" class="svelte-19ukczm">Poster Image URL</label> <input type="url" id="posterUrl" placeholder="https://..." class="svelte-19ukczm"/> <span class="helper-text svelte-19ukczm">Displayed before video plays</span></div></div> <!></div>'),Xa=u('<label class="radio-option svelte-19ukczm"><input type="radio" name="accessLevel" class="svelte-19ukczm"/> <div class="radio-content svelte-19ukczm"><span class="radio-label svelte-19ukczm"> </span> <span class="radio-desc svelte-19ukczm"> </span></div></label>'),Ya=u("<option> </option>"),Za=u('<span class="tag svelte-19ukczm"> <button type="button" class="svelte-19ukczm"><!></button></span>'),et=u('<p class="error-message svelte-19ukczm"> </p>'),at=u('<div class="form-step svelte-19ukczm"><div class="step-header svelte-19ukczm"><h2 class="svelte-19ukczm">Settings</h2> <p class="svelte-19ukczm">Configure access level, status, and tags.</p></div> <div class="form-group svelte-19ukczm"><label class="svelte-19ukczm">Access Level</label> <div class="radio-options svelte-19ukczm"></div></div> <div class="form-group svelte-19ukczm"><label for="status" class="svelte-19ukczm">Status</label> <select id="status" class="svelte-19ukczm"></select> <span class="helper-text svelte-19ukczm">Draft lessons are not visible to members</span></div> <div class="form-group svelte-19ukczm"><label class="svelte-19ukczm">Tags</label> <div class="tags-input svelte-19ukczm"><div class="tags-list svelte-19ukczm"></div> <div class="tag-add svelte-19ukczm"><input type="text" placeholder="Add a tag..." class="svelte-19ukczm"/> <button type="button" class="svelte-19ukczm"><!></button></div></div></div> <div class="summary-section svelte-19ukczm"><h3 class="svelte-19ukczm">Summary</h3> <div class="summary-grid svelte-19ukczm"><div class="summary-item svelte-19ukczm"><span class="summary-label svelte-19ukczm">Title</span> <span class="summary-value svelte-19ukczm"> </span></div> <div class="summary-item svelte-19ukczm"><span class="summary-label svelte-19ukczm">Trading Rooms</span> <span class="summary-value svelte-19ukczm"> </span></div> <div class="summary-item svelte-19ukczm"><span class="summary-label svelte-19ukczm">Type</span> <span class="summary-value svelte-19ukczm"> </span></div> <div class="summary-item svelte-19ukczm"><span class="summary-label svelte-19ukczm">Status</span> <span class="summary-value svelte-19ukczm"> </span></div></div></div> <!></div>'),tt=u('<button type="button" class="btn-secondary svelte-19ukczm">Back</button>'),st=u("<div></div>"),rt=u('<button type="button" class="btn-primary svelte-19ukczm">Continue</button>'),lt=u('<button type="submit" class="btn-primary svelte-19ukczm"> </button>'),it=u('<div class="admin-page svelte-19ukczm"><header class="page-header svelte-19ukczm"><a href="/admin/learning-center" class="back-link svelte-19ukczm"><!> Back to Learning Center</a> <h1 class="svelte-19ukczm">Create New Lesson</h1></header> <div class="steps-nav svelte-19ukczm"></div> <form class="svelte-19ukczm"><!> <!> <!> <!> <div class="form-nav svelte-19ukczm"><!> <!></div></form></div>');function ct(Te,Pe){na(Pe,!0);const qe=()=>da(ka,"$page",Ae),[Ae,Fe]=ba(),$e=[];let le=se(!1),C=se(1),m=se(Ue({})),l=se(Ue({title:"",description:"",fullDescription:"",type:"video",videoUrl:"",posterUrl:"",thumbnailUrl:"",duration:"",tradingRoomIds:[],trainerId:"",categoryId:"",tags:[],accessLevel:"member",moduleId:"",status:"draft"})),ie=se(""),ve=Z(()=>Se(Le)),Ne=Z(()=>e(ve).tradingRooms.filter(r=>r.hasLearningCenter&&r.isActive)),Oe=Z(()=>e(ve).trainers.filter(r=>r.isActive)),Be=Z(()=>e(ve).categories.filter(r=>r.isActive)),be=Z(()=>e(l).tradingRoomIds.length===0?[]:Se(Le).modules.filter(i=>i.tradingRoomId===e(l).tradingRoomIds[0]));ca(()=>{{const r=qe().url.searchParams.get("duplicate");if(r)try{const i=JSON.parse(decodeURIComponent(r));W(l,{...e(l),...i},!0)}catch{}}});const Ee=[{value:"video",label:"Video",icon:Ia,description:"Upload or embed a video lesson"},{value:"article",label:"Article",icon:Ra,description:"Written content with text and images"},{value:"pdf",label:"PDF",icon:wa,description:"Downloadable PDF document"},{value:"quiz",label:"Quiz",icon:Ua,description:"Interactive quiz or assessment"},{value:"webinar-replay",label:"Webinar Replay",icon:Da,description:"Recorded webinar or live session"}],Me=[{value:"free",label:"Free",description:"Available to everyone"},{value:"member",label:"Members Only",description:"Requires an active subscription"},{value:"premium",label:"Premium",description:"Requires premium membership"}],Ve=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}];function ke(r){const i={};return r===1&&e(l).tradingRoomIds.length===0&&(i.tradingRoomIds="Please select at least one trading room"),r===2&&(e(l).title.trim()||(i.title="Title is required"),e(l).description.trim()||(i.description="Description is required"),e(l).trainerId||(i.trainerId="Please select a trainer"),e(l).categoryId||(i.categoryId="Please select a category")),r===3&&e(l).type==="video"&&!e(l).videoUrl&&(i.videoUrl="Video URL is required"),W(m,i,!0),Object.keys(i).length===0}function We(r){e(l).tradingRoomIds=r,e(m).tradingRoomIds&&W(m,{...e(m),tradingRoomIds:""},!0)}function He(){ke(e(C))&&Ce(C)}function je(){Ce(C,-1)}function ze(){const r=e(ie).trim().toLowerCase();r&&!e(l).tags?.includes(r)&&(e(l).tags=[...e(l).tags||[],r],W(ie,""))}function Je(r){e(l).tags=e(l).tags?.filter(i=>i!==r)||[]}function Ke(r){r.key==="Enter"&&(r.preventDefault(),ze())}async function Qe(){if(ke(e(C))){W(le,!0);try{await ga("/admin/learning-center")}catch{W(m,{...e(m),submit:"Failed to create lesson. Please try again."},!0)}finally{W(le,!1)}}}const Ge=[{number:1,title:"Select Rooms",description:"Choose which trading rooms this lesson belongs to"},{number:2,title:"Basic Info",description:"Title, description, and metadata"},{number:3,title:"Content",description:"Add video, article, or other content"},{number:4,title:"Settings",description:"Access level, status, and tags"}];var ne=it();ua("19ukczm",r=>{za(()=>{fa.title="Create Lesson | Admin | Revolution Trading Pros"})});var ce=t(ne),fe=t(ce),Xe=t(fe);ma(Xe,{size:18}),re(),a(fe),re(2),a(ce);var de=s(ce,2);H(de,21,()=>Ge,Q,(r,i)=>{var k=qa();let w;var h=t(k),U=t(h);{var R=n=>{ha(n,{size:14})},P=n=>{var _=ya();b(()=>p(_,e(i).number)),c(n,_)};x(U,n=>{e(C)>e(i).number?n(R):n(P,!1)})}a(h);var L=s(h,2),D=t(L),q=t(D,!0);a(D);var F=s(D,2),J=t(F,!0);a(F),a(L),a(k),b(()=>{w=G(k,1,"step svelte-19ukczm",null,w,{active:e(C)===e(i).number,completed:e(C)>e(i).number}),p(q,e(i).title),p(J,e(i).description)}),c(r,k)}),a(de);var ue=s(de,2),ge=t(ue);{var Ye=r=>{var i=Fa(),k=s(t(i),2);Pa(k,{get rooms(){return e(Ne)},get selectedRoomIds(){return e(l).tradingRoomIds},onSelect:We,multiple:!0,showDescription:!0});var w=s(k,2);{var h=U=>{var R=Aa(),P=t(R,!0);a(R),b(()=>p(P,e(m).tradingRoomIds)),c(U,R)};x(w,U=>{e(m).tradingRoomIds&&U(h)})}a(i),c(r,i)};x(ge,r=>{e(C)===1&&r(Ye)})}var he=s(ge,2);{var Ze=r=>{var i=Ha(),k=s(t(i),2),w=t(k),h=s(t(w),2);X(h);let U;var R=s(h,2);{var P=o=>{var v=$a(),d=t(v,!0);a(v),b(()=>p(d,e(m).title)),c(o,v)};x(R,o=>{e(m).title&&o(P)})}a(w);var L=s(w,2),D=s(t(L),2);De(D);let q;var F=s(D,2);{var J=o=>{var v=Na(),d=t(v,!0);a(v),b(()=>p(d,e(m).description)),c(o,v)};x(F,o=>{e(m).description&&o(J)})}a(L);var n=s(L,2),_=s(t(n),2);De(_),a(n);var y=s(n,2),z=s(t(y),2);let O;var A=t(z);A.value=A.__value="";var S=s(A);H(S,17,()=>e(Oe),Q,(o,v)=>{var d=Oa(),M=t(d,!0);a(d);var N={};b(()=>{p(M,e(v).name),N!==(N=e(v).id)&&(d.value=(d.__value=e(v).id)??"")}),c(o,d)}),a(z);var B=s(z,2);{var $=o=>{var v=Ba(),d=t(v,!0);a(v),b(()=>p(d,e(m).trainerId)),c(o,v)};x(B,o=>{e(m).trainerId&&o($)})}a(y);var V=s(y,2),E=s(t(V),2);let K;var Y=t(E);Y.value=Y.__value="";var me=s(Y);H(me,17,()=>e(Be),Q,(o,v)=>{var d=Ea(),M=t(d,!0);a(d);var N={};b(()=>{p(M,e(v).name),N!==(N=e(v).id)&&(d.value=(d.__value=e(v).id)??"")}),c(o,d)}),a(E);var pe=s(E,2);{var _e=o=>{var v=Ma(),d=t(v,!0);a(v),b(()=>p(d,e(m).categoryId)),c(o,v)};x(pe,o=>{e(m).categoryId&&o(_e)})}a(V);var I=s(V,2);{var f=o=>{var v=Wa(),d=s(t(v),2),M=t(d);M.value=M.__value="";var N=s(M);H(N,17,()=>e(be),Q,(ee,ae)=>{var te=Va(),oa=t(te,!0);a(te);var we={};b(()=>{p(oa,e(ae).name),we!==(we=e(ae).id)&&(te.value=(te.__value=e(ae).id)??"")}),c(ee,te)}),a(d),a(v),oe(d,()=>e(l).moduleId,ee=>e(l).moduleId=ee),c(o,v)};x(I,o=>{e(be).length>0&&o(f)})}var g=s(I,2),T=s(t(g),2);X(T),a(g),a(k),a(i),b(()=>{U=G(h,1,"svelte-19ukczm",null,U,{error:e(m).title}),q=G(D,1,"svelte-19ukczm",null,q,{error:e(m).description}),O=G(z,1,"svelte-19ukczm",null,O,{error:e(m).trainerId}),K=G(E,1,"svelte-19ukczm",null,K,{error:e(m).categoryId})}),j(h,()=>e(l).title,o=>e(l).title=o),j(D,()=>e(l).description,o=>e(l).description=o),j(_,()=>e(l).fullDescription,o=>e(l).fullDescription=o),oe(z,()=>e(l).trainerId,o=>e(l).trainerId=o),oe(E,()=>e(l).categoryId,o=>e(l).categoryId=o),j(T,()=>e(l).duration,o=>e(l).duration=o),c(r,i)};x(he,r=>{e(C)===2&&r(Ze)})}var ye=s(he,2);{var ea=r=>{var i=Ga(),k=s(t(i),2),w=s(t(k),2);H(w,21,()=>Ee,n=>n.value,(n,_)=>{const y=Z(()=>e(_).icon);var z=ja();let O;z.__click=()=>e(l).type=e(_).value;var A=t(z);xa(A,()=>e(y),(E,K)=>{K(E,{size:24})});var S=s(A,2),B=t(S,!0);a(S);var $=s(S,2),V=t($,!0);a($),a(z),b(()=>{O=G(z,1,"type-option svelte-19ukczm",null,O,{selected:e(l).type===e(_).value}),p(B,e(_).label),p(V,e(_).description)}),c(n,z)}),a(w),a(k);var h=s(k,2);{var U=n=>{var _=Ka(),y=s(t(_),2);X(y);let z;var O=s(y,4);{var A=S=>{var B=Ja(),$=t(B,!0);a(B),b(()=>p($,e(m).videoUrl)),c(S,B)};x(O,S=>{e(m).videoUrl&&S(A)})}a(_),b(()=>z=G(y,1,"svelte-19ukczm",null,z,{error:e(m).videoUrl})),j(y,()=>e(l).videoUrl,S=>e(l).videoUrl=S),c(n,_)};x(h,n=>{(e(l).type==="video"||e(l).type==="webinar-replay")&&n(U)})}var R=s(h,2),P=t(R),L=s(t(P),2);X(L),re(2),a(P);var D=s(P,2),q=s(t(D),2);X(q),re(2),a(D),a(R);var F=s(R,2);{var J=n=>{var _=Qa(),y=s(t(_),2),z=t(y);a(y),a(_),b(()=>Ta(z,"src",e(l).thumbnailUrl||e(l).posterUrl)),c(n,_)};x(F,n=>{(e(l).thumbnailUrl||e(l).posterUrl)&&n(J)})}a(i),j(L,()=>e(l).thumbnailUrl,n=>e(l).thumbnailUrl=n),j(q,()=>e(l).posterUrl,n=>e(l).posterUrl=n),c(r,i)};x(ye,r=>{e(C)===3&&r(ea)})}var xe=s(ye,2);{var aa=r=>{var i=at(),k=s(t(i),2),w=s(t(k),2);H(w,21,()=>Me,Q,(I,f)=>{var g=Xa(),T=t(g);X(T);var o,v=s(T,2),d=t(v),M=t(d,!0);a(d);var N=s(d,2),ee=t(N,!0);a(N),a(v),a(g),b(()=>{o!==(o=e(f).value)&&(T.value=(T.__value=e(f).value)??""),p(M,e(f).label),p(ee,e(f).description)}),Sa($e,[],T,()=>(e(f).value,e(l).accessLevel),ae=>e(l).accessLevel=ae),c(I,g)}),a(w),a(k);var h=s(k,2),U=s(t(h),2);H(U,21,()=>Ve,Q,(I,f)=>{var g=Ya(),T=t(g,!0);a(g);var o={};b(()=>{p(T,e(f).label),o!==(o=e(f).value)&&(g.value=(g.__value=e(f).value)??"")}),c(I,g)}),a(U),re(2),a(h);var R=s(h,2),P=s(t(R),2),L=t(P);H(L,21,()=>e(l).tags||[],Q,(I,f)=>{var g=Za(),T=t(g),o=s(T);o.__click=()=>Je(e(f));var v=t(o);Ca(v,{size:12}),a(o),a(g),b(()=>p(T,`${e(f)??""} `)),c(I,g)}),a(L);var D=s(L,2),q=t(D);X(q),q.__keydown=Ke;var F=s(q,2);F.__click=ze;var J=t(F);La(J,{size:16}),a(F),a(D),a(P),a(R);var n=s(R,2),_=s(t(n),2),y=t(_),z=s(t(y),2),O=t(z,!0);a(z),a(y);var A=s(y,2),S=s(t(A),2),B=t(S);a(S),a(A);var $=s(A,2),V=s(t($),2),E=t(V,!0);a(V),a($);var K=s($,2),Y=s(t(K),2),me=t(Y,!0);a(Y),a(K),a(_),a(n);var pe=s(n,2);{var _e=I=>{var f=et(),g=t(f,!0);a(f),b(()=>p(g,e(m).submit)),c(I,f)};x(pe,I=>{e(m).submit&&I(_e)})}a(i),b(()=>{p(O,e(l).title||"Not set"),p(B,`${e(l).tradingRoomIds.length??""} room(s) selected`),p(E,e(l).type),p(me,e(l).status)}),oe(U,()=>e(l).status,I=>e(l).status=I),j(q,()=>e(ie),I=>W(ie,I)),c(r,i)};x(xe,r=>{e(C)===4&&r(aa)})}var Ie=s(xe,2),Re=t(Ie);{var ta=r=>{var i=tt();i.__click=je,c(r,i)},sa=r=>{var i=st();c(r,i)};x(Re,r=>{e(C)>1?r(ta):r(sa,!1)})}var ra=s(Re,2);{var la=r=>{var i=rt();i.__click=He,c(r,i)},ia=r=>{var i=lt(),k=t(i,!0);a(i),b(()=>{i.disabled=e(le),p(k,e(le)?"Creating...":"Create Lesson")}),c(r,i)};x(ra,r=>{e(C)<4?r(la):r(ia,!1)})}a(Ie),a(ue),a(ne),pa("submit",ue,r=>{r.preventDefault(),Qe()}),c(Te,ne),_a(),Fe()}va(["click","keydown"]);export{ct as component};
