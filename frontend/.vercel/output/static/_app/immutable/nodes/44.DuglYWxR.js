import{z as Gs,p as Vs,o as Js,a3 as Zs,f as _,a9 as Ks,d as z,F as Ws,q as s,aM as Xs,M as Ua,i as k,h as d,j as Qs,E as Ys,as as et,e as t,c as p,aP as W,B as at,g as e,at as st,H as g,r as a,R as tt,bM as Ga,k as Ve,Z as Va,bH as me,w as q,bK as Ja,N as Je,x as o,Q as Ze,bJ as Ie,aX as ae,bO as it,bG as Za,by as Ka,bU as Wa,aF as Xa,J as lt,aR as nt,aH as Qa,aZ as Ya,al as rt,U as vt,O as re,bZ as ua,bV as ct}from"../chunks/C_QN0JMx.js";import{a as B}from"../chunks/ByEkyPua.js";import{authStore as ot,getAuthToken as dt}from"../chunks/D3S43Cfl.js";import{c as yt,f as ut}from"../chunks/KfBlM_pv.js";import{A as _t}from"../chunks/BvIese_r.js";import{S as ft}from"../chunks/szWSpB32.js";const pt="http://localhost:8000/api";class mt{getAuthHeaders(){const v=ot.getToken(),y={"Content-Type":"application/json",Accept:"application/json"};return v&&(y.Authorization=`Bearer ${v}`),y}async request(v,y,ce,De){let be=`${pt}${y}`;if(De){const M=new URLSearchParams;Object.entries(De).forEach(([F,D])=>{D!=null&&D!==""&&M.append(F,String(D))});const h=M.toString();h&&(be+=`?${h}`)}const L=await fetch(be,{method:v,headers:this.getAuthHeaders(),body:ce?JSON.stringify(ce):void 0});if(!L.ok){const M=await L.json().catch(()=>({message:"Request failed"}));throw new Error(M.message||`HTTP ${L.status}`)}return L.json()}async getCampaigns(v){const y=await this.request("GET","/admin/email/campaigns",void 0,v);return{data:y.data,meta:y.meta}}async getCampaign(v){return(await this.request("GET",`/admin/email/campaigns/${v}`)).data}async createCampaign(v){return(await this.request("POST","/admin/email/campaigns",v)).data}async updateCampaign(v,y){return(await this.request("PUT",`/admin/email/campaigns/${v}`,y)).data}async deleteCampaign(v){await this.request("DELETE",`/admin/email/campaigns/${v}`)}async duplicateCampaign(v){return(await this.request("POST",`/admin/email/campaigns/${v}/duplicate`)).data}async sendCampaign(v){return(await this.request("POST",`/admin/email/campaigns/${v}/send`)).data}async scheduleCampaign(v,y){return(await this.request("POST",`/admin/email/campaigns/${v}/schedule`,{scheduled_at:y})).data}async cancelCampaign(v){return(await this.request("POST",`/admin/email/campaigns/${v}/cancel`)).data}async sendTestEmail(v,y){await this.request("POST",`/admin/email/campaigns/${v}/test`,{email:y})}async getStats(){return(await this.request("GET","/admin/email/campaigns/stats")).data}async getAnalytics(v){return(await this.request("GET",`/admin/email/campaigns/${v}/analytics`)).data}async getPreview(v){return(await this.request("GET",`/admin/email/campaigns/${v}/preview`)).data}}const ve=new mt,bt=S=>ve.getCampaigns(S),gt=S=>ve.createCampaign(S),ht=S=>ve.deleteCampaign(S),Ct=S=>ve.duplicateCampaign(S),wt=S=>ve.sendCampaign(S),kt=S=>ve.cancelCampaign(S),St=()=>ve.getStats();var Tt=_('<div class="header-actions svelte-1syi7yf"><button class="btn-secondary svelte-1syi7yf"><!> Refresh</button> <button class="btn-primary svelte-1syi7yf"><!> New Campaign</button></div>'),xt=_('<div class="skeleton skeleton-metric svelte-1syi7yf"></div>'),jt=_('<div class="loading-grid svelte-1syi7yf"></div>'),At=_('<div class="error-state svelte-1syi7yf"><p class="svelte-1syi7yf"> </p> <button class="btn-primary svelte-1syi7yf">Try Again</button></div>'),Et=_('<span class="badge ab-badge svelte-1syi7yf">A/B Test</span>'),$t=_('<div class="meta-item svelte-1syi7yf"><!> <span class="svelte-1syi7yf"> </span></div>'),zt=_('<div class="meta-item svelte-1syi7yf"><!> <span class="svelte-1syi7yf"> </span></div>'),Bt=_('<div class="ab-test-results svelte-1syi7yf"><span class="ab-label svelte-1syi7yf">A/B Test Results:</span> <div class="ab-variants svelte-1syi7yf"><div><span class="variant-label svelte-1syi7yf">A:</span> <span class="variant-subject svelte-1syi7yf"> </span> <span class="variant-rate svelte-1syi7yf"> </span></div> <div><span class="variant-label svelte-1syi7yf">B:</span> <span class="variant-subject svelte-1syi7yf"> </span> <span class="variant-rate svelte-1syi7yf"> </span></div></div></div>'),Ft=_('<div class="campaign-stats svelte-1syi7yf"><div class="stat-item svelte-1syi7yf"><span class="stat-label svelte-1syi7yf">Sent</span> <span class="stat-value svelte-1syi7yf"> </span></div> <div class="stat-item svelte-1syi7yf"><span class="stat-label svelte-1syi7yf">Opened</span> <span class="stat-value highlight svelte-1syi7yf"> <small class="svelte-1syi7yf"> </small></span></div> <div class="stat-item svelte-1syi7yf"><span class="stat-label svelte-1syi7yf">Clicked</span> <span class="stat-value highlight-blue svelte-1syi7yf"> <small class="svelte-1syi7yf"> </small></span></div> <div class="stat-item svelte-1syi7yf"><span class="stat-label svelte-1syi7yf">Bounced</span> <span class="stat-value svelte-1syi7yf"> </span></div></div> <!>',1),Pt=_('<button class="btn-primary small svelte-1syi7yf"><!> Send Now</button> <button class="btn-secondary small svelte-1syi7yf"><!> Duplicate</button> <button class="btn-danger small svelte-1syi7yf"><!></button>',1),qt=_('<button class="btn-secondary small svelte-1syi7yf"><!> Cancel</button> <button class="btn-secondary small svelte-1syi7yf"><!> Duplicate</button>',1),It=_('<button class="btn-secondary small svelte-1syi7yf"><!> View Report</button> <button class="btn-secondary small svelte-1syi7yf"><!> Duplicate</button>',1),Dt=_('<div class="campaign-card svelte-1syi7yf"><div class="campaign-header svelte-1syi7yf"><div class="campaign-info svelte-1syi7yf"><div class="campaign-name-row svelte-1syi7yf"><h3 class="svelte-1syi7yf"> </h3> <!></div> <p class="campaign-subject svelte-1syi7yf"> </p></div> <span> </span></div> <div class="campaign-meta svelte-1syi7yf"><div class="meta-item svelte-1syi7yf"><!> <span class="svelte-1syi7yf"> </span> <span class="meta-count svelte-1syi7yf"> </span></div> <!> <!></div> <!> <div class="campaign-actions svelte-1syi7yf"><!></div></div>'),Nt=_('<div class="empty-state svelte-1syi7yf"><!> <h3 class="svelte-1syi7yf">No campaigns found</h3> <p class="svelte-1syi7yf">Create your first email campaign to get started</p> <button class="btn-primary svelte-1syi7yf"><!> Create Campaign</button></div>'),Ot=_('<div class="stats-grid svelte-1syi7yf"><div class="stat-card svelte-1syi7yf"><div class="stat-icon purple svelte-1syi7yf"><!></div> <div class="stat-content svelte-1syi7yf"><div class="stat-value svelte-1syi7yf"> </div> <div class="stat-label svelte-1syi7yf">Total Emails Sent</div></div></div> <div class="stat-card svelte-1syi7yf"><div class="stat-icon emerald svelte-1syi7yf"><!></div> <div class="stat-content svelte-1syi7yf"><div class="stat-value svelte-1syi7yf"> </div> <div class="stat-label svelte-1syi7yf">Total Opens</div></div></div> <div class="stat-card svelte-1syi7yf"><div class="stat-icon blue svelte-1syi7yf"><!></div> <div class="stat-content svelte-1syi7yf"><div class="stat-value svelte-1syi7yf"> </div> <div class="stat-label svelte-1syi7yf">Avg Open Rate</div></div></div> <div class="stat-card svelte-1syi7yf"><div class="stat-icon yellow svelte-1syi7yf"><!></div> <div class="stat-content svelte-1syi7yf"><div class="stat-value svelte-1syi7yf"> </div> <div class="stat-label svelte-1syi7yf">Avg Click Rate</div></div></div></div> <div class="tabs-container svelte-1syi7yf"><div class="tabs svelte-1syi7yf"><button> </button> <button><!> </button> <button><!> </button> <button><!> </button></div></div> <div class="campaigns-list svelte-1syi7yf"><!> <!></div>',1),Rt=_('<div class="form-group full-width svelte-1syi7yf"><label for="campaign-subject-b" class="svelte-1syi7yf">Subject Line B</label> <input id="campaign-subject-b" type="text" placeholder="Alternative subject to test" class="svelte-1syi7yf"/></div> <div class="form-group svelte-1syi7yf"><label for="ab-split" class="svelte-1syi7yf">A/B Split (%)</label> <input id="ab-split" type="range" min="10" max="90" class="svelte-1syi7yf"/> <span class="split-label svelte-1syi7yf"> </span></div>',1),Lt=_('<option class="svelte-1syi7yf"> </option>'),Mt=_('<option class="svelte-1syi7yf"> </option>'),Ht=_("<!> Schedule Campaign",1),Ut=_("<!> Save as Draft",1),Gt=_('<div class="modal-overlay svelte-1syi7yf" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-content large svelte-1syi7yf" role="document"><div class="modal-header svelte-1syi7yf"><h2 class="svelte-1syi7yf">Create New Campaign</h2> <button class="close-btn svelte-1syi7yf"><!></button></div> <div class="modal-body svelte-1syi7yf"><div class="form-grid svelte-1syi7yf"><div class="form-group full-width svelte-1syi7yf"><label for="campaign-name" class="svelte-1syi7yf">Campaign Name</label> <input id="campaign-name" type="text" placeholder="e.g., December Newsletter" class="svelte-1syi7yf"/></div> <div class="form-group full-width svelte-1syi7yf"><label for="campaign-subject" class="svelte-1syi7yf">Subject Line</label> <input id="campaign-subject" type="text" placeholder="e.g., Your Weekly Trading Insights" class="svelte-1syi7yf"/></div> <div class="form-group full-width ab-toggle svelte-1syi7yf"><label class="checkbox-label svelte-1syi7yf"><input type="checkbox" class="svelte-1syi7yf"/> <span class="svelte-1syi7yf">Enable A/B Testing</span></label></div> <!> <div class="form-group svelte-1syi7yf"><label for="campaign-segment" class="svelte-1syi7yf">Target Segment</label> <select id="campaign-segment" class="svelte-1syi7yf"><option class="svelte-1syi7yf">Select segment...</option><!></select></div> <div class="form-group svelte-1syi7yf"><label for="campaign-template" class="svelte-1syi7yf">Email Template</label> <select id="campaign-template" class="svelte-1syi7yf"><option class="svelte-1syi7yf">Select template...</option><!></select></div> <div class="form-group full-width svelte-1syi7yf"><label for="campaign-schedule" class="svelte-1syi7yf">Schedule (optional)</label> <input id="campaign-schedule" type="datetime-local" class="svelte-1syi7yf"/> <small class="svelte-1syi7yf">Leave empty to save as draft</small></div></div></div> <div class="modal-footer svelte-1syi7yf"><button class="btn-secondary svelte-1syi7yf">Cancel</button> <button class="btn-primary svelte-1syi7yf"><!></button></div></div></div>'),Vt=_('<div class="campaigns-page svelte-1syi7yf"><div class="page-header svelte-1syi7yf"><button class="back-btn svelte-1syi7yf"><!> Back to Templates</button> <div class="header-content svelte-1syi7yf"><div class="header-title svelte-1syi7yf"><div class="title-icon svelte-1syi7yf"><!></div> <div class="svelte-1syi7yf"><h1 class="svelte-1syi7yf">Email Campaigns</h1> <p class="subtitle svelte-1syi7yf">Create, schedule, and analyze email campaigns</p></div></div> <!></div></div> <!></div> <!>',1);function Yt(S,v){Vs(v,!1);const y=()=>at(ut,"$isEmailConnected",ce),[ce,De]=Ys();let be=W(!0),L=W(!0),M=W(""),h=W("all"),F=W([]),D=W(null),X=W(!1),l=W({name:"",subject:"",subjectB:"",useABTest:!1,abTestSplit:50,scheduledFor:"",segmentId:"",templateId:""}),_a=[{id:1,name:"All Members",count:12847},{id:2,name:"Active Subscribers",count:8420},{id:3,name:"Trial Users",count:2690},{id:4,name:"Churned (Win-back)",count:1737},{id:5,name:"High Value (>$500 LTV)",count:847},{id:6,name:"Highly Engaged",count:3250},{id:7,name:"At Risk of Churn",count:620}],Ke=W([]);Js(async()=>{await yt.load(),p(be,!1),y()?await Promise.all([Q(),es(),as()]):p(L,!1)});async function Q(){p(L,!0),p(M,"");try{const i=e(h)==="all"?void 0:e(h)==="drafts"?"draft":e(h),c=await bt({status:i});p(F,c.data)}catch(i){p(M,i instanceof Error?i.message:"Failed to load campaigns")}finally{p(L,!1)}}async function es(){try{p(D,await St())}catch{}}async function as(){try{const i=await fetch("/api/admin/email/templates",{headers:{Authorization:`Bearer ${dt()}`,"Content-Type":"application/json"}});if(i.ok){const c=await i.json();p(Ke,(c.data||c||[]).map(w=>({id:w.id,name:w.name})))}}catch{}}function fa(){return e(h)==="all"?e(F):e(h)==="scheduled"?e(F).filter(i=>i.status==="scheduled"):e(h)==="sent"?e(F).filter(i=>i.status==="sent"):e(h)==="drafts"?e(F).filter(i=>i.status==="draft"):e(F)}function pa(i){return i?new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}function se(i){return i.toLocaleString()}function ss(i){switch(i){case"sent":return"bg-emerald-500/20 text-emerald-400";case"scheduled":return"bg-blue-500/20 text-blue-400";case"sending":return"bg-yellow-500/20 text-yellow-400";default:return"bg-slate-500/20 text-slate-400"}}async function ts(){if(!e(l).name||!e(l).subject){B.error("Please fill in campaign name and subject");return}if(!e(l).templateId){B.error("Please select an email template");return}if(e(l).useABTest&&!e(l).subjectB){B.error("Please enter Subject B for A/B test");return}try{const i={name:e(l).name,subject:e(l).subject,template_id:parseInt(e(l).templateId),segment_id:e(l).segmentId?parseInt(e(l).segmentId):null,scheduled_at:e(l).scheduledFor||null,ab_test_config:e(l).useABTest?{enabled:!0,subject_b:e(l).subjectB,split_percentage:e(l).abTestSplit}:null};await gt(i),p(X,!1),B.success("Campaign created successfully"),p(l,{name:"",subject:"",subjectB:"",useABTest:!1,abTestSplit:50,scheduledFor:"",segmentId:"",templateId:""}),await Q()}catch(i){B.error(i instanceof Error?i.message:"Failed to create campaign")}finally{}}async function is(i){if(confirm("Delete this campaign?"))try{await ht(i),B.success("Campaign deleted"),await Q()}catch(c){B.error(c instanceof Error?c.message:"Failed to delete campaign")}}async function We(i){try{await Ct(i.id),B.success("Campaign duplicated"),await Q()}catch(c){B.error(c instanceof Error?c.message:"Failed to duplicate campaign")}}async function ls(i){if(confirm("Send this campaign now?"))try{await wt(i),B.success("Campaign is being sent"),await Q()}catch(c){B.error(c instanceof Error?c.message:"Failed to send campaign")}}async function ns(i){if(confirm("Cancel this scheduled campaign?"))try{await kt(i),B.success("Campaign cancelled"),await Q()}catch(c){B.error(c instanceof Error?c.message:"Failed to cancel campaign")}}function rs(i){return i?_a.find(w=>w.id===i)?.name||"Unknown":"All Members"}Zs();var ma=Vt();Ks("1syi7yf",i=>{et(()=>{st.title="Email Campaigns | Revolution Trading Pros"})});var Xe=z(ma),Qe=s(Xe),Ne=s(Qe);Ne.__click=()=>Ws("/admin/email/templates");var vs=s(Ne);Xs(vs,{size:20}),g(),a(Ne);var ba=t(Ne,2),Ye=s(ba),ga=s(Ye),cs=s(ga);Ua(cs,{size:28}),a(ga),g(2),a(Ye);var os=t(Ye,2);{var ds=i=>{var c=Tt(),w=s(c);w.__click=Q;var te=s(w);tt(te,{size:18}),g(),a(w);var H=t(w,2);H.__click=()=>p(X,!0);var N=s(H);Ga(N,{size:18}),g(),a(H),a(c),d(i,c)};k(os,i=>{y()&&i(ds)})}a(ba),a(Qe);var ys=t(Qe,2);{var us=i=>{ft(i,{variant:"dashboard"})},_s=i=>{var c=Ve(),w=z(c);{var te=N=>{_t(N,{serviceName:"Email Marketing",description:"Connect an email marketing service to create and manage email campaigns, track opens, clicks, and subscriber engagement.",serviceKey:"mailchimp",icon:"ðŸ“§",color:"#6366f1",features:["Create and schedule email campaigns","A/B test subject lines","Track opens, clicks, and conversions","Segment your audience","Automated email sequences"]})},H=N=>{var oe=Ve(),Oe=z(oe);{var ge=O=>{var U=jt();Je(U,4,()=>[1,2,3,4],Ze,(ie,he)=>{var de=xt();d(ie,de)}),a(U),d(O,U)},Re=O=>{var U=Ve(),ie=z(U);{var he=G=>{var Y=At(),I=s(Y),V=s(I,!0);a(I);var J=t(I,2);J.__click=Q,a(Y),q(()=>o(V,e(M))),d(G,Y)},de=G=>{var Y=Ot(),I=z(Y),V=s(I),J=s(V),ea=s(J);Xa(ea,{size:24}),a(J);var ye=t(J,2),ue=s(ye),Ce=s(ue,!0);a(ue),g(2),a(ye),a(V);var we=t(V,2),_e=s(we),Le=s(_e);lt(Le,{size:24}),a(_e);var ke=t(_e,2),Se=s(ke),Te=s(Se,!0);a(Se),g(2),a(ke),a(we);var xe=t(we,2),je=s(xe),aa=s(je);nt(aa,{size:24}),a(je);var r=t(je,2),m=s(r),f=s(m);a(m),g(2),a(r),a(xe);var Z=t(xe,2),P=s(Z),le=s(P);Qa(le,{size:24}),a(P);var Ae=t(P,2),Me=s(Ae),Ee=s(Me);a(Me),g(2),a(Ae),a(Z),a(I);var sa=t(I,2),ha=s(sa),$e=s(ha);$e.__click=()=>p(h,"all");let Ca;var ms=s($e);a($e);var ze=t($e,2);ze.__click=()=>p(h,"scheduled");let wa;var ka=s(ze);Ya(ka,{size:16});var bs=t(ka);a(ze);var Be=t(ze,2);Be.__click=()=>p(h,"sent");let Sa;var Ta=s(Be);rt(Ta,{size:16});var gs=t(Ta);a(Be);var He=t(Be,2);He.__click=()=>p(h,"drafts");let xa;var ja=s(He);Wa(ja,{size:16});var hs=t(ja);a(He),a(ha),a(sa);var Aa=t(sa,2),Ea=s(Aa);Je(Ea,1,fa,Ze,(x,n)=>{var ee=Dt(),K=s(ee),ne=s(K),ta=s(ne),ia=s(ta),ks=s(ia,!0);a(ia);var Ss=t(ia,2);{var Ts=u=>{var b=Et();d(u,b)};k(Ss,u=>{e(n).ab_test_config?.enabled&&u(Ts)})}a(ta);var $a=t(ta,2),xs=s($a,!0);a($a),a(ne);var la=t(ne,2),js=s(la,!0);a(la),a(K);var na=t(K,2),ra=s(na),za=s(ra);vt(za,{size:16});var va=t(za,2),As=s(va,!0);a(va);var Ba=t(va,2),Es=s(Ba);a(Ba),a(ra);var Fa=t(ra,2);{var $s=u=>{var b=$t(),C=s(b);Ka(C,{size:16});var j=t(C,2),A=s(j);a(j),a(b),q(T=>o(A,`Scheduled: ${T??""}`),[()=>pa(e(n).scheduled_at)]),d(u,b)};k(Fa,u=>{e(n).scheduled_at&&u($s)})}var zs=t(Fa,2);{var Bs=u=>{var b=zt(),C=s(b);Ya(C,{size:16});var j=t(C,2),A=s(j);a(j),a(b),q(T=>o(A,`Sent: ${T??""}`),[()=>pa(e(n).sent_at)]),d(u,b)};k(zs,u=>{e(n).sent_at&&u(Bs)})}a(na);var Pa=t(na,2);{var Fs=u=>{var b=Ft(),C=z(b),j=s(C),A=t(s(j),2),T=s(A,!0);a(A),a(j);var E=t(j,2),$=t(s(E),2),fe=s($),R=t(fe),Fe=s(R);a(R),a($),a(E);var ca=t(E,2),Ia=t(s(ca),2),Da=s(Ia),Na=t(Da),Ds=s(Na);a(Na),a(Ia),a(ca);var Oa=t(ca,2),Ra=t(s(Oa),2),Ns=s(Ra,!0);a(Ra),a(Oa),a(C);var Os=t(C,2);{var Rs=Pe=>{var qe=Bt(),Ue=t(s(qe),2),pe=s(Ue);let Ge;var oa=t(s(pe),2),Ls=s(oa,!0);a(oa);var La=t(oa,2),Ms=s(La);a(La),a(pe);var da=t(pe,2);let Ma;var ya=t(s(da),2),Hs=s(ya,!0);a(ya);var Ha=t(ya,2),Us=s(Ha);a(Ha),a(da),a(Ue),a(qe),q(()=>{Ge=re(pe,1,"ab-variant svelte-1syi7yf",null,Ge,{winner:e(n).ab_test_config.winner==="a"}),o(Ls,e(n).subject),o(Ms,`${(e(n).ab_test_config.variant_a?.open_rate||0)??""}%`),Ma=re(da,1,"ab-variant svelte-1syi7yf",null,Ma,{winner:e(n).ab_test_config.winner==="b"}),o(Hs,e(n).ab_test_config.subject_b),o(Us,`${(e(n).ab_test_config.variant_b?.open_rate||0)??""}%`)}),d(Pe,qe)};k(Os,Pe=>{e(n).ab_test_config?.enabled&&e(n).ab_test_config.variant_a&&Pe(Rs)})}q((Pe,qe,Ue,pe,Ge)=>{o(T,Pe),o(fe,`${qe??""} `),o(Fe,`(${Ue??""}%)`),o(Da,`${pe??""} `),o(Ds,`(${Ge??""}%)`),o(Ns,e(n).bounced_count)},[()=>se(e(n).sent_count),()=>se(e(n).opened_count),()=>e(n).open_rate?.toFixed(1)||0,()=>se(e(n).clicked_count),()=>e(n).click_rate?.toFixed(1)||0]),d(u,b)};k(Pa,u=>{e(n).status==="sent"&&e(n).sent_count>0&&u(Fs)})}var qa=t(Pa,2),Ps=s(qa);{var qs=u=>{var b=Pt(),C=z(b);C.__click=()=>ls(e(n).id);var j=s(C);Xa(j,{size:16}),g(),a(C);var A=t(C,2);A.__click=()=>We(e(n));var T=s(A);ua(T,{size:16}),g(),a(A);var E=t(A,2);E.__click=()=>is(e(n).id);var $=s(E);ct($,{size:16}),a(E),d(u,b)},Is=u=>{var b=Ve(),C=z(b);{var j=T=>{var E=qt(),$=z(E);$.__click=()=>ns(e(n).id);var fe=s($);Va(fe,{size:16}),g(),a($);var R=t($,2);R.__click=()=>We(e(n));var Fe=s(R);ua(Fe,{size:16}),g(),a(R),d(T,E)},A=T=>{var E=It(),$=z(E),fe=s($);Qa(fe,{size:16}),g(),a($);var R=t($,2);R.__click=()=>We(e(n));var Fe=s(R);ua(Fe,{size:16}),g(),a(R),d(T,E)};k(C,T=>{e(n).status==="scheduled"?T(j):T(A,!1)},!0)}d(u,b)};k(Ps,u=>{e(n).status==="draft"?u(qs):u(Is,!1)})}a(qa),a(ee),q((u,b,C)=>{o(ks,e(n).name),o(xs,e(n).subject||"(No subject)"),re(la,1,`status-badge ${u??""}`,"svelte-1syi7yf"),o(js,e(n).status),o(As,b),o(Es,`(${C??""})`)},[()=>ss(e(n).status),()=>rs(e(n).segment_id),()=>se(e(n).total_recipients)]),d(x,ee)});var Cs=t(Ea,2);{var ws=x=>{var n=Nt(),ee=s(n);Ua(ee,{size:48,stroke:1});var K=t(ee,6);K.__click=()=>p(X,!0);var ne=s(K);Ga(ne,{size:18}),g(),a(K),a(n),d(x,n)};k(Cs,x=>{fa().length===0&&x(ws)})}a(Aa),q((x,n,ee,K,ne)=>{o(Ce,x),o(Te,n),o(f,`${(e(D)?.avg_open_rate||0)??""}%`),o(Ee,`${(e(D)?.avg_click_rate||0)??""}%`),Ca=re($e,1,"svelte-1syi7yf",null,Ca,{active:e(h)==="all"}),o(ms,`All (${e(F).length??""})`),wa=re(ze,1,"svelte-1syi7yf",null,wa,{active:e(h)==="scheduled"}),o(bs,` Scheduled (${ee??""})`),Sa=re(Be,1,"svelte-1syi7yf",null,Sa,{active:e(h)==="sent"}),o(gs,` Sent (${K??""})`),xa=re(He,1,"svelte-1syi7yf",null,xa,{active:e(h)==="drafts"}),o(hs,` Drafts (${ne??""})`)},[()=>se(e(D)?.total_sent||0),()=>se(e(D)?.total_opened||0),()=>e(F).filter(x=>x.status==="scheduled").length,()=>e(F).filter(x=>x.status==="sent").length,()=>e(F).filter(x=>x.status==="draft").length]),d(G,Y)};k(ie,G=>{e(M)?G(he):G(de,!1)},!0)}d(O,U)};k(Oe,O=>{e(L)?O(ge):O(Re,!1)},!0)}d(N,oe)};k(w,N=>{y()?N(H,!1):N(te)},!0)}d(i,c)};k(ys,i=>{e(be)?i(us):i(_s,!1)})}a(Xe);var fs=t(Xe,2);{var ps=i=>{var c=Gt();c.__click=()=>p(X,!1),c.__keydown=r=>r.key==="Escape"&&p(X,!1);var w=s(c);w.__click=r=>r.stopPropagation(),w.__keydown=r=>r.stopPropagation();var te=s(w),H=t(s(te),2);H.__click=()=>p(X,!1);var N=s(H);Va(N,{size:20}),a(H),a(te);var oe=t(te,2),Oe=s(oe),ge=s(Oe),Re=t(s(ge),2);me(Re),a(ge);var O=t(ge,2),U=t(s(O),2);me(U),a(O);var ie=t(O,2),he=s(ie),de=s(he);me(de),g(2),a(he),a(ie);var G=t(ie,2);{var Y=r=>{var m=Rt(),f=z(m),Z=t(s(f),2);me(Z),a(f);var P=t(f,2),le=t(s(P),2);me(le);var Ae=t(le,2),Me=s(Ae);a(Ae),a(P),q(()=>o(Me,`${e(l).abTestSplit??""}% / ${100-e(l).abTestSplit}%`)),Ie(Z,()=>e(l).subjectB,Ee=>ae(l,e(l).subjectB=Ee)),Ie(le,()=>e(l).abTestSplit,Ee=>ae(l,e(l).abTestSplit=Ee)),d(r,m)};k(G,r=>{e(l).useABTest&&r(Y)})}var I=t(G,2),V=t(s(I),2);q(()=>{e(l),Ja(()=>{})});var J=s(V);J.value=J.__value="";var ea=t(J);Je(ea,1,()=>_a,Ze,(r,m)=>{var f=Lt(),Z=s(f);a(f);var P={};q(le=>{o(Z,`${e(m).name??""} (${le??""})`),P!==(P=e(m).id)&&(f.value=(f.__value=e(m).id)??"")},[()=>se(e(m).count)]),d(r,f)}),a(V),a(I);var ye=t(I,2),ue=t(s(ye),2);q(()=>{e(l),Ja(()=>{e(Ke)})});var Ce=s(ue);Ce.value=Ce.__value="";var we=t(Ce);Je(we,1,()=>e(Ke),Ze,(r,m)=>{var f=Mt(),Z=s(f,!0);a(f);var P={};q(()=>{o(Z,e(m).name),P!==(P=e(m).id)&&(f.value=(f.__value=e(m).id)??"")}),d(r,f)}),a(ue),a(ye);var _e=t(ye,2),Le=t(s(_e),2);me(Le),g(2),a(_e),a(Oe),a(oe);var ke=t(oe,2),Se=s(ke);Se.__click=()=>p(X,!1);var Te=t(Se,2);Te.__click=ts;var xe=s(Te);{var je=r=>{var m=Ht(),f=z(m);Ka(f,{size:18}),g(),d(r,m)},aa=r=>{var m=Ut(),f=z(m);Wa(f,{size:18}),g(),d(r,m)};k(xe,r=>{e(l).scheduledFor?r(je):r(aa,!1)})}a(Te),a(ke),a(w),a(c),Ie(Re,()=>e(l).name,r=>ae(l,e(l).name=r)),Ie(U,()=>e(l).subject,r=>ae(l,e(l).subject=r)),it(de,()=>e(l).useABTest,r=>ae(l,e(l).useABTest=r)),Za(V,()=>e(l).segmentId,r=>ae(l,e(l).segmentId=r)),Za(ue,()=>e(l).templateId,r=>ae(l,e(l).templateId=r)),Ie(Le,()=>e(l).scheduledFor,r=>ae(l,e(l).scheduledFor=r)),d(i,c)};k(fs,i=>{e(X)&&i(ps)})}d(S,ma),Qs(),De()}Gs(["click","keydown"]);export{Yt as component};
