import{z as Ne,p as He,a as Ye,A as Le,b as et,f as b,q as t,r as e,e as l,Z as tt,i as z,g as a,s as m,bH as J,H as x,N as ze,w as O,x as f,h as p,Q as Ae,bI as at,cQ as st,D as Pe,bJ as be,bO as Oe,bG as rt,j as Ie,c as o,o as lt,a9 as it,d as ge,bM as Me,ao as vt,as as ot,at as nt,O as Ee,bV as je,k as dt,n as ct,bU as ut,b_ as _t,dM as ft,ch as pt}from"../chunks/C_QN0JMx.js";var gt=b('<div class="error-message svelte-axe7g5"> </div>'),bt=b("<option> </option>"),ht=b('<div class="modal-overlay svelte-axe7g5" role="button" tabindex="0"><div class="modal svelte-axe7g5" role="dialog" tabindex="-1"><div class="modal-header svelte-axe7g5"><h2 class="svelte-axe7g5"> </h2> <button class="close-btn svelte-axe7g5"><!></button></div> <form class="svelte-axe7g5"><div class="modal-body svelte-axe7g5"><!> <div class="form-group svelte-axe7g5"><label for="source-url" class="svelte-axe7g5">Source URL <span class="required svelte-axe7g5">*</span></label> <input id="source-url" type="text" placeholder="/old-page" required class="svelte-axe7g5"/> <div class="hint svelte-axe7g5"> </div></div> <div class="form-group svelte-axe7g5"><label for="is-regex" class="svelte-axe7g5"><input id="is-regex" type="checkbox" class="svelte-axe7g5"/> Use Regular Expression</label> <div class="hint svelte-axe7g5">Enable regex for pattern matching (e.g., /product/(.*) â†’ /shop/$1)</div></div> <div class="form-group svelte-axe7g5"><label for="destination-url" class="svelte-axe7g5">Destination URL <span class="required svelte-axe7g5">*</span></label> <input id="destination-url" type="text" placeholder="/new-page" class="svelte-axe7g5"/> <div class="hint svelte-axe7g5">The URL to redirect to. Can be absolute or relative.</div></div> <div class="form-group svelte-axe7g5"><label for="redirect-type" class="svelte-axe7g5">Redirect Type <span class="required svelte-axe7g5">*</span></label> <select id="redirect-type" required class="svelte-axe7g5"></select> <div class="hint svelte-axe7g5"> </div></div> <div class="form-group svelte-axe7g5"><label for="notes" class="svelte-axe7g5">Notes</label> <textarea id="notes" placeholder="Add notes about this redirect..." rows="3" class="svelte-axe7g5"></textarea></div> <div class="form-group svelte-axe7g5"><label for="is-active" class="svelte-axe7g5"><input id="is-active" type="checkbox" class="svelte-axe7g5"/> Active</label> <div class="hint svelte-axe7g5">Only active redirects will be processed</div></div></div> <div class="modal-footer svelte-axe7g5"><button type="button" class="btn-secondary svelte-axe7g5">Cancel</button> <button type="submit" class="btn-primary svelte-axe7g5"><!> </button></div></form></div></div>');function xt(he,M){He(M,!0);let d=Ye(M,"redirect",3,null),i=Le({source_url:"",destination_url:"",redirect_type:"301",is_regex:!1,is_active:!0,notes:""});et(()=>{i.source_url=d()?.source_url||"",i.destination_url=d()?.destination_url||"",i.redirect_type=d()?.redirect_type||"301",i.is_regex=d()?.is_regex||!1,i.is_active=d()?.is_active!==void 0?d().is_active:!0,i.notes=d()?.notes||""});let w=m(!1),q=m("");const T=[{value:"301",label:"301 - Moved Permanently",description:"Best for permanently moved content"},{value:"302",label:"302 - Found (Temporary)",description:"For temporary redirects"},{value:"307",label:"307 - Temporary Redirect",description:"Temporary redirect, maintains request method"},{value:"308",label:"308 - Permanent Redirect",description:"Permanent redirect, maintains request method"},{value:"410",label:"410 - Gone",description:"Content permanently removed"}];async function Q(){o(q,""),o(w,!0);try{const s=d()?`/api/seo/redirects/${d().id}`:"/api/seo/redirects",n=d()?"PUT":"POST",u=await fetch(s,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(u.ok)M.onsaved?.();else{const g=await u.json();o(q,g.message||"Failed to save redirect",!0)}}catch{o(q,"An error occurred while saving")}finally{o(w,!1)}}function c(){M.oncancel?.()}var A=ht();A.__click=c,A.__keydown=s=>s.key==="Escape"&&c();var k=t(A);k.__click=s=>s.stopPropagation();var S=t(k),E=t(S),le=t(E,!0);e(E);var $=l(E,2);$.__click=c;var xe=t($);tt(xe,{size:24}),e($),e(S);var X=l(S,2),B=t(X),ie=t(B);{var ye=s=>{var n=gt(),u=t(n,!0);e(n),O(()=>f(u,a(q))),p(s,n)};z(ie,s=>{a(q)&&s(ye)})}var j=l(ie,2),N=l(t(j),2);J(N);var H=l(N,2),V=t(H);e(H),e(j);var C=l(j,2),ve=t(C),Z=t(ve);J(Z),x(),e(ve),x(2),e(C);var K=l(C,2),U=l(t(K),2);J(U),x(2),e(K);var D=l(K,2),F=l(t(D),2);ze(F,21,()=>T,Ae,(s,n)=>{var u=bt(),g=t(u,!0);e(u);var h={};O(()=>{f(g,a(n).label),h!==(h=a(n).value)&&(u.value=(u.__value=a(n).value)??"")}),p(s,u)}),e(F);var W=l(F,2),Y=t(W,!0);e(W),e(D);var ee=l(D,2),oe=l(t(ee),2);at(oe),e(ee);var te=l(ee,2),ne=t(te),de=t(ne);J(de),x(),e(ne),x(2),e(te),e(B);var ce=l(B,2),ue=t(ce);ue.__click=c;var ae=l(ue,2),r=t(ae);st(r,{size:18});var v=l(r);e(ae),e(ce),e(X),e(k),e(A),O(s=>{f(le,d()?"Edit Redirect":"Create Redirect"),f(V,`The URL to redirect from. ${i.is_regex?"Use regex pattern.":"Use absolute path (e.g., /old-page)."}`),U.required=i.redirect_type!=="410",f(Y,s),ae.disabled=a(w),f(v,` ${a(w)?"Saving...":"Save Redirect"}`)},[()=>T.find(s=>s.value===i.redirect_type)?.description]),Pe("keypress",k,s=>s.stopPropagation()),Pe("submit",X,s=>{s.preventDefault(),Q()}),be(N,()=>i.source_url,s=>i.source_url=s),Oe(Z,()=>i.is_regex,s=>i.is_regex=s),be(U,()=>i.destination_url,s=>i.destination_url=s),rt(F,()=>i.redirect_type,s=>i.redirect_type=s),be(oe,()=>i.notes,s=>i.notes=s),Oe(de,()=>i.is_active,s=>i.is_active=s),p(he,A),Ie()}Ne(["click","keydown"]);var yt=b('<div class="stats-grid svelte-n2f2q8"><div class="stat-card svelte-n2f2q8"><div class="stat-value svelte-n2f2q8"> </div> <div class="stat-label svelte-n2f2q8">Total Redirects</div></div> <div class="stat-card svelte-n2f2q8"><div class="stat-value svelte-n2f2q8"> </div> <div class="stat-label svelte-n2f2q8">Active</div></div> <div class="stat-card svelte-n2f2q8"><div class="stat-value svelte-n2f2q8"> </div> <div class="stat-label svelte-n2f2q8">Inactive</div></div> <div class="stat-card svelte-n2f2q8"><div class="stat-value svelte-n2f2q8"> </div> <div class="stat-label svelte-n2f2q8">Total Hits</div></div></div>'),qt=b("<button> </button>"),mt=b('<button class="btn-danger svelte-n2f2q8"><!> </button>'),kt=b('<div class="loading svelte-n2f2q8">Loading redirects...</div>'),Rt=b('<div class="empty-state svelte-n2f2q8"><h3 class="svelte-n2f2q8">No redirects found</h3> <p class="svelte-n2f2q8">Create your first redirect to get started</p> <button class="btn-primary svelte-n2f2q8"><!> Add Redirect</button></div>'),wt=b('<span class="regex-badge svelte-n2f2q8">REGEX</span>'),Tt=b("<!> Active",1),St=b("<!> Inactive",1),Et=b('<tr class="svelte-n2f2q8"><td class="svelte-n2f2q8"><input type="checkbox"/></td><td class="svelte-n2f2q8"><div class="url-cell svelte-n2f2q8"> <!></div></td><td class="destination-url svelte-n2f2q8"> </td><td class="svelte-n2f2q8"><span> </span></td><td class="svelte-n2f2q8"> </td><td class="svelte-n2f2q8"><button><!></button></td><td class="svelte-n2f2q8"><div class="actions svelte-n2f2q8"><button class="action-btn svelte-n2f2q8" title="Edit"><!></button> <button class="action-btn danger svelte-n2f2q8" title="Delete"><!></button></div></td></tr>'),Lt=b('<table class="svelte-n2f2q8"><thead><tr><th style="width: 40px" class="svelte-n2f2q8"><input type="checkbox"/></th><th class="svelte-n2f2q8">Source URL</th><th class="svelte-n2f2q8">Destination URL</th><th class="svelte-n2f2q8">Type</th><th class="svelte-n2f2q8">Hits</th><th class="svelte-n2f2q8">Status</th><th style="width: 120px" class="svelte-n2f2q8">Actions</th></tr></thead><tbody class="svelte-n2f2q8"></tbody></table>'),zt=b('<div class="redirects-page svelte-n2f2q8"><header class="page-header svelte-n2f2q8"><div><h1 class="svelte-n2f2q8">Redirect Manager</h1> <p class="svelte-n2f2q8">Manage 301/302 redirects with regex support</p></div> <button class="btn-primary svelte-n2f2q8"><!> Add Redirect</button></header> <!> <div class="controls-bar svelte-n2f2q8"><div class="search-box svelte-n2f2q8"><!> <input type="text" placeholder="Search redirects..." class="svelte-n2f2q8"/></div> <div class="filter-tabs svelte-n2f2q8"></div> <!></div> <div class="redirects-table svelte-n2f2q8"><!></div></div> <!>',1);function Ct(he,M){He(M,!0);let d=m(Le([])),i=m(null),w=m(!1),q=m(""),T=m(!1),Q=m(null),c=m(Le([]));const A=["all","301","302","307","308","410"];let k=m("all");lt(()=>{S(),E()});async function S(){o(w,!0);try{const v=await(await fetch("/api/seo/redirects")).json();o(d,v.data||[],!0)}catch{}finally{o(w,!1)}}async function E(){try{const r=await fetch("/api/seo/redirects/stats");o(i,await r.json(),!0)}catch{}}function le(){o(Q,null),o(T,!0)}function $(r){o(Q,r,!0),o(T,!0)}async function xe(r){if(confirm("Are you sure you want to delete this redirect?"))try{await fetch(`/api/seo/redirects/${r}`,{method:"DELETE"}),S(),E()}catch{}}async function X(r){try{await fetch(`/api/seo/redirects/${r.id}/toggle`,{method:"POST"}),r.is_active=!r.is_active,o(d,[...a(d)],!0)}catch{}}function B(r){a(c).includes(r)?o(c,a(c).filter(v=>v!==r),!0):o(c,[...a(c),r],!0)}async function ie(){if(confirm(`Delete ${a(c).length} redirects?`))try{await fetch("/api/seo/redirects/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:a(c)})}),o(c,[],!0),S(),E()}catch{}}function ye(){o(T,!1),S(),E()}let j=ct(()=>a(d).filter(r=>{const v=r.source_url.toLowerCase().includes(a(q).toLowerCase())||r.destination_url.toLowerCase().includes(a(q).toLowerCase()),s=a(k)==="all"||r.redirect_type===a(k);return v&&s}));var N=zt();it("n2f2q8",r=>{ot(()=>{nt.title="Redirect Manager | SEO"})});var H=ge(N),V=t(H),C=l(t(V),2);C.__click=le;var ve=t(C);Me(ve,{size:18}),x(),e(C),e(V);var Z=l(V,2);{var K=r=>{var v=yt(),s=t(v),n=t(s),u=t(n,!0);e(n),x(2),e(s);var g=l(s,2),h=t(g),L=t(h,!0);e(h),x(2),e(g);var P=l(g,2),_=t(P),se=t(_,!0);e(_),x(2),e(P);var I=l(P,2),G=t(I),re=t(G,!0);e(G),x(2),e(I),e(v),O(_e=>{f(u,a(i).total),f(L,a(i).active),f(se,a(i).inactive),f(re,_e)},[()=>a(i).total_hits?.toLocaleString()||0]),p(r,v)};z(Z,r=>{a(i)&&r(K)})}var U=l(Z,2),D=t(U),F=t(D);vt(F,{size:20});var W=l(F,2);J(W),e(D);var Y=l(D,2);ze(Y,21,()=>A,Ae,(r,v)=>{var s=qt();let n;s.__click=()=>o(k,a(v),!0);var u=t(s,!0);e(s),O(()=>{n=Ee(s,1,"filter-tab svelte-n2f2q8",null,n,{active:a(k)===a(v)}),f(u,a(v)==="all"?"All":a(v))}),p(r,s)}),e(Y);var ee=l(Y,2);{var oe=r=>{var v=mt();v.__click=ie;var s=t(v);je(s,{size:18});var n=l(s);e(v),O(()=>f(n,` Delete (${a(c).length??""})`)),p(r,v)};z(ee,r=>{a(c).length>0&&r(oe)})}e(U);var te=l(U,2),ne=t(te);{var de=r=>{var v=kt();p(r,v)},ce=r=>{var v=dt(),s=ge(v);{var n=g=>{var h=Rt(),L=l(t(h),4);L.__click=le;var P=t(L);Me(P,{size:18}),x(),e(L),e(h),p(g,h)},u=g=>{var h=Lt(),L=l(t(h));ze(L,21,()=>a(j),Ae,(P,_)=>{var se=Et(),I=t(se),G=t(I);J(G),G.__change=()=>B(a(_).id),e(I);var re=l(I),_e=t(re),Ce=t(_e),Ge=l(Ce);{var Je=y=>{var R=wt();p(y,R)};z(Ge,y=>{a(_).is_regex&&y(Je)})}e(_e),e(re);var qe=l(re),Qe=t(qe,!0);e(qe);var me=l(qe),ke=t(me),$e=t(ke,!0);e(ke),e(me);var Re=l(me),Xe=t(Re,!0);e(Re);var we=l(Re),fe=t(we);let Ue;fe.__click=()=>X(a(_));var Be=t(fe);{var Ve=y=>{var R=Tt(),Se=ge(R);ft(Se,{size:24}),x(),p(y,R)},Ze=y=>{var R=St(),Se=ge(R);pt(Se,{size:24}),x(),p(y,R)};z(Be,y=>{a(_).is_active?y(Ve):y(Ze,!1)})}e(fe),e(we);var De=l(we),Fe=t(De),pe=t(Fe);pe.__click=()=>$(a(_));var Ke=t(pe);ut(Ke,{size:18}),e(pe);var Te=l(pe,2);Te.__click=()=>xe(a(_).id);var We=t(Te);je(We,{size:18}),e(Te),e(Fe),e(De),e(se),O((y,R)=>{_t(G,y),f(Ce,`${a(_).source_url??""} `),f(Qe,a(_).destination_url),Ee(ke,1,`type-badge type-${a(_).redirect_type??""}`,"svelte-n2f2q8"),f($e,a(_).redirect_type),f(Xe,R),Ue=Ee(fe,1,"status-toggle svelte-n2f2q8",null,Ue,{active:a(_).is_active})},[()=>a(c).includes(a(_).id),()=>a(_).hits?.toLocaleString()||0]),p(P,se)}),e(L),e(h),p(g,h)};z(s,g=>{a(j).length===0?g(n):g(u,!1)},!0)}p(r,v)};z(ne,r=>{a(w)?r(de):r(ce,!1)})}e(te),e(H);var ue=l(H,2);{var ae=r=>{xt(r,{get redirect(){return a(Q)},onsaved:ye,oncancel:()=>o(T,!1)})};z(ue,r=>{a(T)&&r(ae)})}be(W,()=>a(q),r=>o(q,r)),p(he,N),Ie()}Ne(["click","change"]);export{Ct as component};
