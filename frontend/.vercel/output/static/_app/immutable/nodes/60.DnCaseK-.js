import{z as Xa,p as Ga,a as E,f as c,q as r,m as Wa,g as e,s as z,c as l,e as s,i as x,r as t,w as j,O as oe,K as he,D as Ze,h as o,j as Ya,ds as Sa,k as ta,d as Ce,a0 as ns,x as H,o as Ft,C as Et,_ as Ae,n as ua,du as vs,d2 as ds,dv as cs,A as La,b as Dt,dw as St,$ as tt,N as pa,Q as Ha,dx as Ht,af as Je,ai as Ka,bq as st,H as ya,dy as us,a9 as ps,bJ as hs,bG as zt,E as gs,as as _s,aT as fs,at as xs,bH as wt,B as bs,bW as It,a$ as ka,bI as ms,cF as zs,ah as Pt,b_ as Vt,v as ws}from"../chunks/C_QN0JMx.js";import{m as wa}from"../chunks/DljncKY_.js";var ys=c('<div class="drop-indicator svelte-5otum6"><svg class="w-16 h-16 text-blue-500 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3-3m0 0l3 3m-3-3v12"></path></svg> <p class="text-lg font-medium text-blue-600">Drop files here</p></div>'),ks=c("<p> </p>"),qs=c('<div class="default-content svelte-5otum6"><svg class="w-12 h-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <p class="text-lg font-medium text-gray-700 dark:text-gray-300 mb-1">Drag and drop images here</p> <p class="text-sm text-gray-500 dark:text-gray-400 mb-4">or click to browse</p> <div class="text-xs text-gray-400 dark:text-gray-500 space-y-1"><p>Supported: JPG, PNG, WebP, GIF, AVIF</p> <p> </p> <!></div></div>'),Ms=c('<div role="button"><input type="file" class="hidden"/> <div class="dropzone-content svelte-5otum6"><!></div></div>');function Cs(sa,b){Ga(b,!0);let be=E(b,"accept",3,"image/*"),se=E(b,"multiple",3,!0),Le=E(b,"maxFiles",3,10),M=E(b,"maxSize",3,50*1024*1024),p=E(b,"disabled",3,!1),L=E(b,"className",3,""),V=z(!1),O=z(null),G=z(0);function ne(n){const u=[],h=[];for(const k of n){if(be()!=="*"&&!re(k,be())){h.push(`${k.name}: Invalid file type`);continue}if(k.size>M()){h.push(`${k.name}: File too large (max ${N(M())})`);continue}u.push(k)}return u.length>Le()?(h.push(`Too many files. Maximum ${Le()} allowed.`),{valid:u.slice(0,Le()),errors:h}):{valid:u,errors:h}}function re(n,u){const h=u.split(",").map(k=>k.trim());for(const k of h)if(k.startsWith(".")){if(n.name.toLowerCase().endsWith(k.toLowerCase()))return!0}else if(k.endsWith("/*")){const I=k.slice(0,-2);if(n.type.startsWith(I))return!0}else if(n.type===k)return!0;return!1}function N(n){if(n===0)return"0 Bytes";const u=1024,h=["Bytes","KB","MB","GB"],k=Math.floor(Math.log(n)/Math.log(u));return parseFloat((n/Math.pow(u,k)).toFixed(2))+" "+h[k]}function ge(n){n.preventDefault(),n.stopPropagation(),Sa(G),n.dataTransfer?.types.includes("Files")&&l(V,!0)}function Me(n){n.preventDefault(),n.stopPropagation(),Sa(G,-1),e(G)===0&&l(V,!1)}function le(n){n.preventDefault(),n.stopPropagation()}function Y(n){if(n.preventDefault(),n.stopPropagation(),l(V,!1),l(G,0),p())return;const u=Array.from(n.dataTransfer?.files||[]);ve(u)}function U(n){const u=n.target,h=Array.from(u.files||[]);ve(h),u.value=""}function ve(n){if(n.length===0)return;const{valid:u,errors:h}=ne(n);h.length>0&&b.onerror?.({message:h.join(`
`),files:u}),u.length>0&&b.onfiles?.(u)}function $(){p()||e(O)?.click()}var f=Ms();let W;f.__click=$,f.__keydown=n=>n.key==="Enter"&&$();var J=r(f);J.__change=U,Wa(J,n=>l(O,n),()=>e(O));var ce=s(J,2),me=r(ce);{var _=n=>{var u=ys();o(n,u)},S=n=>{var u=ta(),h=Ce(u);{var k=T=>{var Q=ta(),ue=Ce(Q);ns(ue,()=>b.children),o(T,Q)},I=T=>{var Q=qs(),ue=s(r(Q),6),De=s(r(ue),2),Se=r(De);t(De);var He=s(De,2);{var A=P=>{var ee=ks(),fe=r(ee);t(ee),j(()=>H(fe,`Up to ${Le()??""} files at once`)),o(P,ee)};x(He,P=>{se()&&P(A)})}t(ue),t(Q),j(P=>H(Se,`Max size: ${P??""} per file`),[()=>N(M())]),o(T,Q)};x(h,T=>{b.children?T(k):T(I,!1)})}o(n,u)};x(me,n=>{e(V)?n(_):n(S,!1)})}t(ce),t(f),j(()=>{W=oe(f,1,`dropzone relative ${L()??""}`,"svelte-5otum6",W,{"dropzone-active":e(V),"dropzone-disabled":p()}),he(f,"tabindex",p()?-1:0),he(J,"accept",be()),J.multiple=se(),J.disabled=p()}),Ze("dragenter",f,ge),Ze("dragleave",f,Me),Ze("dragover",f,le),Ze("drop",f,Y),o(sa,f),Ya()}Xa(["click","keydown","change"]);var Ls=c('<canvas width="32" height="32" aria-hidden="true"></canvas>'),Bs=c('<img alt="" aria-hidden="true"/>'),js=c('<source type="image/avif"/>'),As=c('<source type="image/webp"/>'),Ds=c("<source/>"),Ss=c('<picture><!> <!> <!> <img style="color: transparent;"/></picture>'),Hs=c('<div class="absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800"><div class="text-center text-gray-500 dark:text-gray-400"><svg class="w-12 h-12 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <p class="text-sm">Failed to load image</p></div></div>'),Is=c('<div class="absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse"></div>'),Ps=c("<div><!> <!> <!> <!> <!></div>");function yt(sa,b){Ga(b,!0);let be=E(b,"alt",3,""),se=E(b,"blurhash",3,null),Le=E(b,"lqip",3,null),M=E(b,"width",3,null),p=E(b,"height",3,null),L=E(b,"srcset",3,null),V=E(b,"sizes",3,"100vw"),O=E(b,"loading",3,"lazy"),G=E(b,"className",3,""),ne=E(b,"aspectRatio",3,null),re=E(b,"objectFit",3,"cover"),N=E(b,"priority",3,!1),ge=E(b,"onLoad",3,null),Me=E(b,"onError",3,null),le=z(!1),Y=z(!1),U=z(null),ve=z(null),$=z(null),f=z(!1),W=null,J=ua(()=>ne()?`aspect-ratio: ${ne()};`:M()&&p()?`aspect-ratio: ${M()}/${p()};`:"");function ce(A){if(!(!se()||!A))try{const P=cs(se(),32,32),ee=A.getContext("2d");if(!ee)return;const fe=ee.createImageData(32,32);fe.data.set(P),ee.putImageData(fe,0,0)}catch{}}function me(){if(L())return Object.entries(L()).map(([A,P])=>{const ee=A.replace(/[^0-9]/g,"");return`${P} ${ee}w`}).join(", ")}function _(){l(le,!0),ge()?.()}function S(A){l(Y,!0),Me()?.(new Error("Image failed to load"))}Ft(()=>{if(N()||O()==="eager"){l(f,!0);return}W=new IntersectionObserver(A=>{A.forEach(P=>{P.isIntersecting&&(l(f,!0),W?.disconnect())})},{rootMargin:"50px",threshold:.01}),e($)&&W.observe(e($))}),Et(()=>{W?.disconnect()});var n=Ps(),u=r(n);{var h=A=>{var P=Ls();let ee;Wa(P,fe=>l(U,fe),()=>e(U)),vs(P,fe=>ce?.(fe)),j(()=>ee=oe(P,1,"absolute inset-0 w-full h-full blur-xl scale-110 transition-opacity duration-500 svelte-1plqsnt",null,ee,{"opacity-0":e(le)})),o(A,P)};x(u,A=>{se()&&!e(le)&&A(h)})}var k=s(u,2);{var I=A=>{var P=Bs();let ee;j(()=>{he(P,"src",Le()),ee=oe(P,1,`absolute inset-0 w-full h-full object-${re()??""} blur-lg scale-105 transition-opacity duration-500`,"svelte-1plqsnt",ee,{"opacity-0":e(le)})}),o(A,P)};x(k,A=>{Le()&&!se()&&!e(le)&&A(I)})}var T=s(k,2);{var Q=A=>{var P=Ss(),ee=r(P);{var fe=ae=>{var we=js();j(()=>he(we,"srcset",L().avif)),o(ae,we)};x(ee,ae=>{L()?.avif&&ae(fe)})}var Ie=s(ee,2);{var ra=ae=>{var we=As();j(()=>he(we,"srcset",L().webp)),o(ae,we)};x(Ie,ae=>{L()?.webp&&ae(ra)})}var $e=s(Ie,2);{var ha=ae=>{var we=Ds();j(ba=>{he(we,"srcset",ba),he(we,"sizes",V())},[me]),o(ae,we)};x($e,ae=>{L()&&!L().avif&&!L().webp&&ae(ha)})}var ze=s($e,2);let oa;Wa(ze,ae=>l(ve,ae),()=>e(ve)),t(P),j(()=>{he(ze,"src",b.src),he(ze,"alt",be()),he(ze,"width",M()),he(ze,"height",p()),he(ze,"loading",N()?"eager":O()),he(ze,"decoding",N()?"sync":"async"),he(ze,"fetchpriority",N()?"high":"auto"),oa=oe(ze,1,`w-full h-full object-${re()??""} transition-opacity duration-500`,"svelte-1plqsnt",oa,{"opacity-0":!e(le)})}),Ze("load",ze,_),Ze("error",ze,S),ds(ze),o(A,P)};x(T,A=>{(e(f)||N())&&A(Q)})}var ue=s(T,2);{var De=A=>{var P=Hs();o(A,P)};x(ue,A=>{e(Y)&&A(De)})}var Se=s(ue,2);{var He=A=>{var P=Is();o(A,P)};x(Se,A=>{!se()&&!Le()&&!e(le)&&!e(Y)&&e(f)&&A(He)})}t(n),Wa(n,A=>l($,A),()=>e($)),j(()=>{oe(n,1,`optimized-image-container relative overflow-hidden ${G()??""}`,"svelte-1plqsnt"),Ae(n,e(J))}),o(sa,n),Ya()}Xa(["click"]);var Vs=c("<button> </button>"),Fs=c('<div class="image-wrapper svelte-hb41uj"><img alt="Crop preview" class="crop-image svelte-hb41uj"/>  <div class="crop-overlay svelte-hb41uj" role="application" aria-label="Crop area - drag to move or resize"><div class="grid-line grid-line-h1 svelte-hb41uj"></div> <div class="grid-line grid-line-h2 svelte-hb41uj"></div> <div class="grid-line grid-line-v1 svelte-hb41uj"></div> <div class="grid-line grid-line-v2 svelte-hb41uj"></div>  <div class="resize-handle resize-nw svelte-hb41uj" data-handle="nw"></div> <div class="resize-handle resize-ne svelte-hb41uj" data-handle="ne"></div> <div class="resize-handle resize-sw svelte-hb41uj" data-handle="sw"></div> <div class="resize-handle resize-se svelte-hb41uj" data-handle="se"></div> <div class="resize-handle resize-n svelte-hb41uj" data-handle="n"></div> <div class="resize-handle resize-s svelte-hb41uj" data-handle="s"></div> <div class="resize-handle resize-w svelte-hb41uj" data-handle="w"></div> <div class="resize-handle resize-e svelte-hb41uj" data-handle="e"></div></div> <div class="dark-overlay"></div></div>'),Es=c('<div class="loading-state svelte-hb41uj"><div class="animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"></div> <p class="text-gray-500 mt-2">Loading image...</p></div>'),Rs=c('<div class="crop-modal-overlay svelte-hb41uj" role="button" tabindex="0" aria-label="Close modal"><div role="dialog" aria-modal="true" aria-labelledby="crop-modal-title" tabindex="-1"><div class="modal-header svelte-hb41uj"><h2 id="crop-modal-title" class="text-lg font-semibold text-gray-900 dark:text-white">Crop & Edit Image</h2> <button class="close-btn svelte-hb41uj" aria-label="Close modal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="toolbar svelte-hb41uj"><div class="toolbar-group svelte-hb41uj"><span class="toolbar-label svelte-hb41uj">Aspect Ratio</span> <div class="ratio-buttons svelte-hb41uj"></div></div> <div class="toolbar-group svelte-hb41uj"><span class="toolbar-label svelte-hb41uj">Transform</span> <div class="transform-buttons svelte-hb41uj"><button class="transform-btn svelte-hb41uj" title="Rotate left"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"></path></svg></button> <button class="transform-btn svelte-hb41uj" title="Rotate right"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"></path></svg></button> <button title="Flip horizontal"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12M8 12h12M8 17h12M4 7v10"></path></svg></button> <button title="Flip vertical"><svg class="w-5 h-5 rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12M8 12h12M8 17h12M4 7v10"></path></svg></button></div></div> <div class="toolbar-group svelte-hb41uj"><span class="toolbar-label svelte-hb41uj">Zoom</span> <div class="zoom-controls svelte-hb41uj"><button class="zoom-btn svelte-hb41uj">-</button> <span class="zoom-value svelte-hb41uj"> </span> <button class="zoom-btn svelte-hb41uj">+</button></div></div></div> <div class="canvas-container svelte-hb41uj"><!></div> <canvas class="hidden"></canvas> <div class="modal-footer svelte-hb41uj"><div class="crop-info svelte-hb41uj"><span class="text-sm text-gray-500"> </span></div> <div class="footer-actions svelte-hb41uj"><button class="btn-cancel svelte-hb41uj">Cancel</button> <button class="btn-crop svelte-hb41uj">Apply Crop</button></div></div></div></div>');function Ts(sa,b){Ga(b,!0);let be=E(b,"aspectRatios",19,()=>({Free:null,"1:1":1,"16:9":16/9,"4:3":4/3,"3:2":3/2,"9:16":9/16})),se=E(b,"initialAspectRatio",3,"Free"),Le=E(b,"minWidth",3,50),M=E(b,"minHeight",3,50),p=E(b,"className",3,"");function L(d,q){d==="crop"&&q?b.oncrop?.(q):d==="cancel"&&b.oncancel?.()}let V=z(void 0),O=z(void 0),G=z(!1),ne=z(La(se()||"Free")),re=z(0),N=z(!1),ge=z(!1),Me=z(1),le=z(!1),Y=z(!1),U=z(""),ve=z(0),$=z(0),f=z(La({x:0,y:0,width:100,height:100})),W=z(0),J=z(0),ce=z(1),me=z(!1);Dt(()=>{if(e(me))return;l(me,!0);const d=new Image;d.crossOrigin="anonymous",d.onload=()=>{l(O,d,!0),l(G,!0),St(()=>_())},d.src=b.src}),Dt(()=>{const d=e(G),q=e(W),F=e(J),m=e(O),Pe=e(Me);if(d&&q&&F&&m){const Ke=q/m.naturalWidth,Da=F/m.naturalHeight;St(()=>{l(ce,Math.min(Ke,Da,1)*Pe)})}});function _(){if(!e(O))return;const d=be()[e(ne)],q=e(O).naturalWidth,F=e(O).naturalHeight;if(d===null)l(f,{x:q*.1,y:F*.1,width:q*(1-2*.1),height:F*(1-2*.1)},!0);else if(q/F>d){const Pe=F*.8,Ke=Pe*d;l(f,{x:(q-Ke)/2,y:F*.1,width:Ke,height:Pe},!0)}else{const Pe=q*.8,Ke=Pe/d;l(f,{x:q*.1,y:(F-Ke)/2,width:Pe,height:Ke},!0)}}function S(d){l(ne,d,!0),e(G)&&_()}function n(d){l(re,(e(re)+d)%360)}function u(){l(N,!e(N))}function h(){l(ge,!e(ge))}function k(d){l(Me,Math.max(.5,Math.min(3,e(Me)+d)),!0)}function I(d){d.preventDefault();const q="touches"in d?d.touches[0]:d;l(ve,q.clientX,!0),l($,q.clientY,!0);const F=d.target;F.classList.contains("resize-handle")?(l(Y,!0),l(U,F.dataset.handle||"",!0)):F.classList.contains("crop-overlay")&&l(le,!0)}function T(d){if(!e(le)&&!e(Y))return;const q="touches"in d?d.touches[0]:d,F=(q.clientX-e(ve))/e(ce),m=(q.clientY-e($))/e(ce);e(le)?ue(F,m):e(Y)&&De(F,m),l(ve,q.clientX,!0),l($,q.clientY,!0)}function Q(){l(le,!1),l(Y,!1),l(U,"")}function ue(d,q){const F=e(O).naturalWidth-e(f).width,m=e(O).naturalHeight-e(f).height;e(f).x=Math.max(0,Math.min(F,e(f).x+d)),e(f).y=Math.max(0,Math.min(m,e(f).y+q)),l(f,e(f),!0)}function De(d,q){const F=be()[e(ne)];let m={...e(f)};switch(e(U)){case"nw":m.x+=d,m.y+=q,m.width-=d,m.height-=q;break;case"ne":m.y+=q,m.width+=d,m.height-=q;break;case"sw":m.x+=d,m.width-=d,m.height+=q;break;case"se":m.width+=d,m.height+=q;break;case"n":m.y+=q,m.height-=q;break;case"s":m.height+=q;break;case"w":m.x+=d,m.width-=d;break;case"e":m.width+=d;break}m.width=Math.max(Le(),m.width),m.height=Math.max(M(),m.height),F!==null&&(e(U).includes("w")||e(U).includes("e")?m.height=m.width/F:m.width=m.height*F),m.x=Math.max(0,Math.min(e(O).naturalWidth-m.width,m.x)),m.y=Math.max(0,Math.min(e(O).naturalHeight-m.height,m.y)),l(f,m,!0)}async function Se(){if(!e(V)||!e(O))return;const d=e(V).getContext("2d");d&&(e(V).width=e(f).width,e(V).height=e(f).height,d.save(),(e(re)!==0||e(N)||e(ge))&&(d.translate(e(V).width/2,e(V).height/2),d.rotate(e(re)*Math.PI/180),d.scale(e(N)?-1:1,e(ge)?-1:1),d.translate(-e(V).width/2,-e(V).height/2)),d.drawImage(e(O),e(f).x,e(f).y,e(f).width,e(f).height,0,0,e(V).width,e(V).height),d.restore(),e(V).toBlob(q=>{q&&L("crop",{blob:q,cropArea:e(f),aspectRatio:e(ne)})},"image/jpeg",.95))}var He=Rs();Ze("mousemove",tt,T),Ze("mouseup",tt,Q),Ze("touchmove",tt,T,void 0,!0),Ze("touchend",tt,Q),He.__click=()=>L("cancel"),He.__keydown=d=>{d.key==="Escape"&&L("cancel"),(d.key==="Enter"||d.key===" ")&&L("cancel")};var A=r(He);A.__click=d=>d.stopPropagation(),A.__keydown=d=>d.stopPropagation();var P=r(A),ee=s(r(P),2);ee.__click=()=>L("cancel"),t(P);var fe=s(P,2),Ie=r(fe),ra=s(r(Ie),2);pa(ra,21,()=>Object.keys(be()),Ha,(d,q)=>{var F=Vs();let m;F.__click=()=>S(e(q));var Pe=r(F,!0);t(F),j(()=>{m=oe(F,1,"ratio-btn svelte-hb41uj",null,m,{active:e(ne)===e(q)}),H(Pe,e(q))}),o(d,F)}),t(ra),t(Ie);var $e=s(Ie,2),ha=s(r($e),2),ze=r(ha);ze.__click=()=>n(-90);var oa=s(ze,2);oa.__click=()=>n(90);var ae=s(oa,2);let we;ae.__click=u;var ba=s(ae,2);let qa;ba.__click=h,t(ha),t($e);var Ia=s($e,2),ma=s(r(Ia),2),pe=r(ma);pe.__click=()=>k(-.1);var na=s(pe,2),Qa=r(na);t(na);var Pa=s(na,2);Pa.__click=()=>k(.1),t(ma),t(Ia),t(fe);var za=s(fe,2),Ba=r(za);{var Ja=d=>{var q=Fs(),F=r(q),m=s(F,2);m.__mousedown=I,m.__touchstart=I;var Pe=s(r(m),8);Pe.__mousedown=I;var Ke=s(Pe,2);Ke.__mousedown=I;var Da=s(Ke,2);Da.__mousedown=I;var Ra=s(Da,2);Ra.__mousedown=I;var et=s(Ra,2);et.__mousedown=I;var at=s(et,2);at.__mousedown=I;var Ta=s(at,2);Ta.__mousedown=I;var lt=s(Ta,2);lt.__mousedown=I,t(m),ya(2),t(q),j(()=>{Ae(q,`transform: scale(${e(ce)??""}); transform-origin: center;`),he(F,"src",b.src),Ae(F,`transform: rotate(${e(re)??""}deg) scaleX(${e(N)?-1:1}) scaleY(${e(ge)?-1:1});`),Ae(m,`
              left: ${e(f).x??""}px;
              top: ${e(f).y??""}px;
              width: ${e(f).width??""}px;
              height: ${e(f).height??""}px;
            `)}),o(d,q)},Va=d=>{var q=Es();o(d,q)};x(Ba,d=>{e(G)?d(Ja):d(Va,!1)})}t(za);var ja=s(za,2);Wa(ja,d=>l(V,d),()=>e(V));var Fa=s(ja,2),Ea=r(Fa),Aa=r(Ea),Za=r(Aa);t(Aa),t(Ea);var Ma=s(Ea,2),$a=r(Ma);$a.__click=()=>L("cancel");var rt=s($a,2);rt.__click=Se,t(Ma),t(Fa),t(A),t(He),j((d,q,F)=>{oe(A,1,`crop-modal ${p()??""}`,"svelte-hb41uj"),we=oe(ae,1,"transform-btn svelte-hb41uj",null,we,{active:e(N)}),qa=oe(ba,1,"transform-btn svelte-hb41uj",null,qa,{active:e(ge)}),H(Qa,`${d??""}%`),H(Za,`${q??""} x ${F??""} px`)},[()=>Math.round(e(Me)*100),()=>Math.round(e(f).width),()=>Math.round(e(f).height)]),Ht(za,"clientWidth",d=>l(W,d)),Ht(za,"clientHeight",d=>l(J,d)),Je(3,A,()=>Ka),Je(3,He,()=>st),o(sa,He),Ya()}Xa(["click","keydown","mousedown","touchstart"]);var Os=c('<span class="text-xs text-gray-500"> </span>'),Ns=c('<span class="text-[10px] font-medium text-green-500"> </span>'),Us=c('<div class="flex items-center justify-center gap-2 mt-1"><span class="text-[10px] text-gray-500"> </span> <!></div>'),Ws=c('<button><div class="aspect-square bg-gray-100 dark:bg-gray-700 overflow-hidden"><img loading="lazy" class="w-full h-full object-cover"/></div> <div class="p-2 text-center"><div class="text-xs font-medium text-gray-700 dark:text-gray-300"> </div> <div class="text-[10px] text-gray-500 dark:text-gray-400"> </div> <!></div> <div class="h-1 bg-gray-200 dark:bg-gray-700"><div class="h-full bg-blue-500"></div></div></button>'),Ks=c('<div class="flex flex-col items-center gap-1"><div class="w-4 bg-blue-500 rounded-t transition-all duration-300"></div> <span class="text-[10px] text-gray-500"> </span></div>'),Xs=c('<div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"><div class="mb-2"><span class="text-xs text-gray-500">Size Comparison</span></div> <div class="flex items-end justify-center gap-2 h-20"><!> <div class="flex flex-col items-center gap-1"><div class="w-4 bg-gray-400 dark:bg-gray-500 rounded-t transition-all duration-300" style="height: 100%"></div> <span class="text-[10px] text-gray-500">orig</span></div></div></div>'),Gs=c('<div class="fixed z-50 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden pointer-events-none"><img alt="Preview" class="max-w-[200px] max-h-[150px] object-contain"/> <div class="flex items-center justify-between gap-2 px-2 py-1 text-xs bg-gray-50 dark:bg-gray-900"><span class="font-medium"> </span> <span class="text-gray-500"> </span></div></div>'),Ys=c('<div><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300">Responsive Variants</h3> <!></div> <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-3"></div> <!> <!></div>');function Qs(sa,b){Ga(b,!0);let be=E(b,"variants",19,()=>[]);E(b,"originalUrl",3,"");let se=E(b,"originalSize",3,0),Le=E(b,"selectedSize",15,null),M=E(b,"showSizes",3,!0),p=E(b,"interactive",3,!0),L=E(b,"className",3,"");const V={xs:"Mobile S",sm:"Mobile L",md:"Tablet",lg:"Laptop",xl:"Desktop","2xl":"Large"},O={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1920};let G=z(null),ne=z(La({x:0,y:0}));const re=ua(()=>[...be()].sort((u,h)=>u.width-h.width));function N(u){if(u===0)return"0 B";const h=1024,k=["B","KB","MB"],I=Math.floor(Math.log(u)/Math.log(h));return parseFloat((u/Math.pow(h,I)).toFixed(1))+" "+k[I]}function ge(u){return!se()||se()===0?0:Math.round((1-u/se())*100)}function Me(u){p()&&(Le(u),b.onSelect?.(u))}function le(u,h){p()&&(l(G,h,!0),ve(u))}function Y(u){e(G)&&ve(u)}function U(){l(G,null)}function ve(u){const h=u.target.getBoundingClientRect();l(ne,{x:h.right+10,y:h.top},!0)}var $=Ys(),f=r($),W=s(r(f),2);{var J=u=>{var h=Os(),k=r(h);t(h),j(I=>H(k,`Original: ${I??""}`),[()=>N(se())]),o(u,h)};x(W,u=>{se()>0&&u(J)})}t(f);var ce=s(f,2);pa(ce,21,()=>e(re),u=>u.sizeName,(u,h)=>{var k=Ws();k.__click=()=>Me(e(h).sizeName),k.__mousemove=Y;var I=r(k),T=r(I);t(I);var Q=s(I,2),ue=r(Q),De=r(ue,!0);t(ue);var Se=s(ue,2),He=r(Se);t(Se);var A=s(Se,2);{var P=Ie=>{var ra=Us(),$e=r(ra),ha=r($e,!0);t($e);var ze=s($e,2);{var oa=ae=>{var we=Ns(),ba=r(we);t(we),j(qa=>H(ba,`-${qa??""}%`),[()=>ge(e(h).size)]),o(ae,we)};x(ze,ae=>{se()>0&&ae(oa)})}t(ra),j(ae=>H(ha,ae),[()=>N(e(h).size)]),o(Ie,ra)};x(A,Ie=>{M()&&Ie(P)})}t(Q);var ee=s(Q,2),fe=r(ee);t(ee),t(k),j(()=>{oe(k,1,`bg-white dark:bg-gray-800 rounded-lg overflow-hidden border-2 transition-all duration-200 ${Le()===e(h).sizeName?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-transparent"} ${p()?"cursor-pointer hover:border-blue-300 dark:hover:border-blue-600 hover:shadow-md":""}`),he(T,"src",e(h).url),he(T,"alt",`${e(h).sizeName??""} preview`),H(De,V[e(h).sizeName]||e(h).sizeName),H(He,`${e(h).width??""} x ${e(h).height??""}`),Ae(fe,`width: ${O[e(h).sizeName]/1920*100}%`)}),Ze("mouseenter",k,Ie=>le(Ie,e(h))),Ze("mouseleave",k,U),Je(3,k,()=>Ka,()=>({duration:200})),o(u,k)}),t(ce);var me=s(ce,2);{var _=u=>{var h=Xs(),k=s(r(h),2),I=r(k);pa(I,17,()=>e(re),Ha,(T,Q)=>{var ue=Ks(),De=r(ue),Se=s(De,2),He=r(Se,!0);t(Se),t(ue),j(()=>{Ae(De,`height: ${e(Q).size/se()*100}%`),H(He,e(Q).sizeName)}),o(T,ue)}),ya(2),t(k),t(h),o(u,h)};x(me,u=>{M()&&e(re).length>0&&u(_)})}var S=s(me,2);{var n=u=>{var h=Gs(),k=r(h),I=s(k,2),T=r(I),Q=r(T);t(T);var ue=s(T,2),De=r(ue,!0);t(ue),t(I),t(h),j(Se=>{Ae(h,`left: ${e(ne).x??""}px; top: ${e(ne).y??""}px;`),he(k,"src",e(G).url),H(Q,`${e(G).width??""}x${e(G).height??""}`),H(De,Se)},[()=>N(e(G).size)]),Je(3,h,()=>st,()=>({duration:150})),o(u,h)};x(S,u=>{e(G)&&u(n)})}t($),j(()=>oe($,1,`bg-gray-50 dark:bg-gray-800/50 rounded-xl p-4 ${L()??""}`)),o(sa,$),Ya()}Xa(["click","mousemove"]);var Js=c('<div class="p-3 space-y-2 svelte-dintto"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 svelte-dintto"></div> <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2 svelte-dintto"></div></div>'),Zs=c('<div class="skeleton-card bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden svelte-dintto"><div class="relative bg-gray-200 dark:bg-gray-700 overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div> <!></div>'),$s=c("<div></div>"),er=c('<div class="p-6 space-y-4 svelte-dintto"><div class="h-6 bg-gray-200 dark:bg-gray-700 rounded w-2/3 svelte-dintto"></div> <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded svelte-dintto"></div> <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 svelte-dintto"></div> <div class="flex gap-3 pt-2 svelte-dintto"><div class="h-10 w-24 bg-gray-200 dark:bg-gray-700 rounded-lg svelte-dintto"></div> <div class="h-10 w-24 bg-gray-200 dark:bg-gray-700 rounded-lg svelte-dintto"></div></div></div>'),ar=c('<div><div class="relative bg-gray-200 dark:bg-gray-700 overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div> <!></div>'),tr=c('<div class="skeleton-row flex items-center gap-4 p-3 bg-gray-100 dark:bg-gray-800 rounded-lg svelte-dintto"><div class="w-5 h-5 bg-gray-200 dark:bg-gray-700 rounded svelte-dintto"></div> <div class="w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg relative overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div> <div class="flex-1 space-y-2 svelte-dintto"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-48 svelte-dintto"></div> <div class="h-3 bg-gray-200 dark:bg-gray-700 rounded w-32 svelte-dintto"></div></div> <div class="h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded svelte-dintto"></div> <div class="h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded svelte-dintto"></div> <div class="h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded svelte-dintto"></div></div>'),sr=c("<div></div>"),rr=c('<div class="skeleton-upload-item flex items-center gap-3 p-4 border-b border-gray-200 dark:border-gray-700 last:border-0 svelte-dintto"><div class="w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg relative overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div> <div class="flex-1 space-y-2 svelte-dintto"><div class="h-4 bg-gray-200 dark:bg-gray-700 rounded w-40 svelte-dintto"></div> <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full relative overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div></div> <div class="w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full svelte-dintto"></div></div>'),lr=c('<div><div class="p-4 border-b border-gray-200 dark:border-gray-700 space-y-2 svelte-dintto"><div class="h-5 bg-gray-200 dark:bg-gray-700 rounded w-32 svelte-dintto"></div> <div class="h-1 bg-gray-200 dark:bg-gray-700 rounded-full relative overflow-hidden svelte-dintto"><div class="skeleton-shimmer svelte-dintto"></div></div></div> <!></div>'),ir=c('<div><div class="skeleton-shimmer svelte-dintto"></div> <div class="absolute inset-0 flex items-center justify-center svelte-dintto"><svg class="w-12 h-12 text-gray-300 dark:text-gray-600 svelte-dintto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" class="svelte-dintto"></path></svg></div></div>');function or(sa,b){let be=E(b,"type",3,"grid"),se=E(b,"count",3,8),Le=E(b,"columns",3,4),M=E(b,"aspectRatio",3,"1/1"),p=E(b,"showText",3,!0),L=E(b,"className",3,"");var V=ta(),O=Ce(V);{var G=re=>{var N=$s();pa(N,21,()=>Array(se()),Ha,(ge,Me,le)=>{var Y=Zs();Ae(Y,`animation-delay: ${le*.05}s;`);var U=r(Y),ve=s(U,2);{var $=f=>{var W=Js();o(f,W)};x(ve,f=>{p()&&f($)})}t(Y),j(()=>Ae(U,`aspect-ratio: ${M()??""};`)),o(ge,Y)}),t(N),j(()=>{oe(N,1,`media-skeleton-grid gap-4 ${L()??""}`,"svelte-dintto"),Ae(N,`--columns: ${Le()??""};`)}),o(re,N)},ne=re=>{var N=ta(),ge=Ce(N);{var Me=Y=>{var U=ar(),ve=r(U),$=s(ve,2);{var f=W=>{var J=er();o(W,J)};x($,W=>{p()&&W(f)})}t(U),j(()=>{oe(U,1,`skeleton-card-large bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden ${L()??""}`,"svelte-dintto"),Ae(ve,`aspect-ratio: ${M()??""};`)}),o(Y,U)},le=Y=>{var U=ta(),ve=Ce(U);{var $=W=>{var J=sr();pa(J,21,()=>Array(se()),Ha,(ce,me,_)=>{var S=tr();Ae(S,`animation-delay: ${_*.05}s;`),o(ce,S)}),t(J),j(()=>oe(J,1,`space-y-2 ${L()??""}`,"svelte-dintto")),o(W,J)},f=W=>{var J=ta(),ce=Ce(J);{var me=S=>{var n=lr(),u=s(r(n),2);pa(u,17,()=>Array(se()),Ha,(h,k,I)=>{var T=rr();Ae(T,`animation-delay: ${I*.1}s;`),o(h,T)}),t(n),j(()=>oe(n,1,`skeleton-upload bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden ${L()??""}`,"svelte-dintto")),o(S,n)},_=S=>{var n=ta(),u=Ce(n);{var h=k=>{var I=ir();j(()=>{oe(I,1,`skeleton-single relative bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden ${L()??""}`,"svelte-dintto"),Ae(I,`aspect-ratio: ${M()??""};`)}),o(k,I)};x(u,k=>{be()==="single"&&k(h)},!0)}o(S,n)};x(ce,S=>{be()==="upload"?S(me):S(_,!1)},!0)}o(W,J)};x(ve,W=>{be()==="list"?W($):W(f,!1)},!0)}o(Y,U)};x(ge,Y=>{be()==="card"?Y(Me):Y(le,!1)},!0)}o(re,N)};x(O,re=>{be()==="grid"?re(G):re(ne,!1)})}o(sa,V)}var nr=c('<button class="search-clear svelte-1qcx2zr" aria-label="Clear search"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></button>'),vr=c('<div class="stats-panel svelte-1qcx2zr"><div class="stats-grid svelte-1qcx2zr"><div class="stat-card svelte-1qcx2zr"><div class="stat-icon blue svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1qcx2zr"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><path d="M21 15l-5-5L5 21"></path></svg></div> <div class="stat-info svelte-1qcx2zr"><span class="stat-value svelte-1qcx2zr"> </span> <span class="stat-label svelte-1qcx2zr">Total Images</span></div></div> <div class="stat-card svelte-1qcx2zr"><div class="stat-icon green svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1qcx2zr"><path d="M9 12l2 2 4-4"></path><circle cx="12" cy="12" r="10"></circle></svg></div> <div class="stat-info svelte-1qcx2zr"><span class="stat-value svelte-1qcx2zr"> </span> <span class="stat-label svelte-1qcx2zr">Optimized</span></div></div> <div class="stat-card svelte-1qcx2zr"><div class="stat-icon orange svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1qcx2zr"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg></div> <div class="stat-info svelte-1qcx2zr"><span class="stat-value svelte-1qcx2zr"> </span> <span class="stat-label svelte-1qcx2zr">Pending</span></div></div> <div class="stat-card svelte-1qcx2zr"><div class="stat-icon purple svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1qcx2zr"><path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"></path></svg></div> <div class="stat-info svelte-1qcx2zr"><span class="stat-value svelte-1qcx2zr"> </span> <span class="stat-label svelte-1qcx2zr">Storage Used</span></div></div> <div class="stat-card highlight svelte-1qcx2zr"><div class="stat-icon emerald svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1qcx2zr"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path></svg></div> <div class="stat-info svelte-1qcx2zr"><span class="stat-value svelte-1qcx2zr"> </span> <span class="stat-label svelte-1qcx2zr">Total Savings</span></div> <div class="stat-progress svelte-1qcx2zr"><div class="progress-bar svelte-1qcx2zr"></div></div></div></div> <button class="stats-toggle svelte-1qcx2zr" aria-label="Hide statistics"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg></button></div>'),dr=c('<button class="stats-show svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path></svg> Show Statistics</button>'),cr=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="text-green svelte-1qcx2zr"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),ur=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="text-red svelte-1qcx2zr"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'),pr=c('<div class="upload-spinner svelte-1qcx2zr"></div>'),hr=c('<div><div class="upload-icon svelte-1qcx2zr"><!></div> <div class="upload-info svelte-1qcx2zr"><span class="upload-name svelte-1qcx2zr"> </span> <span class="upload-size svelte-1qcx2zr"> </span></div> <div class="upload-progress-bar svelte-1qcx2zr"><div class="progress-fill svelte-1qcx2zr"></div></div></div>'),gr=c('<button class="btn-secondary svelte-1qcx2zr">Clear Queue</button>'),_r=c('<div class="upload-queue svelte-1qcx2zr"></div> <!>',1),fr=c('<div class="upload-panel svelte-1qcx2zr"><!> <!></div>'),xr=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg>'),br=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),mr=c('<div class="bulk-actions svelte-1qcx2zr"><span class="selection-count svelte-1qcx2zr"> </span> <button class="btn-secondary btn-sm svelte-1qcx2zr"> </button> <button class="btn-primary btn-sm svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Optimize</button> <button class="btn-secondary btn-sm svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> Download</button> <button class="btn-danger btn-sm svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Delete</button></div>'),zr=c('<div class="empty-state svelte-1qcx2zr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="svelte-1qcx2zr"><path d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path></svg> <h3 class="svelte-1qcx2zr">No media files</h3> <p class="svelte-1qcx2zr">Upload files to get started</p> <button class="btn-primary svelte-1qcx2zr">Upload Files</button></div>'),wr=c('<div class="file-icon svelte-1qcx2zr"> </div>'),yr=c('<span class="badge badge-green svelte-1qcx2zr" title="Optimized"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></span>'),kr=c('<span class="badge badge-orange svelte-1qcx2zr" title="Processing"><div class="spinner-mini svelte-1qcx2zr"></div></span>'),qr=c('<div class="item-thumbnail svelte-1qcx2zr"><!> <div class="item-badges svelte-1qcx2zr"><!> <!></div> <div><input type="checkbox" class="svelte-1qcx2zr"/></div></div> <div class="item-info svelte-1qcx2zr"><span class="item-name svelte-1qcx2zr"> </span> <span class="item-meta svelte-1qcx2zr"> </span></div>',1),Mr=c('<div class="file-icon-small svelte-1qcx2zr"> </div>'),Cr=c('<span class="status-badge green svelte-1qcx2zr">Optimized</span>'),Lr=c('<span class="status-badge orange svelte-1qcx2zr">Processing</span>'),Br=c('<span class="status-badge gray svelte-1qcx2zr">Pending</span>'),jr=c('<div class="item-checkbox svelte-1qcx2zr"><input type="checkbox" class="svelte-1qcx2zr"/></div> <div class="item-thumbnail-small svelte-1qcx2zr"><!></div> <div class="item-details svelte-1qcx2zr"><span class="item-name svelte-1qcx2zr"> </span> <span class="item-path svelte-1qcx2zr"> </span></div> <div class="item-size svelte-1qcx2zr"> </div> <div class="item-status svelte-1qcx2zr"><!></div> <div class="item-date svelte-1qcx2zr"> </div> <div class="item-actions svelte-1qcx2zr"><button class="btn-icon-sm svelte-1qcx2zr" title="Optimize"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg></button> <button class="btn-icon-sm svelte-1qcx2zr" title="Delete"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></button></div>',1),Ar=c('<div role="button" tabindex="0"><!></div>'),Dr=c("<div></div>"),Sr=c('<div class="pagination svelte-1qcx2zr"><button class="btn-icon svelte-1qcx2zr" aria-label="First page"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M15.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 010 1.414zm-6 0a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 011.414 1.414L5.414 10l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg></button> <button class="btn-icon svelte-1qcx2zr" aria-label="Previous page"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg></button> <span class="page-info svelte-1qcx2zr"> </span> <button class="btn-icon svelte-1qcx2zr" aria-label="Next page"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button> <button class="btn-icon svelte-1qcx2zr" aria-label="Last page"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div>'),Hr=c('<div class="file-preview-icon svelte-1qcx2zr"> </div>'),Ir=c('<div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Dimensions</span> <span class="detail-value svelte-1qcx2zr"> </span></div>'),Pr=c('<span class="status-badge green svelte-1qcx2zr">Optimized</span>'),Vr=c('<span class="status-badge orange svelte-1qcx2zr">Processing</span>'),Fr=c('<span class="status-badge gray svelte-1qcx2zr">Pending</span>'),Er=c('<div class="spinner-mini svelte-1qcx2zr"></div>'),Rr=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg> Generate with AI',1),Tr=c('<button class="btn-text btn-sm svelte-1qcx2zr"><!></button>'),Or=c('<div class="spinner-mini svelte-1qcx2zr"></div>'),Nr=c('<span class="tag svelte-1qcx2zr"> </span>'),Ur=c('<div class="ai-tags svelte-1qcx2zr"></div>'),Wr=c('<p class="ai-hint svelte-1qcx2zr">Click "Analyze" to get AI-powered tags and insights</p>'),Kr=c('<div class="details-section svelte-1qcx2zr"><div class="section-header svelte-1qcx2zr"><h3 class="svelte-1qcx2zr">AI Analysis</h3> <button class="btn-text btn-sm svelte-1qcx2zr"><!></button></div> <!></div>'),Xr=c('<button class="btn-secondary svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M4 3a1 1 0 011 1v2h2a1 1 0 010 2H4a1 1 0 01-1-1V4a1 1 0 011-1zm12 0a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 110-2h2V4a1 1 0 011-1zM3 12a1 1 0 011-1h3a1 1 0 110 2H5v2a1 1 0 11-2 0v-3zm14 0a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 110-2h2v-2a1 1 0 011-1z"></path></svg> Crop</button> <button class="btn-secondary svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z"></path></svg> Responsive Preview</button>',1),Gr=c('<aside class="details-panel svelte-1qcx2zr"><div class="details-header svelte-1qcx2zr"><h2 class="svelte-1qcx2zr">Details</h2> <button class="btn-icon svelte-1qcx2zr" aria-label="Close details panel"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <div class="details-preview svelte-1qcx2zr"><!></div> <div class="details-info svelte-1qcx2zr"><div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Filename</span> <span class="detail-value svelte-1qcx2zr"> </span></div> <div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Size</span> <span class="detail-value svelte-1qcx2zr"> </span></div> <!> <div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Type</span> <span class="detail-value svelte-1qcx2zr"> </span></div> <div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Created</span> <span class="detail-value svelte-1qcx2zr"> </span></div> <div class="detail-row svelte-1qcx2zr"><span class="detail-label svelte-1qcx2zr">Status</span> <span class="detail-value svelte-1qcx2zr"><!></span></div></div> <div class="details-section svelte-1qcx2zr"><div class="section-header svelte-1qcx2zr"><h3 class="svelte-1qcx2zr">Alt Text</h3> <!></div> <textarea class="alt-input svelte-1qcx2zr" placeholder="Enter alt text for accessibility..."></textarea></div> <!> <div class="details-actions svelte-1qcx2zr"><!> <button class="btn-primary svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Optimize</button> <button class="btn-danger svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Delete</button></div></aside>'),Yr=c('<button class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg> AI Analyze</button>'),Qr=c('<button class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"></path></svg> Optimize</button> <button class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M4 3a1 1 0 011 1v2h2a1 1 0 010 2H4a1 1 0 01-1-1V4a1 1 0 011-1zm12 0a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 110-2h2V4a1 1 0 011-1zM3 12a1 1 0 011-1h3a1 1 0 110 2H5v2a1 1 0 11-2 0v-3zm14 0a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 110-2h2v-2a1 1 0 011-1z"></path></svg> Crop</button> <!>',1),Jr=c('<div class="context-menu svelte-1qcx2zr"><button class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg> View</button> <!> <hr class="svelte-1qcx2zr"/> <a class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> Download</a> <button class="svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"></path></svg> Copy URL</button> <hr class="svelte-1qcx2zr"/> <button class="danger svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> Delete</button></div>'),Zr=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'),$r=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>'),el=ka('<svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>'),al=c("<div><!> <span> </span></div>"),tl=c('<div class="modal-overlay svelte-1qcx2zr" role="dialog" aria-modal="true" aria-labelledby="preview-modal-title" tabindex="-1"><div class="modal-content svelte-1qcx2zr" role="presentation"><div class="modal-header svelte-1qcx2zr"><h2 id="preview-modal-title" class="svelte-1qcx2zr">Responsive Preview</h2> <button class="btn-icon svelte-1qcx2zr" aria-label="Close preview"><svg viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <!></div></div>'),sl=c('<div><header class="header svelte-1qcx2zr"><div class="header-left svelte-1qcx2zr"><h1 class="svelte-1qcx2zr">Media Library</h1> <span class="item-count svelte-1qcx2zr"> </span></div> <div class="header-center svelte-1qcx2zr"><div class="search-field svelte-1qcx2zr"><svg class="search-icon svelte-1qcx2zr" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path></svg> <input type="text" placeholder="Search media..." class="svelte-1qcx2zr"/> <!></div></div> <div class="header-right svelte-1qcx2zr"><div class="view-toggle svelte-1qcx2zr"><button title="Grid view"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg></button> <button title="List view"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button></div> <button class="btn-upload svelte-1qcx2zr"><svg viewBox="0 0 20 20" fill="currentColor" class="svelte-1qcx2zr"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg> Upload</button></div></header>  <!>  <!>  <div class="toolbar svelte-1qcx2zr"><div class="toolbar-left svelte-1qcx2zr"><select class="svelte-1qcx2zr"><option>All Types</option><option>Images</option><option>Videos</option><option>Documents</option></select> <select class="svelte-1qcx2zr"><option>All Status</option><option>Optimized</option><option>Needs Optimization</option><option>Processing</option></select> <select class="svelte-1qcx2zr"><option>Date Added</option><option>Name</option><option>Size</option></select> <button class="btn-icon svelte-1qcx2zr"><!></button></div> <div class="toolbar-right svelte-1qcx2zr"><!></div></div>  <div class="content-area svelte-1qcx2zr"><main class="media-content svelte-1qcx2zr"><!> <!></main>  <!></div>  <!>  <div class="toast-container svelte-1qcx2zr"></div></div> <!> <!>',1);function il(sa,b){Ga(b,!0);const be=()=>bs(I,"$statsProgress",se),[se,Le]=gs();let M=z(La([])),p=z(La(new Set)),L=z(null),V=z(null),O=z(1),G=z(1),ne=z(0),re=24,N=z(""),ge=z("all"),Me=z("all"),le=z("created_at"),Y=z("desc"),U=z("grid"),ve=z(!0),$=z(!1),f=z(!1),W=z(!1),J=z(!0),ce=z(!1),me=z(!1),_=z(null),S=z(null),n=z(La([])),u=z(!1),h=z(!1),k=z(null);const I=us(0,{duration:1e3,easing:fs});Ft(async()=>{await Promise.all([T(),Q(),ue()]),document.addEventListener("keydown",qa),document.addEventListener("click",Ia)}),Et(()=>{document.removeEventListener("keydown",qa),document.removeEventListener("click",Ia)});async function T(){l(ve,!0);try{const a=await wa.list({page:e(O),per_page:re,search:e(N)||void 0,type:e(ge)!=="all"?e(ge):void 0,optimized:e(Me)==="optimized"?!0:e(Me)==="pending"?!1:void 0,sort_by:e(le),sort_dir:e(Y)});l(M,a.data,!0),l(O,a.meta.current_page,!0),l(G,a.meta.last_page,!0),l(ne,a.meta.total,!0)}catch{pe("Failed to load media","error")}finally{l(ve,!1)}}async function Q(){try{const a=await wa.getStatistics();if(l(V,a.data,!0),e(V)){const i=e(V).total_images>0?e(V).optimized_images/e(V).total_images*100:0;I.set(i)}}catch{}}async function ue(){try{const a=await fetch("/api/media/ai/status");a.ok&&(l(k,await a.json(),!0),l(u,e(k)?.enabled||!1,!0))}catch{l(u,!1)}}function De(a){a.length!==0&&(l(f,!0),l($,!0),a.forEach(i=>{const v=crypto.randomUUID();l(n,[...e(n),{id:v,file:i,progress:0,status:"pending"}],!0),Se(v,i)}))}async function Se(a,i){const v=e(n).findIndex(y=>y.id===a);if(v===-1)return;e(n)[v].status="uploading",l(n,e(n),!0);try{const y=new FormData;y.append("file",i);const B=new XMLHttpRequest;B.upload.onprogress=K=>{if(K.lengthComputable){const g=Math.round(K.loaded/K.total*100);e(n)[v].progress=g,l(n,e(n),!0)}};const C=await new Promise((K,g)=>{B.onload=()=>{B.status>=200&&B.status<300?K(JSON.parse(B.responseText).data):g(new Error(B.statusText))},B.onerror=()=>g(new Error("Upload failed")),B.open("POST","/api/media/upload"),B.send(y)});e(n)[v].status="complete",e(n)[v].result=C,l(n,e(n),!0),l(M,[C,...e(M)],!0),Sa(ne),Q()}catch(y){e(n)[v].status="error",e(n)[v].error=y.message||"Upload failed",l(n,e(n),!0)}if(e(n).every(y=>y.status==="complete"||y.status==="error")){l($,!1);const y=e(n).filter(C=>C.status==="complete").length,B=e(n).filter(C=>C.status==="error").length;y>0&&B===0?pe(`${y} file${y>1?"s":""} uploaded`,"success"):B>0&&pe(`${B} file${B>1?"s":""} failed to upload`,"error")}}function He(){l(n,[],!0),l(f,!1)}function A(a,i){if(i.shiftKey&&e(L)){const v=e(M).findIndex(C=>C.id===e(L)),w=e(M).findIndex(C=>C.id===a.id),[y,B]=v<w?[v,w]:[w,v];for(let C=y;C<=B;C++)e(p).add(e(M)[C].id);l(p,e(p),!0)}else i.metaKey||i.ctrlKey?(e(p).has(a.id)?e(p).delete(a.id):e(p).add(a.id),l(p,e(p),!0)):(l(p,new Set([a.id]),!0),l(L,a.id,!0),l(_,a,!0),l(W,!0))}function P(a){l(_,a,!0),l(me,!0)}function ee(a,i){a.preventDefault(),l(S,{x:a.clientX,y:a.clientY,item:i},!0)}async function fe(a){try{const v=(await wa.optimize(a.id)).data;l(M,e(M).map(w=>w.id===a.id?v:w),!0),e(_)?.id===a.id&&l(_,v,!0),pe("Image optimized","success"),Q()}catch(i){pe(i.message||"Optimization failed","error")}}async function Ie(a){if(confirm(`Delete "${a.filename}"?`))try{await wa.delete(a.id),l(M,e(M).filter(i=>i.id!==a.id),!0),e(p).delete(a.id),l(p,e(p),!0),Sa(ne,-1),e(_)?.id===a.id&&(l(_,null),l(W,!1)),pe("File deleted","success"),Q()}catch(i){pe(i.message||"Delete failed","error")}}async function ra(a){if(e(u)){l(h,!0);try{const i=await fetch(`/api/media/ai/analyze/${a.id}`,{method:"POST"});if(!i.ok)throw new Error("Analysis failed");const v=await i.json(),w={...a,alt:v.altText||a.alt,custom_properties:{...a.custom_properties,ai_tags:v.tags,ai_category:v.category,focal_point:v.focalPoint}};l(M,e(M).map(y=>y.id===a.id?w:y),!0),e(_)?.id===a.id&&l(_,w,!0),pe("AI analysis complete","success")}catch(i){pe(i.message||"AI analysis failed","error")}finally{l(h,!1)}}}async function $e(a){if(e(u)){l(h,!0);try{const i=await fetch(`/api/media/ai/alt-text/${a.id}`,{method:"POST"});if(!i.ok)throw new Error("Failed to generate alt text");const v=await i.json();await wa.update(a.id,{alt_text:v.altText});const w={...a,alt_text:v.altText};l(M,e(M).map(y=>y.id===a.id?w:y),!0),e(_)?.id===a.id&&l(_,w,!0),pe("Alt text generated","success")}catch(i){pe(i.message||"Failed to generate alt text","error")}finally{l(h,!1)}}}function ha(a){l(_,a,!0),l(ce,!0)}async function ze(a){if(e(_))try{const i=new FormData;i.append("file",a.blob,e(_).filename);const v=await fetch(`/api/media/${e(_).id}/replace`,{method:"POST",body:i});if(!v.ok)throw new Error("Failed to save crop");const w=await v.json();l(M,e(M).map(y=>y.id===e(_).id?w.data:y),!0),l(_,w.data,!0),l(ce,!1),pe("Image cropped and saved","success"),Q()}catch(i){pe(i.message||"Failed to save crop","error")}}function oa(){e(p).size===e(M).length?l(p,new Set,!0):l(p,new Set(e(M).map(a=>a.id)),!0)}async function ae(){const a=Array.from(e(p));if(a.length!==0)try{const i=await wa.bulkOptimize(a);pe(`${i.success} images queued for optimization`,"success"),l(M,e(M).map(v=>e(p).has(v.id)&&v.file_type==="image"?{...v,processing_status:"processing"}:v),!0),l(p,new Set,!0),Q()}catch(i){pe(i.message||"Bulk optimization failed","error")}}async function we(){const a=Array.from(e(p));if(a.length!==0&&confirm(`Delete ${a.length} selected items?`))try{await wa.bulkDelete(a),l(M,e(M).filter(i=>!e(p).has(i.id)),!0),l(ne,e(ne)-a.length),l(p,new Set,!0),pe(`${a.length} items deleted`,"success"),Q()}catch(i){pe(i.message||"Bulk delete failed","error")}}async function ba(){const a=Array.from(e(p));if(a.length!==0)for(const i of a){const v=e(M).find(w=>w.id===i);if(v){const w=document.createElement("a");w.href=v.url,w.download=v.filename,w.click()}}}function qa(a){if(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement)return;const i=e(L)?e(M).findIndex(v=>v.id===e(L)):-1;switch(a.key){case"ArrowRight":i<e(M).length-1&&(l(L,e(M)[i+1].id,!0),a.shiftKey||l(p,new Set([e(L)]),!0)),a.preventDefault();break;case"ArrowLeft":i>0&&(l(L,e(M)[i-1].id,!0),a.shiftKey||l(p,new Set([e(L)]),!0)),a.preventDefault();break;case"ArrowDown":const v=e(U)==="grid"?6:1;i+v<e(M).length&&(l(L,e(M)[i+v].id,!0),a.shiftKey||l(p,new Set([e(L)]),!0)),a.preventDefault();break;case"ArrowUp":const w=e(U)==="grid"?6:1;i-w>=0&&(l(L,e(M)[i-w].id,!0),a.shiftKey||l(p,new Set([e(L)]),!0)),a.preventDefault();break;case"Enter":if(e(L)){const y=e(M).find(B=>B.id===e(L));y&&(l(_,y,!0),l(W,!0))}a.preventDefault();break;case" ":e(L)&&(e(p).has(e(L))?e(p).delete(e(L)):e(p).add(e(L)),l(p,e(p),!0)),a.preventDefault();break;case"a":(a.metaKey||a.ctrlKey)&&(oa(),a.preventDefault());break;case"Delete":case"Backspace":e(p).size>0&&(we(),a.preventDefault());break;case"Escape":l(p,new Set,!0),l(S,null),l(W,!1);break}}function Ia(a){e(S)&&l(S,null)}let ma=z(La([]));function pe(a,i="info"){const v=crypto.randomUUID();l(ma,[...e(ma),{id:v,message:a,type:i}],!0),setTimeout(()=>{l(ma,e(ma).filter(w=>w.id!==v),!0)},4e3)}function na(a){return a<1024?a+" B":a<1024*1024?(a/1024).toFixed(1)+" KB":a<1024*1024*1024?(a/1024/1024).toFixed(2)+" MB":(a/1024/1024/1024).toFixed(2)+" GB"}function Qa(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Pa(a){switch(a){case"image":return"";case"video":return"";case"document":return"";default:return""}}var za=sl();ps("1qcx2zr",a=>{_s(()=>{xs.title="Media Library | Admin"})});var Ba=Ce(za);let Ja;var Va=r(Ba),ja=r(Va),Fa=s(r(ja),2),Ea=r(Fa);t(Fa),t(ja);var Aa=s(ja,2),Za=r(Aa),Ma=s(r(Za),2);wt(Ma),Ma.__keydown=a=>a.key==="Enter"&&T();var $a=s(Ma,2);{var rt=a=>{var i=nr();i.__click=()=>{l(N,""),T()},o(a,i)};x($a,a=>{e(N)&&a(rt)})}t(Za),t(Aa);var d=s(Aa,2),q=r(d),F=r(q);F.__click=()=>l(U,"grid");let m;var Pe=s(F,2);Pe.__click=()=>l(U,"list");let Ke;t(q);var Da=s(q,2);Da.__click=()=>l(f,!e(f)),t(d),t(Va);var Ra=s(Va,2);{var et=a=>{var i=vr(),v=r(i),w=r(v),y=s(r(w),2),B=r(y),C=r(B,!0);t(B),ya(2),t(y),t(w);var K=s(w,2),g=s(r(K),2),Z=r(g),xe=r(Z,!0);t(Z),ya(2),t(g),t(K);var de=s(K,2),Be=s(r(de),2),ye=r(Be),X=r(ye,!0);t(ye),ya(2),t(Be),t(de);var je=s(de,2),Te=s(r(je),2),Ve=r(Te),Oe=r(Ve,!0);t(Ve),ya(2),t(Te),t(je);var ea=s(je,2),Fe=s(r(ea),2),Xe=r(Fe),la=r(Xe,!0);t(Xe),ya(2),t(Fe);var Ne=s(Fe,2),va=r(Ne);t(Ne),t(ea),t(v);var ke=s(v,2);ke.__click=()=>l(J,!1),t(i),j((Ge,Ye)=>{H(C,e(V).total_images),H(xe,e(V).optimized_images),H(X,e(V).pending_optimization),H(Oe,Ge),H(la,Ye),Ae(va,`width: ${be()??""}%`)},[()=>na(e(V).total_storage),()=>na(e(V).total_savings_bytes)]),Je(3,i,()=>It,()=>({duration:300})),o(a,i)},at=a=>{var i=dr();i.__click=()=>l(J,!0),o(a,i)};x(Ra,a=>{e(J)&&e(V)?a(et):a(at,!1)})}var Ta=s(Ra,2);{var lt=a=>{var i=fr(),v=r(i);Cs(v,{accept:"image/*,video/*,application/pdf",maxSize:52428800,multiple:!0,onfiles:De});var w=s(v,2);{var y=B=>{var C=_r(),K=Ce(C);pa(K,21,()=>e(n),xe=>xe.id,(xe,de)=>{var Be=hr();let ye;var X=r(Be),je=r(X);{var Te=ke=>{var Ge=cr();o(ke,Ge)},Ve=ke=>{var Ge=ta(),Ye=Ce(Ge);{var da=aa=>{var ca=ur();o(aa,ca)},Ue=aa=>{var ca=pr();o(aa,ca)};x(Ye,aa=>{e(de).status==="error"?aa(da):aa(Ue,!1)},!0)}o(ke,Ge)};x(je,ke=>{e(de).status==="complete"?ke(Te):ke(Ve,!1)})}t(X);var Oe=s(X,2),ea=r(Oe),Fe=r(ea,!0);t(ea);var Xe=s(ea,2),la=r(Xe,!0);t(Xe),t(Oe);var Ne=s(Oe,2),va=r(Ne);t(Ne),t(Be),j(ke=>{ye=oe(Be,1,"upload-item svelte-1qcx2zr",null,ye,{complete:e(de).status==="complete",error:e(de).status==="error"}),H(Fe,e(de).file.name),H(la,ke),Ae(va,`width: ${e(de).progress??""}%`)},[()=>na(e(de).file.size)]),o(xe,Be)}),t(K);var g=s(K,2);{var Z=xe=>{var de=gr();de.__click=He,o(xe,de)};x(g,xe=>{e($)||xe(Z)})}o(B,C)};x(w,B=>{e(n).length>0&&B(y)})}t(i),Je(3,i,()=>It,()=>({duration:300})),o(a,i)};x(Ta,a=>{e(f)&&a(lt)})}var it=s(Ta,2),ot=r(it),Oa=r(ot);Oa.__change=T;var nt=r(Oa);nt.value=nt.__value="all";var vt=s(nt);vt.value=vt.__value="image";var dt=s(vt);dt.value=dt.__value="video";var kt=s(dt);kt.value=kt.__value="document",t(Oa);var Na=s(Oa,2);Na.__change=T;var ct=r(Na);ct.value=ct.__value="all";var ut=s(ct);ut.value=ut.__value="optimized";var pt=s(ut);pt.value=pt.__value="pending";var qt=s(pt);qt.value=qt.__value="processing",t(Na);var Ua=s(Na,2);Ua.__change=T;var ht=r(Ua);ht.value=ht.__value="created_at";var gt=s(ht);gt.value=gt.__value="filename";var Mt=s(gt);Mt.value=Mt.__value="size",t(Ua);var _t=s(Ua,2);_t.__click=()=>{l(Y,e(Y)==="asc"?"desc":"asc",!0),T()};var Rt=r(_t);{var Tt=a=>{var i=xr();o(a,i)},Ot=a=>{var i=br();o(a,i)};x(Rt,a=>{e(Y)==="asc"?a(Tt):a(Ot,!1)})}t(_t),t(ot);var Ct=s(ot,2),Nt=r(Ct);{var Ut=a=>{var i=mr(),v=r(i),w=r(v);t(v);var y=s(v,2);y.__click=oa;var B=r(y,!0);t(y);var C=s(y,2);C.__click=ae;var K=s(C,2);K.__click=ba;var g=s(K,2);g.__click=we,t(i),j(()=>{H(w,`${e(p).size??""} selected`),H(B,e(p).size===e(M).length?"Deselect All":"Select All")}),Je(3,i,()=>Ka,()=>({duration:200})),o(a,i)};x(Nt,a=>{e(p).size>0&&a(Ut)})}t(Ct),t(it);var ft=s(it,2),xt=r(ft),Lt=r(xt);{var Wt=a=>{or(a,{get type(){return e(U)},count:re})},Kt=a=>{var i=ta(),v=Ce(i);{var w=B=>{var C=zr(),K=s(r(C),6);K.__click=()=>l(f,!0),t(C),o(B,C)},y=B=>{var C=Dr();pa(C,21,()=>e(M),K=>K.id,(K,g)=>{var Z=Ar();let xe;Z.__click=X=>A(e(g),X),Z.__dblclick=()=>P(e(g)),Z.__contextmenu=X=>ee(X,e(g)),Z.__keydown=X=>X.key==="Enter"&&P(e(g));var de=r(Z);{var Be=X=>{var je=qr(),Te=Ce(je),Ve=r(Te);{var Oe=te=>{{let Ee=ua(()=>e(g).thumbnail_url||e(g).url),ia=ua(()=>e(g).alt_text||e(g).filename),ga=ua(()=>String(e(g).custom_properties?.blurhash||""));yt(te,{get src(){return e(Ee)},get alt(){return e(ia)},get blurhash(){return e(ga)},aspectRatio:"1"})}},ea=te=>{var Ee=wr(),ia=r(Ee,!0);t(Ee),j(ga=>H(ia,ga),[()=>Pa(e(g).file_type)]),o(te,Ee)};x(Ve,te=>{e(g).file_type==="image"?te(Oe):te(ea,!1)})}var Fe=s(Ve,2),Xe=r(Fe);{var la=te=>{var Ee=yr();o(te,Ee)};x(Xe,te=>{e(g).is_optimized&&te(la)})}var Ne=s(Xe,2);{var va=te=>{var Ee=kr();o(te,Ee)};x(Ne,te=>{e(g).processing_status==="processing"&&te(va)})}t(Fe);var ke=s(Fe,2);let Ge;var Ye=r(ke);wt(Ye),Ye.__click=te=>{te.stopPropagation(),e(p).has(e(g).id)?e(p).delete(e(g).id):e(p).add(e(g).id),l(p,e(p),!0)},t(ke),t(Te);var da=s(Te,2),Ue=r(da),aa=r(Ue,!0);t(Ue);var ca=s(Ue,2),Ca=r(ca,!0);t(ca),t(da),j((te,Ee,ia)=>{Ge=oe(ke,1,"item-checkbox svelte-1qcx2zr",null,Ge,te),Vt(Ye,Ee),he(Ue,"title",e(g).filename),H(aa,e(g).filename),H(Ca,ia)},[()=>({visible:e(p).size>0||e(p).has(e(g).id)}),()=>e(p).has(e(g).id),()=>na(e(g).size)]),o(X,je)},ye=X=>{var je=jr(),Te=Ce(je),Ve=r(Te);wt(Ve),Ve.__click=ie=>{ie.stopPropagation(),e(p).has(e(g).id)?e(p).delete(e(g).id):e(p).add(e(g).id),l(p,e(p),!0)},t(Te);var Oe=s(Te,2),ea=r(Oe);{var Fe=ie=>{{let We=ua(()=>e(g).thumbnail_url||e(g).url),D=ua(()=>e(g).alt_text||e(g).filename);yt(ie,{get src(){return e(We)},get alt(){return e(D)},aspectRatio:"1"})}},Xe=ie=>{var We=Mr(),D=r(We,!0);t(We),j(R=>H(D,R),[()=>Pa(e(g).file_type)]),o(ie,We)};x(ea,ie=>{e(g).file_type==="image"?ie(Fe):ie(Xe,!1)})}t(Oe);var la=s(Oe,2),Ne=r(la),va=r(Ne,!0);t(Ne);var ke=s(Ne,2),Ge=r(ke,!0);t(ke),t(la);var Ye=s(la,2),da=r(Ye,!0);t(Ye);var Ue=s(Ye,2),aa=r(Ue);{var ca=ie=>{var We=Cr();o(ie,We)},Ca=ie=>{var We=ta(),D=Ce(We);{var R=_e=>{var _a=Lr();o(_e,_a)},qe=_e=>{var _a=Br();o(_e,_a)};x(D,_e=>{e(g).processing_status==="processing"?_e(R):_e(qe,!1)},!0)}o(ie,We)};x(aa,ie=>{e(g).is_optimized?ie(ca):ie(Ca,!1)})}t(Ue);var te=s(Ue,2),Ee=r(te,!0);t(te);var ia=s(te,2),ga=r(ia);ga.__click=ie=>{ie.stopPropagation(),fe(e(g))};var bt=s(ga,2);bt.__click=ie=>{ie.stopPropagation(),Ie(e(g))},t(ia),j((ie,We,D)=>{Vt(Ve,ie),H(va,e(g).filename),H(Ge,e(g).collection||"default"),H(da,We),H(Ee,D)},[()=>e(p).has(e(g).id),()=>na(e(g).size),()=>Qa(e(g).created_at)]),o(X,je)};x(de,X=>{e(U)==="grid"?X(Be):X(ye,!1)})}t(Z),j(X=>{xe=oe(Z,1,"media-item svelte-1qcx2zr",null,xe,X),he(Z,"aria-label",e(g).filename)},[()=>({selected:e(p).has(e(g).id),focused:e(L)===e(g).id})]),Je(3,Z,()=>st,()=>({duration:200})),o(K,Z)}),t(C),j(()=>oe(C,1,`media-${e(U)??""}`,"svelte-1qcx2zr")),o(B,C)};x(v,B=>{e(M).length===0?B(w):B(y,!1)},!0)}o(a,i)};x(Lt,a=>{e(ve)?a(Wt):a(Kt,!1)})}var Xt=s(Lt,2);{var Gt=a=>{var i=Sr(),v=r(i);v.__click=()=>{l(O,1),T()};var w=s(v,2);w.__click=()=>{Sa(O,-1),T()};var y=s(w,2),B=r(y);t(y);var C=s(y,2);C.__click=()=>{Sa(O),T()};var K=s(C,2);K.__click=()=>{l(O,e(G),!0),T()},t(i),j(()=>{v.disabled=e(O)===1,w.disabled=e(O)===1,H(B,`Page ${e(O)??""} of ${e(G)??""}`),C.disabled=e(O)===e(G),K.disabled=e(O)===e(G)}),o(a,i)};x(Xt,a=>{e(G)>1&&a(Gt)})}t(xt);var Yt=s(xt,2);{var Qt=a=>{var i=Gr(),v=r(i),w=s(r(v),2);w.__click=()=>l(W,!1),t(v);var y=s(v,2),B=r(y);{var C=D=>{{let R=ua(()=>e(_).alt_text||e(_).filename),qe=ua(()=>String(e(_).custom_properties?.blurhash||""));yt(D,{get src(){return e(_).url},get alt(){return e(R)},get blurhash(){return e(qe)}})}},K=D=>{var R=Hr(),qe=r(R,!0);t(R),j(_e=>H(qe,_e),[()=>Pa(e(_).file_type)]),o(D,R)};x(B,D=>{e(_).file_type==="image"?D(C):D(K,!1)})}t(y);var g=s(y,2),Z=r(g),xe=s(r(Z),2),de=r(xe,!0);t(xe),t(Z);var Be=s(Z,2),ye=s(r(Be),2),X=r(ye,!0);t(ye),t(Be);var je=s(Be,2);{var Te=D=>{var R=Ir(),qe=s(r(R),2),_e=r(qe);t(qe),t(R),j(()=>H(_e,`${e(_).dimensions.width??""}  ${e(_).dimensions.height??""}`)),o(D,R)};x(je,D=>{e(_).dimensions&&D(Te)})}var Ve=s(je,2),Oe=s(r(Ve),2),ea=r(Oe,!0);t(Oe),t(Ve);var Fe=s(Ve,2),Xe=s(r(Fe),2),la=r(Xe,!0);t(Xe),t(Fe);var Ne=s(Fe,2),va=s(r(Ne),2),ke=r(va);{var Ge=D=>{var R=Pr();o(D,R)},Ye=D=>{var R=ta(),qe=Ce(R);{var _e=Re=>{var fa=Vr();o(Re,fa)},_a=Re=>{var fa=Fr();o(Re,fa)};x(qe,Re=>{e(_).processing_status==="processing"?Re(_e):Re(_a,!1)},!0)}o(D,R)};x(ke,D=>{e(_).is_optimized?D(Ge):D(Ye,!1)})}t(va),t(Ne),t(g);var da=s(g,2),Ue=r(da),aa=s(r(Ue),2);{var ca=D=>{var R=Tr();R.__click=()=>$e(e(_));var qe=r(R);{var _e=Re=>{var fa=Er();o(Re,fa)},_a=Re=>{var fa=Rr();ya(),o(Re,fa)};x(qe,Re=>{e(h)?Re(_e):Re(_a,!1)})}t(R),j(()=>R.disabled=e(h)),o(D,R)};x(aa,D=>{e(u)&&D(ca)})}t(Ue);var Ca=s(Ue,2);ms(Ca),t(da);var te=s(da,2);{var Ee=D=>{var R=Kr(),qe=r(R),_e=s(r(qe),2);_e.__click=()=>ra(e(_));var _a=r(_e);{var Re=Qe=>{var xa=Or();o(Qe,xa)},fa=Qe=>{var xa=ws("Analyze");o(Qe,xa)};x(_a,Qe=>{e(h)?Qe(Re):Qe(fa,!1)})}t(_e),t(qe);var as=s(qe,2);{var ts=Qe=>{var xa=Ur();pa(xa,21,()=>e(_).custom_properties.ai_tags,Ha,(rs,ls)=>{var mt=Nr(),is=r(mt,!0);t(mt),j(os=>H(is,os),[()=>String(e(ls))]),o(rs,mt)}),t(xa),o(Qe,xa)},ss=Qe=>{var xa=Wr();o(Qe,xa)};x(as,Qe=>{e(_).custom_properties?.ai_tags&&Array.isArray(e(_).custom_properties.ai_tags)?Qe(ts):Qe(ss,!1)})}t(R),j(()=>_e.disabled=e(h)),o(D,R)};x(te,D=>{e(u)&&D(Ee)})}var ia=s(te,2),ga=r(ia);{var bt=D=>{var R=Xr(),qe=Ce(R);qe.__click=()=>ha(e(_));var _e=s(qe,2);_e.__click=()=>l(me,!0),o(D,R)};x(ga,D=>{e(_).file_type==="image"&&D(bt)})}var ie=s(ga,2);ie.__click=()=>fe(e(_));var We=s(ie,2);We.__click=()=>Ie(e(_)),t(ia),t(i),j((D,R)=>{H(de,e(_).filename),H(X,D),H(ea,e(_).mime_type),H(la,R),zs(Ca,e(_).alt_text||"")},[()=>na(e(_).size),()=>Qa(e(_).created_at)]),Ze("blur",Ca,async D=>{const R=D.target;R.value!==e(_)?.alt_text&&(await wa.update(e(_).id,{alt_text:R.value}),l(_,{...e(_),alt_text:R.value},!0),pe("Alt text saved","success"))}),Je(3,i,()=>Pt,()=>({x:320,duration:300})),o(a,i)};x(Yt,a=>{e(W)&&e(_)&&a(Qt)})}t(ft);var Bt=s(ft,2);{var Jt=a=>{var i=Jr(),v=r(i);v.__click=()=>{P(e(S).item),l(S,null)};var w=s(v,2);{var y=g=>{var Z=Qr(),xe=Ce(Z);xe.__click=()=>{fe(e(S).item),l(S,null)};var de=s(xe,2);de.__click=()=>{ha(e(S).item),l(S,null)};var Be=s(de,2);{var ye=X=>{var je=Yr();je.__click=()=>{ra(e(S).item),l(S,null)},o(X,je)};x(Be,X=>{e(u)&&X(ye)})}o(g,Z)};x(w,g=>{e(S).item.file_type==="image"&&g(y)})}var B=s(w,4),C=s(B,2);C.__click=()=>{navigator.clipboard.writeText(e(S).item.url),pe("URL copied","success"),l(S,null)};var K=s(C,4);K.__click=()=>{Ie(e(S).item),l(S,null)},t(i),j(()=>{Ae(i,`left: ${e(S).x??""}px; top: ${e(S).y??""}px`),he(B,"href",e(S).item.url),he(B,"download",e(S).item.filename)}),Je(3,i,()=>Ka,()=>({duration:150,start:.9})),o(a,i)};x(Bt,a=>{e(S)&&a(Jt)})}var jt=s(Bt,2);pa(jt,21,()=>e(ma),a=>a.id,(a,i)=>{var v=al(),w=r(v);{var y=g=>{var Z=Zr();o(g,Z)},B=g=>{var Z=ta(),xe=Ce(Z);{var de=ye=>{var X=$r();o(ye,X)},Be=ye=>{var X=el();o(ye,X)};x(xe,ye=>{e(i).type==="error"?ye(de):ye(Be,!1)},!0)}o(g,Z)};x(w,g=>{e(i).type==="success"?g(y):g(B,!1)})}var C=s(w,2),K=r(C,!0);t(C),t(v),j(()=>{oe(v,1,`toast toast-${e(i).type??""}`,"svelte-1qcx2zr"),H(K,e(i).message)}),Je(3,v,()=>Pt,()=>({y:20,duration:300})),o(a,v)}),t(jt),t(Ba);var At=s(Ba,2);{var Zt=a=>{Ts(a,{get src(){return e(_).url},oncrop:ze,oncancel:()=>l(ce,!1)})};x(At,a=>{e(ce)&&e(_)&&a(Zt)})}var $t=s(At,2);{var es=a=>{var i=tl();i.__click=()=>l(me,!1),i.__keydown=C=>C.key==="Escape"&&l(me,!1);var v=r(i);v.__click=C=>C.stopPropagation(),v.__keydown=C=>C.stopPropagation();var w=r(v),y=s(r(w),2);y.__click=()=>l(me,!1),t(w);var B=s(w,2);{let C=ua(()=>e(_).variants||[]);Qs(B,{get originalUrl(){return e(_).url},get variants(){return e(C)}})}t(v),t(i),Je(3,v,()=>Ka,()=>({duration:300,start:.95})),Je(3,i,()=>st,()=>({duration:200})),o(a,i)};x($t,a=>{e(me)&&e(_)&&a(es)})}j(()=>{Ja=oe(Ba,1,"media-library svelte-1qcx2zr",null,Ja,{"details-open":e(W)}),H(Ea,`${e(ne)??""} items`),m=oe(F,1,"svelte-1qcx2zr",null,m,{active:e(U)==="grid"}),Ke=oe(Pe,1,"svelte-1qcx2zr",null,Ke,{active:e(U)==="list"})}),hs(Ma,()=>e(N),a=>l(N,a)),zt(Oa,()=>e(ge),a=>l(ge,a)),zt(Na,()=>e(Me),a=>l(Me,a)),zt(Ua,()=>e(le),a=>l(le,a)),o(sa,za),Ya(),Le()}Xa(["keydown","click","change","dblclick","contextmenu"]);export{il as component};
