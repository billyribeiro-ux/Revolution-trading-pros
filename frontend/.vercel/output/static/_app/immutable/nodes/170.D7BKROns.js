import{z as ze,p as be,s as M,A as he,o as xe,f as _,e as i,c as f,q as r,i as P,w as T,h as w,j as me,F as ee,g as s,O as b,x as u,r as o,k as We,d as $e,n as Ae,N as Ne,Q as Ce}from"../chunks/C_QN0JMx.js";import{a as l}from"../chunks/1Dlf-fUy.js";const te={async getWorkflows(){return(await l.get("/workflows")).data},async getWorkflow(e){return(await l.get(`/workflows/${e}`)).data},async createWorkflow(e){return(await l.post("/workflows",e)).data},async updateWorkflow(e,t){return(await l.put(`/workflows/${e}`,t)).data},async deleteWorkflow(e){await l.delete(`/workflows/${e}`)},async toggleWorkflowStatus(e,t){return(await l.put(`/workflows/${e}/status`,{status:t})).data},async getWorkflowNodes(e){return(await l.get(`/workflows/${e}/nodes`)).data},async createNode(e,t){return(await l.post(`/workflows/${e}/nodes`,t)).data},async updateNode(e,t,n){return(await l.put(`/workflows/${e}/nodes/${t}`,n)).data},async deleteNode(e,t){await l.delete(`/workflows/${e}/nodes/${t}`)},async getWorkflowEdges(e){return(await l.get(`/workflows/${e}/edges`)).data},async createEdge(e,t){return(await l.post(`/workflows/${e}/edges`,t)).data},async deleteEdge(e,t){await l.delete(`/workflows/${e}/edges/${t}`)},async executeWorkflow(e,t){return(await l.post(`/workflows/${e}/execute`,{trigger_data:t})).data},async getWorkflowRuns(e,t=50){return(await l.get(`/workflows/${e}/runs?limit=${t}`)).data},async getWorkflowRun(e,t){return(await l.get(`/workflows/${e}/runs/${t}`)).data},async getWorkflowAnalytics(e){return(await l.get(`/workflows/${e}/analytics`)).data},async getWorkflowTemplates(){return(await l.get("/workflows/templates")).data},async createFromTemplate(e,t){return(await l.post("/workflows/from-template",{template_id:e,name:t})).data}};var Ee=_('<div class="loading svelte-1k5z4u1"><div class="spinner svelte-1k5z4u1"></div> <p>Loading workflows...</p></div>'),Fe=_('<div class="empty-state svelte-1k5z4u1"><svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg> <h3 class="svelte-1k5z4u1">No workflows yet</h3> <p class="svelte-1k5z4u1">Create your first workflow to automate your processes</p> <button class="btn-primary svelte-1k5z4u1">Create Workflow</button></div>'),Se=_('<p class="description svelte-1k5z4u1"> </p>'),Re=_('<div class="workflow-card svelte-1k5z4u1"><div class="card-header svelte-1k5z4u1"><h3 class="svelte-1k5z4u1"> </h3> <span> </span></div> <!> <div class="stats svelte-1k5z4u1"><div class="stat svelte-1k5z4u1"><span class="stat-label svelte-1k5z4u1">Executions</span> <span class="stat-value svelte-1k5z4u1"> </span></div> <div class="stat svelte-1k5z4u1"><span class="stat-label svelte-1k5z4u1">Success Rate</span> <span class="stat-value success svelte-1k5z4u1"> </span></div></div> <div class="card-actions svelte-1k5z4u1"><button class="btn-secondary svelte-1k5z4u1">Edit</button> <button> </button></div></div>'),Be=_('<div class="workflows-grid svelte-1k5z4u1"></div>'),Le=_('<div class="workflows-page svelte-1k5z4u1"><div class="page-header svelte-1k5z4u1"><div><h1 class="svelte-1k5z4u1">Workflows</h1> <p class="subtitle svelte-1k5z4u1">Automate your business processes</p></div> <button class="btn-primary svelte-1k5z4u1"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> Create Workflow</button></div> <div class="filters svelte-1k5z4u1"><button> </button> <button> </button> <button> </button></div> <!></div>');function Te(e,t){be(t,!0);let n=M(he([])),h=M(!0),v=M("all");async function j(){f(h,!0);try{f(n,await te.getWorkflows(),!0)}catch{}finally{f(h,!1)}}function q(){ee("/workflows/new")}function se(a){ee(`/workflows/${a}/edit`)}async function ae(a){const d=a.status==="active"?"paused":"active";try{await te.toggleWorkflowStatus(a.id,d),await j()}catch{}}let O=Ae(()=>s(n).filter(a=>s(v)==="all"?!0:a.status===s(v)));xe(()=>{j()});var W=Le(),$=r(W),oe=i(r($),2);oe.__click=q,o($);var A=i($,2),g=r(A);g.__click=()=>f(v,"all");let Q;var re=r(g);o(g);var y=i(g,2);y.__click=()=>f(v,"active");let V;var le=r(y);o(y);var x=i(y,2);x.__click=()=>f(v,"paused");let D;var ne=r(x);o(x),o(A);var ie=i(A,2);{var ce=a=>{var d=Ee();w(a,d)},ue=a=>{var d=We(),G=$e(d);{var ve=k=>{var p=Fe(),N=i(r(p),6);N.__click=q,o(p),w(k,p)},de=k=>{var p=Be();Ne(p,21,()=>s(O),Ce,(N,c)=>{var C=Re(),E=r(C),F=r(E),pe=r(F,!0);o(F);var S=i(F,2);let H;var we=r(S,!0);o(S),o(E);var I=i(E,2);{var ke=z=>{var L=Se(),ye=r(L,!0);o(L),T(()=>u(ye,s(c).description)),w(z,L)};P(I,z=>{s(c).description&&z(ke)})}var R=i(I,2),B=r(R),J=i(r(B),2),fe=r(J,!0);o(J),o(B);var K=i(B,2),U=i(r(K),2),_e=r(U);o(U),o(K),o(R);var X=i(R,2),Y=r(X);Y.__click=()=>se(s(c).id);var m=i(Y,2);let Z;m.__click=()=>ae(s(c));var ge=r(m,!0);o(m),o(X),o(C),T(z=>{u(pe,s(c).name),H=b(S,1,"status-badge svelte-1k5z4u1",null,H,{active:s(c).status==="active"}),u(we,s(c).status),u(fe,s(c).execution_count),u(_e,`${z??""}%`),Z=b(m,1,"btn-toggle svelte-1k5z4u1",null,Z,{active:s(c).status==="active"}),u(ge,s(c).status==="active"?"Pause":"Activate")},[()=>s(c).execution_count>0?(s(c).success_count/s(c).execution_count*100).toFixed(1):0]),w(N,C)}),o(p),w(k,p)};P(G,k=>{s(O).length===0?k(ve):k(de,!1)},!0)}w(a,d)};P(ie,a=>{s(h)?a(ce):a(ue,!1)})}o(W),T((a,d)=>{Q=b(g,1,"svelte-1k5z4u1",null,Q,{active:s(v)==="all"}),u(re,`All (${s(n).length??""})`),V=b(y,1,"svelte-1k5z4u1",null,V,{active:s(v)==="active"}),u(le,`Active (${a??""})`),D=b(x,1,"svelte-1k5z4u1",null,D,{active:s(v)==="paused"}),u(ne,`Paused (${d??""})`)},[()=>s(n).filter(a=>a.status==="active").length,()=>s(n).filter(a=>a.status==="paused").length]),w(e,W),me()}ze(["click"]);export{Te as component};
