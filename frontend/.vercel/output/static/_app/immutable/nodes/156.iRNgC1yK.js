import{ab as W,ac as xt,d1 as vt,z as _t,p as bt,a as Ee,f as p,q as a,bT as Mt,e as o,r as e,m as Dt,i as F,B as Te,w as E,O as xe,g as s,s as yt,x as $,K as $e,D as ct,h as v,j as ft,E as gt,c as ue,N as Oe,n as it,al as Ut,k as Je,d as Ae,_ as pt,Z as Ct,Q as Ke,d0 as Tt,bx as Et,A as $t,bM as At,c4 as ut,H as Ve,I as wt,cZ as mt,o as Lt,a3 as Bt,a9 as It,aC as je,ao as Pt,bF as Qt,bS as Vt,bJ as Ot,bG as Kt,aP as rt,as as Nt,at as Gt,bH as ht,bK as Ht,bV as Rt,l as Zt,b2 as jt,b_ as Jt,bD as Wt,aD as Xt}from"../chunks/C_QN0JMx.js";import{m as qe}from"../chunks/DljncKY_.js";const Ft={files:[],folders:[],currentFolder:null,selectedFiles:new Set,viewMode:"grid",sortBy:"date",sortOrder:"desc",searchQuery:"",filterType:null,isLoading:!1,error:null,pagination:{page:1,per_page:50,total:0,total_pages:0}},qt={uploads:new Map,isUploading:!1,totalProgress:0};function Yt(){const{subscribe:c,set:I,update:n}=xt(Ft);return{subscribe:c,async loadFiles(t=1){n(l=>({...l,isLoading:!0,error:null}));try{const l=vt({subscribe:c}),i=await qe.getFiles({folder_id:l.currentFolder||void 0,file_type:l.filterType||void 0,search:l.searchQuery||void 0,sort:l.sortBy,order:l.sortOrder,page:t,per_page:l.pagination.per_page});n(u=>({...u,files:i.files,pagination:i.pagination,isLoading:!1}))}catch(l){n(i=>({...i,error:l instanceof Error?l.message:"Failed to load files",isLoading:!1}))}},async loadFolders(){try{const t=await qe.getFolders();n(l=>({...l,folders:t.folders}))}catch{}},setCurrentFolder(t){n(l=>({...l,currentFolder:t,selectedFiles:new Set})),this.loadFiles(1)},selectFile(t){n(l=>{const i=new Set(l.selectedFiles);return i.add(t),{...l,selectedFiles:i}})},deselectFile(t){n(l=>{const i=new Set(l.selectedFiles);return i.delete(t),{...l,selectedFiles:i}})},toggleFileSelection(t){n(l=>{const i=new Set(l.selectedFiles);return i.has(t)?i.delete(t):i.add(t),{...l,selectedFiles:i}})},selectAll(){n(t=>({...t,selectedFiles:new Set(t.files.map(l=>l.id))}))},deselectAll(){n(t=>({...t,selectedFiles:new Set}))},setViewMode(t){n(l=>({...l,viewMode:t})),localStorage.setItem("media_view_mode",t)},setSortBy(t){n(l=>({...l,sortBy:t})),this.loadFiles(1)},setSortOrder(t){n(l=>({...l,sortOrder:t})),this.loadFiles(1)},setSearchQuery(t){n(l=>({...l,searchQuery:t})),setTimeout(()=>{this.loadFiles(1)},300)},setFilterType(t){n(l=>({...l,filterType:t})),this.loadFiles(1)},async deleteFile(t,l=!1){await qe.deleteFile(t,l),n(i=>({...i,files:i.files.filter(u=>u.id!==t),selectedFiles:new Set([...i.selectedFiles].filter(u=>u!==t))}))},async bulkDelete(t=!1){const l=vt({subscribe:c}),i=Array.from(l.selectedFiles);i.length!==0&&(await qe.bulkDelete(i,t),n(u=>({...u,files:u.files.filter(_=>!i.includes(_.id)),selectedFiles:new Set})))},async bulkMove(t){const l=vt({subscribe:c}),i=Array.from(l.selectedFiles);i.length!==0&&(await qe.bulkMove(i,t),this.loadFiles(),this.deselectAll())},async createFolder(t){const l=await qe.createFolder(t);return n(i=>({...i,folders:[...i.folders,l.folder]})),l.folder},async deleteFolder(t,l=!1){await qe.deleteFolder(t,l),n(i=>({...i,folders:i.folders.filter(u=>u.id!==t),currentFolder:i.currentFolder===t?null:i.currentFolder}))},reset(){I(Ft)},clearError(){n(t=>({...t,error:null}))},async initialize(){{const t=localStorage.getItem("media_view_mode");(t==="grid"||t==="list")&&n(l=>({...l,viewMode:t}))}await this.loadFolders(),await this.loadFiles()}}}function ea(){const{subscribe:c,set:I,update:n}=xt(qt);return{subscribe:c,async uploadFiles(t,l){const i=new Map;t.forEach(u=>{const _=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;i.set(_,{file:u,progress:0,status:"pending"})}),n(u=>({...u,uploads:i,isUploading:!0}));for(const[u,_]of i.entries())try{n(b=>{const y=new Map(b.uploads);return y.set(u,{..._,status:"uploading"}),{...b,uploads:y}});const P=await qe.uploadFile(_.file,l,b=>{n(y=>{const j=new Map(y.uploads),H=j.get(u);return H&&j.set(u,{...H,progress:b}),{...y,uploads:j}})});n(b=>{const y=new Map(b.uploads);return y.set(u,{..._,status:"complete",progress:100,media_id:P.file.id}),{...b,uploads:y}}),x.loadFiles()}catch(P){n(b=>{const y=new Map(b.uploads);return y.set(u,{..._,status:"error",error:P instanceof Error?P.message:"Upload failed"}),{...b,uploads:y}})}n(u=>({...u,isUploading:!1})),setTimeout(()=>{n(u=>{const _=new Map(u.uploads);for(const[P,b]of _.entries())b.status==="complete"&&_.delete(P);return{...u,uploads:_}})},5e3)},clearUploads(){I(qt)},removeUpload(t){n(l=>{const i=new Map(l.uploads);return i.delete(t),{...l,uploads:i}})}}}const x=Yt(),We=ea(),ta=W(x,c=>c.files),aa=W(x,c=>c.folders),sa=W(x,c=>c.selectedFiles),kt=W(sa,c=>c.size);W(kt,c=>c>0);const la=W(x,c=>c.viewMode),ra=W(x,c=>c.isLoading),St=W(We,c=>Array.from(c.uploads.values()));W(St,c=>c.length);W(We,c=>c.isUploading);W(St,c=>c.length===0?0:c.reduce((n,t)=>n+t.progress,0)/c.length);var ia=p('<div class="spinner-small svelte-11qtqnl"></div>'),oa=p('<div class="progress-bar svelte-11qtqnl"><div class="progress-fill svelte-11qtqnl"></div></div> <span class="progress-text svelte-11qtqnl"> </span>',1),na=p('<span class="status-text success svelte-11qtqnl">Complete</span>'),da=p('<span class="status-text error svelte-11qtqnl"> </span>'),va=p('<button class="remove-btn svelte-11qtqnl" aria-label="Remove"><!></button>'),ca=p('<div class="upload-item svelte-11qtqnl"><div class="upload-item-info svelte-11qtqnl"><div class="upload-item-icon svelte-11qtqnl"><!></div> <div class="upload-item-details svelte-11qtqnl"><div class="upload-item-name svelte-11qtqnl"> </div> <div class="upload-item-size svelte-11qtqnl"> </div></div></div> <div class="upload-item-progress svelte-11qtqnl"><!></div> <!></div>'),ua=p('<div class="upload-list svelte-11qtqnl"><h4 class="upload-list-title svelte-11qtqnl"> </h4> <!></div>'),pa=p('<div class="upload-container svelte-11qtqnl"><div role="button" tabindex="0"><!> <h3 class="upload-title svelte-11qtqnl">Drop files here or click to browse</h3> <p class="upload-subtitle svelte-11qtqnl"> </p> <input type="file" class="hidden svelte-11qtqnl"/></div> <!></div>');function _a(c,I){bt(I,!0);const n=()=>Te(We,"$uploadStore",t),[t,l]=gt();let i=Ee(I,"folderId",3,null),u=Ee(I,"accept",3,"image/*,video/*,application/pdf"),_=Ee(I,"maxSize",3,100*1024*1024),P=Ee(I,"multiple",3,!0),b=yt(!1),y;function j(d){d.preventDefault(),ue(b,!0)}function H(d){d.preventDefault(),ue(b,!1)}function Le(d){d.preventDefault(),ue(b,!1);const U=Array.from(d.dataTransfer?.files||[]);le(U)}function pe(d){const U=d.target,G=Array.from(U.files||[]);le(G),U.value=""}function le(d){const U=d.filter(G=>G.size>_()?(alert(`File ${G.name} is too large. Maximum size is ${_()/1024/1024}MB`),!1):!0);U.length>0&&We.uploadFiles(U,{folder_id:i()||void 0,optimize:!0,generate_webp:!0})}function ye(d){return d<1024?d+" B":d<1024*1024?(d/1024).toFixed(1)+" KB":(d/1024/1024).toFixed(1)+" MB"}var ke=pa(),D=a(ke);let re;D.__click=()=>y.click(),D.__keydown=d=>d.key==="Enter"&&y.click();var _e=a(D);Mt(_e,{size:48,class:"upload-icon"});var be=o(_e,4),w=a(be);e(be);var q=o(be,2);q.__change=pe,Dt(q,d=>y=d,()=>y),e(D);var A=o(D,2);{var Q=d=>{var U=ua(),G=a(U),Be=a(G);e(G);var ie=o(G,2);Oe(ie,1,()=>Array.from(n().uploads.entries()),Ke,(fe,ge)=>{var X=it(()=>Tt(s(ge),2));let Ie=()=>s(X)[0],k=()=>s(X)[1];var Y=ca(),oe=a(Y),ne=a(oe),L=a(ne);{var V=m=>{Ut(m,{size:20,class:"text-green-400"})},ee=m=>{var r=Je(),f=Ae(r);{var S=g=>{Et(g,{size:20,class:"text-red-400"})},B=g=>{var C=ia();v(g,C)};F(f,g=>{k().status==="error"?g(S):g(B,!1)},!0)}v(m,r)};F(L,m=>{k().status==="complete"?m(V):m(ee,!1)})}e(ne);var R=o(ne,2),O=a(R),K=a(O,!0);e(O);var we=o(O,2),de=a(we,!0);e(we),e(R),e(oe);var me=o(oe,2),Ne=a(me);{var ve=m=>{var r=oa(),f=Ae(r),S=a(f);e(f);var B=o(f,2),g=a(B);e(B),E(C=>{pt(S,`width: ${k().progress??""}%`),$(g,`${C??""}%`)},[()=>Math.round(k().progress)]),v(m,r)},Pe=m=>{var r=Je(),f=Ae(r);{var S=g=>{var C=na();v(g,C)},B=g=>{var C=Je(),Z=Ae(C);{var N=ce=>{var ze=da(),ot=a(ze,!0);e(ze),E(()=>$(ot,k().error||"Failed")),v(ce,ze)};F(Z,ce=>{k().status==="error"&&ce(N)},!0)}v(g,C)};F(f,g=>{k().status==="complete"?g(S):g(B,!1)},!0)}v(m,r)};F(Ne,m=>{k().status==="uploading"||k().status==="processing"?m(ve):m(Pe,!1)})}e(me);var Qe=o(me,2);{var Se=m=>{var r=va();r.__click=()=>We.removeUpload(Ie());var f=a(r);Ct(f,{size:16}),e(r),v(m,r)};F(Qe,m=>{(k().status==="error"||k().status==="complete")&&m(Se)})}e(Y),E(m=>{$(K,k().file.name),$(de,m)},[()=>ye(k().file.size)]),v(fe,Y)}),e(U),E(()=>$(Be,`Uploading ${n().uploads.size??""} file(s)`)),v(d,U)};F(A,d=>{n().uploads.size>0&&d(Q)})}e(ke),E(()=>{re=xe(D,1,"dropzone svelte-11qtqnl",null,re,{dragging:s(b)}),$(w,`Supports images, videos, and documents up to ${_()/1024/1024}MB`),$e(q,"accept",u()),q.multiple=P()}),ct("dragover",D,j),ct("dragleave",D,H),ct("drop",D,Le),v(c,ke),ft(),l()}_t(["click","keydown","change"]);var ba=p('<button class="expand-btn svelte-wg5dkb"><!></button>'),fa=p('<span class="expand-spacer svelte-wg5dkb"></span>'),ga=p('<button class="expand-btn svelte-wg5dkb"><!></button>'),wa=p('<span class="expand-spacer svelte-wg5dkb"></span>'),ma=p('<div class="folder-item-wrapper svelte-wg5dkb"><!> <button><!> <span class="folder-name svelte-wg5dkb"> </span> <span class="folder-count svelte-wg5dkb"> </span></button></div>'),ha=p('<div class="folder-group svelte-wg5dkb"><div class="folder-item-wrapper svelte-wg5dkb"><!> <button><!> <span class="folder-name svelte-wg5dkb"> </span> <span class="folder-count svelte-wg5dkb"> </span></button></div> <!></div>'),Fa=p('<div class="folder-tree svelte-wg5dkb"><div class="folder-tree-header svelte-wg5dkb"><h3 class="folder-tree-title svelte-wg5dkb">Folders</h3> <button class="btn-add-folder svelte-wg5dkb" aria-label="Create folder"><!></button></div> <button><!> <span class="folder-name svelte-wg5dkb">All Files</span></button> <div class="folder-list svelte-wg5dkb"></div></div>');function qa(c,I){bt(I,!0);const n=()=>Te(aa,"$currentFolders",t),[t,l]=gt();let i=Ee(I,"currentFolderId",7,null),u=Ee(I,"onFolderSelect",3,()=>{}),_=Ee(I,"onCreateFolder",3,()=>{}),P=yt($t(new Set)),b=it(()=>y(n()));function y(w){const q=[],A=new Map;return w.forEach(Q=>{A.set(Q.id,{...Q,children:[]})}),w.forEach(Q=>{const d=A.get(Q.id);if(Q.parent_id){const U=A.get(Q.parent_id);U&&U.children.push(d)}else q.push(d)}),q}function j(w){s(P).has(w)?s(P).delete(w):s(P).add(w),ue(P,s(P),!0)}function H(w){i(w),u()(w)}function Le(w,q=0){const A=s(P).has(w.id),Q=i()===w.id,d=w.children.length>0;return{folder:w,level:q,isExpanded:A,isSelected:Q,hasChildren:d}}var pe=Fa(),le=a(pe),ye=o(a(le),2);ye.__click=function(...w){_()?.apply(this,w)};var ke=a(ye);At(ke,{size:18}),e(ye),e(le);var D=o(le,2);let re;D.__click=()=>H(null);var _e=a(D);ut(_e,{size:20,class:"folder-icon"}),Ve(2),e(D);var be=o(D,2);Oe(be,21,()=>s(b),Ke,(w,q)=>{const A=it(()=>{const{level:L,isExpanded:V,isSelected:ee,hasChildren:R}=Le(s(q));return{level:L,isExpanded:V,isSelected:ee,hasChildren:R}});var Q=ha(),d=a(Q),U=a(d);{var G=L=>{var V=ba();V.__click=()=>j(s(q).id);var ee=a(V);{var R=K=>{wt(K,{size:16})},O=K=>{mt(K,{size:16})};F(ee,K=>{s(A).isExpanded?K(R):K(O,!1)})}e(V),E(()=>$e(V,"aria-label",s(A).isExpanded?"Collapse":"Expand")),v(L,V)},Be=L=>{var V=fa();v(L,V)};F(U,L=>{s(A).hasChildren?L(G):L(Be,!1)})}var ie=o(U,2);let fe;ie.__click=()=>H(s(q).id);var ge=a(ie);ut(ge,{size:20,class:"folder-icon"});var X=o(ge,2),Ie=a(X,!0);e(X);var k=o(X,2),Y=a(k,!0);e(k),e(ie),e(d);var oe=o(d,2);{var ne=L=>{var V=Je(),ee=Ae(V);Oe(ee,17,()=>s(q).children,Ke,(R,O)=>{const K=it(()=>Le(s(O),s(A).level+1));var we=ma(),de=a(we);{var me=S=>{var B=ga();B.__click=()=>j(s(O).id);var g=a(B);{var C=N=>{wt(N,{size:16})},Z=N=>{mt(N,{size:16})};F(g,N=>{s(K).isExpanded?N(C):N(Z,!1)})}e(B),E(()=>$e(B,"aria-label",s(K).isExpanded?"Collapse":"Expand")),v(S,B)},Ne=S=>{var B=wa();v(S,B)};F(de,S=>{s(K).hasChildren?S(me):S(Ne,!1)})}var ve=o(de,2);let Pe;ve.__click=()=>H(s(O).id);var Qe=a(ve);ut(Qe,{size:20,class:"folder-icon"});var Se=o(Qe,2),m=a(Se,!0);e(Se);var r=o(Se,2),f=a(r,!0);e(r),e(ve),e(we),E(()=>{Pe=xe(ve,1,"folder-item svelte-wg5dkb",null,Pe,{active:s(K).isSelected}),pt(ve,`padding-left: ${s(K).level*1.5+.75}rem`),$(m,s(O).name),$(f,s(O).file_count)}),v(R,we)}),v(L,V)};F(oe,L=>{s(A).hasChildren&&s(A).isExpanded&&s(q).children&&L(ne)})}e(Q),E(()=>{fe=xe(ie,1,"folder-item svelte-wg5dkb",null,fe,{active:s(A).isSelected}),pt(ie,`padding-left: ${s(A).level*1.5+.75}rem`),$(Ie,s(q).name),$(Y,s(q).file_count)}),v(w,Q)}),e(be),e(pe),E(()=>re=xe(D,1,"folder-item svelte-wg5dkb",null,re,{active:i()===null})),v(c,pe),ft(),l()}_t(["click"]);var xa=p('<div class="upload-section svelte-14bqwv7"><!></div>'),ya=p('<div class="bulk-actions svelte-14bqwv7"><span class="selected-count svelte-14bqwv7"> </span> <button class="bulk-btn svelte-14bqwv7"><!> Delete</button> <button class="bulk-btn svelte-14bqwv7">Clear</button></div>'),ka=p('<div class="loading-state svelte-14bqwv7"><div class="spinner svelte-14bqwv7"></div> <p class="text-gray-400 mt-4">Loading files...</p></div>'),Sa=p('<div class="file-thumbnail svelte-14bqwv7"><img class="svelte-14bqwv7"/></div>'),za=p('<div class="file-icon-wrapper svelte-14bqwv7"><!></div>'),Ma=p('<div class="file-badge webp svelte-14bqwv7">WebP</div>'),Da=p('<div class="file-badge ai svelte-14bqwv7"><!> AI</div>'),Ua=p('<div role="button" tabindex="0"><!> <div class="file-info svelte-14bqwv7"><div class="file-name svelte-14bqwv7"> </div> <div class="file-meta svelte-14bqwv7"> </div></div> <!> <!></div>'),Ca=p('<div class="files-grid svelte-14bqwv7"></div>'),Ta=p('<img class="file-thumb-small svelte-14bqwv7"/>'),Ea=p('<span class="tag svelte-14bqwv7"> </span>'),$a=p('<tr><td class="svelte-14bqwv7"><input type="checkbox"/></td><td class="file-name-cell svelte-14bqwv7"><!> <span> </span></td><td class="svelte-14bqwv7"> </td><td class="svelte-14bqwv7"> </td><td class="svelte-14bqwv7"> </td><td class="svelte-14bqwv7"><div class="tags svelte-14bqwv7"></div></td></tr>'),Aa=p('<div class="files-list svelte-14bqwv7"><table class="files-table svelte-14bqwv7"><thead class="svelte-14bqwv7"><tr><th class="w-12 svelte-14bqwv7"></th><th class="svelte-14bqwv7">Name</th><th class="svelte-14bqwv7">Type</th><th class="svelte-14bqwv7">Size</th><th class="svelte-14bqwv7">Date</th><th class="svelte-14bqwv7">Tags</th></tr></thead><tbody class="svelte-14bqwv7"></tbody></table></div>'),La=p('<div class="pagination svelte-14bqwv7"><button class="page-btn svelte-14bqwv7">Previous</button> <span class="page-info svelte-14bqwv7"> </span> <button class="page-btn svelte-14bqwv7">Next</button></div>'),Ba=p("<!> <!>",1),Ia=p('<div class="empty-state svelte-14bqwv7"><!> <h3 class="text-xl font-semibold text-gray-400 mt-4">No files yet</h3> <p class="text-gray-500 mt-2">Upload your first file to get started</p> <button class="btn-primary mt-4 svelte-14bqwv7"><!> Upload Files</button></div>'),Pa=p('<div class="media-dashboard svelte-14bqwv7"><div class="dashboard-header svelte-14bqwv7"><div class="header-title svelte-14bqwv7"><!> <div><h1 class="text-3xl font-bold text-white">Media Library</h1> <p class="text-gray-400 mt-1">Manage your files, images, and videos</p></div></div> <div class="header-actions svelte-14bqwv7"><button class="btn-primary svelte-14bqwv7"><!> Upload Files</button></div></div> <div class="dashboard-content svelte-14bqwv7"><aside class="sidebar svelte-14bqwv7"><!></aside> <main class="main-area svelte-14bqwv7"><!> <div class="toolbar svelte-14bqwv7"><div class="toolbar-left svelte-14bqwv7"><div class="search-box svelte-14bqwv7"><!> <input type="text" placeholder="Search files..." class="search-input svelte-14bqwv7"/></div> <select class="filter-select svelte-14bqwv7"><option>All Types</option><option>Images</option><option>Videos</option><option>Documents</option></select></div> <div class="toolbar-right svelte-14bqwv7"><div class="view-toggle svelte-14bqwv7"><button aria-label="Grid view"><!></button> <button aria-label="List view"><!></button></div> <!></div></div> <!></main></div></div>');function Oa(c,I){bt(I,!1);const n=()=>Te(kt,"$selectedCount",_),t=()=>Te(x,"$mediaStore",_),l=()=>Te(la,"$viewMode",_),i=()=>Te(ra,"$isLoading",_),u=()=>Te(ta,"$currentFiles",_),[_,P]=gt();let b=rt(!1),y=rt(!1),j=rt(""),H=rt("all");Lt(()=>{x.initialize()});function Le(r){x.setCurrentFolder(r)}function pe(r){return r<1024?r+" B":r<1024*1024?(r/1024).toFixed(1)+" KB":(r/1024/1024).toFixed(1)+" MB"}function le(r){return new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function ye(r){switch(r){case"image":return je;case"video":return Xt;default:return Wt}}async function ke(){if(confirm(`Delete ${n()} file(s)?`))try{await x.bulkDelete(!1)}catch{alert("Failed to delete files. Some files may be in use.")}}Bt();var D=Pa();It("14bqwv7",r=>{Nt(()=>{Gt.title="Media Library | Revolution Trading Pros"})});var re=a(D),_e=a(re),be=a(_e);je(be,{size:32,class:"text-yellow-400"}),Ve(2),e(_e);var w=o(_e,2),q=a(w);q.__click=()=>ue(b,!s(b));var A=a(q);je(A,{size:18}),Ve(),e(q),e(w),e(re);var Q=o(re,2),d=a(Q),U=a(d);qa(U,{get currentFolderId(){return t().currentFolder},onFolderSelect:Le,onCreateFolder:()=>ue(y,!0)}),e(d);var G=o(d,2),Be=a(G);{var ie=r=>{var f=xa(),S=a(f);_a(S,{get folderId(){return t().currentFolder}}),e(f),v(r,f)};F(Be,r=>{s(b)&&r(ie)})}var fe=o(Be,2),ge=a(fe),X=a(ge),Ie=a(X);Pt(Ie,{size:20,class:"search-icon"});var k=o(Ie,2);ht(k),k.__input=r=>x.setSearchQuery(r.currentTarget.value),e(X);var Y=o(X,2);E(()=>{s(H),Ht(()=>{})}),Y.__change=r=>x.setFilterType(r.currentTarget.value==="all"?null:r.currentTarget.value);var oe=a(Y);oe.value=oe.__value="all";var ne=o(oe);ne.value=ne.__value="image";var L=o(ne);L.value=L.__value="video";var V=o(L);V.value=V.__value="document",e(Y),e(ge);var ee=o(ge,2),R=a(ee),O=a(R);let K;O.__click=()=>x.setViewMode("grid");var we=a(O);Qt(we,{size:20}),e(O);var de=o(O,2);let me;de.__click=()=>x.setViewMode("list");var Ne=a(de);Vt(Ne,{size:20}),e(de),e(R);var ve=o(R,2);{var Pe=r=>{var f=ya(),S=a(f),B=a(S);e(S);var g=o(S,2);g.__click=ke;var C=a(g);Rt(C,{size:18}),Ve(),e(g);var Z=o(g,2);Z.__click=()=>x.deselectAll(),e(f),E(()=>$(B,`${n()??""} selected`)),v(r,f)};F(ve,r=>{n()>0&&r(Pe)})}e(ee),e(fe);var Qe=o(fe,2);{var Se=r=>{var f=ka();v(r,f)},m=r=>{var f=Je(),S=Ae(f);{var B=C=>{var Z=Ba(),N=Ae(Z);{var ce=te=>{var J=Ca();Oe(J,5,u,Ke,(he,h)=>{var ae=Ua();let z;ae.__click=()=>x.toggleFileSelection(s(h).id),ae.__keydown=M=>M.key==="Enter"&&x.toggleFileSelection(s(h).id);var Fe=a(ae);{var Xe=M=>{var T=Sa(),se=a(T);e(T),E(()=>{$e(se,"src",s(h).thumbnail_url||s(h).url),$e(se,"alt",s(h).alt_text||s(h).title)}),v(M,T)},Ge=M=>{var T=za(),se=a(T);Zt(se,()=>ye(s(h).file_type),(st,lt)=>{lt(st,{size:48,class:"text-gray-400"})}),e(T),v(M,T)};F(Fe,M=>{s(h).file_type==="image"?M(Xe):M(Ge,!1)})}var Me=o(Fe,2),De=a(Me),Ye=a(De,!0);e(De);var et=o(De,2),tt=a(et);e(et),e(Me);var at=o(Me,2);{var He=M=>{var T=Ma();v(M,T)};F(at,M=>{s(h).has_webp&&M(He)})}var nt=o(at,2);{var Re=M=>{var T=Da(),se=a(T);jt(se,{size:12}),Ve(),e(T),v(M,T)};F(nt,M=>{s(h).ai_metadata&&M(Re)})}e(ae),E((M,T,se)=>{z=xe(ae,1,"file-card svelte-14bqwv7",null,z,M),$(Ye,s(h).title||s(h).filename),$(tt,`${T??""} â€¢ ${se??""}`)},[()=>({selected:t().selectedFiles.has(s(h).id)}),()=>pe(s(h).file_size),()=>le(s(h).created_at)]),v(he,ae)}),e(J),v(te,J)},ze=te=>{var J=Aa(),he=a(J),h=o(a(he));Oe(h,5,u,Ke,(ae,z)=>{var Fe=$a();Fe.__click=()=>x.toggleFileSelection(s(z).id);let Xe;var Ge=a(Fe),Me=a(Ge);ht(Me),Me.__change=()=>x.toggleFileSelection(s(z).id),e(Ge);var De=o(Ge),Ye=a(De);{var et=Ue=>{var Ce=Ta();E(()=>{$e(Ce,"src",s(z).thumbnail_url||s(z).url),$e(Ce,"alt",s(z).alt_text)}),v(Ue,Ce)};F(Ye,Ue=>{s(z).file_type==="image"&&Ue(et)})}var tt=o(Ye,2),at=a(tt,!0);e(tt),e(De);var He=o(De),nt=a(He,!0);e(He);var Re=o(He),M=a(Re,!0);e(Re);var T=o(Re),se=a(T,!0);e(T);var st=o(T),lt=a(st);Oe(lt,5,()=>s(z).tags.slice(0,3),Ke,(Ue,Ce)=>{var Ze=Ea(),dt=a(Ze,!0);e(Ze),E(()=>$(dt,s(Ce))),v(Ue,Ze)}),e(lt),e(st),e(Fe),E((Ue,Ce,Ze,dt)=>{Xe=xe(Fe,1,"svelte-14bqwv7",null,Xe,Ue),Jt(Me,Ce),$(at,s(z).title||s(z).filename),$(nt,s(z).file_type),$(M,Ze),$(se,dt)},[()=>({selected:t().selectedFiles.has(s(z).id)}),()=>t().selectedFiles.has(s(z).id),()=>pe(s(z).file_size),()=>le(s(z).created_at)]),v(ae,Fe)}),e(h),e(he),e(J),v(te,J)};F(N,te=>{l()==="grid"?te(ce):te(ze,!1)})}var ot=o(N,2);{var zt=te=>{var J=La(),he=a(J);he.__click=()=>x.loadFiles(t().pagination.page-1);var h=o(he,2),ae=a(h);e(h);var z=o(h,2);z.__click=()=>x.loadFiles(t().pagination.page+1),e(J),E(()=>{he.disabled=t().pagination.page===1,$(ae,`Page ${t().pagination.page??""} of ${t().pagination.total_pages??""}`),z.disabled=t().pagination.page===t().pagination.total_pages}),v(te,J)};F(ot,te=>{t().pagination.total_pages>1&&te(zt)})}v(C,Z)},g=C=>{var Z=Ia(),N=a(Z);je(N,{size:64,class:"text-gray-600"});var ce=o(N,6);ce.__click=()=>ue(b,!0);var ze=a(ce);je(ze,{size:18}),Ve(),e(ce),e(Z),v(C,Z)};F(S,C=>{u().length>0?C(B):C(g,!1)},!0)}v(r,f)};F(Qe,r=>{i()?r(Se):r(m,!1)})}e(G),e(Q),e(D),E(()=>{K=xe(O,1,"view-btn svelte-14bqwv7",null,K,{active:l()==="grid"}),me=xe(de,1,"view-btn svelte-14bqwv7",null,me,{active:l()==="list"})}),Ot(k,()=>s(j),r=>ue(j,r)),Kt(Y,()=>s(H),r=>ue(H,r)),v(c,D),ft(),P()}_t(["click","input","change","keydown"]);export{Oa as component};
