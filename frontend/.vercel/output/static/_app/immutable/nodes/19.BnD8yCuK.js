import{z as Pe,p as Te,s as I,A as xe,o as Ue,f as p,a9 as Ve,d as de,c as g,e as r,N as ee,i as j,h as c,j as He,as as Ie,q as a,at as Oe,r as t,Q as te,g as e,w as C,O as ae,x,k as _e,bH as ve,bI as We,K as fe,H as ce,bJ as ue,bG as ye,bO as Ye,n as $e}from"../chunks/C_QN0JMx.js";import{a as he}from"../chunks/CCQSfPwG.js";var Be=p("<button> </button>"),Ge=p('<div class="flex items-center justify-center py-20"><div class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div></div>'),Je=p('<div class="bg-red-50 border border-red-200 rounded-xl p-6 text-center"><p class="text-red-600"> </p> <button class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Retry</button></div>'),Ke=p('<div class="bg-white rounded-xl border border-gray-200 p-12 text-center"><div class="text-4xl mb-4">ðŸ“Š</div> <h3 class="text-lg font-medium text-gray-900 mb-2">No Reports Yet</h3> <p class="text-gray-500 mb-6">Create your first custom report</p> <button class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 inline-block">Create Your First Report</button></div>'),Qe=p('<p class="text-sm text-gray-500 mb-4 line-clamp-2"> </p>'),Xe=p('<div class="flex items-center justify-between"><span>Last Run</span> <span> </span></div>'),Ze=p('<div class="flex items-center justify-between"><span>Schedule</span> <span class="capitalize"> </span></div>'),et=p('<div class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between mb-4"><div class="flex items-center gap-3"><span class="text-2xl"> </span> <div><h3 class="font-semibold text-gray-900"> </h3> <span> </span></div></div> <button class="text-gray-400 hover:text-gray-600">â‹®</button></div> <!> <div class="space-y-2 text-sm text-gray-500"><div class="flex items-center justify-between"><span>Created</span> <span> </span></div> <!> <!></div> <div class="mt-4 pt-4 border-t border-gray-100 flex gap-2"><a class="flex-1 px-3 py-2 text-sm text-center bg-blue-600 text-white rounded-lg hover:bg-blue-700">View Report</a> <button class="px-3 py-2 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">Edit</button></div></div>'),tt=p('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),at=p("<button> </button>"),rt=p("<button> </button>"),st=p('<div class="mt-4 space-y-4 pl-7"><div><label for="report-frequency" class="block text-sm font-medium text-gray-700 mb-1">Frequency</label> <select class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"><option>Daily</option><option>Weekly</option><option>Monthly</option></select></div> <div><label for="report-recipients" class="block text-sm font-medium text-gray-700 mb-1">Recipients (comma-separated)</label> <input id="report-recipients" type="text" placeholder="email@example.com, another@example.com" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/></div></div>'),lt=p('<div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"><div class="bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto"><div class="p-6 border-b border-gray-100"><div class="flex items-center justify-between"><h2 class="text-xl font-bold text-gray-900">Create Report</h2> <button class="text-gray-400 hover:text-gray-600 text-2xl">âœ•</button></div></div> <div class="p-6 space-y-6"><div class="space-y-4"><div><label class="block text-sm font-medium text-gray-700 mb-1" for="report-name">Name</label> <input type="text" id="report-name" placeholder="e.g., Weekly Revenue Report" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"/></div> <div><label class="block text-sm font-medium text-gray-700 mb-1" for="report-description">Description</label> <textarea id="report-description" placeholder="Describe this report..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"></textarea></div> <div><label class="block text-sm font-medium text-gray-700 mb-1" for="report-type">Type</label> <select id="report-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"><option>Dashboard</option><option>Table</option><option>Chart</option><option>Mixed</option></select></div></div> <div><span class="block text-sm font-medium text-gray-700 mb-2" for="report-metrics">Metrics</span> <div class="flex flex-wrap gap-2"></div></div> <div><span class="block text-sm font-medium text-gray-700 mb-2" for="report-dimensions">Dimensions</span> <div class="flex flex-wrap gap-2"></div></div> <div class="border-t border-gray-100 pt-6"><label class="flex items-center gap-3 cursor-pointer"><input type="checkbox" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500"/> <span class="font-medium text-gray-900">Schedule this report</span></label> <!></div></div> <div class="p-6 border-t border-gray-100 flex justify-end gap-3"><button class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50">Create Report</button></div></div></div>'),it=p('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="flex items-center justify-between mb-8"><div><h1 class="text-2xl font-bold text-gray-900">Reports</h1> <p class="text-sm text-gray-500 mt-1">Create and manage custom analytics reports</p></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium">Create Report</button></div> <div class="flex items-center gap-2 mb-6"></div> <!></div> <!>',1);function dt(we,ke){Te(ke,!0);let pe=I(xe([])),re=I(!0),K=I(null),E=I(!1),L=I("all"),l=I(xe({name:"",description:"",type:"dashboard",metrics:[],dimensions:[],schedule:!1,frequency:"weekly",recipients:""}));const Re=[{value:"revenue",label:"Revenue"},{value:"users",label:"Users"},{value:"sessions",label:"Sessions"},{value:"page_views",label:"Page Views"},{value:"conversions",label:"Conversions"},{value:"conversion_rate",label:"Conversion Rate"},{value:"arpu",label:"ARPU"},{value:"ltv",label:"LTV"},{value:"churn_rate",label:"Churn Rate"},{value:"retention_rate",label:"Retention Rate"}],Ce=[{value:"date",label:"Date"},{value:"channel",label:"Channel"},{value:"country",label:"Country"},{value:"device",label:"Device"},{value:"browser",label:"Browser"},{value:"page",label:"Page"},{value:"campaign",label:"Campaign"},{value:"segment",label:"Segment"}];async function se(){g(re,!0),g(K,null);try{const s=await he.getReports();g(pe,s.reports||[],!0)}catch(s){g(K,s instanceof Error?s.message:"Failed to load reports",!0)}finally{g(re,!1)}}async function De(){try{await he.createReport({name:e(l).name,description:e(l).description,type:e(l).type,config:{metrics:e(l).metrics,dimensions:e(l).dimensions},schedule:e(l).schedule?{frequency:e(l).frequency,recipients:e(l).recipients.split(",").map(s=>s.trim())}:void 0}),g(E,!1),g(l,{name:"",description:"",type:"dashboard",metrics:[],dimensions:[],schedule:!1,frequency:"weekly",recipients:""},!0),se()}catch(s){alert(s instanceof Error?s.message:"Failed to create report")}}function je(s){e(l).metrics.includes(s)?e(l).metrics=e(l).metrics.filter(d=>d!==s):e(l).metrics=[...e(l).metrics,s]}function qe(s){e(l).dimensions.includes(s)?e(l).dimensions=e(l).dimensions.filter(d=>d!==s):e(l).dimensions=[...e(l).dimensions,s]}function be(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}Ue(()=>{se()});const ge=$e(()=>e(pe).filter(s=>e(L)==="all"?!0:e(L)==="active"?s.status==="active":e(L)==="scheduled"?s.schedule:e(L)==="draft"?s.status==="draft":!0)),Me={dashboard:"ðŸ“Š",table:"ðŸ“‹",chart:"ðŸ“ˆ",mixed:"ðŸ”€"};var me=it();Ve("h61it7",s=>{Ie(()=>{Oe.title="Reports | Analytics"})});var le=de(me),ie=a(le),Se=r(a(ie),2);Se.__click=()=>g(E,!0),t(ie);var oe=r(ie,2);ee(oe,20,()=>[{value:"all",label:"All Reports"},{value:"active",label:"Active"},{value:"scheduled",label:"Scheduled"},{value:"draft",label:"Drafts"}],te,(s,d)=>{var _=Be();_.__click=()=>g(L,d.value,!0);var q=a(_,!0);t(_),C(()=>{ae(_,1,`px-4 py-2 rounded-lg text-sm font-medium transition-all
					${e(L)===d.value?"bg-gray-900 text-white":"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50"}`),x(q,d.label)}),c(s,_)}),t(oe);var Ae=r(oe,2);{var Fe=s=>{var d=Ge();c(s,d)},ze=s=>{var d=_e(),_=de(d);{var q=D=>{var f=Je(),k=a(f),M=a(k,!0);t(k);var N=r(k,2);N.__click=se,t(f),C(()=>x(M,e(K))),c(D,f)},Q=D=>{var f=_e(),k=de(f);{var M=y=>{var m=Ke(),P=r(a(m),6);P.__click=()=>g(E,!0),t(m),c(y,m)},N=y=>{var m=tt();ee(m,21,()=>e(ge),te,(P,o)=>{var S=et(),A=a(S),T=a(A),U=a(T),O=a(U,!0);t(U);var W=r(U,2),F=a(W),X=a(F,!0);t(F);var V=r(F,2),Y=a(V,!0);t(V),t(W),t(T),ce(2),t(A);var $=r(A,2);{var ne=v=>{var u=Qe(),w=a(u,!0);t(u),C(()=>x(w,e(o).description)),c(v,u)};j($,v=>{e(o).description&&v(ne)})}var B=r($,2),H=a(B),G=r(a(H),2),Z=a(G,!0);t(G),t(H);var i=r(H,2);{var b=v=>{var u=Xe(),w=r(a(u),2),z=a(w,!0);t(w),t(u),C(Ne=>x(z,Ne),[()=>be(e(o).last_run)]),c(v,u)};j(i,v=>{e(o).last_run&&v(b)})}var n=r(i,2);{var R=v=>{var u=Ze(),w=r(a(u),2),z=a(w,!0);t(w),t(u),C(()=>x(z,e(o).schedule.frequency)),c(v,u)};j(n,v=>{e(o).schedule&&v(R)})}t(B);var h=r(B,2),J=a(h);ce(2),t(h),t(S),C(v=>{x(O,Me[e(o).type]||"ðŸ“Š"),x(X,e(o).name),ae(V,1,`text-xs px-2 py-0.5 rounded capitalize
									${e(o).status==="active"?"bg-green-100 text-green-700":e(o).status==="draft"?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"}`),x(Y,e(o).status),x(Z,v),fe(J,"href",`/admin/analytics/reports/${e(o).id??""}`)},[()=>be(e(o).created_at)]),c(P,S)}),t(m),c(y,m)};j(k,y=>{e(ge).length===0?y(M):y(N,!1)},!0)}c(D,f)};j(_,D=>{e(K)?D(q):D(Q,!1)},!0)}c(s,d)};j(Ae,s=>{e(re)?s(Fe):s(ze,!1)})}t(le);var Ee=r(le,2);{var Le=s=>{var d=lt(),_=a(d),q=a(_),Q=a(q),D=r(a(Q),2);D.__click=()=>g(E,!1),t(Q),t(q);var f=r(q,2),k=a(f),M=a(k),N=r(a(M),2);ve(N),t(M);var y=r(M,2),m=r(a(y),2);We(m),fe(m,"rows",2),t(y);var P=r(y,2),o=r(a(P),2),S=a(o);S.value=S.__value="dashboard";var A=r(S);A.value=A.__value="table";var T=r(A);T.value=T.__value="chart";var U=r(T);U.value=U.__value="mixed",t(o),t(P),t(k);var O=r(k,2),W=r(a(O),2);ee(W,21,()=>Re,te,(i,b)=>{var n=at();n.__click=()=>je(e(b).value);var R=a(n,!0);t(n),C(h=>{ae(n,1,`px-3 py-1.5 rounded-lg text-sm transition-all
									${h??""}`),x(R,e(b).label)},[()=>e(l).metrics.includes(e(b).value)?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),c(i,n)}),t(W),t(O);var F=r(O,2),X=r(a(F),2);ee(X,21,()=>Ce,te,(i,b)=>{var n=rt();n.__click=()=>qe(e(b).value);var R=a(n,!0);t(n),C(h=>{ae(n,1,`px-3 py-1.5 rounded-lg text-sm transition-all
									${h??""}`),x(R,e(b).label)},[()=>e(l).dimensions.includes(e(b).value)?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),c(i,n)}),t(X),t(F);var V=r(F,2),Y=a(V),$=a(Y);ve($),ce(2),t(Y);var ne=r(Y,2);{var B=i=>{var b=st(),n=a(b),R=r(a(n),2),h=a(R);h.value=h.__value="daily";var J=r(h);J.value=J.__value="weekly";var v=r(J);v.value=v.__value="monthly",t(R),t(n);var u=r(n,2),w=r(a(u),2);ve(w),t(u),t(b),ye(R,()=>e(l).frequency,z=>e(l).frequency=z),ue(w,()=>e(l).recipients,z=>e(l).recipients=z),c(i,b)};j(ne,i=>{e(l).schedule&&i(B)})}t(V),t(f);var H=r(f,2),G=a(H);G.__click=()=>g(E,!1);var Z=r(G,2);Z.__click=De,t(H),t(_),t(d),C(()=>Z.disabled=!e(l).name||e(l).metrics.length===0),ue(N,()=>e(l).name,i=>e(l).name=i),ue(m,()=>e(l).description,i=>e(l).description=i),ye(o,()=>e(l).type,i=>e(l).type=i),Ye($,()=>e(l).schedule,i=>e(l).schedule=i),c(s,d)};j(Ee,s=>{e(E)&&s(Le)})}c(we,me),He()}Pe(["click"]);export{dt as component};
