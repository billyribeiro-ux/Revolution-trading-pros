import{z as Ye,p as Ze,s as k,A as Qe,o as $e,c as d,g as e,f as c,q as s,i as f,e as r,r as a,n as Pe,bG as ht,h as v,j as et,H as ae,w as j,x as _,k as ne,d as V,bH as Ve,N as Je,cC as St,O as Ke,b_ as We,cD as kt,Q as xt,a9 as yt,F as Xe,E as jt,as as wt,at as Dt,B as Ft,aa as Et}from"../chunks/C_QN0JMx.js";import{e as At,c as It,k as zt,l as Lt,m as Ut,n as Nt,o as Pt,f as Rt}from"../chunks/C9E1rr7k.js";const Bt=!1,ra=Object.freeze(Object.defineProperty({__proto__:null,prerender:Bt},Symbol.toStringTag,{value:"Module"}));var Ct=c('<div class="stats-grid svelte-106sp95"><div class="stat-card svelte-106sp95"><div class="stat-value svelte-106sp95"> </div> <div class="stat-label svelte-106sp95">Total</div></div> <div class="stat-card svelte-106sp95"><div class="stat-value svelte-106sp95"> </div> <div class="stat-label svelte-106sp95">Unread</div></div> <div class="stat-card svelte-106sp95"><div class="stat-value svelte-106sp95"> </div> <div class="stat-label svelte-106sp95">Starred</div></div> <div class="stat-card svelte-106sp95"><div class="stat-value svelte-106sp95"> </div> <div class="stat-label svelte-106sp95">Last 7 Days</div></div></div>'),Ot=c('<div class="bulk-actions svelte-106sp95"><span class="selection-count svelte-106sp95"> </span> <button class="btn-bulk svelte-106sp95">Mark Read</button> <button class="btn-bulk svelte-106sp95">Star</button> <button class="btn-bulk svelte-106sp95">Archive</button> <button class="btn-bulk btn-danger svelte-106sp95">Delete</button></div>'),Mt=c('<div class="loading svelte-106sp95">Loading submissions...</div>'),Tt=c('<div class="error-message svelte-106sp95"> </div>'),Ht=c('<div class="empty-state svelte-106sp95"><p>No submissions yet.</p></div>'),qt=c('<div class="field-item svelte-106sp95"><strong class="svelte-106sp95"> </strong> </div>'),Gt=c('<div class="field-more svelte-106sp95"> </div>'),Qt=c("<!> <!>",1),Vt=c('<tr><td class="svelte-106sp95"><input type="checkbox"/></td><td class="submission-id svelte-106sp95"> </td><td class="svelte-106sp95"><span> </span></td><td class="svelte-106sp95"> </td><td class="svelte-106sp95"><div class="field-data svelte-106sp95"><!></div></td><td class="svelte-106sp95"><div class="action-buttons svelte-106sp95"><select class="status-select svelte-106sp95"><option>Unread</option><option>Read</option><option>Starred</option><option>Archived</option><option>Spam</option></select> <button class="btn-icon btn-danger svelte-106sp95" title="Delete">üóëÔ∏è</button></div></td></tr>'),Jt=c('<div class="pagination svelte-106sp95"><button class="btn-page svelte-106sp95">Previous</button> <span class="page-info svelte-106sp95"> </span> <button class="btn-page svelte-106sp95">Next</button></div>'),Kt=c('<div class="table-container svelte-106sp95"><table class="submissions-table svelte-106sp95"><thead class="svelte-106sp95"><tr><th class="svelte-106sp95"><input type="checkbox"/></th><th class="svelte-106sp95">Submission ID</th><th class="svelte-106sp95">Status</th><th class="svelte-106sp95">Date</th><th class="svelte-106sp95">Fields</th><th class="svelte-106sp95">Actions</th></tr></thead><tbody class="svelte-106sp95"></tbody></table></div> <!>',1),Wt=c('<div class="submissions-container svelte-106sp95"><!> <div class="submissions-header svelte-106sp95"><div class="header-left svelte-106sp95"><select class="filter-select svelte-106sp95"><option>All Submissions</option><option>Unread</option><option>Read</option><option>Starred</option><option>Archived</option><option>Spam</option></select> <!></div> <button class="btn-export svelte-106sp95">Export CSV</button></div> <!></div>');function Xt(de,g){Ze(g,!0);let w=k(Qe([])),E=k(null),J=k(!0),x=k(""),h=k(1),A=k(1),I=k(""),l=k(Qe(new Set));$e(()=>{S()});async function S(){d(J,!0),d(x,"");try{const[t,i]=await Promise.all([At(g.formId,e(h),20,e(I)||void 0),It(g.formId)]);d(w,t.submissions,!0),d(A,Math.ceil(t.total/t.perPage),!0),d(E,i,!0)}catch(t){d(x,t instanceof Error?t.message:"Failed to load submissions",!0)}finally{d(J,!1)}}async function K(t,i){try{await Nt(g.formId,Number(t.submission_id),i),await S()}catch(u){alert(u instanceof Error?u.message:"Failed to update status")}}async function se(t){if(confirm("Delete this submission?"))try{await Pt(g.formId,Number(t.submission_id)),await S()}catch(i){alert(i instanceof Error?i.message:"Failed to delete submission")}}async function W(t){if(e(l).size!==0)try{await Lt(g.formId,Array.from(e(l)).map(Number),t),e(l).clear(),await S()}catch(i){alert(i instanceof Error?i.message:"Failed to update submissions")}}async function ce(){if(e(l).size!==0&&confirm(`Delete ${e(l).size} submissions?`))try{await Ut(g.formId,Array.from(e(l)).map(Number)),e(l).clear(),await S()}catch(t){alert(t instanceof Error?t.message:"Failed to delete submissions")}}async function ue(){try{const t=await zt(g.formId),i=new Blob([t],{type:"text/csv"}),u=window.URL.createObjectURL(i),y=document.createElement("a");y.href=u,y.download=`form-submissions-${g.formId}-${Date.now()}.csv`,y.click(),window.URL.revokeObjectURL(u)}catch(t){alert(t instanceof Error?t.message:"Failed to export submissions")}}function _e(t){e(l).has(t)?e(l).delete(t):e(l).add(t),d(l,e(l),!0)}function pe(){e(l).size===e(w).length?e(l).clear():d(l,new Set(e(w).map(t=>t.submission_id)),!0),d(l,e(l),!0)}function be(t){const i=t.target;d(I,i.value,!0),d(h,1),S()}function re(t){d(h,t,!0),S()}function o(t){switch(t){case"unread":return"badge-unread";case"read":return"badge-read";case"starred":return"badge-starred";case"archived":return"badge-archived";case"spam":return"badge-spam";default:return"badge-default"}}function p(t){return t?new Date(t).toLocaleString():"N/A"}let X=Pe(()=>e(l).size>0),fe=Pe(()=>e(w).length>0&&e(l).size===e(w).length);var Y=Wt(),D=s(Y);{var z=t=>{var i=Ct(),u=s(i),y=s(u),H=s(y,!0);a(y),ae(2),a(u);var b=r(u,2),m=s(b),C=s(m,!0);a(m),ae(2),a(b);var Z=r(b,2),le=s(Z),U=s(le,!0);a(le),ae(2),a(Z);var O=r(Z,2),q=s(O),ie=s(q,!0);a(q),ae(2),a(O),a(i),j(()=>{_(H,e(E).total_submissions),_(C,e(E).unread_count),_(U,e(E).starred_count),_(ie,e(E).recent_submissions)}),v(t,i)};f(D,t=>{e(E)&&t(z)})}var L=r(D,2),B=s(L),F=s(B);F.__change=be;var me=s(F);me.value=me.__value="";var ge=r(me);ge.value=ge.__value="unread";var he=r(ge);he.value=he.__value="read";var Se=r(he);Se.value=Se.__value="starred";var ke=r(Se);ke.value=ke.__value="archived";var Re=r(ke);Re.value=Re.__value="spam",a(F);var tt=r(F,2);{var at=t=>{var i=Ot(),u=s(i),y=s(u);a(u);var H=r(u,2);H.__click=()=>W("read");var b=r(H,2);b.__click=()=>W("starred");var m=r(b,2);m.__click=()=>W("archived");var C=r(m,2);C.__click=ce,a(i),j(()=>_(y,`${e(l).size??""} selected`)),v(t,i)};f(tt,t=>{e(X)&&t(at)})}a(B);var st=r(B,2);st.__click=ue,a(L);var rt=r(L,2);{var lt=t=>{var i=Mt();v(t,i)},it=t=>{var i=ne(),u=V(i);{var y=b=>{var m=Tt(),C=s(m,!0);a(m),j(()=>_(C,e(x))),v(b,m)},H=b=>{var m=ne(),C=V(m);{var Z=U=>{var O=Ht();v(U,O)},le=U=>{var O=Kt(),q=V(O),ie=s(q),xe=s(ie),Be=s(xe),Ce=s(Be),ye=s(Ce);Ve(ye),ye.__change=pe,a(Ce),ae(5),a(Be),a(xe);var Oe=r(xe);Je(Oe,21,()=>e(w),M=>M.id,(M,n)=>{var N=Vt();let G;var $=s(N),Q=s($);Ve(Q),Q.__change=()=>_e(e(n).submission_id),a($);var je=r($),nt=s(je,!0);a(je);var we=r(je),De=s(we),dt=s(De,!0);a(De),a(we);var Fe=r(we),ct=s(Fe,!0);a(Fe);var Ee=r(Fe),Me=s(Ee),ut=s(Me);{var _t=T=>{var ve=Qt(),oe=V(ve);Je(oe,17,()=>e(n).data.slice(0,3),xt,(ee,R)=>{var te=qt(),Ne=s(te),ft=s(Ne);a(Ne);var mt=r(Ne);a(te),j(gt=>{_(ft,`${(e(R).field?.label||e(R).field_name)??""}:`),_(mt,` ${gt??""}${e(R).value.length>50?"...":""}`)},[()=>e(R).value.substring(0,50)]),v(ee,te)});var Ue=r(oe,2);{var bt=ee=>{var R=Gt(),te=s(R);a(R),j(()=>_(te,`+${e(n).data.length-3} more`)),v(ee,R)};f(Ue,ee=>{e(n).data.length>3&&ee(bt)})}v(T,ve)};f(ut,T=>{e(n).data&&T(_t)})}a(Me),a(Ee);var Te=r(Ee),He=s(Te),P=s(He);P.__change=T=>K(e(n),T.currentTarget.value);var Ae=s(P);Ae.value=Ae.__value="unread";var Ie=r(Ae);Ie.value=Ie.__value="read";var ze=r(Ie);ze.value=ze.__value="starred";var Le=r(ze);Le.value=Le.__value="archived";var qe=r(Le);qe.value=qe.__value="spam",a(P);var Ge;St(P);var pt=r(P,2);pt.__click=()=>se(e(n)),a(He),a(Te),a(N),j((T,ve,oe,Ue)=>{G=Ke(N,1,"svelte-106sp95",null,G,T),We(Q,ve),_(nt,e(n).submission_id),Ke(De,1,`badge ${oe??""}`,"svelte-106sp95"),_(dt,e(n).status),_(ct,Ue),Ge!==(Ge=e(n).status)&&(P.value=(P.__value=e(n).status)??"",kt(P,e(n).status))},[()=>({selected:e(l).has(e(n).submission_id)}),()=>e(l).has(e(n).submission_id),()=>o(e(n).status),()=>p(e(n).created_at)]),v(M,N)}),a(Oe),a(ie),a(q);var vt=r(q,2);{var ot=M=>{var n=Jt(),N=s(n);N.__click=()=>re(e(h)-1);var G=r(N,2),$=s(G);a(G);var Q=r(G,2);Q.__click=()=>re(e(h)+1),a(n),j(()=>{N.disabled=e(h)===1,_($,`Page ${e(h)??""} of ${e(A)??""}`),Q.disabled=e(h)===e(A)}),v(M,n)};f(vt,M=>{e(A)>1&&M(ot)})}j(()=>We(ye,e(fe))),v(U,O)};f(C,U=>{e(w).length===0?U(Z):U(le,!1)},!0)}v(b,m)};f(u,b=>{e(x)?b(y):b(H,!1)},!0)}v(t,i)};f(rt,t=>{e(J)?t(lt):t(it,!1)})}a(Y),ht(F,()=>e(I),t=>d(I,t)),v(de,Y),et()}Ye(["change","click"]);var Yt=c('<p class="page-description svelte-1o5djje"> </p>'),Zt=c('<button class="btn-edit svelte-1o5djje">Edit Form</button>'),$t=c('<div class="loading-state svelte-1o5djje"><p>Loading...</p></div>'),ea=c('<div class="error-state svelte-1o5djje"><p> </p></div>'),ta=c('<div class="submissions-page svelte-1o5djje"><div class="page-header svelte-1o5djje"><div><button class="btn-back svelte-1o5djje">‚Üê Back to Forms</button> <h1 class="svelte-1o5djje">Form Submissions</h1> <!></div> <!></div> <!></div>');function la(de,g){Ze(g,!0);const w=()=>Ft(Et,"$page",E),[E,J]=jt();let x=k(null),h=k(!0),A=k(""),I=Pe(()=>parseInt(w().params.id));$e(async()=>{try{d(x,await Rt(e(I)),!0)}catch(o){d(A,o instanceof Error?o.message:"Failed to load form",!0)}finally{d(h,!1)}});var l=ta();yt("1o5djje",o=>{wt(()=>{Dt.title="Form Submissions - Admin Dashboard"})});var S=s(l),K=s(S),se=s(K);se.__click=()=>Xe("/admin/forms");var W=r(se,4);{var ce=o=>{var p=Yt(),X=s(p,!0);a(p),j(()=>_(X,e(x).title)),v(o,p)};f(W,o=>{e(x)&&o(ce)})}a(K);var ue=r(K,2);{var _e=o=>{var p=Zt();p.__click=()=>Xe(`/admin/forms/${e(I)}/edit`),v(o,p)};f(ue,o=>{e(x)&&o(_e)})}a(S);var pe=r(S,2);{var be=o=>{var p=$t();v(o,p)},re=o=>{var p=ne(),X=V(p);{var fe=D=>{var z=ea(),L=s(z),B=s(L,!0);a(L),a(z),j(()=>_(B,e(A))),v(D,z)},Y=D=>{var z=ne(),L=V(z);{var B=F=>{Xt(F,{get formId(){return e(I)}})};f(L,F=>{e(x)&&F(B)},!0)}v(D,z)};f(X,D=>{e(A)?D(fe):D(Y,!1)},!0)}v(o,p)};f(pe,o=>{e(h)?o(be):o(re,!1)})}a(l),v(de,l),et(),J()}Ye(["click"]);export{la as component,ra as universal};
