import{z as Ja,p as Ka,s as T,A as ua,o as Ga,f as c,a9 as Oa,q as t,R as Wa,bM as pa,aB as ga,U as O,ao as Xa,i as D,w as E,bJ as Ya,g as s,h as i,j as Za,c as d,as as at,e as l,n as fa,x as o,at as tt,r as a,H as N,bH as et,k as ha,d as ma,N as st,bU as lt,bV as rt,_ as vt,K as ya,Q as it}from"../chunks/C_QN0JMx.js";import{c as xa}from"../chunks/L2eW2QSs.js";var dt=c('<div class="loading-state svelte-30abl5"><div class="spinner svelte-30abl5"></div> <p>Loading tags...</p></div>'),nt=c('<div class="error-state svelte-30abl5"><p> </p> <button>Try Again</button></div>'),ot=c('<div class="empty-state svelte-30abl5"><!> <h3 class="svelte-30abl5">No tags found</h3> <p class="svelte-30abl5">Create your first tag to label your contacts</p> <a href="/admin/crm/tags/new" class="btn-primary svelte-30abl5"><!> Create Tag</a></div>'),ct=c('<p class="tag-description svelte-30abl5"> </p>'),_t=c('<div class="tag-card svelte-30abl5"><div class="tag-header svelte-30abl5"><div class="tag-color svelte-30abl5"></div> <div class="tag-info svelte-30abl5"><h3 class="tag-title svelte-30abl5"> </h3> <!></div></div> <div class="tag-stats svelte-30abl5"><div class="tag-stat svelte-30abl5"><!> <span> </span></div> <div class="tag-stat svelte-30abl5"><span class="tag-date svelte-30abl5"> </span></div></div> <div class="tag-actions svelte-30abl5"><a class="btn-icon svelte-30abl5" title="View Contacts"><!></a> <a class="btn-icon svelte-30abl5" title="Edit"><!></a> <button class="btn-icon danger svelte-30abl5" title="Delete"><!></button></div></div>'),bt=c('<div class="tags-grid svelte-30abl5"></div>'),ut=c('<div class="tags-page svelte-30abl5"><div class="page-header svelte-30abl5"><div><h1 class="svelte-30abl5">Contact Tags</h1> <p class="page-description svelte-30abl5">Label and categorize your contacts with tags</p></div> <div class="header-actions svelte-30abl5"><button class="btn-refresh svelte-30abl5"><!></button> <a href="/admin/crm/tags/new" class="btn-primary svelte-30abl5"><!> New Tag</a></div></div> <div class="stats-grid svelte-30abl5"><div class="stat-card svelte-30abl5"><div class="stat-icon blue svelte-30abl5"><!></div> <div class="stat-content svelte-30abl5"><span class="stat-value svelte-30abl5"> </span> <span class="stat-label svelte-30abl5">Total Tags</span></div></div> <div class="stat-card svelte-30abl5"><div class="stat-icon purple svelte-30abl5"><!></div> <div class="stat-content svelte-30abl5"><span class="stat-value svelte-30abl5"> </span> <span class="stat-label svelte-30abl5">Tagged Contacts</span></div></div></div> <div class="filters-bar svelte-30abl5"><div class="search-box svelte-30abl5"><!> <input type="text" placeholder="Search tags..." class="svelte-30abl5"/></div></div> <!></div>');function ft(Ca,Ta){Ka(Ta,!0);let w=T(ua([])),p=T(!0),g=T(""),f=T(""),S=T(ua({total:0,totalContacts:0}));async function z(){d(p,!0),d(g,"");try{const e=await xa.getContactTags({search:s(f)||void 0});d(w,e.data||[],!0),d(S,{total:s(w).length,totalContacts:s(w).reduce((v,Q)=>v+Q.contacts_count,0)},!0)}catch(e){d(g,e instanceof Error?e.message:"Failed to load tags",!0)}finally{d(p,!1)}}async function wa(e){if(confirm("Are you sure you want to delete this tag? It will be removed from all contacts."))try{await xa.deleteContactTag(e),await z()}catch(v){d(g,v instanceof Error?v.message:"Failed to delete tag",!0)}}function F(e){return e.toLocaleString()}function za(e){return new Date(e).toLocaleDateString()}let W=fa(()=>s(w).filter(e=>!s(f)||e.title.toLowerCase().includes(s(f).toLowerCase())));Ga(()=>{z()});var M=ut();Oa("30abl5",e=>{at(()=>{tt.title="Contact Tags - FluentCRM Pro"})});var P=t(M),X=l(t(P),2),h=t(X);h.__click=()=>z();var ka=t(h);{let e=fa(()=>s(p)?"spinning":"");Wa(ka,{size:18,get class(){return s(e)}})}a(h);var Y=l(h,2),La=t(Y);pa(La,{size:18}),N(),a(Y),a(X),a(P);var R=l(P,2),U=t(R),$=t(U),Aa=t($);ga(Aa,{size:24}),a($);var Z=l($,2),aa=t(Z),Da=t(aa,!0);a(aa),N(2),a(Z),a(U);var ta=l(U,2),H=t(ta),Ea=t(H);O(Ea,{size:24}),a(H);var ea=l(H,2),sa=t(ea),Na=t(sa,!0);a(sa),N(2),a(ea),a(ta),a(R);var I=l(R,2),la=t(I),ra=t(la);Xa(ra,{size:18});var va=l(ra,2);et(va),a(la),a(I);var Sa=l(I,2);{var Fa=e=>{var v=dt();i(e,v)},Ma=e=>{var v=ha(),Q=ma(v);{var Pa=_=>{var b=nt(),m=t(b),V=t(m,!0);a(m);var j=l(m,2);j.__click=()=>z(),a(b),E(()=>o(V,s(g))),i(_,b)},Ra=_=>{var b=ha(),m=ma(b);{var V=u=>{var n=ot(),k=t(n);ga(k,{size:48});var r=l(k,6),y=t(r);pa(y,{size:18}),N(),a(r),a(n),i(u,n)},j=u=>{var n=bt();st(n,21,()=>s(W),it,(k,r)=>{var y=_t(),q=t(y),ia=t(q),da=l(ia,2),B=t(da),Ua=t(B,!0);a(B);var $a=l(B,2);{var Ha=x=>{var C=ct(),Ba=t(C,!0);a(C),E(()=>o(Ba,s(r).description)),i(x,C)};D($a,x=>{s(r).description&&x(Ha)})}a(da),a(q);var J=l(q,2),K=t(J),na=t(K);O(na,{size:16});var oa=l(na,2),Ia=t(oa);a(oa),a(K);var ca=l(K,2),_a=t(ca),Qa=t(_a);a(_a),a(ca),a(J);var ba=l(J,2),L=t(ba),Va=t(L);O(Va,{size:16}),a(L);var A=l(L,2),ja=t(A);lt(ja,{size:16}),a(A);var G=l(A,2);G.__click=()=>wa(s(r).id);var qa=t(G);rt(qa,{size:16}),a(G),a(ba),a(y),E((x,C)=>{vt(ia,`background-color: ${(s(r).color||"#6366f1")??""}`),o(Ua,s(r).title),o(Ia,`${x??""} contacts`),o(Qa,`Created ${C??""}`),ya(L,"href",`/admin/crm/tags/${s(r).id??""}`),ya(A,"href",`/admin/crm/tags/${s(r).id??""}/edit`)},[()=>F(s(r).contacts_count),()=>za(s(r).created_at)]),i(k,y)}),a(n),i(u,n)};D(m,u=>{s(W).length===0?u(V):u(j,!1)},!0)}i(_,b)};D(Q,_=>{s(g)?_(Pa):_(Ra,!1)},!0)}i(e,v)};D(Sa,e=>{s(p)?e(Fa):e(Ma,!1)})}a(M),E((e,v)=>{h.disabled=s(p),o(Da,e),o(Na,v)},[()=>F(s(S).total),()=>F(s(S).totalContacts)]),Ya(va,()=>s(f),e=>d(f,e)),i(Ca,M),Za()}Ja(["click"]);export{ft as component};
