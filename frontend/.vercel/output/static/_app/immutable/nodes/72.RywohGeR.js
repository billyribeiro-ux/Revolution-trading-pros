import{p as _t,B as mt,o as ut,a3 as xt,k as be,a9 as ft,d as R,i as L,h as d,j as gt,E as bt,aa as yt,aN as ht,c as re,aP as ye,g as a,at as wt,f as u,q as t,F as he,aM as $t,H as k,e as s,r as e,v as ie,w as F,x as p,bL as kt,J as Pt,O as oe,bz as jt,aR as Tt,by as Ct,bu as Ft,_ as K,N as we,Q as $e}from"../chunks/C_QN0JMx.js";import{a as zt,B as ke,C as E}from"../chunks/ButKoJq5.js";import{B as Ee}from"../chunks/COvxyfnH.js";import"../chunks/l0sNRNKZ.js";import"../chunks/Div_5PT3.js";import{popupsApi as Ie}from"../chunks/Dzv9ULNB.js";var At=u('<div class="flex items-center justify-center h-96"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading analytics...</p></div></div>'),Bt=u("<!> Back to Popups",1),Mt=u('<div class="flex items-start justify-between"><div><p class="text-sm font-medium text-gray-600 mb-1">Total Views</p> <p class="text-3xl font-bold text-gray-900"> </p> <div class="flex items-center mt-2"><span class="text-sm mr-1"> </span> <span> </span> <span class="text-sm text-gray-500 ml-1">vs last period</span></div></div> <div class="p-3 bg-blue-50 rounded-lg"><!></div></div>'),Nt=u('<div class="flex items-start justify-between"><div><p class="text-sm font-medium text-gray-600 mb-1">Conversions</p> <p class="text-3xl font-bold text-gray-900"> </p> <div class="flex items-center mt-2"><span class="text-sm mr-1"> </span> <span> </span> <span class="text-sm text-gray-500 ml-1">vs last period</span></div></div> <div class="p-3 bg-green-50 rounded-lg"><!></div></div>'),Lt=u('<div class="flex items-start justify-between"><div><p class="text-sm font-medium text-gray-600 mb-1">Conversion Rate</p> <p class="text-3xl font-bold text-gray-900"> </p> <div class="mt-2"><span class="text-sm text-gray-500">Industry avg: 2-5%</span></div></div> <div class="p-3 bg-purple-50 rounded-lg"><!></div></div>'),Rt=u('<div class="flex items-start justify-between"><div><p class="text-sm font-medium text-gray-600 mb-1">Performance</p> <p> </p> <div class="mt-2"><span class="text-sm text-gray-500">Based on conversion rate</span></div></div> <div class="p-3 bg-yellow-50 rounded-lg"><!></div></div>'),Et=u('<h2 class="text-xl font-semibold mb-4">Performance Over Time</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="border-l-4 border-blue-500 pl-4"><h3 class="text-sm font-medium text-gray-600 mb-2">Today</h3> <div class="space-y-1"><p class="text-sm"><span class="font-semibold"> </span> views</p> <p class="text-sm"><span class="font-semibold text-green-600"> </span> conversions</p> <p class="text-sm"><span class="font-semibold text-purple-600"> </span> rate</p></div></div> <div class="border-l-4 border-green-500 pl-4"><h3 class="text-sm font-medium text-gray-600 mb-2">This Week</h3> <div class="space-y-1"><p class="text-sm"><span class="font-semibold"> </span> views</p> <p class="text-sm"><span class="font-semibold text-green-600"> </span> conversions</p> <p class="text-sm"><span class="font-semibold text-purple-600"> </span> rate</p></div></div> <div class="border-l-4 border-purple-500 pl-4"><h3 class="text-sm font-medium text-gray-600 mb-2">This Month</h3> <div class="space-y-1"><p class="text-sm"><span class="font-semibold"> </span> views</p> <p class="text-sm"><span class="font-semibold text-green-600"> </span> conversions</p> <p class="text-sm"><span class="font-semibold text-purple-600"> </span> rate</p></div></div></div>',1),It=u('<h2 class="text-xl font-semibold mb-4 flex items-center gap-2"><!> Device Breakdown</h2> <div class="space-y-4"><div><div class="flex justify-between items-center mb-1"><span class="text-sm font-medium text-gray-700">üñ•Ô∏è Desktop</span> <span class="text-sm font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-blue-600 h-2 rounded-full"></div></div> <p class="text-xs text-gray-500 mt-1"> </p></div> <div><div class="flex justify-between items-center mb-1"><span class="text-sm font-medium text-gray-700">üì± Tablet</span> <span class="text-sm font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-green-600 h-2 rounded-full"></div></div> <p class="text-xs text-gray-500 mt-1"> </p></div> <div><div class="flex justify-between items-center mb-1"><span class="text-sm font-medium text-gray-700">üì± Mobile</span> <span class="text-sm font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-purple-600 h-2 rounded-full"></div></div> <p class="text-xs text-gray-500 mt-1"> </p></div></div>',1),qt=u('<span class="mr-1"></span>'),Dt=u('<div><div class="flex items-start justify-between mb-1"><p class="text-sm font-medium text-gray-900 flex-1"><!> </p> <!></div> <div class="flex gap-4 text-xs text-gray-600"><span> </span> <span class="text-green-600"> </span></div></div>'),Ot=u('<div class="space-y-3"></div>'),St=u('<p class="text-sm text-gray-500">No page data available yet</p>'),Ut=u('<h2 class="text-xl font-semibold mb-4">Top Performing Pages</h2> <!>',1),Vt=u('<div class="flex items-center gap-2"><span class="text-xs text-gray-600 w-20"> </span> <div class="flex-1 bg-gray-200 rounded-full h-4"><div class="bg-blue-600 h-4 rounded-full flex items-center justify-end pr-2"><span class="text-xs text-white font-semibold"> </span></div></div></div>'),Wt=u('<div class="space-y-2"></div>'),Yt=u('<p class="text-sm text-gray-500">No timeline data available yet</p>'),Ht=u('<h2 class="text-xl font-semibold mb-4">Views Timeline (Last 30 Days)</h2> <!>',1),Jt=u('<span class="text-xs text-white font-semibold"> </span>'),Qt=u('<div class="flex items-center gap-2"><span class="text-xs text-gray-600 w-20"> </span> <div class="flex-1 bg-gray-200 rounded-full h-4"><div class="bg-green-600 h-4 rounded-full flex items-center justify-end pr-2"><!></div></div></div>'),Gt=u('<div class="space-y-2"></div>'),Kt=u('<p class="text-sm text-gray-500">No conversion data available yet</p>'),Xt=u('<h2 class="text-xl font-semibold mb-4">Conversions Timeline (Last 30 Days)</h2> <!>',1),Zt=u('<div class="bg-red-50 border border-red-200 rounded-md p-3"><p class="text-sm text-red-800"><strong>Low Conversion Rate:</strong> Your conversion rate is below 1%. Consider:</p> <ul class="text-sm text-red-700 ml-5 mt-1 list-disc"><li>Testing a more compelling headline</li> <li>Simplifying your call-to-action</li> <li>Adjusting trigger timing</li></ul></div>'),ea=u('<div class="bg-green-50 border border-green-200 rounded-md p-3"><p class="text-sm text-green-800"><strong>Excellent Performance!</strong> </p></div>'),ta=u(`<div class="bg-blue-50 border border-blue-200 rounded-md p-3"><p class="text-sm text-blue-800"><strong>Mobile-First Audience:</strong> Over 50% of your views come from mobile devices.
							Ensure your popup is mobile-optimized.</p></div>`),aa=u(`<div class="bg-yellow-50 border border-yellow-200 rounded-md p-3"><p class="text-sm text-yellow-800"><strong>Limited Data:</strong> With fewer than 100 views, continue monitoring before making
							major changes.</p></div>`),sa=u('<h2 class="text-xl font-semibold mb-4">üí° Insights & Recommendations</h2> <div class="space-y-3"><!> <!> <!></div>',1),ra=u('<div class="max-w-7xl mx-auto"><div class="mb-6"><!> <div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold text-gray-900"> </h1> <div class="flex items-center gap-3 mt-2"><!> <span class="text-sm text-gray-600"> </span></div></div> <div class="flex gap-2"><!></div></div></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"><!> <!> <!> <!></div> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"><!> <!></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!></div>'),ia=u('<div class="text-center py-12"><p class="text-gray-600">Failed to load analytics data</p> <!></div>');function ca(qe,De){_t(De,!1);const Oe=()=>mt(yt,"$page",Se),[Se,Ue]=bt(),ve=parseInt(Oe().params.id);let B=ye(null),r=ye(null),le=ye(!0);ut(async()=>{await Ve()});async function Ve(){try{re(le,!0);const g=await Ie.get(ve);re(B,g.popup),re(r,await Ie.getAnalytics(ve))}catch{zt({type:"error",message:"Failed to load analytics"})}finally{re(le,!1)}}function We(g){switch(g){case"published":return"success";case"draft":return"warning";case"paused":return"info";default:return"default"}}function Pe(g){return g==="up"?"üìà":g==="down"?"üìâ":"‚û°Ô∏è"}function z(g){return g.toLocaleString()}function I(g){return g.toFixed(2)+"%"}function Ye(g,S=50){return g.length<=S?g:g.substring(0,S)+"..."}xt();var je=be();ft("u01cq3",g=>{ht(()=>{wt.title=`Analytics - ${(a(B)?.name||"Popup")??""} | Revolution Admin`})});var He=R(je);{var Je=g=>{var S=At();d(g,S)},Qe=g=>{var S=be(),Ge=R(S);{var Ke=W=>{var U=ra(),J=t(U),X=t(J);ke(X,{variant:"ghost",onclick:()=>he("/admin/popups"),class:"mb-4",children:(c,A)=>{var o=Bt(),n=R(o);$t(n,{size:20,class:"mr-2"}),k(),d(c,o)},$$slots:{default:!0}});var ne=s(X,2),Q=t(ne),de=t(Q),Ze=t(de,!0);e(de);var Te=s(de,2),Ce=t(Te);{let c=kt(()=>We(a(B).status));Ee(Ce,{get variant(){return a(c)},children:(A,o)=>{k();var n=ie();F(()=>p(n,a(B).status)),d(A,n)},$$slots:{default:!0}})}var Fe=s(Ce,2),et=t(Fe,!0);e(Fe),e(Te),e(Q);var ze=s(Q,2),tt=t(ze);ke(tt,{variant:"outline",onclick:()=>he(`/admin/popups/${ve}/edit`),children:(c,A)=>{k();var o=ie("Edit Popup");d(c,o)},$$slots:{default:!0}}),e(ze),e(ne),e(J);var pe=s(J,2),Ae=t(pe);E(Ae,{children:(c,A)=>{var o=Mt(),n=t(o),_=s(t(n),2),w=t(_,!0);e(_);var i=s(_,2),v=t(i),P=t(v,!0);e(v);var m=s(v,2),x=t(m,!0);e(m),k(2),e(i),e(n);var l=s(n,2),f=t(l);Pt(f,{size:24,class:"text-blue-600"}),e(l),e(o),F(($,b,y)=>{p(w,$),p(P,b),oe(m,1,`text-sm font-medium ${a(r).views.trend==="up"?"text-green-600":a(r).views.trend==="down"?"text-red-600":"text-gray-600"}`),p(x,y)},[()=>z(a(r).views.total),()=>Pe(a(r).views.trend),()=>I(a(r).views.trend_percentage)]),d(c,o)},$$slots:{default:!0}});var Be=s(Ae,2);E(Be,{children:(c,A)=>{var o=Nt(),n=t(o),_=s(t(n),2),w=t(_,!0);e(_);var i=s(_,2),v=t(i),P=t(v,!0);e(v);var m=s(v,2),x=t(m,!0);e(m),k(2),e(i),e(n);var l=s(n,2),f=t(l);jt(f,{size:24,class:"text-green-600"}),e(l),e(o),F(($,b,y)=>{p(w,$),p(P,b),oe(m,1,`text-sm font-medium ${a(r).conversions.trend==="up"?"text-green-600":a(r).conversions.trend==="down"?"text-red-600":"text-gray-600"}`),p(x,y)},[()=>z(a(r).conversions.total),()=>Pe(a(r).conversions.trend),()=>I(a(r).conversions.trend_percentage)]),d(c,o)},$$slots:{default:!0}});var Me=s(Be,2);E(Me,{children:(c,A)=>{var o=Lt(),n=t(o),_=s(t(n),2),w=t(_,!0);e(_),k(2),e(n);var i=s(n,2),v=t(i);Tt(v,{size:24,class:"text-purple-600"}),e(i),e(o),F(P=>p(w,P),[()=>I(a(r).conversion_rate.overall)]),d(c,o)},$$slots:{default:!0}});var at=s(Me,2);E(at,{children:(c,A)=>{var o=Rt(),n=t(o),_=s(t(n),2),w=t(_,!0);e(_),k(2),e(n);var i=s(n,2),v=t(i);Ct(v,{size:24,class:"text-yellow-600"}),e(i),e(o),F(()=>{oe(_,1,`text-2xl font-bold capitalize ${a(B).performance_status==="excellent"?"text-green-600":a(B).performance_status==="good"?"text-blue-600":a(B).performance_status==="average"?"text-yellow-600":"text-red-600"}`),p(w,a(B).performance_status||"N/A")}),d(c,o)},$$slots:{default:!0}}),e(pe);var Ne=s(pe,2);E(Ne,{class:"mb-8",children:(c,A)=>{var o=Et(),n=s(R(o),2),_=t(n),w=s(t(_),2),i=t(w),v=t(i),P=t(v,!0);e(v),k(),e(i);var m=s(i,2),x=t(m),l=t(x,!0);e(x),k(),e(m);var f=s(m,2),$=t(f),b=t($,!0);e($),k(),e(f),e(w),e(_);var y=s(_,2),j=s(t(y),2),h=t(j),T=t(h),M=t(T,!0);e(T),k(),e(h);var q=s(h,2),V=t(q),Y=t(V,!0);e(V),k(),e(q);var C=s(q,2),N=t(C),D=t(N,!0);e(N),k(),e(C),e(j),e(y);var O=s(y,2),Z=s(t(O),2),H=t(Z),ee=t(H),me=t(ee,!0);e(ee),k(),e(H);var G=s(H,2),te=t(G),ue=t(te,!0);e(te),k(),e(G);var ae=s(G,2),se=t(ae),xe=t(se,!0);e(se),k(),e(ae),e(Z),e(O),e(n),F((fe,ge,ot,vt,lt,nt,dt,pt,ct)=>{p(P,fe),p(l,ge),p(b,ot),p(M,vt),p(Y,lt),p(D,nt),p(me,dt),p(ue,pt),p(xe,ct)},[()=>z(a(r).views.today),()=>z(a(r).conversions.today),()=>I(a(r).conversion_rate.today),()=>z(a(r).views.this_week),()=>z(a(r).conversions.this_week),()=>I(a(r).conversion_rate.this_week),()=>z(a(r).views.this_month),()=>z(a(r).conversions.this_month),()=>I(a(r).conversion_rate.this_month)]),d(c,o)},$$slots:{default:!0}});var ce=s(Ne,2),Le=t(ce);E(Le,{children:(c,A)=>{var o=It(),n=R(o),_=t(n);Ft(_,{size:24}),k(),e(n);var w=s(n,2),i=t(w),v=t(i),P=s(t(v),2),m=t(P,!0);e(P),e(v);var x=s(v,2),l=t(x);e(x);var f=s(x,2),$=t(f);e(f),e(i);var b=s(i,2),y=t(b),j=s(t(y),2),h=t(j,!0);e(j),e(y);var T=s(y,2),M=t(T);e(T);var q=s(T,2),V=t(q);e(q),e(b);var Y=s(b,2),C=t(Y),N=s(t(C),2),D=t(N,!0);e(N),e(C);var O=s(C,2),Z=t(O);e(O);var H=s(O,2),ee=t(H);e(H),e(Y),e(w),F((me,G,te,ue,ae,se,xe,fe,ge)=>{p(m,me),K(l,`width: ${G??""}%`),p($,`${te??""}% of
							total views`),p(h,ue),K(M,`width: ${ae??""}%`),p(V,`${se??""}% of
							total views`),p(D,xe),K(Z,`width: ${fe??""}%`),p(ee,`${ge??""}% of
							total views`)},[()=>z(a(r).device_breakdown.desktop),()=>(a(r).device_breakdown.desktop/a(r).views.total*100).toFixed(1),()=>(a(r).device_breakdown.desktop/a(r).views.total*100).toFixed(1),()=>z(a(r).device_breakdown.tablet),()=>(a(r).device_breakdown.tablet/a(r).views.total*100).toFixed(1),()=>(a(r).device_breakdown.tablet/a(r).views.total*100).toFixed(1),()=>z(a(r).device_breakdown.mobile),()=>(a(r).device_breakdown.mobile/a(r).views.total*100).toFixed(1),()=>(a(r).device_breakdown.mobile/a(r).views.total*100).toFixed(1)]),d(c,o)},$$slots:{default:!0}});var st=s(Le,2);E(st,{children:(c,A)=>{var o=Ut(),n=s(R(o),2);{var _=i=>{var v=Ot();we(v,5,()=>a(r).top_pages,$e,(P,m,x)=>{var l=Dt();oe(l,1,`border-l-4 ${x===0?"border-yellow-500":x===1?"border-gray-400":x===2?"border-orange-600":"border-gray-300"} pl-3`);var f=t(l),$=t(f),b=t($);{var y=C=>{var N=qt();N.textContent=x===0?"ü•á":x===1?"ü•à":"ü•â",d(C,N)};L(b,C=>{x<3&&C(y)})}var j=s(b);e($);var h=s($,2);Ee(h,{variant:"success",size:"sm",children:(C,N)=>{k();var D=ie();F(O=>p(D,O),[()=>I(a(m).conversion_rate)]),d(C,D)},$$slots:{default:!0}}),e(f);var T=s(f,2),M=t(T),q=t(M);e(M);var V=s(M,2),Y=t(V);e(V),e(T),e(l),F((C,N,D)=>{p(j,` ${C??""}`),p(q,`${N??""} views`),p(Y,`${D??""} conversions`)},[()=>Ye(a(m).url),()=>z(a(m).views),()=>z(a(m).conversions)]),d(P,l)}),e(v),d(i,v)},w=i=>{var v=St();d(i,v)};L(n,i=>{a(r).top_pages&&a(r).top_pages.length>0?i(_):i(w,!1)})}d(c,o)},$$slots:{default:!0}}),e(ce);var _e=s(ce,2),Re=t(_e);E(Re,{children:(c,A)=>{var o=Ht(),n=s(R(o),2);{var _=i=>{var v=Wt();we(v,5,()=>a(r).timeline.views.slice(-15),$e,(P,m)=>{var x=Vt(),l=t(x),f=t(l,!0);e(l);var $=s(l,2),b=t($),y=t(b),j=t(y,!0);e(y),e(b),e($),e(x),F(h=>{p(f,a(m).date),K(b,`width: ${h??""}%`),p(j,a(m).count)},[()=>Math.max(a(m).count/Math.max(...a(r).timeline.views.map(h=>h.count))*100,5)]),d(P,x)}),e(v),d(i,v)},w=i=>{var v=Yt();d(i,v)};L(n,i=>{a(r).timeline.views&&a(r).timeline.views.length>0?i(_):i(w,!1)})}d(c,o)},$$slots:{default:!0}});var rt=s(Re,2);E(rt,{children:(c,A)=>{var o=Xt(),n=s(R(o),2);{var _=i=>{var v=Gt();we(v,5,()=>a(r).timeline.conversions.slice(-15),$e,(P,m)=>{var x=Qt(),l=t(x),f=t(l,!0);e(l);var $=s(l,2),b=t($),y=t(b);{var j=h=>{var T=Jt(),M=t(T,!0);e(T),F(()=>p(M,a(m).count)),d(h,T)};L(y,h=>{a(m).count>0&&h(j)})}e(b),e($),e(x),F(h=>{p(f,a(m).date),K(b,`width: ${h??""}%`)},[()=>Math.max(a(m).count/Math.max(...a(r).timeline.conversions.map(h=>h.count),1)*100,5)]),d(P,x)}),e(v),d(i,v)},w=i=>{var v=Kt();d(i,v)};L(n,i=>{a(r).timeline.conversions&&a(r).timeline.conversions.length>0?i(_):i(w,!1)})}d(c,o)},$$slots:{default:!0}}),e(_e);var it=s(_e,2);E(it,{class:"mt-8",children:(c,A)=>{var o=sa(),n=s(R(o),2),_=t(n);{var w=l=>{var f=Zt();d(l,f)},i=l=>{var f=be(),$=R(f);{var b=y=>{var j=ea(),h=t(j),T=s(t(h));e(h),e(j),F(M=>p(T,` Your conversion rate of ${M??""} is above industry average.`),[()=>I(a(r).conversion_rate.overall)]),d(y,j)};L($,y=>{a(r).conversion_rate.overall>5&&y(b)},!0)}d(l,f)};L(_,l=>{a(r).conversion_rate.overall<1?l(w):l(i,!1)})}var v=s(_,2);{var P=l=>{var f=ta();d(l,f)};L(v,l=>{a(r).device_breakdown.mobile>a(r).views.total*.5&&l(P)})}var m=s(v,2);{var x=l=>{var f=aa();d(l,f)};L(m,l=>{a(r).views.total<100&&l(x)})}e(n),d(c,o)},$$slots:{default:!0}}),e(U),F(c=>{p(Ze,a(B).name),p(et,c)},[()=>a(B).type.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase())]),d(W,U)},Xe=W=>{var U=ia(),J=s(t(U),2);ke(J,{class:"mt-4",onclick:()=>he("/admin/popups"),children:(X,ne)=>{k();var Q=ie("Back to Popups");d(X,Q)},$$slots:{default:!0}}),e(U),d(W,U)};L(Ge,W=>{a(B)&&a(r)?W(Ke):W(Xe,!1)},!0)}d(g,S)};L(He,g=>{a(le)?g(Je):g(Qe,!1)})}d(qe,je),gt(),Ue()}export{ca as component};
