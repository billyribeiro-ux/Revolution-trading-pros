import{z as ja,p as Fa,s as U,A as Ja,o as Ka,f as g,bM as va,c as u,q as t,e as i,i as w,w as I,h as c,j as Qa,g as a,O as L,K as h,x as v,d9 as Ua,H as y,r as e,k as Wa,d as Za,n as Ba,S as Ga,N as Xa,bU as Ya,bZ as ae,aH as ee,bV as te,J as se,c5 as re,Q as ie}from"../chunks/C_QN0JMx.js";import{getAllPopups as le,togglePopupStatus as ve,duplicatePopup as de,deletePopup as ne}from"../chunks/Dzv9ULNB.js";var oe=g('<div class="loading-state svelte-1rdz98g"><div class="spinner svelte-1rdz98g"></div> <p>Loading popups...</p></div>'),ce=g('<div class="empty-state svelte-1rdz98g"><!> <h3 class="svelte-1rdz98g">No popups found</h3> <p class="svelte-1rdz98g">Create your first popup to get started</p> <a href="/admin/popups/create" class="btn-primary svelte-1rdz98g"><!> <span>Create Popup</span></a></div>'),pe=g('<p class="popup-title svelte-1rdz98g"> </p>'),ue=g('<div class="rule-tag svelte-1rdz98g"> </div>'),ge=g('<div class="popup-card svelte-1rdz98g"><div class="card-header svelte-1rdz98g"><div> </div> <button class="icon-btn svelte-1rdz98g"><!></button></div> <div class="card-body svelte-1rdz98g"><h3 class="popup-name svelte-1rdz98g"> </h3> <!> <div class="popup-stats svelte-1rdz98g"><div class="stat svelte-1rdz98g"><span class="stat-label svelte-1rdz98g">Impressions</span> <span class="stat-value svelte-1rdz98g"> </span></div> <div class="stat svelte-1rdz98g"><span class="stat-label svelte-1rdz98g">Conversions</span> <span class="stat-value svelte-1rdz98g"> </span></div> <div class="stat svelte-1rdz98g"><span class="stat-label svelte-1rdz98g">CVR</span> <span class="stat-value svelte-1rdz98g"> </span></div></div> <div class="rules-preview svelte-1rdz98g"><div class="rule-tag svelte-1rdz98g"> </div> <div class="rule-tag svelte-1rdz98g"> </div> <!></div></div> <div class="card-actions svelte-1rdz98g"><a class="action-btn svelte-1rdz98g"><!> <span>Edit</span></a> <button class="action-btn svelte-1rdz98g"><!> <span>Duplicate</span></button> <a class="action-btn svelte-1rdz98g"><!> <span>Analytics</span></a> <button class="action-btn danger svelte-1rdz98g"><!> <span>Delete</span></button></div></div>'),_e=g('<div class="popups-grid svelte-1rdz98g"></div>'),ze=g('<div class="popups-page svelte-1rdz98g"><div class="page-header svelte-1rdz98g"><div><h1 class="page-title svelte-1rdz98g">Popup Manager</h1> <p class="page-subtitle svelte-1rdz98g">Create and manage custom popups for your site</p></div> <a href="/admin/popups/create" class="btn-primary svelte-1rdz98g"><!> <span>Create Popup</span></a></div> <div class="tabs svelte-1rdz98g"><button role="tab"> </button> <button role="tab"> </button> <button role="tab"> </button></div> <!></div>');function he(da,na){Fa(na,!0);let _=U(Ja([])),M=U(!0),d=U("all");Ka(async()=>{await P(),oa()});async function P(){u(M,!0);try{u(_,await le(),!0)}catch{u(_,[],!0)}finally{u(M,!1)}}function oa(){Ua.from(".popup-card",{opacity:0,y:20,duration:.5,stagger:.1,ease:"power3.out"})}async function ca(s){try{await ve(s.id,!s.isActive),await P()}catch{}}async function pa(s){if(confirm("Are you sure you want to delete this popup?"))try{await ne(s),await P()}catch{}}async function ua(s){try{await de(s),await P()}catch{}}function ga(s){return s.impressions===0?"0%":(s.conversions/s.impressions*100).toFixed(1)+"%"}let W=Ba(()=>a(_).filter(s=>a(d)==="active"?s.isActive:a(d)==="inactive"?!s.isActive:!0));var T=ze(),q=t(T),Z=i(t(q),2),_a=t(Z);va(_a,{size:20}),y(2),e(Z),e(q);var H=i(q,2),z=t(H);let B;z.__click=()=>u(d,"all");var za=t(z);e(z);var b=i(z,2);let G;b.__click=()=>u(d,"active");var ba=t(b);e(b);var m=i(b,2);let X;m.__click=()=>u(d,"inactive");var fa=t(m);e(m),e(H);var ha=i(H,2);{var ya=s=>{var n=oe();c(s,n)},ma=s=>{var n=Wa(),xa=Za(n);{var Aa=f=>{var p=ce(),C=t(p);Ga(C,{size:64,class:"empty-icon"});var r=i(C,6),x=t(r);va(x,{size:20}),y(2),e(r),e(p),c(f,p)},wa=f=>{var p=_e();Xa(p,21,()=>a(W),ie,(C,r)=>{var x=ge(),N=t(x),S=t(N);let Y;var Pa=t(S,!0);e(S);var k=i(S,2);k.__click=()=>ca(a(r));var Ca=t(k);{var Sa=l=>{se(l,{size:18})},ka=l=>{re(l,{size:18})};w(Ca,l=>{a(r).isActive?l(Sa):l(ka,!1)})}e(k),e(N);var O=i(N,2),V=t(O),Ea=t(V,!0);e(V);var aa=i(V,2);{var Ra=l=>{var o=pe(),A=t(o);e(o),I(()=>v(A,`"${a(r).title??""}"`)),c(l,o)};w(aa,l=>{a(r).title&&l(Ra)})}var $=i(aa,2),j=t($),ea=i(t(j),2),Da=t(ea,!0);e(ea),e(j);var F=i(j,2),ta=i(t(F),2),Ia=t(ta,!0);e(ta),e(F);var sa=i(F,2),ra=i(t(sa),2),La=t(ra,!0);e(ra),e(sa),e($);var ia=i($,2),J=t(ia),Ma=t(J,!0);e(J);var K=i(J,2),Ta=t(K);e(K);var qa=i(K,2);{var Ha=l=>{var o=ue(),A=t(o);e(o),I(()=>v(A,`Scroll ${a(r).displayRules.scrollPercentage??""}%`)),c(l,o)};w(qa,l=>{a(r).displayRules.showOnScroll&&l(Ha)})}e(ia),e(O);var la=i(O,2),E=t(la),Na=t(E);Ya(Na,{size:16}),y(2),e(E);var R=i(E,2);R.__click=()=>ua(a(r).id);var Oa=t(R);ae(Oa,{size:16}),y(2),e(R);var D=i(R,2),Va=t(D);ee(Va,{size:16}),y(2),e(D);var Q=i(D,2);Q.__click=()=>pa(a(r).id);var $a=t(Q);te($a,{size:16}),y(2),e(Q),e(la),e(x),I((l,o,A)=>{Y=L(S,1,"status-badge svelte-1rdz98g",null,Y,{active:a(r).isActive}),v(Pa,a(r).isActive?"Active":"Inactive"),h(k,"title",a(r).isActive?"Deactivate":"Activate"),v(Ea,a(r).name),v(Da,l),v(Ia,o),v(La,A),v(Ma,a(r).displayRules.frequency),v(Ta,`${a(r).displayRules.delaySeconds??""}s delay`),h(E,"href",`/admin/popups/${a(r).id??""}/edit`),h(D,"href",`/admin/popups/${a(r).id??""}/analytics`)},[()=>a(r).impressions.toLocaleString(),()=>a(r).conversions.toLocaleString(),()=>ga(a(r))]),c(C,x)}),e(p),c(f,p)};w(xa,f=>{a(W).length===0?f(Aa):f(wa,!1)},!0)}c(s,n)};w(ha,s=>{a(M)?s(ya):s(ma,!1)})}e(T),I((s,n)=>{B=L(z,1,"tab svelte-1rdz98g",null,B,{active:a(d)==="all"}),h(z,"aria-selected",a(d)==="all"),v(za,`All Popups (${a(_).length??""})`),G=L(b,1,"tab svelte-1rdz98g",null,G,{active:a(d)==="active"}),h(b,"aria-selected",a(d)==="active"),v(ba,`Active (${s??""})`),X=L(m,1,"tab svelte-1rdz98g",null,X,{active:a(d)==="inactive"}),h(m,"aria-selected",a(d)==="inactive"),v(fa,`Inactive (${n??""})`)},[()=>a(_).filter(s=>s.isActive).length,()=>a(_).filter(s=>!s.isActive).length]),c(da,T),Qa()}ja(["click"]);export{he as component};
