import{z as Dt,p as It,s as A,A as qe,o as Xt,C as Lt,f as u,a9 as Nt,d as be,c as i,q as a,e as r,i as k,w as $,af as z,h as c,j as Ft,as as Gt,at as Et,r as t,g as e,O as H,am as de,ah as ce,N as Ce,_ as ge,x as g,Q as Se,n as De,bH as at,H as xe,bJ as rt,K as fe,ag as ot,ai as st,bq as it,d0 as zt,bW as Bt,v as ze}from"../chunks/C_QN0JMx.js";import{a as Ie}from"../chunks/ByEkyPua.js";import"../chunks/KfBlM_pv.js";var Ot=u('<div class="grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8"><div class="group relative"><div class="absolute inset-0 bg-gradient-to-br from-slate-500/20 to-slate-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-slate-400/30 transition-all"><div class="text-3xl font-bold text-white"> </div> <div class="text-sm text-slate-400 mt-1">Available</div></div></div> <div class="group relative"><div class="absolute inset-0 bg-gradient-to-br from-emerald-500/20 to-emerald-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-emerald-400/30 transition-all"><div class="text-3xl font-bold text-emerald-400"> </div> <div class="text-sm text-slate-400 mt-1">Connected</div></div></div> <div class="group relative"><div class="absolute inset-0 bg-gradient-to-br from-slate-500/20 to-slate-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-slate-400/30 transition-all"><div class="text-3xl font-bold text-slate-400"> </div> <div class="text-sm text-slate-400 mt-1">Not Connected</div></div></div> <div class="group relative"><div class="absolute inset-0 bg-gradient-to-br from-red-500/20 to-red-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-red-400/30 transition-all"><div class="text-3xl font-bold text-red-400"> </div> <div class="text-sm text-slate-400 mt-1">Errors</div></div></div> <div class="group relative col-span-2 lg:col-span-1"><div class="absolute inset-0 bg-gradient-to-br from-amber-500/20 to-amber-600/20 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-opacity"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-amber-400/30 transition-all"><div class="text-3xl font-bold text-amber-400"> </div> <div class="text-sm text-slate-400 mt-1">Needs Attention</div></div></div></div>'),Kt=u('<button class="w-full px-4 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl text-sm font-medium transition-all">Disconnect</button>'),Rt=u('<button class="w-full px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white rounded-xl text-sm font-medium transition-all shadow-lg shadow-blue-500/20">Connect</button>'),Ht=u('<div class="group relative"><div class="absolute inset-0 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-white/20 transition-all hover:-translate-y-1"><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl flex items-center justify-center text-lg font-bold">G</div> <div><h3 class="font-semibold text-white text-sm"> </h3> <p class="text-xs text-slate-500"> </p></div></div> <span><span></span> </span></div> <p class="text-xs text-slate-400 mb-4 line-clamp-2 svelte-1gjcsm"> </p> <!></div></div>'),Ut=u("<button><span> </span> </button>"),Jt=u('<div class="flex items-center justify-center h-64"><div class="relative"><div class="w-16 h-16 border-4 border-purple-500/20 rounded-full"></div> <div class="absolute top-0 left-0 w-16 h-16 border-4 border-purple-500 rounded-full animate-spin border-t-transparent"></div></div></div>'),Vt=u("<span> </span>"),Wt=u('<div class="space-y-2 mb-4 p-3 bg-black/20 rounded-xl text-xs"><div class="flex justify-between"><span class="text-slate-500">API Calls Today</span> <span class="text-white font-medium"> </span></div> <div class="flex justify-between"><span class="text-slate-500">Last Verified</span> <span class="text-white"> </span></div></div>'),Qt=u('<button class="flex-1 px-4 py-2.5 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-xl text-sm font-medium transition-all">Disconnect</button> <button class="px-4 py-2.5 bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white rounded-xl text-sm font-medium transition-all">Configure</button>',1),Yt=u('<button class="flex-1 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl text-sm font-medium transition-all shadow-lg shadow-purple-500/20 hover:shadow-purple-500/40">Connect</button>'),Zt=u('<a target="_blank" rel="noopener noreferrer" class="px-3 py-2.5 bg-white/5 hover:bg-white/10 text-slate-400 hover:text-white rounded-xl transition-all" title="View documentation"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a>'),ea=u('<div class="group relative"><div class="absolute inset-0 rounded-2xl blur-xl opacity-0 group-hover:opacity-100 transition-all duration-500"></div> <div class="relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-5 hover:border-white/20 transition-all hover:-translate-y-1"><div class="flex items-start justify-between mb-3"><div class="flex items-center gap-3"><div class="w-11 h-11 rounded-xl flex items-center justify-center text-xl font-bold shadow-lg"> </div> <div><h3 class="font-semibold text-white"> </h3> <p class="text-xs text-slate-500 capitalize"> </p></div></div></div> <div class="flex items-center gap-2 mb-3"><span><span></span> </span> <!></div> <p class="text-sm text-slate-400 mb-4 line-clamp-2 svelte-1gjcsm"> </p> <!> <div class="flex gap-2"><!> <!></div></div></div>'),ta=u('<div class="text-center py-16"><div class="text-6xl mb-4">üîå</div> <h3 class="text-xl font-semibold text-white mb-2">No integrations found</h3> <p class="text-slate-400">Try adjusting your search or filter criteria</p></div>'),aa=u('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5"></div> <!>',1),ra=u('<!> <div class="mb-8"><h2 class="text-xl font-semibold text-white mb-4 flex items-center gap-2"><span class="text-2xl">üîç</span> Google Services</h2> <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4"></div></div> <div class="flex flex-col lg:flex-row gap-4 mb-6"><div class="relative flex-1 max-w-md"><input type="text" placeholder="Search integrations..." class="w-full px-5 py-3 pl-12 bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all"/> <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <div class="flex gap-2 overflow-x-auto pb-2"><button>All</button> <!></div></div> <!>',1),oa=u('<div class="max-w-3xl"><div class="bg-white/5 backdrop-blur-xl border border-white/10 rounded-2xl p-6"><h2 class="text-xl font-semibold text-white mb-6">General Settings</h2> <div class="space-y-6"><div class="flex items-center justify-between p-4 bg-black/20 rounded-xl"><div><h3 class="font-medium text-white">Site Name</h3> <p class="text-sm text-slate-400">Your website display name</p></div> <input type="text" value="Revolution Trading Pros" class="px-4 py-2 bg-white/5 border border-white/10 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-purple-500/50"/></div> <div class="flex items-center justify-between p-4 bg-black/20 rounded-xl"><div><h3 class="font-medium text-white">Maintenance Mode</h3> <p class="text-sm text-slate-400">Temporarily disable public access</p></div> <button type="button" aria-label="Toggle maintenance mode" title="Toggle maintenance mode" class="relative w-14 h-8 bg-slate-700 rounded-full transition-colors"><span class="absolute left-1 top-1 w-6 h-6 bg-white rounded-full transition-transform"></span></button></div> <div class="flex items-center justify-between p-4 bg-black/20 rounded-xl"><div><h3 class="font-medium text-white">Debug Mode</h3> <p class="text-sm text-slate-400">Enable detailed error logging</p></div> <button type="button" aria-label="Toggle debug mode" title="Toggle debug mode" class="relative w-14 h-8 bg-slate-700 rounded-full transition-colors"><span class="absolute left-1 top-1 w-6 h-6 bg-white rounded-full transition-transform"></span></button></div> <div class="pt-4"><button class="px-6 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl font-medium transition-all shadow-lg shadow-purple-500/20">Save Settings</button></div></div></div></div>'),sa=u("<button> </button>"),ia=u('<div><span id="environment-label" class="block text-sm font-medium text-slate-300 mb-2">Environment</span> <div class="flex gap-2" role="group" aria-labelledby="environment-label"></div></div>'),la=u('<span class="text-red-400">*</span>'),na=u('<div><label class="block text-sm font-medium text-slate-300 mb-2"> <!></label> <input class="w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all"/></div>'),da=u('<svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <span class="text-emerald-400 font-medium"> </span>',1),ca=u('<svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg> <span class="text-red-400 font-medium"> </span>',1),ua=u('<p class="text-xs text-slate-400 mt-1"> </p>'),va=u('<div><div class="flex items-center gap-2"><!></div> <!></div>'),pa=u('<span class="flex items-center justify-center gap-2"><div class="w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div> Testing...</span>'),ba=u('<span class="flex items-center justify-center gap-2"><div class="w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div> Connecting...</span>'),ga=u('<div class="fixed inset-0 z-50 flex items-center justify-center p-4"><button type="button" class="absolute inset-0 bg-black/80 backdrop-blur-sm cursor-default" aria-label="Close modal"></button> <div class="relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-3xl shadow-2xl overflow-hidden"><div class="relative p-6 border-b border-white/10"><div class="absolute inset-0 bg-gradient-to-r opacity-50"></div> <div class="relative flex items-center gap-4"><div class="w-14 h-14 rounded-xl flex items-center justify-center text-2xl font-bold shadow-lg"> </div> <div><h2 class="text-xl font-bold text-white"> </h2> <p class="text-sm text-slate-400"> </p></div></div> <button type="button" aria-label="Close connection modal" title="Close" class="absolute top-6 right-6 text-slate-400 hover:text-white transition-colors"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="p-6 space-y-5 max-h-[60vh] overflow-y-auto"><!> <!> <!></div> <div class="p-6 border-t border-white/10 bg-black/20 flex gap-3"><button class="flex-1 px-4 py-3 bg-white/5 hover:bg-white/10 text-white rounded-xl font-medium transition-all disabled:opacity-50"><!></button> <button class="flex-1 px-4 py-3 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white rounded-xl font-medium transition-all shadow-lg shadow-purple-500/20 disabled:opacity-50"><!></button></div></div></div>'),xa=u('<span class="flex items-center justify-center gap-2"><div class="w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"></div> Disconnecting...</span>'),fa=u('<div class="fixed inset-0 z-50 flex items-center justify-center p-4"><button type="button" class="absolute inset-0 bg-black/80 backdrop-blur-sm cursor-default" aria-label="Close"></button> <div class="relative w-full max-w-md bg-slate-900 border border-white/10 rounded-3xl shadow-2xl p-6"><div class="text-center"><div class="w-16 h-16 mx-auto mb-4 bg-red-500/10 rounded-full flex items-center justify-center"><svg class="w-8 h-8 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div> <h3 class="text-xl font-bold text-white mb-2"> </h3> <p class="text-slate-400 mb-6">This will remove all stored credentials and disable the integration. Dashboard metrics using this service will show "Not Connected".</p> <div class="flex gap-3"><button class="flex-1 px-4 py-3 bg-white/5 hover:bg-white/10 text-white rounded-xl font-medium transition-all">Cancel</button> <button class="flex-1 px-4 py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-medium transition-all disabled:opacity-50"><!></button></div></div></div></div>'),ha=u('<div class="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 text-white"><div class="fixed inset-0 overflow-hidden pointer-events-none"><div class="absolute -top-40 -right-40 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"></div> <div class="absolute -bottom-40 -left-40 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"></div> <div class="absolute top-1/3 left-1/2 w-64 h-64 bg-emerald-500/5 rounded-full blur-3xl"></div></div> <div class="relative z-10 p-6 lg:p-8 max-w-[1800px] mx-auto"><header class="mb-8"><div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"><div><h1 class="text-3xl lg:text-4xl font-bold bg-gradient-to-r from-white via-slate-200 to-slate-400 bg-clip-text text-transparent">Settings & Integrations</h1> <p class="mt-2 text-slate-400 text-lg">Manage your API connections and configure platform settings</p></div> <div class="flex bg-white/5 backdrop-blur-xl rounded-2xl p-1 border border-white/10"><button>API Integrations</button> <button>General Settings</button></div></div></header> <!></div></div> <!> <!>',1);function wa(lt,nt){It(nt,!0);let U=A(qe([])),Xe=A(qe({})),oe=A(qe({total_available:0,total_connected:0,total_disconnected:0,total_errors:0,needs_attention:0})),je=A(!0),he=A("integrations"),ue=A(null),Ae=A(""),me=A(!1),m=A(null),_e=A(!1),$e=A(!1),Pe=A(!1),T=A(null),ve=A(qe({})),ye=A("production"),we=A(!1),se=A(null),Le=null,Be=De(()=>()=>{let o=e(U);if(e(ue)&&(o=o.filter(l=>l.category===e(ue))),e(Ae)){const l=e(Ae).toLowerCase();o=o.filter(v=>v.name.toLowerCase().includes(l)||v.description.toLowerCase().includes(l)||v.category.toLowerCase().includes(l))}return o}),dt=De(()=>Object.entries(e(Xe))),ct=De(()=>e(U).filter(o=>["google_analytics","google_search_console","google_tag_manager","google_ads"].includes(o.key)));async function Me(){try{i(je,!0);const o=await fetch("/api/admin/connections");if(o.ok){const l=await o.json();i(U,l.connections||[],!0),i(Xe,l.categories||{},!0),i(oe,l.summary||{total_available:0,total_connected:0,total_disconnected:0,total_errors:0,needs_attention:0},!0)}else Oe()}catch{Oe()}finally{i(je,!1)}}function Oe(){const o=[{key:"google_analytics",name:"Google Analytics 4",category:"analytics",description:"Track website traffic and user behavior with GA4",icon:"google-analytics",color:"#F9AB00",docs_url:"https://developers.google.com/analytics",is_oauth:!0,fields:[{key:"measurement_id",label:"Measurement ID",type:"text",required:!0,placeholder:"G-XXXXXXXXXX"},{key:"property_id",label:"Property ID",type:"text",required:!1,placeholder:"123456789"}],is_connected:!1,status:"disconnected"},{key:"google_search_console",name:"Google Search Console",category:"analytics",description:"Monitor search performance and indexing status",icon:"google",color:"#4285F4",docs_url:"https://search.google.com/search-console",is_oauth:!0,fields:[{key:"site_url",label:"Site URL",type:"url",required:!0,placeholder:"https://yoursite.com"}],is_connected:!1,status:"disconnected"},{key:"google_tag_manager",name:"Google Tag Manager",category:"analytics",description:"Manage marketing tags without code changes",icon:"google",color:"#246FDB",docs_url:"https://tagmanager.google.com",is_oauth:!1,fields:[{key:"container_id",label:"Container ID",type:"text",required:!0,placeholder:"GTM-XXXXXXX"}],is_connected:!1,status:"disconnected"},{key:"google_ads",name:"Google Ads",category:"analytics",description:"Track conversions and optimize ad campaigns",icon:"google",color:"#34A853",docs_url:"https://ads.google.com",is_oauth:!0,fields:[{key:"conversion_id",label:"Conversion ID",type:"text",required:!0,placeholder:"AW-XXXXXXXXX"},{key:"conversion_label",label:"Conversion Label",type:"text",required:!1}],is_connected:!1,status:"disconnected"},{key:"stripe",name:"Stripe",category:"payments",description:"Accept payments with credit cards, Apple Pay, Google Pay",icon:"stripe",color:"#635BFF",docs_url:"https://stripe.com/docs/api",is_oauth:!1,fields:[{key:"publishable_key",label:"Publishable Key",type:"text",required:!0,placeholder:"pk_live_..."},{key:"secret_key",label:"Secret Key",type:"password",required:!0,placeholder:"sk_live_..."},{key:"webhook_secret",label:"Webhook Secret",type:"password",required:!1,placeholder:"whsec_..."}],environments:["production","test"],is_connected:!1,status:"disconnected"},{key:"paypal",name:"PayPal",category:"payments",description:"Accept PayPal payments and PayPal Credit",icon:"paypal",color:"#003087",docs_url:"https://developer.paypal.com",is_oauth:!0,fields:[{key:"client_id",label:"Client ID",type:"text",required:!0},{key:"client_secret",label:"Client Secret",type:"password",required:!0}],environments:["production","sandbox"],is_connected:!1,status:"disconnected"},{key:"sendgrid",name:"SendGrid",category:"email",description:"Transactional and marketing email delivery",icon:"sendgrid",color:"#1A82E2",docs_url:"https://docs.sendgrid.com",is_oauth:!1,fields:[{key:"api_key",label:"API Key",type:"password",required:!0,placeholder:"SG.xxx..."}],is_connected:!1,status:"disconnected"},{key:"mailchimp",name:"Mailchimp",category:"email",description:"Email marketing and audience management",icon:"mailchimp",color:"#FFE01B",is_oauth:!0,fields:[{key:"api_key",label:"API Key",type:"password",required:!0},{key:"server_prefix",label:"Server Prefix",type:"text",required:!0,placeholder:"us1"}],is_connected:!1,status:"disconnected"},{key:"hubspot",name:"HubSpot",category:"crm",description:"CRM, marketing, sales, and service platform",icon:"hubspot",color:"#FF7A59",docs_url:"https://developers.hubspot.com",is_oauth:!0,fields:[{key:"api_key",label:"Private App Token",type:"password",required:!0}],is_connected:!1,status:"disconnected"},{key:"facebook",name:"Facebook Pixel",category:"social",description:"Track conversions and build audiences for Facebook ads",icon:"facebook",color:"#1877F2",is_oauth:!0,fields:[{key:"pixel_id",label:"Pixel ID",type:"text",required:!0,placeholder:"123456789..."}],is_connected:!1,status:"disconnected"},{key:"openai",name:"OpenAI",category:"ai",description:"GPT-4, DALL-E, and AI capabilities",icon:"openai",color:"#10A37F",docs_url:"https://platform.openai.com/docs",is_oauth:!1,fields:[{key:"api_key",label:"API Key",type:"password",required:!0,placeholder:"sk-..."},{key:"organization_id",label:"Organization ID",type:"text",required:!1}],is_connected:!1,status:"disconnected"},{key:"sentry",name:"Sentry",category:"monitoring",description:"Error tracking and performance monitoring",icon:"sentry",color:"#362D59",docs_url:"https://docs.sentry.io",is_oauth:!1,fields:[{key:"dsn",label:"DSN",type:"text",required:!0,placeholder:"https://xxx@xxx.ingest.sentry.io/xxx"}],is_connected:!1,status:"disconnected"}];i(U,o,!0);const l={};for(const v of o)l[v.category]||(l[v.category]={name:bt(v.category),icon:gt(v.category),services:[]}),l[v.category].services.push(v);i(Xe,l,!0),i(oe,{total_available:o.length,total_connected:0,total_disconnected:o.length,total_errors:0,needs_attention:0},!0)}async function ut(){if(e(m)){i(_e,!0),i(T,null);for(const o of e(m).fields)if(o.required&&!e(ve)[o.key]){i(T,{success:!1,error:`${o.label} is required`},!0),i(_e,!1);return}try{const o=performance.now(),l=await fetch(`/api/admin/connections/${e(m).key}/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:e(ve),environment:e(ye)})}),v=Math.round(performance.now()-o),_=await l.json();if(_.success){const q=e(U).findIndex(B=>B.key===e(m).key);q!==-1&&(e(U)[q]={...e(U)[q],is_connected:!0,status:"connected",connection:_.connection}),i(me,!1),Ie.success(`${e(m).name} connected successfully! (${v}ms)`),await Me()}else i(T,{success:!1,error:_.error||"Connection failed. Please check your credentials.",latency:v},!0)}catch{i(T,{success:!1,error:"Network error. Please check your connection."},!0)}finally{i(_e,!1)}}}async function vt(){if(e(m)){i($e,!0),i(T,null);try{const o=performance.now(),l=await fetch(`/api/admin/connections/${e(m).key}/test`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credentials:e(ve)})}),v=Math.round(performance.now()-o),_=await l.json();i(T,{..._,latency:v,message:_.success?`Connection verified in ${v}ms`:_.error},!0)}catch{i(T,{success:!1,error:"Test failed. Network error."},!0)}finally{i($e,!1)}}}async function pt(){if(e(se)){i(Pe,!0);try{const l=await(await fetch(`/api/admin/connections/${e(se).key}/disconnect`,{method:"POST"})).json();if(l.success){const v=e(U).findIndex(_=>_.key===e(se).key);v!==-1&&(e(U)[v]={...e(U)[v],is_connected:!1,status:"disconnected",connection:null}),i(we,!1),Ie.success(`${e(se).name} disconnected successfully`),await Me()}else Ie.error(l.error||"Failed to disconnect")}catch{Ie.error("Network error. Please try again.")}finally{i(Pe,!1)}}}function Ne(o){i(m,o,!0),i(ve,{},!0),i(T,null),i(ye,"production"),i(me,!0)}function Ke(o){i(se,o,!0),i(we,!0)}function bt(o){return{analytics:"Analytics & Tracking",payments:"Payments & Billing",email:"Email Marketing",crm:"CRM & Sales",social:"Social Media",ai:"AI & Machine Learning",monitoring:"Monitoring & Errors",storage:"Storage & CDN",communication:"Communication"}[o]||o.charAt(0).toUpperCase()+o.slice(1)}function gt(o){return{analytics:"üìä",payments:"üí≥",email:"‚úâÔ∏è",crm:"üë•",social:"üîó",ai:"ü§ñ",monitoring:"üîç",storage:"‚òÅÔ∏è",communication:"üí¨"}[o]||"üì¶"}function ae(o){switch(o){case"connected":return{bg:"bg-emerald-500/15",text:"text-emerald-400",label:"Connected",dot:"bg-emerald-400"};case"error":return{bg:"bg-red-500/15",text:"text-red-400",label:"Error",dot:"bg-red-400"};case"expired":return{bg:"bg-amber-500/15",text:"text-amber-400",label:"Expired",dot:"bg-amber-400"};case"pending":return{bg:"bg-blue-500/15",text:"text-blue-400",label:"Pending",dot:"bg-blue-400"};case"connecting":return{bg:"bg-purple-500/15",text:"text-purple-400",label:"Connecting...",dot:"bg-purple-400"};default:return{bg:"bg-slate-500/15",text:"text-slate-400",label:"Not Connected",dot:"bg-slate-400"}}}function xt(o){return o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Never"}function ft(o){return o>=90?"text-emerald-400":o>=70?"text-amber-400":o>=50?"text-orange-400":"text-red-400"}Xt(()=>{Me(),Le=setInterval(Me,3e4)}),Lt(()=>{Le&&clearInterval(Le)});var Re=ha();Nt("1gjcsm",o=>{Gt(()=>{Et.title="API Settings & Integrations | Admin"})});var Fe=be(Re),He=r(a(Fe),2),Te=a(He),Ue=a(Te),Je=r(a(Ue),2),Ge=a(Je);Ge.__click=()=>i(he,"integrations");var Ve=r(Ge,2);Ve.__click=()=>i(he,"general"),t(Je),t(Ue),t(Te);var ht=r(Te,2);{var mt=o=>{var l=ra(),v=be(l);{var _=f=>{var p=Ot(),X=a(p),D=r(a(X),2),G=a(D),C=a(G,!0);t(G),xe(2),t(D),t(X);var s=r(X,2),P=r(a(s),2),L=a(P),te=a(L,!0);t(L),xe(2),t(P),t(s);var E=r(s,2),F=r(a(E),2),Q=a(F),Y=a(Q,!0);t(Q),xe(2),t(F),t(E);var K=r(E,2),d=r(a(K),2),n=a(d),S=a(n,!0);t(n),xe(2),t(d),t(K);var M=r(K,2),j=r(a(M),2),y=a(j),N=a(y,!0);t(y),xe(2),t(j),t(M),t(p),$(()=>{g(C,e(oe).total_available),g(te,e(oe).total_connected),g(Y,e(oe).total_disconnected),g(S,e(oe).total_errors),g(N,e(oe).needs_attention)}),z(1,p,()=>ce,()=>({y:20,duration:600,delay:100,easing:de})),c(f,p)};k(v,f=>{e(je)||f(_)})}var q=r(v,2),B=r(a(q),2);Ce(B,21,()=>e(ct),Se,(f,p,X)=>{var D=Ht(),G=a(D),C=r(G,2),s=a(C),P=a(s),L=a(P),te=r(L,2),E=a(te),F=a(E,!0);t(E);var Q=r(E,2),Y=a(Q,!0);t(Q),t(te),t(P);var K=r(P,2),d=a(K),n=r(d);t(K),t(s);var S=r(s,2),M=a(S,!0);t(S);var j=r(S,2);{var y=x=>{var b=Kt();b.__click=()=>Ke(e(p)),c(x,b)},N=x=>{var b=Rt();b.__click=()=>Ne(e(p)),c(x,b)};k(j,x=>{e(p).is_connected?x(y):x(N,!1)})}t(C),t(D),$((x,b,I,R)=>{ge(G,`background: linear-gradient(135deg, ${e(p).color??""}30, ${e(p).color??""}10);`),ge(L,`background: ${e(p).color??""}20; color: ${e(p).color??""};`),g(F,e(p).name),g(Y,e(p).category),H(K,1,`flex items-center gap-1.5 px-2 py-1 rounded-full text-xs font-medium ${x??""} ${b??""}`,"svelte-1gjcsm"),H(d,1,`w-1.5 h-1.5 rounded-full ${I??""}`,"svelte-1gjcsm"),g(n,` ${R??""}`),g(M,e(p).description)},[()=>ae(e(p).status).bg,()=>ae(e(p).status).text,()=>ae(e(p).status).dot,()=>ae(e(p).status).label]),z(1,D,()=>ce,()=>({y:20,duration:400,delay:200+X*50,easing:de})),c(f,D)}),t(B),t(q);var J=r(q,2),O=a(J),ie=a(O);at(ie),xe(2),t(O);var V=r(O,2),ee=a(V);ee.__click=()=>i(ue,null);var ke=r(ee,2);Ce(ke,17,()=>e(dt),Se,(f,p)=>{var X=De(()=>zt(e(p),2));let D=()=>e(X)[0],G=()=>e(X)[1];var C=Ut();C.__click=()=>i(ue,D(),!0);var s=a(C),P=a(s,!0);t(s);var L=r(s);t(C),$(()=>{H(C,1,`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all whitespace-nowrap ${e(ue)===D()?"bg-white text-slate-900 shadow-lg":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white border border-white/10"}`),g(P,G().icon),g(L,` ${G().name??""}`)}),c(f,C)}),t(V),t(J);var pe=r(J,2);{var W=f=>{var p=Jt();c(f,p)},le=f=>{var p=aa(),X=be(p);Ce(X,21,()=>e(Be)(),Se,(C,s,P)=>{var L=ea(),te=a(L),E=r(te,2),F=a(E),Q=a(F),Y=a(Q),K=a(Y,!0);t(Y);var d=r(Y,2),n=a(d),S=a(n,!0);t(n);var M=r(n,2),j=a(M,!0);t(M),t(d),t(Q),t(F);var y=r(F,2),N=a(y),x=a(N),b=r(x);t(N);var I=r(N,2);{var R=h=>{var w=Vt(),Z=a(w);t(w),$(re=>{H(w,1,`text-xs ${re??""}`,"svelte-1gjcsm"),g(Z,`${e(s).connection.health_score??""}% health`)},[()=>ft(e(s).connection.health_score)]),c(h,w)};k(I,h=>{e(s).connection?.health_score&&h(R)})}t(y);var ne=r(y,2),Ct=a(ne,!0);t(ne);var Qe=r(ne,2);{var St=h=>{var w=Wt(),Z=a(w),re=r(a(Z),2),Ee=a(re,!0);t(re),t(Z);var et=r(Z,2),tt=r(a(et),2),Mt=a(tt,!0);t(tt),t(et),t(w),$((Tt,qt)=>{g(Ee,Tt),g(Mt,qt)},[()=>e(s).connection.api_calls_today?.toLocaleString()||0,()=>xt(e(s).connection.last_verified_at)]),c(h,w)};k(Qe,h=>{e(s).is_connected&&e(s).connection&&h(St)})}var Ye=r(Qe,2),Ze=a(Ye);{var jt=h=>{var w=Qt(),Z=be(w);Z.__click=()=>Ke(e(s));var re=r(Z,2);re.__click=()=>Ne(e(s)),c(h,w)},At=h=>{var w=Yt();w.__click=()=>Ne(e(s)),c(h,w)};k(Ze,h=>{e(s).is_connected?h(jt):h(At,!1)})}var $t=r(Ze,2);{var Pt=h=>{var w=Zt();$(()=>fe(w,"href",e(s).docs_url)),c(h,w)};k($t,h=>{e(s).docs_url&&h(Pt)})}t(Ye),t(E),t(L),$((h,w,Z,re,Ee)=>{ge(te,`background: linear-gradient(135deg, ${e(s).color??""}25, ${e(s).color??""}10);`),ge(Y,`background: ${e(s).color??""}20; color: ${e(s).color??""};`),g(K,h),g(S,e(s).name),g(j,e(s).category),H(N,1,`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${w??""} ${Z??""}`,"svelte-1gjcsm"),H(x,1,`w-1.5 h-1.5 rounded-full ${re??""} ${e(s).status==="connected"?"animate-pulse":""}`,"svelte-1gjcsm"),g(b,` ${Ee??""}`),g(Ct,e(s).description)},[()=>e(s).name.charAt(0),()=>ae(e(s).status).bg,()=>ae(e(s).status).text,()=>ae(e(s).status).dot,()=>ae(e(s).status).label]),z(1,L,()=>ce,()=>({y:30,duration:400,delay:250+P*30,easing:de})),c(C,L)}),t(X);var D=r(X,2);{var G=C=>{var s=ta();c(C,s)};k(D,C=>{e(Be)().length===0&&C(G)})}c(f,p)};k(pe,f=>{e(je)?f(W):f(le,!1)})}$(()=>H(ee,1,`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all whitespace-nowrap ${e(ue)===null?"bg-white text-slate-900 shadow-lg":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white border border-white/10"}`)),z(1,q,()=>ce,()=>({y:20,duration:600,delay:150,easing:de})),rt(ie,()=>e(Ae),f=>i(Ae,f)),z(1,J,()=>ce,()=>({y:20,duration:600,delay:200,easing:de})),c(o,l)},_t=o=>{var l=oa();z(1,l,()=>ce,()=>({y:20,duration:600,easing:de})),c(o,l)};k(ht,o=>{e(he)==="integrations"?o(mt):o(_t,!1)})}t(He),t(Fe);var We=r(Fe,2);{var yt=o=>{var l=ga(),v=a(l);v.__click=()=>i(me,!1);var _=r(v,2),q=a(_),B=a(q),J=r(B,2),O=a(J),ie=a(O,!0);t(O);var V=r(O,2),ee=a(V),ke=a(ee);t(ee);var pe=r(ee,2),W=a(pe,!0);t(pe),t(V),t(J);var le=r(J,2);le.__click=()=>i(me,!1),t(q);var f=r(q,2),p=a(f);{var X=d=>{var n=ia(),S=r(a(n),2);Ce(S,21,()=>e(m).environments,Se,(M,j)=>{var y=sa();y.__click=()=>i(ye,e(j),!0);var N=a(y,!0);t(y),$(x=>{fe(y,"aria-pressed",e(ye)===e(j)),H(y,1,`flex-1 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${e(ye)===e(j)?"bg-white text-slate-900":"bg-white/5 text-slate-400 hover:bg-white/10 hover:text-white border border-white/10"}`),g(N,x)},[()=>e(j).charAt(0).toUpperCase()+e(j).slice(1)]),c(M,y)}),t(S),t(n),c(d,n)};k(p,d=>{e(m).environments&&e(m).environments.length>1&&d(X)})}var D=r(p,2);Ce(D,17,()=>e(m).fields,Se,(d,n)=>{var S=na(),M=a(S),j=a(M),y=r(j);{var N=b=>{var I=la();c(b,I)};k(y,b=>{e(n).required&&b(N)})}t(M);var x=r(M,2);at(x),t(S),$(b=>{fe(M,"for",`field-${e(n).key??""}`),g(j,`${e(n).label??""} `),fe(x,"id",`field-${e(n).key??""}`),fe(x,"type",e(n).type==="password"?"password":"text"),fe(x,"placeholder",b)},[()=>e(n).placeholder||`Enter ${e(n).label.toLowerCase()}`]),rt(x,()=>e(ve)[e(n).key],b=>e(ve)[e(n).key]=b),c(d,S)});var G=r(D,2);{var C=d=>{var n=va(),S=a(n),M=a(S);{var j=b=>{var I=da(),R=r(be(I),2),ne=a(R,!0);t(R),$(()=>g(ne,e(T).message||"Connection successful!")),c(b,I)},y=b=>{var I=ca(),R=r(be(I),2),ne=a(R,!0);t(R),$(()=>g(ne,e(T).error||"Connection failed")),c(b,I)};k(M,b=>{e(T).success?b(j):b(y,!1)})}t(S);var N=r(S,2);{var x=b=>{var I=ua(),R=a(I);t(I),$(()=>g(R,`Response time: ${e(T).latency??""}ms`)),c(b,I)};k(N,b=>{e(T).latency&&b(x)})}t(n),$(()=>H(n,1,`p-4 rounded-xl ${e(T).success?"bg-emerald-500/10 border border-emerald-500/20":"bg-red-500/10 border border-red-500/20"}`)),z(3,n,()=>Bt),c(d,n)};k(G,d=>{e(T)&&d(C)})}t(f);var s=r(f,2),P=a(s);P.__click=vt;var L=a(P);{var te=d=>{var n=pa();c(d,n)},E=d=>{var n=ze("Test Connection");c(d,n)};k(L,d=>{e($e)?d(te):d(E,!1)})}t(P);var F=r(P,2);F.__click=ut;var Q=a(F);{var Y=d=>{var n=ba();c(d,n)},K=d=>{var n=ze("Connect");c(d,n)};k(Q,d=>{e(_e)?d(Y):d(K,!1)})}t(F),t(s),t(_),t(l),$(d=>{ge(B,`background: linear-gradient(135deg, ${e(m).color??""}15, transparent);`),ge(O,`background: ${e(m).color??""}20; color: ${e(m).color??""};`),g(ie,d),g(ke,`Connect ${e(m).name??""}`),g(W,e(m).description),P.disabled=e($e),F.disabled=e(_e)},[()=>e(m).name.charAt(0)]),z(3,_,()=>st,()=>({duration:300,easing:ot})),z(3,l,()=>it,()=>({duration:200})),c(o,l)};k(We,o=>{e(me)&&e(m)&&o(yt)})}var wt=r(We,2);{var kt=o=>{var l=fa(),v=a(l);v.__click=()=>i(we,!1);var _=r(v,2),q=a(_),B=r(a(q),2),J=a(B);t(B);var O=r(B,4),ie=a(O);ie.__click=()=>i(we,!1);var V=r(ie,2);V.__click=pt;var ee=a(V);{var ke=W=>{var le=xa();c(W,le)},pe=W=>{var le=ze("Disconnect");c(W,le)};k(ee,W=>{e(Pe)?W(ke):W(pe,!1)})}t(V),t(O),t(q),t(_),t(l),$(()=>{g(J,`Disconnect ${e(se).name??""}?`),V.disabled=e(Pe)}),z(3,_,()=>st,()=>({duration:300,easing:ot})),z(3,l,()=>it,()=>({duration:200})),c(o,l)};k(wt,o=>{e(we)&&e(se)&&o(kt)})}$(()=>{H(Ge,1,`px-6 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 ${e(he)==="integrations"?"bg-white text-slate-900 shadow-lg":"text-slate-400 hover:text-white"}`),H(Ve,1,`px-6 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 ${e(he)==="general"?"bg-white text-slate-900 shadow-lg":"text-slate-400 hover:text-white"}`)}),z(1,Te,()=>ce,()=>({y:-20,duration:600,easing:de})),c(lt,Re),Ft()}Dt(["click"]);export{wa as component};
