import{z as Ut,p as qt,o as Bt,a3 as Gt,f as c,a9 as Kt,w as m,e as s,q as r,N as Z,i as j,bG as Rt,g as t,bJ as Vt,h as l,j as It,c as o,aP as u,as as Wt,x as v,at as Xt,bK as Yt,Q as tt,r as a,bH as Zt,H as _t,O as yt,k as mt,d as et}from"../chunks/C_QN0JMx.js";import{a as te}from"../chunks/CCQSfPwG.js";import{P as ee}from"../chunks/gQRjaVS-.js";import"../chunks/Cq_baTW3.js";var ae=c("<option> </option>"),re=c('<button> <span class="ml-2 opacity-75"> </span></button>'),se=c('<div class="bg-white rounded-xl border border-gray-200 p-6 mb-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Event Distribution</h3> <div class="flex flex-wrap gap-2"></div></div>'),oe=c('<div class="flex items-center justify-center py-20"><div class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div></div>'),ne=c('<div class="p-6 text-center text-red-600"><p> </p> <button class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Retry</button></div>'),le=c('<div class="p-12 text-center"><div class="text-4xl mb-4">‚ö°</div> <h3 class="text-lg font-medium text-gray-900 mb-2">No Events Found</h3> <p class="text-gray-500">Try adjusting your filters or time range</p></div>'),ie=c('<span class="text-gray-900"> </span>'),de=c('<span class="text-gray-400 italic">Anonymous</span>'),ve=c('<tr class="hover:bg-gray-50 cursor-pointer"><td class="py-3 px-4"><span> </span></td><td class="py-3 px-4"><!></td><td class="py-3 px-4 max-w-[200px] truncate text-gray-600"> </td><td class="py-3 px-4 max-w-[200px] truncate text-gray-500 font-mono text-xs"> </td><td class="py-3 px-4"><span class="text-xs text-gray-500 capitalize"> </span></td><td class="py-3 px-4 text-right text-gray-500 whitespace-nowrap"> </td></tr>'),ce=c('<div class="p-4 border-t border-gray-100 flex items-center justify-between"><p class="text-sm text-gray-500"> </p> <div class="flex items-center gap-2"><button class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button> <button class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button></div></div>'),pe=c('<div class="overflow-x-auto"><table class="w-full text-sm"><thead class="bg-gray-50"><tr><th class="text-left py-3 px-4 font-medium text-gray-600">Event</th><th class="text-left py-3 px-4 font-medium text-gray-600">User</th><th class="text-left py-3 px-4 font-medium text-gray-600">Page</th><th class="text-left py-3 px-4 font-medium text-gray-600">Properties</th><th class="text-left py-3 px-4 font-medium text-gray-600">Source</th><th class="text-right py-3 px-4 font-medium text-gray-600">Time</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></div> <!>',1),xe=c('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="mb-8"><h1 class="text-2xl font-bold text-gray-900">Event Explorer</h1> <p class="text-sm text-gray-500 mt-1">Browse and analyze tracked events</p></div> <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6"><div class="flex flex-wrap items-center gap-4"><!> <select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"><option>All Event Types</option><!></select> <div class="flex-1 min-w-[200px]"><div class="relative"><input type="text" placeholder="Search events..." class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">üîç</span></div></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium">Search</button></div></div> <!> <div class="bg-white rounded-xl border border-gray-200 overflow-hidden"><div class="p-4 border-b border-gray-100 flex items-center justify-between"><h3 class="font-semibold text-gray-900">Events <span class="text-sm font-normal text-gray-500"> </span></h3> <button class="px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50">Export CSV</button></div> <!></div></div>');function ye(ft,ht){qt(ht,!1);let F=u([]),T=u([]),H=u(!0),M=u(null),Q=u("7d"),E=u(""),U=u(""),p=u(1),N=u(1),at=u(0);const rt={page_view:"bg-blue-100 text-blue-700",click:"bg-green-100 text-green-700",form_submit:"bg-purple-100 text-purple-700",purchase:"bg-yellow-100 text-yellow-700",signup:"bg-pink-100 text-pink-700",login:"bg-cyan-100 text-cyan-700",error:"bg-red-100 text-red-700",custom:"bg-gray-100 text-gray-700"};async function f(){o(H,!0),o(M,null);try{const e=await te.getEvents({period:t(Q),event_type:t(E)||void 0,search:t(U)||void 0,page:t(p)});o(F,e.events),o(T,e.event_types||[]),o(N,e.pagination?.total_pages||1),o(at,e.pagination?.total||0)}catch(e){o(M,e instanceof Error?e.message:"Failed to load events")}finally{o(H,!1)}}function wt(e){o(Q,e),o(p,1),f()}function st(){o(p,1),f()}function ot(){o(p,1),f()}function Et(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function kt(e){return!e||Object.keys(e).length===0?"-":JSON.stringify(e).slice(0,100)+(JSON.stringify(e).length>100?"...":"")}Bt(()=>{f()}),Gt();var q=xe();Kt("ijow4t",e=>{Wt(()=>{Xt.title="Event Explorer | Analytics"})});var B=s(r(q),2),nt=r(B),lt=r(nt);ee(lt,{get value(){return t(Q)},onchange:wt});var A=s(lt,2);m(()=>{t(E),Yt(()=>{t(T)})}),A.__change=st;var G=r(A);G.value=G.__value="";var St=s(G);Z(St,1,()=>t(T),tt,(e,n)=>{var x=ae(),C=r(x);a(x);var g={};m(()=>{v(C,`${t(n).name??""} (${t(n).count??""})`),g!==(g=t(n).name)&&(x.value=(x.__value=t(n).name)??"")}),l(e,x)}),a(A);var K=s(A,2),it=r(K),R=r(it);Zt(R),R.__keydown=e=>e.key==="Enter"&&ot(),_t(2),a(it),a(K);var Pt=s(K,2);Pt.__click=ot,a(nt),a(B);var dt=s(B,2);{var jt=e=>{var n=se(),x=s(r(n),2);Z(x,5,()=>t(T).slice(0,12),tt,(C,g)=>{var i=re();i.__click=()=>{o(E,t(g).name),st()};var b=r(i),_=s(b),O=r(_,!0);a(_),a(i),m(z=>{yt(i,1,`px-3 py-2 rounded-lg text-sm font-medium transition-all
							${(t(E)===t(g).name?"bg-blue-600 text-white":rt[t(g).name]||"bg-gray-100 text-gray-700 hover:bg-gray-200")??""}`),v(b,`${t(g).name??""} `),v(O,z)},[()=>t(g).count.toLocaleString()]),l(C,i)}),a(x),a(n),l(e,n)};j(dt,e=>{t(T).length>0&&e(jt)})}var vt=s(dt,2),V=r(vt),ct=r(V),pt=s(r(ct)),Tt=r(pt);a(pt),a(ct),_t(2),a(V);var Nt=s(V,2);{var At=e=>{var n=oe();l(e,n)},Ct=e=>{var n=mt(),x=et(n);{var C=i=>{var b=ne(),_=r(b),O=r(_,!0);a(_);var z=s(_,2);z.__click=f,a(b),m(()=>v(O,t(M))),l(i,b)},g=i=>{var b=mt(),_=et(b);{var O=k=>{var $=le();l(k,$)},z=k=>{var $=pe(),I=et($),xt=r(I),gt=s(r(xt));Z(gt,5,()=>t(F),tt,(D,d)=>{var h=ve(),J=r(h),S=r(J),L=r(S,!0);a(S),a(J);var P=s(J),Dt=r(P);{var Jt=y=>{var w=ie(),Qt=r(w,!0);a(w),m(()=>v(Qt,t(d).user_id)),l(y,w)},Lt=y=>{var w=de();l(y,w)};j(Dt,y=>{t(d).user_id?y(Jt):y(Lt,!1)})}a(P);var W=s(P),Mt=r(W,!0);a(W);var X=s(W),$t=r(X,!0);a(X);var Y=s(X),ut=r(Y),Ft=r(ut,!0);a(ut),a(Y);var bt=s(Y),Ht=r(bt,!0);a(bt),a(h),m((y,w)=>{yt(S,1,`px-2 py-1 rounded text-xs font-medium ${(rt[t(d).event_type]||"bg-gray-100 text-gray-700")??""}`),v(L,t(d).event_name),v(Mt,t(d).page_path||"-"),v($t,y),v(Ft,t(d).channel||"-"),v(Ht,w)},[()=>kt(t(d).properties||{}),()=>Et(t(d).created_at)]),l(D,h)}),a(gt),a(xt),a(I);var Ot=s(I,2);{var zt=D=>{var d=ce(),h=r(d),J=r(h);a(h);var S=s(h,2),L=r(S);L.__click=()=>{o(p,Math.max(1,t(p)-1)),f()};var P=s(L,2);P.__click=()=>{o(p,Math.min(t(N),t(p)+1)),f()},a(S),a(d),m(()=>{v(J,`Page ${t(p)??""} of ${t(N)??""}`),L.disabled=t(p)===1,P.disabled=t(p)===t(N)}),l(D,d)};j(Ot,D=>{t(N)>1&&D(zt)})}l(k,$)};j(_,k=>{t(F).length===0?k(O):k(z,!1)},!0)}l(i,b)};j(x,i=>{t(M)?i(C):i(g,!1)},!0)}l(e,n)};j(Nt,e=>{t(H)?e(At):e(Ct,!1)})}a(vt),a(q),m(e=>v(Tt,`(${e??""} total)`),[()=>t(at).toLocaleString()]),Rt(A,()=>t(E),e=>o(E,e)),Vt(R,()=>t(U),e=>o(U,e)),l(ft,q),It()}Ut(["change","keydown","click"]);export{ye as component};
