import{z as Xa,p as $a,s as I,A as ba,b as ae,f as n,a9 as ee,d as b,q as s,R as ga,cZ as se,i as g,w as T,h as t,j as te,c as f,as as re,e as c,g as a,n as wa,at as oe,r as e,ak as xa,H as S,k as W,P as ie,x as H,ao as ne,bH as le,N as ya,O as ia,Q as de,bJ as ve,b1 as ka,al as ce,bA as _e,K as Ca,bC as ue}from"../chunks/C_QN0JMx.js";/* empty css                */import{authStore as Ea}from"../chunks/D3S43Cfl.js";import{i as pe,a as Aa,b as fe}from"../chunks/CevrrlX8.js";const za="http://localhost:8000/api",he=180*1e3;async function Ia(){const u=Ea.getToken(),w={"Content-Type":"application/json",Accept:"application/json"};return u&&(w.Authorization=`Bearer ${u}`),w}class me extends Error{constructor(w,d,p){super(w),this.status=d,this.errorCode=p,this.name="ApiError"}}async function Ta(u){if(!u.ok){const d=await u.json().catch(()=>({message:"Request failed"}));throw new me(d.message||"Request failed",u.status,d.error_code)}return await u.json()}async function be(u){if(!Ea.getToken())throw new Error("Not authenticated");const d=`${za}/user/indicators`,p=fe(d);u?.skipCache&&Aa.delete(p);try{return await Aa.getOrFetch(p,async()=>{const D=await fetch(d,{method:"GET",headers:await Ia(),credentials:"include"});return Ta(D)},{ttl:he,persist:!0})}catch(D){throw D}}async function ge(u){const w=`${za}/user/indicators/${u}/download`,d=await fetch(w,{method:"GET",headers:await Ia(),credentials:"include"}),p=await Ta(d);return p.success&&p.data.download_url&&window.open(p.data.download_url,"_blank"),p}function we(){pe(/user\/indicators/)}var xe=n('<meta name="robots" content="noindex, nofollow"/>'),ye=n('<div class="loading-state svelte-93o0ls"><span class="spin"><!></span> <p class="svelte-93o0ls">Loading your indicators...</p></div>'),ke=n('<div class="error-state svelte-93o0ls"><!> <h2 class="svelte-93o0ls">Failed to load indicators</h2> <p class="svelte-93o0ls"> </p> <button class="btn btn-primary">Try Again</button></div>'),Ce=n("<button> </button>"),Ae=n('<span class="status-badge status-expiring"> </span>'),Ee=n('<span class="status-badge status-expired">Expired</span>'),ze=n("<!> Active",1),Ie=n('<span class="membership-card__badge badge--expiring svelte-93o0ls"> </span>'),Te=n('<span class="membership-card__badge badge--expired svelte-93o0ls">Expired</span>'),Le=n("<!> Downloading...",1),Re=n("<!> Download",1),je=n('<button class="svelte-93o0ls"><!></button> <a class="svelte-93o0ls"><!> Documentation</a>',1),Se=n('<a class="action--renew svelte-93o0ls"><!> Renew License</a>'),De=n('<div class="col-sm-6 col-xl-4"><article><!> <div class="indicator-card__header"><div class="indicator-card__icon"><!></div> <div><!> <div class="membership-card__meta svelte-93o0ls"><span class="meta-platform svelte-93o0ls"> </span> <span class="meta-version svelte-93o0ls"> </span></div> <div class="membership-card__actions svelte-93o0ls"><!></div></div></div></article></div>'),Fe=n('<section class="dashboard__content-section svelte-93o0ls"><div class="indicators-grid row"></div></section>'),Pe=n('<p class="svelte-93o0ls">Try adjusting your search or filter criteria</p> <button class="btn btn-default btn-sm svelte-93o0ls">Clear Filters</button>',1),Be=n(`<p class="svelte-93o0ls">You haven't purchased any indicators yet.</p> <a href="/indicators" class="btn btn-orange svelte-93o0ls">Browse Indicators Store</a>`,1),He=n('<div class="empty-state svelte-93o0ls"><!> <h3>No Indicators Found</h3> <!></div>'),Ne=n('<div class="filters-bar"><div class="search-box"><!> <input id="indicator-search" type="text" placeholder="Search indicators..."/></div> <div class="filter-tabs"></div></div> <!>',1),qe=n('<header class="dashboard__header svelte-93o0ls"><div class="dashboard__header-left svelte-93o0ls"><h1 class="dashboard__page-title svelte-93o0ls"><span class="st-icon-handle-stick icon icon--lg svelte-93o0ls"></span> My Indicators</h1></div> <div class="dashboard__header-right svelte-93o0ls"><button class="refresh-btn svelte-93o0ls" aria-label="Refresh indicators"><!></button> <a href="/indicators" class="btn btn-link svelte-93o0ls">Browse All Indicators <!></a></div></header> <div class="dashboard__content svelte-93o0ls"><!></div>',1);function Oe(u,w){$a(w,!0);let d=I(""),p=I("all"),D=I(ba([])),La=I(ba({total:0,active:0,expiring:0,expired:0})),X=I(!0),G=I(!1),O=I(null),Q=I(null);async function $(l=!1){l?(f(G,!0),we()):f(X,!0),f(O,null);try{const v=await be({skipCache:l});v.success&&(f(D,v.data.indicators,!0),f(La,v.data.stats,!0))}catch(v){f(O,v instanceof Error?v.message:"Failed to load indicators",!0)}finally{f(X,!1),f(G,!1)}}ae(()=>{$()});async function Ra(l){f(Q,l.id,!0);try{await ge(l.id)}catch{}finally{f(Q,null)}}const na=wa(()=>a(D).filter(l=>a(d)===""||l.name.toLowerCase().includes(a(d).toLowerCase())||l.platform.toLowerCase().includes(a(d).toLowerCase()))),ja=[{id:"all",name:"All Platforms"},{id:"tradingview",name:"TradingView"},{id:"thinkorswim",name:"ThinkorSwim"},{id:"metatrader",name:"MetaTrader"},{id:"ninjatrader",name:"NinjaTrader"}];var la=qe();ee("93o0ls",l=>{var v=xe();re(()=>{oe.title="My Indicators | Dashboard | Revolution Trading Pros"}),t(l,v)});var aa=b(la),da=c(s(aa),2),N=s(da);N.__click=()=>$(!0);var Sa=s(N);{let l=wa(()=>a(G)?"spin":"");ga(Sa,{size:18,get class(){return a(l)}})}e(N);var va=c(N,2),Da=c(s(va));se(Da,{size:16}),e(va),e(da),e(aa);var ca=c(aa,2),Fa=s(ca);{var Pa=l=>{var v=ye(),J=s(v),ea=s(J);xa(ea,{size:48}),e(J),S(2),e(v),t(l,v)},Ba=l=>{var v=W(),J=b(v);{var ea=F=>{var P=ke(),B=s(P);ie(B,{size:48});var L=c(B,4),V=s(L,!0);e(L);var Y=c(L,2);Y.__click=()=>$(!0),e(P),T(()=>H(V,a(O))),t(F,P)},Ha=F=>{var P=Ne(),B=b(P),L=s(B),V=s(L);ne(V,{size:18});var Y=c(V,2);le(Y),e(L);var _a=c(L,2);ya(_a,21,()=>ja,de,(x,h)=>{var m=Ce();let E;m.__click=()=>f(p,a(h).id,!0);var r=s(m,!0);e(m),T(()=>{E=ia(m,1,"filter-tab svelte-93o0ls",null,E,{active:a(p)===a(h).id}),H(r,a(h).name)}),t(x,m)}),e(_a),e(B);var Na=c(B,2);{var qa=x=>{var h=Fe(),m=s(h);ya(m,21,()=>a(na),E=>E.id,(E,r)=>{var q=De(),y=s(q);let R;var Z=s(y);{var Ma=o=>{var i=Ae(),_=s(i);e(i),T(()=>H(_,`${a(r).daysUntilExpiry??""}d`)),t(o,i)},Ua=o=>{var i=W(),_=b(i);{var K=j=>{var k=Ee();t(j,k)};g(_,j=>{a(r).status==="expired"&&j(K)},!0)}t(o,i)};g(Z,o=>{a(r).status==="expiring"?o(Ma):o(Ua,!1)})}var ua=c(Z,2),sa=s(ua),Ga=s(sa);ka(Ga,{size:28}),e(sa);var ta=c(sa,2);let pa;var fa=s(ta);{var Oa=o=>{var i=ze(),_=b(i);ce(_,{size:14}),S(),t(o,i)},Qa=o=>{var i=W(),_=b(i);{var K=k=>{var C=Ie(),M=s(C);e(C),T(()=>H(M,`${a(r).daysUntilExpiry??""}d left`)),t(k,C)},j=k=>{var C=W(),M=b(C);{var z=A=>{var U=Te();t(A,U)};g(M,A=>{a(r).status==="expired"&&A(z)},!0)}t(k,C)};g(_,k=>{a(r).status==="expiring"?k(K):k(j,!1)},!0)}t(o,i)};g(fa,o=>{a(r).status==="active"?o(Oa):o(Qa,!1)})}var ra=c(fa,2),oa=s(ra),Ja=s(oa,!0);e(oa);var ha=c(oa,2),Va=s(ha);e(ha),e(ra);var ma=c(ra,2),Ya=s(ma);{var Za=o=>{var i=je(),_=b(i);_.__click=()=>Ra(a(r));var K=s(_);{var j=z=>{var A=Le(),U=b(A);xa(U,{size:14,class:"spin"}),S(),t(z,A)},k=z=>{var A=Re(),U=b(A);ue(U,{size:14}),S(),t(z,A)};g(K,z=>{a(Q)===a(r).id?z(j):z(k,!1)})}e(_);var C=c(_,2),M=s(C);_e(M,{size:14}),S(),e(C),T(()=>{_.disabled=a(Q)===a(r).id,Ca(C,"href",`/dashboard/indicators/${a(r).slug??""}/docs`)}),t(o,i)},Wa=o=>{var i=Se(),_=s(i);ga(_,{size:14}),S(),e(i),T(()=>Ca(i,"href",`/indicators/${a(r).slug??""}`)),t(o,i)};g(Ya,o=>{a(r).status!=="expired"?o(Za):o(Wa,!1)})}e(ma),e(ta),e(ua),e(y),e(q),T(()=>{R=ia(y,1,"indicator-card",null,R,{"is-expiring":a(r).status==="expiring","is-expired":a(r).status==="expired"}),pa=ia(ta,1,"indicator-card__status",null,pa,{active:a(r).status==="active",expiring:a(r).status==="expiring"}),H(Ja,a(r).platform),H(Va,`v${a(r).version??""}`)}),t(E,q)}),e(m),e(h),t(x,h)},Ka=x=>{var h=He(),m=s(h);ka(m,{size:64});var E=c(m,4);{var r=y=>{var R=Pe(),Z=c(b(R),2);Z.__click=()=>{f(d,""),f(p,"all")},t(y,R)},q=y=>{var R=Be();S(2),t(y,R)};g(E,y=>{a(d)||a(p)!=="all"?y(r):y(q,!1)})}e(h),t(x,h)};g(Na,x=>{a(na).length>0?x(qa):x(Ka,!1)})}ve(Y,()=>a(d),x=>f(d,x)),t(F,P)};g(J,F=>{a(O)?F(ea):F(Ha,!1)},!0)}t(l,v)};g(Fa,l=>{a(X)?l(Pa):l(Ba,!1)})}e(ca),T(()=>N.disabled=a(G)),t(u,la),te()}Xa(["click"]);export{Oe as component};
