import{ab as X,ac as we,d1 as W,z as Oe,p as dt,o as ct,C as mt,a3 as _t,f as c,a9 as ht,aH as Ue,c as oe,q as t,e as a,aY as pe,U as fe,aR as Ne,aW as ut,g as n,cY as gt,i as C,w as j,h as d,j as pt,E as ft,as as bt,B as be,aP as yt,at as wt,H as A,r as e,O as M,k as xt,d as Ve,b5 as kt,x as $,N as G,Q as J,P as Ct,bL as St}from"../chunks/C_QN0JMx.js";import{a as ne}from"../chunks/CCQSfPwG.js";import"../chunks/l0sNRNKZ.js";import{R as Tt,K as At}from"../chunks/GW4ChXwT.js";import{T as ye}from"../chunks/Cq_baTW3.js";import{F as Be}from"../chunks/CPL0Sydb.js";import{C as Pt}from"../chunks/B0a-D82g.js";import{A as zt}from"../chunks/BPa9I0Q8.js";import"../chunks/CIQW19Ga.js";import{P as Dt}from"../chunks/gQRjaVS-.js";import"../chunks/D3S43Cfl.js";const Me={dashboard:null,realtime:null,selectedPeriod:"30d",isLoading:!1,error:null,lastUpdated:null},It={autoTrackPageViews:!0,autoTrackClicks:!0,autoTrackScrollDepth:!0,autoTrackFormSubmissions:!0,sessionTimeout:30};function Lt(){const{subscribe:m,set:R,update:z}=we(Me);let L=null;return{subscribe:m,async loadDashboard(s="30d"){z(S=>({...S,isLoading:!0,error:null,selectedPeriod:s}));try{const S=await ne.getDashboard(s);z(E=>({...E,dashboard:S,isLoading:!1,lastUpdated:new Date().toISOString()}))}catch(S){z(E=>({...E,error:S instanceof Error?S.message:"Failed to load dashboard",isLoading:!1}))}},async loadRealtime(){try{const{metrics:s}=await ne.getRealTimeMetrics();z(S=>({...S,realtime:s}))}catch{}},startRealtimeUpdates(s=1e4){this.loadRealtime(),L&&clearInterval(L),L=setInterval(()=>{this.loadRealtime()},s)},stopRealtimeUpdates(){L&&(clearInterval(L),L=null)},setPeriod(s){z(S=>({...S,selectedPeriod:s})),this.loadDashboard(s)},reset(){this.stopRealtimeUpdates(),R(Me)},clearError(){z(s=>({...s,error:null}))}}}function Rt(){const m=we(It),R=we(null),z=[];let L=null;function s(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}function S(){let o=sessionStorage.getItem("analytics_session_id");const b=sessionStorage.getItem("analytics_last_activity"),P=Date.now(),Y=W(m).sessionTimeout*60*1e3;(!o||b&&P-parseInt(b)>Y)&&(o=s(),sessionStorage.setItem("analytics_session_id",o)),sessionStorage.setItem("analytics_last_activity",P.toString()),R.set(o)}async function E(o,b){S();const P={event_name:o,event_category:b?.category||"user_interaction",event_type:b?.type||"custom",properties:{...b,session_id:W(R),page_url:window.location.href,page_title:document.title,timestamp:new Date().toISOString(),user_agent:navigator.userAgent,screen_resolution:`${window.screen.width}x${window.screen.height}`,viewport_size:`${window.innerWidth}x${window.innerHeight}`}};try{await ne.trackEvent(P)}catch{z.push(P)}}async function p(o){if(W(m).autoTrackPageViews){S();try{await ne.trackPageView({page_url:window.location.href,page_title:document.title,page_type:o?.page_type,referrer:o?.referrer||document.referrer})}catch{}}}function _e(o,b){if(!W(m).autoTrackClicks)return;const P=b||`click_${o.tagName.toLowerCase()}`,Y={element_type:o.tagName,element_id:o.id,element_class:o.className,element_text:o.textContent?.substring(0,100),category:"click"};E(P,Y)}let O=0;function Z(){if(!W(m).autoTrackScrollDepth)return;let o=!1;const b=()=>{o||(window.requestAnimationFrame(()=>{const P=Math.round(window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100);P>O&&(O=P,[25,50,75,90,100].includes(P)&&E("scroll_depth",{depth:P,category:"engagement"})),o=!1}),o=!0)};return window.addEventListener("scroll",b,{passive:!0}),()=>{window.removeEventListener("scroll",b)}}function le(o,b){W(m).autoTrackFormSubmissions&&E("form_submit",{form_id:o,form_data:b,category:"conversion"})}async function H(){if(z.length===0)return;const o=z.splice(0,50);try{await ne.trackBatch(o)}catch{z.unshift(...o)}}function he(o=3e4){L&&clearInterval(L),L=setInterval(H,o)}return S(),he(),Z(),{config:m,sessionId:{subscribe:R.subscribe},track:E,trackPageView:p,trackClick:_e,trackFormSubmit:le,flushQueue:H,updateConfig:o=>{m.update(b=>({...b,...o}))}}}const B=Lt();Rt();const xe=X(B,m=>m.dashboard);X(B,m=>m.realtime);const Ft=X(B,m=>m.isLoading),$t=X(B,m=>m.selectedPeriod);X(xe,m=>m?.kpis?.filter(R=>R.is_primary)||[]);X(xe,m=>m?.kpis?.filter(R=>R.is_anomaly)||[]);Oe(["click","keyup","change"]);var Et=c('<meta name="description" content="Enterprise analytics dashboard with real-time metrics, funnels, cohorts, and AI insights"/>'),Ut=c('<div class="loading-state svelte-1m0gshv"><div class="spinner svelte-1m0gshv"></div> <p class="text-gray-400 mt-4">Loading analytics data...</p></div>'),Nt=c('<div class="section anomaly-section svelte-1m0gshv"><div class="section-header svelte-1m0gshv"><div class="flex items-center gap-2"><!> <h2 class="section-title svelte-1m0gshv">Anomalies & Alerts</h2></div></div> <div class="anomaly-grid svelte-1m0gshv"><div class="anomaly-card svelte-1m0gshv"><div class="anomaly-value svelte-1m0gshv"> </div> <div class="anomaly-label svelte-1m0gshv">Anomalies Detected</div></div> <div class="anomaly-card svelte-1m0gshv"><div class="anomaly-value svelte-1m0gshv"> </div> <div class="anomaly-label svelte-1m0gshv">Alerts Triggered</div></div> <div class="anomaly-card critical svelte-1m0gshv"><div class="anomaly-value svelte-1m0gshv"> </div> <div class="anomaly-label svelte-1m0gshv">Critical Issues</div></div></div></div>'),Vt=c('<div class="section svelte-1m0gshv"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Trends</h2></div> <div class="charts-grid svelte-1m0gshv"><!> <!></div></div>'),Bt=c('<div class="section svelte-1m0gshv"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Top Funnels</h2> <a href="/analytics/funnels" class="view-all-link svelte-1m0gshv">View All â†’</a></div> <div class="funnels-grid svelte-1m0gshv"></div></div>'),Mt=c('<div class="overview-grid svelte-1m0gshv"><div class="section svelte-1m0gshv"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Key Performance Indicators</h2> <p class="section-subtitle svelte-1m0gshv"> </p></div> <!></div> <!> <!> <!></div>'),Ot=c('<div class="funnels-list svelte-1m0gshv"></div>'),Ht=c('<div class="empty-state svelte-1m0gshv"><!> <h3 class="text-xl font-semibold text-gray-400 mt-4">No Funnels Yet</h3> <p class="text-gray-500 mt-2">Create your first funnel to track conversion paths</p> <button class="btn-primary mt-4 svelte-1m0gshv">Create Funnel</button></div>'),Yt=c('<div class="funnels-view"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Conversion Funnels</h2> <button class="btn-primary svelte-1m0gshv"><!> Create Funnel</button></div> <!></div>'),qt=c('<div class="cohorts-list svelte-1m0gshv"></div>'),Kt=c('<div class="empty-state svelte-1m0gshv"><!> <h3 class="text-xl font-semibold text-gray-400 mt-4">No Cohorts Yet</h3> <p class="text-gray-500 mt-2">Create cohorts to analyze user retention and behavior</p> <button class="btn-primary mt-4 svelte-1m0gshv">Create Cohort</button></div>'),Qt=c('<div class="cohorts-view"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Cohort Analysis</h2> <button class="btn-primary svelte-1m0gshv"><!> Create Cohort</button></div> <!></div>'),Wt=c('<div class="empty-state svelte-1m0gshv"><!> <h3 class="text-xl font-semibold text-gray-400 mt-4">No Attribution Data</h3> <p class="text-gray-500 mt-2">Attribution data will appear once conversions are tracked</p></div>'),jt=c('<div class="attribution-view"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Attribution Modeling</h2> <select class="model-selector svelte-1m0gshv"><option>Linear Attribution</option><option>First Click</option><option>Last Click</option><option>Time Decay</option><option>Position Based</option></select></div> <!></div>'),Gt=c('<div class="page-item svelte-1m0gshv"><span class="page-path svelte-1m0gshv"> </span> <span class="page-views svelte-1m0gshv"> </span></div>'),Jt=c('<div class="behavior-card svelte-1m0gshv"><h3 class="card-title svelte-1m0gshv">Top Pages</h3> <div class="page-list svelte-1m0gshv"></div></div>'),Xt=c('<div class="event-item svelte-1m0gshv"><span class="event-name svelte-1m0gshv"> </span> <span class="event-count svelte-1m0gshv"> </span></div>'),Zt=c('<div class="behavior-card svelte-1m0gshv"><h3 class="card-title svelte-1m0gshv">Top Events</h3> <div class="event-list svelte-1m0gshv"></div></div>'),es=c('<div class="behavior-view"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Behavior Analytics</h2></div> <div class="behavior-grid svelte-1m0gshv"><!> <!></div></div>'),ts=c('<div class="revenue-kpi-card svelte-1m0gshv"><div class="kpi-label svelte-1m0gshv"> </div> <div class="kpi-value svelte-1m0gshv"> </div> <div> </div></div>'),ss=c('<div class="revenue-chart"><!></div>'),as=c('<div class="revenue-view"><div class="section-header svelte-1m0gshv"><h2 class="section-title svelte-1m0gshv">Revenue Analytics</h2></div> <div class="revenue-grid svelte-1m0gshv"><div class="revenue-kpis svelte-1m0gshv"></div> <!></div></div>'),is=c("<!> <!> <!> <!> <!> <!>",1),rs=c('<div class="empty-state svelte-1m0gshv"><!> <h3 class="text-xl font-semibold text-gray-400 mt-4">No Data Available</h3> <p class="text-gray-500 mt-2">Analytics data will appear once events are tracked</p></div>'),vs=c('<div class="analytics-dashboard svelte-1m0gshv"><div class="dashboard-header svelte-1m0gshv"><div class="header-content svelte-1m0gshv"><div class="header-title svelte-1m0gshv"><!> <div><h1 class="text-3xl font-bold text-white">Analytics Dashboard</h1> <p class="text-gray-400 mt-1">Enterprise-grade analytics and insights</p></div></div> <div class="header-actions svelte-1m0gshv"><!></div></div></div> <div class="realtime-section svelte-1m0gshv"><!></div> <div class="dashboard-tabs svelte-1m0gshv"><button><!> Overview</button> <button><!> Funnels</button> <button><!> Cohorts</button> <button><!> Attribution</button> <button><!> Behavior</button> <button><!> Revenue</button></div> <div class="dashboard-content svelte-1m0gshv"><!></div></div>');function fs(m,R){dt(R,!1);const z=()=>be($t,"$selectedPeriod",S),L=()=>be(Ft,"$isLoading",S),s=()=>be(xe,"$dashboard",S),[S,E]=ft();let p=yt("overview");ct(()=>{B.loadDashboard(z()),B.startRealtimeUpdates(1e4)}),mt(()=>{B.stopRealtimeUpdates()});function _e(U){B.setPeriod(U)}_t();var O=vs();ht("1m0gshv",U=>{var q=Et();bt(()=>{wt.title="Analytics Dashboard | Revolution Trading Pros"}),d(U,q)});var Z=t(O),le=t(Z),H=t(le),he=t(H);Ue(he,{size:32,class:"text-yellow-400"}),A(2),e(H);var o=a(H,2),b=t(o);Dt(b,{get value(){return z()},onchange:_e}),e(o),e(le),e(Z);var P=a(Z,2),Y=t(P);Tt(Y,{}),e(P);var ue=a(P,2),ee=t(ue);let ke;ee.__click=()=>oe(p,"overview");var He=t(ee);Ue(He,{size:20}),A(),e(ee);var te=a(ee,2);let Ce;te.__click=()=>oe(p,"funnels");var Ye=t(te);pe(Ye,{size:20}),A(),e(te);var se=a(te,2);let Se;se.__click=()=>oe(p,"cohorts");var qe=t(se);fe(qe,{size:20}),A(),e(se);var ae=a(se,2);let Te;ae.__click=()=>oe(p,"attribution");var Ke=t(ae);Ne(Ke,{size:20}),A(),e(ae);var ie=a(ae,2);let Ae;ie.__click=()=>oe(p,"behavior");var Qe=t(ie);ut(Qe,{size:20}),A(),e(ie);var de=a(ie,2);let Pe;de.__click=()=>n(p)==="revenue";var We=t(de);gt(We,{size:20}),A(),e(de),e(ue);var ze=a(ue,2),je=t(ze);{var Ge=U=>{var q=Ut();d(U,q)},Je=U=>{var q=xt(),Xe=Ve(q);{var Ze=K=>{var Q=is(),ce=Ve(Q);{var tt=_=>{var h=Mt(),g=t(h),y=t(g),D=a(t(y),2),I=t(D);e(D),e(y);var w=a(y,2);At(w,{get kpis(){return s().kpis}}),e(g);var l=a(g,2);{var i=v=>{var u=Nt(),k=t(u),F=t(k),N=t(F);Ct(N,{size:24,class:"text-orange-400"}),A(2),e(F),e(k);var me=a(k,2),re=t(me),V=t(re),ve=t(V,!0);e(V),A(2),e(re);var ge=a(re,2),Fe=t(ge),nt=t(Fe,!0);e(Fe),A(2),e(ge);var $e=a(ge,2),Ee=t($e),lt=t(Ee,!0);e(Ee),A(2),e($e),e(me),e(u),j(()=>{$(ve,s().anomalies.anomalies_count),$(nt,s().anomalies.alerts_triggered),$(lt,s().anomalies.critical_count)}),d(v,u)};C(l,v=>{s().anomalies&&(s().anomalies.anomalies_count>0||s().anomalies.alerts_triggered>0)&&v(i)})}var r=a(l,2);{var T=v=>{var u=Vt(),k=a(t(u),2),F=t(k);{var N=V=>{ye(V,{get data(){return s().time_series.revenue},title:"Revenue Trend",color:"#fbbf24",formatValue:ve=>"$"+ve.toLocaleString()})};C(F,V=>{s().time_series.revenue&&V(N)})}var me=a(F,2);{var re=V=>{ye(V,{get data(){return s().time_series.users},title:"User Growth",color:"#60a5fa",formatValue:ve=>ve.toLocaleString()})};C(me,V=>{s().time_series.users&&V(re)})}e(k),e(u),d(v,u)};C(r,v=>{s().time_series&&v(T)})}var x=a(r,2);{var f=v=>{var u=Bt(),k=a(t(u),2);G(k,5,()=>s().funnels.slice(0,2),J,(F,N)=>{Be(F,{get steps(){return n(N).steps},get title(){return n(N).name}})}),e(k),e(u),d(v,u)};C(x,v=>{s().funnels&&s().funnels.length>0&&v(f)})}e(h),j(()=>$(I,`Primary metrics for ${z()??""}`)),d(_,h)};C(ce,_=>{n(p)==="overview"&&_(tt)})}var De=a(ce,2);{var st=_=>{var h=Yt(),g=t(h),y=a(t(g),2),D=t(y);pe(D,{size:18}),A(),e(y),e(g);var I=a(g,2);{var w=i=>{var r=Ot();G(r,5,()=>s().funnels,J,(T,x)=>{Be(T,{get steps(){return n(x).steps},get title(){return n(x).name}})}),e(r),d(i,r)},l=i=>{var r=Ht(),T=t(r);pe(T,{size:64,class:"text-gray-600"}),A(6),e(r),d(i,r)};C(I,i=>{s().funnels&&s().funnels.length>0?i(w):i(l,!1)})}e(h),d(_,h)};C(De,_=>{n(p)==="funnels"&&_(st)})}var Ie=a(De,2);{var at=_=>{var h=Qt(),g=t(h),y=a(t(g),2),D=t(y);fe(D,{size:18}),A(),e(y),e(g);var I=a(g,2);{var w=i=>{var r=qt();G(r,5,()=>s().cohorts,J,(T,x)=>{const f=St(()=>n(x).retention_matrix.map(v=>({cohort_date:v.cohort,cohort_size:v.size,periods:Object.fromEntries(v.periods.map((u,k)=>[k,{active_users:Math.round(v.size*u/100),retention_rate:u,total_revenue:0,avg_revenue_per_user:0}]))})));Pt(T,{get data(){return n(f)},get title(){return n(x).name}})}),e(r),d(i,r)},l=i=>{var r=Kt(),T=t(r);fe(T,{size:64,class:"text-gray-600"}),A(6),e(r),d(i,r)};C(I,i=>{s().cohorts&&s().cohorts.length>0?i(w):i(l,!1)})}e(h),d(_,h)};C(Ie,_=>{n(p)==="cohorts"&&_(at)})}var Le=a(Ie,2);{var it=_=>{var h=jt(),g=t(h),y=a(t(g),2),D=t(y);D.value=D.__value="linear";var I=a(D);I.value=I.__value="first_click";var w=a(I);w.value=w.__value="last_click";var l=a(w);l.value=l.__value="time_decay";var i=a(l);i.value=i.__value="position_based",e(y),e(g);var r=a(g,2);{var T=f=>{zt(f,{get channels(){return s().attribution.channels}})},x=f=>{var v=Wt(),u=t(v);Ne(u,{size:64,class:"text-gray-600"}),A(4),e(v),d(f,v)};C(r,f=>{s().attribution?f(T):f(x,!1)})}e(h),d(_,h)};C(Le,_=>{n(p)==="attribution"&&_(it)})}var Re=a(Le,2);{var rt=_=>{var h=es(),g=a(t(h),2),y=t(g);{var D=l=>{var i=Jt(),r=a(t(i),2);G(r,5,()=>s().top_pages,J,(T,x)=>{var f=Gt(),v=t(f),u=t(v,!0);e(v);var k=a(v,2),F=t(k);e(k),e(f),j(N=>{$(u,n(x).page_path),$(F,`${N??""} views`)},[()=>n(x).views.toLocaleString()]),d(T,f)}),e(r),e(i),d(l,i)};C(y,l=>{s().top_pages&&l(D)})}var I=a(y,2);{var w=l=>{var i=Zt(),r=a(t(i),2);G(r,5,()=>s().top_events,J,(T,x)=>{var f=Xt(),v=t(f),u=t(v,!0);e(v);var k=a(v,2),F=t(k,!0);e(k),e(f),j(N=>{$(u,n(x).event_name),$(F,N)},[()=>n(x).count.toLocaleString()]),d(T,f)}),e(r),e(i),d(l,i)};C(I,l=>{s().top_events&&l(w)})}e(g),e(h),d(_,h)};C(Re,_=>{n(p)==="behavior"&&_(rt)})}var vt=a(Re,2);{var ot=_=>{var h=as(),g=a(t(h),2),y=t(g);G(y,5,()=>s().kpis.filter(w=>w.category==="revenue"),J,(w,l)=>{var i=ts(),r=t(i),T=t(r,!0);e(r);var x=a(r,2),f=t(x,!0);e(x);var v=a(x,2);let u;var k=t(v);e(v),e(i),j(()=>{$(T,n(l).name),$(f,n(l).formatted_value),u=M(v,1,"kpi-change svelte-1m0gshv",null,u,{positive:n(l).trend==="up",negative:n(l).trend==="down"}),$(k,`${n(l).change_percentage>0?"+":""}${n(l).change_percentage??""}%`)}),d(w,i)}),e(y);var D=a(y,2);{var I=w=>{var l=ss(),i=t(l);ye(i,{get data(){return s().time_series.revenue},title:"Revenue Over Time",color:"#10b981",formatValue:r=>"$"+r.toLocaleString()}),e(l),d(w,l)};C(D,w=>{s().time_series?.revenue&&w(I)})}e(g),e(h),d(_,h)};C(vt,_=>{n(p)==="revenue"&&_(ot)})}d(K,Q)},et=K=>{var Q=rs(),ce=t(Q);kt(ce,{size:64,class:"text-gray-600"}),A(4),e(Q),d(K,Q)};C(Xe,K=>{s()?K(Ze):K(et,!1)},!0)}d(U,q)};C(je,U=>{L()?U(Ge):U(Je,!1)})}e(ze),e(O),j(()=>{ke=M(ee,1,"tab svelte-1m0gshv",null,ke,{active:n(p)==="overview"}),Ce=M(te,1,"tab svelte-1m0gshv",null,Ce,{active:n(p)==="funnels"}),Se=M(se,1,"tab svelte-1m0gshv",null,Se,{active:n(p)==="cohorts"}),Te=M(ae,1,"tab svelte-1m0gshv",null,Te,{active:n(p)==="attribution"}),Ae=M(ie,1,"tab svelte-1m0gshv",null,Ae,{active:n(p)==="behavior"}),Pe=M(de,1,"tab svelte-1m0gshv",null,Pe,{active:n(p)==="revenue"})}),d(m,O),pt(),E()}Oe(["click"]);export{fs as component};
