import{z as ha,p as ma,s as y,A as De,o as ga,f as p,a9 as La,q as a,R as ya,bM as Ee,bS as pe,di as Fe,aJ as Me,U as Oe,ao as za,e as l,i as D,w as O,bJ as xa,g as t,bG as Ca,h as c,j as wa,c as d,as as Pa,n as Re,x as o,at as ka,r as e,H as _,bH as Aa,k as Ue,d as R,N as Sa,bU as Na,bV as Ta,O as Da,K as Ve,Q as Ea}from"../chunks/C_QN0JMx.js";import{c as He}from"../chunks/L2eW2QSs.js";var Fa=p('<div class="loading-state svelte-1epeac1"><div class="spinner svelte-1epeac1"></div> <p>Loading lists...</p></div>'),Ma=p('<div class="error-state svelte-1epeac1"><p> </p> <button>Try Again</button></div>'),Oa=p('<div class="empty-state svelte-1epeac1"><!> <h3 class="svelte-1epeac1">No lists found</h3> <p class="svelte-1epeac1">Create your first list to organize your contacts</p> <a href="/admin/crm/lists/new" class="btn-primary svelte-1epeac1"><!> Create List</a></div>'),Ra=p('<span class="list-meta svelte-1epeac1"> </span>'),Ua=p("<!> Public",1),Va=p("<!> Private",1),Ha=p('<tr class="svelte-1epeac1"><td class="svelte-1epeac1"><div class="list-cell svelte-1epeac1"><div class="list-icon svelte-1epeac1"><!></div> <div class="list-info svelte-1epeac1"><span class="list-title svelte-1epeac1"> </span> <!></div></div></td><td class="svelte-1epeac1"><span><!></span></td><td class="svelte-1epeac1"> </td><td class="svelte-1epeac1"> </td><td class="svelte-1epeac1"><div class="action-buttons svelte-1epeac1"><a class="btn-icon svelte-1epeac1" title="View Contacts"><!></a> <a class="btn-icon svelte-1epeac1" title="Edit"><!></a> <button class="btn-icon danger svelte-1epeac1" title="Delete"><!></button></div></td></tr>'),Ja=p('<div class="table-container svelte-1epeac1"><table class="data-table svelte-1epeac1"><thead><tr><th class="svelte-1epeac1">List</th><th class="svelte-1epeac1">Visibility</th><th class="svelte-1epeac1">Contacts</th><th class="svelte-1epeac1">Created</th><th class="svelte-1epeac1">Actions</th></tr></thead><tbody class="svelte-1epeac1"></tbody></table></div>'),Qa=p('<div class="lists-page svelte-1epeac1"><div class="page-header svelte-1epeac1"><div><h1 class="svelte-1epeac1">Contact Lists</h1> <p class="page-description svelte-1epeac1">Organize contacts into lists for targeted campaigns</p></div> <div class="header-actions svelte-1epeac1"><button class="btn-refresh svelte-1epeac1"><!></button> <a href="/admin/crm/lists/new" class="btn-primary svelte-1epeac1"><!> New List</a></div></div> <div class="stats-grid svelte-1epeac1"><div class="stat-card svelte-1epeac1"><div class="stat-icon blue svelte-1epeac1"><!></div> <div class="stat-content svelte-1epeac1"><span class="stat-value svelte-1epeac1"> </span> <span class="stat-label svelte-1epeac1">Total Lists</span></div></div> <div class="stat-card svelte-1epeac1"><div class="stat-icon green svelte-1epeac1"><!></div> <div class="stat-content svelte-1epeac1"><span class="stat-value svelte-1epeac1"> </span> <span class="stat-label svelte-1epeac1">Public Lists</span></div></div> <div class="stat-card svelte-1epeac1"><div class="stat-icon purple svelte-1epeac1"><!></div> <div class="stat-content svelte-1epeac1"><span class="stat-value svelte-1epeac1"> </span> <span class="stat-label svelte-1epeac1">Private Lists</span></div></div> <div class="stat-card svelte-1epeac1"><div class="stat-icon amber svelte-1epeac1"><!></div> <div class="stat-content svelte-1epeac1"><span class="stat-value svelte-1epeac1"> </span> <span class="stat-label svelte-1epeac1">Total Contacts</span></div></div></div> <div class="filters-bar svelte-1epeac1"><div class="search-box svelte-1epeac1"><!> <input type="text" placeholder="Search lists..." class="svelte-1epeac1"/></div> <select class="filter-select svelte-1epeac1"><option>All Lists</option><option>Public</option><option>Private</option></select></div> <!></div>');function Ga(Je,Qe){ma(Qe,!0);let f=y(De([])),z=y(!0),x=y(""),C=y(""),h=y("all"),w=y(De({total:0,public:0,private:0,totalContacts:0}));async function E(){d(z,!0),d(x,"");try{const s=await He.getContactLists({search:t(C)||void 0,is_public:t(h)!=="all"?t(h):void 0});d(f,s.data||[],!0),d(w,{total:t(f).length,public:t(f).filter(i=>i.is_public).length,private:t(f).filter(i=>!i.is_public).length,totalContacts:t(f).reduce((i,u)=>i+u.contacts_count,0)},!0)}catch(s){d(x,s instanceof Error?s.message:"Failed to load lists",!0)}finally{d(z,!1)}}async function je(s){if(confirm("Are you sure you want to delete this list? Contacts will NOT be deleted."))try{await He.deleteContactList(s),await E()}catch(i){d(x,i instanceof Error?i.message:"Failed to delete list",!0)}}function P(s){return s.toLocaleString()}function qe(s){return new Date(s).toLocaleDateString()}let _e=Re(()=>t(f).filter(s=>{const i=!t(C)||s.title.toLowerCase().includes(t(C).toLowerCase()),u=t(h)==="all"||s.is_public===t(h);return i&&u}));ga(()=>{E()});var U=Qa();La("1epeac1",s=>{Pa(()=>{ka.title="Contact Lists - FluentCRM Pro"})});var V=a(U),ue=l(a(V),2),k=a(ue);k.__click=()=>E();var Ge=a(k);{let s=Re(()=>t(z)?"spinning":"");ya(Ge,{size:18,get class(){return t(s)}})}e(k);var be=l(k,2),Ie=a(be);Ee(Ie,{size:18}),_(),e(be),e(ue),e(V);var H=l(V,2),J=a(H),Q=a(J),Ke=a(Q);pe(Ke,{size:24}),e(Q);var fe=l(Q,2),he=a(fe),We=a(he,!0);e(he),_(2),e(fe),e(J);var j=l(J,2),q=a(j),Be=a(q);Fe(Be,{size:24}),e(q);var me=l(q,2),ge=a(me),Xe=a(ge,!0);e(ge),_(2),e(me),e(j);var G=l(j,2),I=a(G),Ye=a(I);Me(Ye,{size:24}),e(I);var Le=l(I,2),ye=a(Le),Ze=a(ye,!0);e(ye),_(2),e(Le),e(G);var ze=l(G,2),K=a(ze),$e=a(K);Oe($e,{size:24}),e(K);var xe=l(K,2),Ce=a(xe),ea=a(Ce,!0);e(Ce),_(2),e(xe),e(ze),e(H);var W=l(H,2),B=a(W),we=a(B);za(we,{size:18});var Pe=l(we,2);Aa(Pe),e(B);var X=l(B,2),Y=a(X);Y.value=Y.__value="all";var Z=l(Y);Z.value=Z.__value=!0;var ke=l(Z);ke.value=ke.__value=!1,e(X),e(W);var aa=l(W,2);{var ta=s=>{var i=Fa();c(s,i)},sa=s=>{var i=Ue(),u=R(i);{var $=m=>{var g=Ma(),A=a(g),ee=a(A,!0);e(A);var ae=l(A,2);ae.__click=()=>E(),e(g),O(()=>o(ee,t(x))),c(m,g)},la=m=>{var g=Ue(),A=R(g);{var ee=L=>{var b=Oa(),S=a(b);pe(S,{size:48});var N=l(S,6),te=a(N);Ee(te,{size:18}),_(),e(N),e(b),c(L,b)},ae=L=>{var b=Ja(),S=a(b),N=l(a(S));Sa(N,21,()=>t(_e),Ea,(te,n)=>{var se=Ha(),le=a(se),Ae=a(le),ie=a(Ae),ia=a(ie);pe(ia,{size:20}),e(ie);var Se=l(ie,2),ve=a(Se),va=a(ve,!0);e(ve);var ra=l(ve,2);{var ca=v=>{var r=Ra(),T=a(r,!0);e(r),O(()=>o(T,t(n).description)),c(v,r)};D(ra,v=>{t(n).description&&v(ca)})}e(Se),e(Ae),e(le);var re=l(le),ce=a(re),na=a(ce);{var da=v=>{var r=Ua(),T=R(r);Fe(T,{size:14}),_(),c(v,r)},oa=v=>{var r=Va(),T=R(r);Me(T,{size:14}),_(),c(v,r)};D(na,v=>{t(n).is_public?v(da):v(oa,!1)})}e(ce),e(re);var ne=l(re),pa=a(ne,!0);e(ne);var de=l(ne),_a=a(de,!0);e(de);var Ne=l(de),Te=a(Ne),F=a(Te),ua=a(F);Oe(ua,{size:16}),e(F);var M=l(F,2),ba=a(M);Na(ba,{size:16}),e(M);var oe=l(M,2);oe.__click=()=>je(t(n).id);var fa=a(oe);Ta(fa,{size:16}),e(oe),e(Te),e(Ne),e(se),O((v,r)=>{o(va,t(n).title),Da(ce,1,`visibility-badge ${t(n).is_public?"public":"private"}`,"svelte-1epeac1"),o(pa,v),o(_a,r),Ve(F,"href",`/admin/crm/lists/${t(n).id??""}`),Ve(M,"href",`/admin/crm/lists/${t(n).id??""}/edit`)},[()=>P(t(n).contacts_count),()=>qe(t(n).created_at)]),c(te,se)}),e(N),e(S),e(b),c(L,b)};D(A,L=>{t(_e).length===0?L(ee):L(ae,!1)},!0)}c(m,g)};D(u,m=>{t(x)?m($):m(la,!1)},!0)}c(s,i)};D(aa,s=>{t(z)?s(ta):s(sa,!1)})}e(U),O((s,i,u,$)=>{k.disabled=t(z),o(We,s),o(Xe,i),o(Ze,u),o(ea,$)},[()=>P(t(w).total),()=>P(t(w).public),()=>P(t(w).private),()=>P(t(w).totalContacts)]),xa(Pe,()=>t(C),s=>d(C,s)),Ca(X,()=>t(h),s=>d(h,s)),c(Je,U),wa()}ha(["click"]);export{Ga as component};
