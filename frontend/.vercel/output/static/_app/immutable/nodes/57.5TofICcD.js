import{z as Ce,p as Pe,a3 as Se,f as k,a9 as De,b2 as Ae,i as ve,al as Fe,aC as ce,e as l,F as oe,q as s,w as U,D as Ne,bJ as b,g as a,bO as $e,h as x,j as Oe,c as _,aP as j,aX as v,as as Te,at as Ue,H as n,r as t,bH as w,bI as je,x as p,O as He,K as H,Z as Je}from"../chunks/C_QN0JMx.js";var Le=k('<img class="svelte-zky7xw"/>'),Re=k('<div class="placeholder-image svelte-zky7xw"><!> <span class="svelte-zky7xw">No image</span></div>'),Xe=k('<div class="image-preview svelte-zky7xw"><img alt="Thumbnail" class="svelte-zky7xw"/> <button type="button" class="remove-btn svelte-zky7xw"><!></button></div>'),qe=k('<div class="create-page svelte-zky7xw"><div class="page-header svelte-zky7xw"><div class="svelte-zky7xw"><h1 class="svelte-zky7xw"><!> Add New Indicator</h1> <p class="svelte-zky7xw">Create a new trading indicator for your platform</p></div></div> <div class="content-container svelte-zky7xw"><div class="preview-section svelte-zky7xw"><h3 class="svelte-zky7xw">Preview</h3> <div class="product-card svelte-zky7xw"><div class="card-image svelte-zky7xw"><!></div> <div class="card-content svelte-zky7xw"><h4 class="svelte-zky7xw"> </h4> <p class="svelte-zky7xw"> </p> <div class="card-footer svelte-zky7xw"><div class="price svelte-zky7xw"> </div> <button class="buy-btn svelte-zky7xw" disabled><!> Purchase</button></div></div></div></div> <div class="form-section svelte-zky7xw"><div class="form-card svelte-zky7xw"><h3 class="svelte-zky7xw">Indicator Details</h3> <div class="form-group svelte-zky7xw"><label for="name" class="svelte-zky7xw">Indicator Name *</label> <input id="name" type="text" placeholder="e.g., Advanced RSI Indicator" class="svelte-zky7xw"/></div> <div class="form-group svelte-zky7xw"><label for="slug" class="svelte-zky7xw">URL Slug</label> <input id="slug" type="text" placeholder="advanced-rsi-indicator" class="svelte-zky7xw"/></div> <div class="form-group svelte-zky7xw"><label for="description" class="svelte-zky7xw">Description</label> <textarea id="description" placeholder="Describe what makes this indicator special..." rows="4" class="svelte-zky7xw"></textarea></div> <div class="form-group svelte-zky7xw"><label for="price" class="svelte-zky7xw">Price (USD) *</label> <div class="price-input svelte-zky7xw"><span class="currency svelte-zky7xw">$</span> <input id="price" type="number" placeholder="99.00" step="0.01" min="0" class="svelte-zky7xw"/></div></div> <div class="form-group svelte-zky7xw"><label for="thumbnail-upload" class="svelte-zky7xw">Thumbnail Image</label> <!> <label for="thumbnail-upload"><!> <input id="thumbnail-upload" type="file" accept="image/*" class="svelte-zky7xw"/></label></div> <div class="form-group svelte-zky7xw"><label class="checkbox-label svelte-zky7xw"><input type="checkbox" class="svelte-zky7xw"/> <span class="svelte-zky7xw">Active (visible to customers)</span></label></div> <div class="form-actions svelte-zky7xw"><button class="btn-secondary svelte-zky7xw">Cancel</button> <button class="btn-primary svelte-zky7xw"> </button></div></div></div></div></div>');function Ze(de,ne){Pe(ne,!1);let e=j({name:"",slug:"",description:"",price:"",thumbnail:"",type:"indicator",is_active:!0}),d=j(!1),u=j(!1);function pe(){!a(e).slug&&a(e).name&&v(e,a(e).slug=a(e).name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))}async function ue(i){const c=i.target.files?.[0];if(c){_(d,!0);try{const o=new FormData;o.append("file",c);const y=await fetch("/api/uploads/file",{method:"POST",body:o});if(y.ok){const Ie=await y.json();v(e,a(e).thumbnail=Ie.url)}}catch{}finally{_(d,!1)}}}async function me(){if(!a(e).name||!a(e).price){alert("Please fill in name and price");return}_(u,!0);try{const i=await fetch("/api/admin/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a(e))});if(i.ok)oe("/admin/indicators");else{const r=await i.json();alert(r.message||"Failed to create indicator")}}catch{alert("Failed to save indicator")}finally{_(u,!1)}}Se();var z=qe();De("zky7xw",i=>{Te(()=>{Ue.title="Add New Indicator | Admin"})});var f=s(z),J=s(f),L=s(J),ye=s(L);Ae(ye,{size:32}),n(),t(L),n(2),t(J),t(f);var R=l(f,2),g=s(R),X=l(s(g),2),h=s(X),be=s(h);{var xe=i=>{var r=Le();U(()=>{H(r,"src",a(e).thumbnail),H(r,"alt",a(e).name||"Indicator")}),x(i,r)},_e=i=>{var r=Re(),c=s(r);ce(c,{size:48}),n(2),t(r),x(i,r)};ve(be,i=>{a(e).thumbnail?i(xe):i(_e,!1)})}t(h);var q=l(h,2),I=s(q),we=s(I,!0);t(I);var C=l(I,2),ke=s(C,!0);t(C);var K=l(C,2),P=s(K),ze=s(P);t(P);var Z=l(P,2),fe=s(Z);Fe(fe,{size:16}),n(),t(Z),t(K),t(q),t(X),t(g);var B=l(g,2),E=s(B),S=l(s(E),2),D=l(s(S),2);w(D),t(S);var A=l(S,2),G=l(s(A),2);w(G),t(A);var F=l(A,2),M=l(s(F),2);je(M),t(F);var N=l(F,2),Q=l(s(N),2),V=l(s(Q),2);w(V),t(Q),t(N);var $=l(N,2),W=l(s($),2);{var ge=i=>{var r=Xe(),c=s(r),o=l(c,2);o.__click=()=>v(e,a(e).thumbnail="");var y=s(o);Je(y,{size:16}),t(o),t(r),U(()=>H(c,"src",a(e).thumbnail)),x(i,r)};ve(W,i=>{a(e).thumbnail&&i(ge)})}var O=l(W,2);let Y;var ee=s(O);ce(ee,{size:20});var ae=l(ee),se=l(ae);se.__change=ue,t(O),t($);var T=l($,2),te=s(T),ie=s(te);w(ie),n(2),t(te),t(T);var le=l(T,2),re=s(le);re.__click=()=>oe("/admin/indicators");var m=l(re,2);m.__click=me;var he=s(m,!0);t(m),t(le),t(E),t(B),t(R),t(z),U(()=>{p(we,a(e).name||"Indicator Name"),p(ke,a(e).description||"Add a description..."),p(ze,`$${(a(e).price||"0.00")??""}`),Y=He(O,1,"upload-btn svelte-zky7xw",null,Y,{uploading:a(d)}),p(ae,` ${a(d)?"Uploading...":"Upload Image"} `),se.disabled=a(d),m.disabled=a(u),p(he,a(u)?"Creating...":"Create Indicator")}),Ne("blur",D,pe),b(D,()=>a(e).name,i=>v(e,a(e).name=i)),b(G,()=>a(e).slug,i=>v(e,a(e).slug=i)),b(M,()=>a(e).description,i=>v(e,a(e).description=i)),b(V,()=>a(e).price,i=>v(e,a(e).price=i)),$e(ie,()=>a(e).is_active,i=>v(e,a(e).is_active=i)),x(de,z),Oe()}Ce(["click","change"]);export{Ze as component};
