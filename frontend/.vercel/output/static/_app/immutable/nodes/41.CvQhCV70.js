import{z as La,p as Ca,s as f,A as Ht,o as wa,f as k,a9 as za,q as a,R as Sa,bM as It,dl as dt,bA as Aa,bz as qa,aH as Mt,ao as Ta,e as v,i as _t,w as ut,bJ as Ea,g as e,bG as Ra,h as n,j as Na,c,as as Ua,n as Pt,x as r,at as $a,r as t,H as g,bH as Fa,k as Qt,d as Vt,N as Ha,bZ as Ia,bU as Ma,bV as Pa,O as Qa,K as yt,Q as Va}from"../chunks/C_QN0JMx.js";import{c as jt}from"../chunks/L2eW2QSs.js";var ja=k('<div class="loading-state svelte-1vi4yox"><div class="spinner svelte-1vi4yox"></div> <p>Loading smart links...</p></div>'),Da=k('<div class="error-state svelte-1vi4yox"><p> </p> <button>Try Again</button></div>'),Ga=k('<div class="empty-state svelte-1vi4yox"><!> <h3 class="svelte-1vi4yox">No smart links found</h3> <p class="svelte-1vi4yox">Create your first smart link to trigger actions when contacts click</p> <a href="/admin/crm/smart-links/new" class="btn-primary svelte-1vi4yox"><!> Create Smart Link</a></div>'),Ja=k('<tr class="svelte-1vi4yox"><td class="svelte-1vi4yox"><div class="link-cell svelte-1vi4yox"><div class="link-icon svelte-1vi4yox"><!></div> <div class="link-info svelte-1vi4yox"><span class="link-title svelte-1vi4yox"> </span> <span class="link-meta svelte-1vi4yox"> </span></div></div></td><td class="svelte-1vi4yox"><span> </span></td><td class="svelte-1vi4yox"><div class="url-cell svelte-1vi4yox"><code class="short-url svelte-1vi4yox"> </code> <button class="btn-copy svelte-1vi4yox" title="Copy"><!></button></div></td><td class="svelte-1vi4yox"><span class="target-url svelte-1vi4yox"> </span></td><td class="svelte-1vi4yox"> </td><td class="svelte-1vi4yox"><span class="click-stats svelte-1vi4yox"> </span></td><td class="svelte-1vi4yox"><div class="action-buttons svelte-1vi4yox"><a class="btn-icon svelte-1vi4yox" title="View Analytics"><!></a> <a class="btn-icon svelte-1vi4yox" title="Edit"><!></a> <button class="btn-icon danger svelte-1vi4yox" title="Delete"><!></button></div></td></tr>'),Ka=k('<div class="table-container svelte-1vi4yox"><table class="data-table svelte-1vi4yox"><thead><tr><th class="svelte-1vi4yox">Smart Link</th><th class="svelte-1vi4yox">Status</th><th class="svelte-1vi4yox">Short URL</th><th class="svelte-1vi4yox">Target URL</th><th class="svelte-1vi4yox">Actions</th><th class="svelte-1vi4yox">Clicks</th><th class="svelte-1vi4yox"></th></tr></thead><tbody class="svelte-1vi4yox"></tbody></table></div>'),Oa=k('<div class="smart-links-page svelte-1vi4yox"><div class="page-header svelte-1vi4yox"><div><h1 class="svelte-1vi4yox">Smart Links</h1> <p class="page-description svelte-1vi4yox">Create action links that trigger automations when clicked</p></div> <div class="header-actions svelte-1vi4yox"><button class="btn-refresh svelte-1vi4yox"><!></button> <a href="/admin/crm/smart-links/new" class="btn-primary svelte-1vi4yox"><!> New Smart Link</a></div></div> <div class="stats-grid svelte-1vi4yox"><div class="stat-card svelte-1vi4yox"><div class="stat-icon blue svelte-1vi4yox"><!></div> <div class="stat-content svelte-1vi4yox"><span class="stat-value svelte-1vi4yox"> </span> <span class="stat-label svelte-1vi4yox">Total Links</span></div></div> <div class="stat-card svelte-1vi4yox"><div class="stat-icon green svelte-1vi4yox"><!></div> <div class="stat-content svelte-1vi4yox"><span class="stat-value svelte-1vi4yox"> </span> <span class="stat-label svelte-1vi4yox">Active Links</span></div></div> <div class="stat-card svelte-1vi4yox"><div class="stat-icon purple svelte-1vi4yox"><!></div> <div class="stat-content svelte-1vi4yox"><span class="stat-value svelte-1vi4yox"> </span> <span class="stat-label svelte-1vi4yox">Total Clicks</span></div></div> <div class="stat-card svelte-1vi4yox"><div class="stat-icon amber svelte-1vi4yox"><!></div> <div class="stat-content svelte-1vi4yox"><span class="stat-value svelte-1vi4yox"> </span> <span class="stat-label svelte-1vi4yox">Unique Clicks</span></div></div></div> <div class="filters-bar svelte-1vi4yox"><div class="search-box svelte-1vi4yox"><!> <input type="text" placeholder="Search smart links..." class="svelte-1vi4yox"/></div> <select class="filter-select svelte-1vi4yox"><option>All Links</option><option>Active</option><option>Inactive</option></select></div> <!></div>');function Wa(Dt,Gt){Ca(Gt,!0);let u=f(Ht([])),L=f(!0),C=f(""),y=f(""),x=f("all"),w=f(Ht({total:0,active:0,totalClicks:0,uniqueClicks:0}));async function T(){c(L,!0),c(C,"");try{const s={search:e(y)||void 0,is_active:e(x)!=="all"?e(x):void 0},l=await jt.getSmartLinks(s);c(u,l.data||[],!0),c(w,{total:e(u).length,active:e(u).filter(o=>o.is_active).length,totalClicks:e(u).reduce((o,d)=>o+d.click_count,0),uniqueClicks:e(u).reduce((o,d)=>o+d.unique_clicks,0)},!0)}catch(s){c(C,s instanceof Error?s.message:"Failed to load smart links",!0)}finally{c(L,!1)}}async function Jt(s){if(confirm("Are you sure you want to delete this smart link?"))try{await jt.deleteSmartLink(s),await T()}catch(l){c(C,l instanceof Error?l.message:"Failed to delete smart link",!0)}}function Kt(s){navigator.clipboard.writeText(s)}function p(s){return s.toLocaleString()}let xt=Pt(()=>e(u).filter(s=>{const l=!e(y)||s.title.toLowerCase().includes(e(y).toLowerCase())||s.short.toLowerCase().includes(e(y).toLowerCase()),o=e(x)==="all"||s.is_active===e(x);return l&&o}));wa(()=>{T()});var N=Oa();za("1vi4yox",s=>{Ua(()=>{$a.title="Smart Links - FluentCRM Pro"})});var U=a(N),pt=v(a(U),2),z=a(pt);z.__click=()=>T();var Ot=a(z);{let s=Pt(()=>e(L)?"spinning":"");Sa(Ot,{size:18,get class(){return e(s)}})}t(z);var ht=v(z,2),Zt=a(ht);It(Zt,{size:18}),g(),t(ht),t(pt),t(U);var $=v(U,2),F=a($),H=a(F),Bt=a(H);dt(Bt,{size:24}),t(H);var mt=v(H,2),bt=a(mt),Wt=a(bt,!0);t(bt),g(2),t(mt),t(F);var I=v(F,2),M=a(I),Xt=a(M);Aa(Xt,{size:24}),t(M);var ft=v(M,2),gt=a(ft),Yt=a(gt,!0);t(gt),g(2),t(ft),t(I);var P=v(I,2),Q=a(P),ta=a(Q);qa(ta,{size:24}),t(Q);var kt=v(Q,2),Lt=a(kt),aa=a(Lt,!0);t(Lt),g(2),t(kt),t(P);var Ct=v(P,2),V=a(Ct),ea=a(V);Mt(ea,{size:24}),t(V);var wt=v(V,2),zt=a(wt),sa=a(zt,!0);t(zt),g(2),t(wt),t(Ct),t($);var j=v($,2),D=a(j),St=a(D);Ta(St,{size:18});var At=v(St,2);Fa(At),t(D);var G=v(D,2),J=a(G);J.value=J.__value="all";var K=v(J);K.value=K.__value=!0;var qt=v(K);qt.value=qt.__value=!1,t(G),t(j);var va=v(j,2);{var ia=s=>{var l=ja();n(s,l)},la=s=>{var l=Qt(),o=Vt(l);{var d=h=>{var m=Da(),S=a(m),O=a(S,!0);t(S);var Z=v(S,2);Z.__click=()=>T(),t(m),ut(()=>r(O,e(C))),n(h,m)},ra=h=>{var m=Qt(),S=Vt(m);{var O=b=>{var _=Ga(),A=a(_);dt(A,{size:48});var q=v(A,6),B=a(q);It(B,{size:18}),g(),t(q),t(_),n(b,_)},Z=b=>{var _=Ka(),A=a(_),q=v(a(A));Ha(q,21,()=>e(xt),Va,(B,i)=>{var W=Ja(),X=a(W),Tt=a(X),Y=a(Tt),oa=a(Y);dt(oa,{size:20}),t(Y);var Et=v(Y,2),tt=a(Et),ca=a(tt,!0);t(tt);var Rt=v(tt,2),na=a(Rt);t(Rt),t(Et),t(Tt),t(X);var at=v(X),et=a(at),da=a(et,!0);t(et),t(at);var st=v(at),Nt=a(st),vt=a(Nt),_a=a(vt,!0);t(vt);var it=v(vt,2);it.__click=()=>Kt(e(i).short_url||e(i).short);var ua=a(it);Ia(ua,{size:14}),t(it),t(Nt),t(st);var lt=v(st),rt=a(lt),ya=a(rt,!0);t(rt),t(lt);var ot=v(lt),xa=a(ot,!0);t(ot);var ct=v(ot),Ut=a(ct),pa=a(Ut);t(Ut),t(ct);var $t=v(ct),Ft=a($t),E=a(Ft),ha=a(E);Mt(ha,{size:16}),t(E);var R=v(E,2),ma=a(R);Ma(ma,{size:16}),t(R);var nt=v(R,2);nt.__click=()=>Jt(e(i).id);var ba=a(nt);Pa(ba,{size:16}),t(nt),t(Ft),t($t),t(W),ut((fa,ga,ka)=>{r(ca,e(i).title),r(na,`${(e(i).actions?.length||0)??""} actions configured`),Qa(et,1,`status-badge ${e(i).is_active?"active":"inactive"}`,"svelte-1vi4yox"),r(da,e(i).is_active?"Active":"Inactive"),r(_a,e(i).short),yt(rt,"title",e(i).target_url),r(ya,fa),r(xa,e(i).actions?.length||0),r(pa,`${ga??""} / ${ka??""}`),yt(E,"href",`/admin/crm/smart-links/${e(i).id??""}`),yt(R,"href",`/admin/crm/smart-links/${e(i).id??""}/edit`)},[()=>e(i).target_url?e(i).target_url.length>40?e(i).target_url.slice(0,40)+"...":e(i).target_url:"-",()=>p(e(i).click_count),()=>p(e(i).unique_clicks)]),n(B,W)}),t(q),t(A),t(_),n(b,_)};_t(S,b=>{e(xt).length===0?b(O):b(Z,!1)},!0)}n(h,m)};_t(o,h=>{e(C)?h(d):h(ra,!1)},!0)}n(s,l)};_t(va,s=>{e(L)?s(ia):s(la,!1)})}t(N),ut((s,l,o,d)=>{z.disabled=e(L),r(Wt,s),r(Yt,l),r(aa,o),r(sa,d)},[()=>p(e(w).total),()=>p(e(w).active),()=>p(e(w).totalClicks),()=>p(e(w).uniqueClicks)]),Ea(At,()=>e(y),s=>c(y,s)),Ra(G,()=>e(x),s=>c(x,s)),n(Dt,N),Na()}La(["click"]);export{Wa as component};
