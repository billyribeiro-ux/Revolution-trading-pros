import{ab as c,ac as f,d1 as d}from"./C_QN0JMx.js";const m="revolution_cart";function p(){try{const n=localStorage.getItem(m);if(n)return JSON.parse(n)}catch{}return{items:[]}}function y(){const{subscribe:n,set:o,update:s}=f(p());return n(t=>{try{localStorage.setItem(m,JSON.stringify(t))}catch{}}),{subscribe:n,addItem:t=>{let r=!1;return s(e=>(e.items.findIndex(a=>a.id===t.id&&a.interval===t.interval)>=0?r=!1:(e.items.push({...t,quantity:1}),r=!0),e)),r},hasItem:(t,r)=>d({subscribe:n}).items.some(i=>i.id===t&&i.interval===r),hasAnyVariant:t=>d({subscribe:n}).items.find(e=>e.id===t),removeItem:(t,r)=>{s(e=>(e.items=e.items.filter(i=>!(i.id===t&&i.interval===r)),e))},updateQuantity:(t,r,e)=>{s(i=>{const a=i.items.find(u=>u.id===t&&u.interval===e);return a&&(r<=0?i.items=i.items.filter(u=>!(u.id===t&&u.interval===e)):a.quantity=Math.min(r,1)),i})},applyCoupon:(t,r)=>{s(e=>(e.items=e.items.map(i=>({...i,couponCode:t,discount:r})),e))},removeCoupon:()=>{s(t=>(t.items=t.items.map(r=>{const{couponCode:e,discount:i,...a}=r;return a}),t))},clearCart:()=>{o({items:[]})},getItemCount:t=>t.items.reduce((r,e)=>r+e.quantity,0),getTotal:t=>t.items.reduce((r,e)=>r+e.price*e.quantity,0)}}const l=y(),C=c(l,n=>n.items.reduce((o,s)=>o+s.quantity,0)),g=c(l,n=>n.items.reduce((o,s)=>o+s.price*s.quantity,0)),v=c(C,n=>n>0);export{l as a,g as b,C as c,v as h};
