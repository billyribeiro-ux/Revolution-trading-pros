import{authStore as d}from"./D3S43Cfl.js";const y={},l=y.VITE_API_BASE_URL||"http://localhost:8000/api";class h{getAuthHeaders(){const t=d.getToken(),e={"Content-Type":"application/json",Accept:"application/json"};return t&&(e.Authorization=`Bearer ${t}`),e}async request(t,e,n,s){let c=`${l}${e}`;if(s){const r=new URLSearchParams;Object.entries(s).forEach(([u,i])=>{i!=null&&r.append(u,String(i))});const o=r.toString();o&&(c+=`?${o}`)}const a=await fetch(c,{method:t,headers:this.getAuthHeaders(),body:n?JSON.stringify(n):void 0});if(!a.ok){const r=await a.json().catch(()=>({message:"Request failed"}));throw new Error(r.message||`HTTP ${a.status}`)}return a.json()}async trackEvent(t){return this.request("POST","/analytics/track",t)}async trackPageView(t){return this.request("POST","/analytics/pageview",t)}async trackBatch(t){return this.request("POST","/analytics/batch",{events:t})}async getDashboard(t="30d"){return this.request("GET","/admin/analytics/dashboard",void 0,{period:t})}async getKpiDefinitions(){return this.request("GET","/admin/analytics/kpis")}async getKpi(t,e="30d",n="daily"){return this.request("GET",`/admin/analytics/kpis/${t}`,void 0,{period:e,granularity:n})}async getFunnelAnalysis(t,e="30d"){return this.request("GET",`/admin/analytics/funnels/${t}`,void 0,{period:e})}async getFunnelDropOff(t,e="30d"){return this.request("GET",`/admin/analytics/funnels/${t}/dropoff`,void 0,{period:e})}async getFunnelBySegment(t,e,n="30d"){return this.request("GET",`/admin/analytics/funnels/${t}/segment`,void 0,{segment_field:e,period:n})}async getCohortMatrix(t,e="90d"){return this.request("GET",`/admin/analytics/cohorts/${t}/matrix`,void 0,{period:e})}async getCohortCurve(t,e="90d"){return this.request("GET",`/admin/analytics/cohorts/${t}/curve`,void 0,{period:e})}async getCohortLTV(t,e="90d"){return this.request("GET",`/admin/analytics/cohorts/${t}/ltv`,void 0,{period:e})}async getCampaignAttribution(t="linear",e="30d"){return this.request("GET","/admin/analytics/attribution/campaigns",void 0,{model:t,period:e})}async getConversionPaths(t="30d",e=20){return this.request("GET","/admin/analytics/attribution/paths",void 0,{period:t,limit:e})}async compareAttributionModels(t="30d"){return this.request("GET","/admin/analytics/attribution/compare",void 0,{period:t})}async getForecast(t,e=14,n="linear",s="daily"){return this.request("GET",`/admin/analytics/forecast/${t}`,void 0,{periods_ahead:e,model:n,granularity:s})}async getForecastAccuracy(t,e="daily"){return this.request("GET",`/admin/analytics/forecast/${t}/accuracy`,void 0,{granularity:e})}async getSegments(){return this.request("GET","/admin/analytics/segments")}async getSegment(t){return this.request("GET",`/admin/analytics/segments/${t}`)}async getEventTimeSeries(t,e="day",n="30d"){return this.request("GET","/admin/analytics/events/timeseries",void 0,{event_name:t,granularity:e,period:n})}async getEventBreakdown(t,e="30d"){return this.request("GET","/admin/analytics/events/breakdown",void 0,{dimension:t,period:e})}async getRealTimeMetrics(){return this.request("GET","/admin/analytics/realtime")}async getEvents(t){return this.request("GET","/admin/analytics/events",void 0,t)}async getFunnels(t){return this.request("GET","/admin/analytics/funnels",void 0,{period:t})}async createFunnel(t){return this.request("POST","/admin/analytics/funnels",t)}async getCohorts(t){return this.request("GET","/admin/analytics/cohorts",void 0,t)}async createCohort(t){return this.request("POST","/admin/analytics/cohorts",t)}async createSegment(t){return this.request("POST","/admin/analytics/segments",t)}async updateSegment(t,e){return this.request("PUT",`/admin/analytics/segments/${t}`,e)}async deleteSegment(t){return this.request("DELETE",`/admin/analytics/segments/${t}`)}async getChannelAttribution(t="linear",e="30d"){return this.request("GET","/admin/analytics/attribution/channels",void 0,{model:t,period:e})}async getReports(){return this.request("GET","/admin/analytics/reports")}async getReport(t){return this.request("GET",`/admin/analytics/reports/${t}`)}async createReport(t){return this.request("POST","/admin/analytics/reports",t)}async updateReport(t,e){return this.request("PUT",`/admin/analytics/reports/${t}`,e)}async deleteReport(t){return this.request("DELETE",`/admin/analytics/reports/${t}`)}async runReport(t){return this.request("POST",`/admin/analytics/reports/${t}/run`)}}const T=new h;export{T as a};
