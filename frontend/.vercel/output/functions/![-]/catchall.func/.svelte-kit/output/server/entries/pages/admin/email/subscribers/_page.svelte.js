import{k as M,w as n,a0 as B,$ as F,bL as _,e as l,K as z,X as x,r as N,a4 as R,c,a1 as I,ab as k,d as w,a as K,f as L,b as Q}from"../../../../../chunks/vendor-svelte.js";import{a as V}from"../../../../../chunks/toast.js";import"../../../../../chunks/auth.js";import{e as X}from"../../../../../chunks/email.js";function W(A,q){A.component(s=>{let b=!0,v=[],p=0,e=1,j=25,g="",m="all",f=[],u=new Set,o={total:0,subscribed:0,unsubscribed:0,bounced:0};async function U(){b=!0;try{const t={page:e,per_page:j};f.length>0&&(t.tags=f);const i=await X.getSubscribers(t);v=i.subscribers,p=i.total}catch{V.error("Failed to load subscribers")}finally{b=!1}}function D(t){switch(t){case"subscribed":return"bg-emerald-500/20 text-emerald-400";case"unsubscribed":return"bg-slate-500/20 text-slate-400";case"bounced":return"bg-red-500/20 text-red-400";case"complained":return"bg-yellow-500/20 text-yellow-400";default:return"bg-slate-500/20 text-slate-400"}}function y(t){return t?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}function C(){e=1,U()}let d=Math.ceil(p/j);if(M("7t4ij7",s,t=>{t.title(i=>{i.push("<title>Email Subscribers | Admin</title>")})}),s.push('<div class="subscribers-page svelte-7t4ij7"><div class="page-header svelte-7t4ij7"><div class="header-content svelte-7t4ij7"><div class="header-title svelte-7t4ij7"><div class="title-icon svelte-7t4ij7">'),n(s,{size:28}),s.push('<!----></div> <div><h1 class="svelte-7t4ij7">Email Subscribers</h1> <p class="subtitle svelte-7t4ij7">Manage your email audience and subscriber lists</p></div></div> <div class="header-actions svelte-7t4ij7"><button class="btn-secondary svelte-7t4ij7">'),B(s,{size:18}),s.push('<!----> Export</button> <button class="btn-secondary svelte-7t4ij7">'),F(s,{size:18}),s.push('<!----> Import</button> <button class="btn-primary svelte-7t4ij7">'),_(s,{size:18}),s.push('<!----> Add Subscriber</button></div></div></div> <div class="stats-grid svelte-7t4ij7"><div class="stat-card svelte-7t4ij7"><div class="stat-icon blue svelte-7t4ij7">'),n(s,{size:24}),s.push(`<!----></div> <div class="stat-content svelte-7t4ij7"><div class="stat-value svelte-7t4ij7">${l(o.total.toLocaleString())}</div> <div class="stat-label svelte-7t4ij7">Total Subscribers</div></div></div> <div class="stat-card svelte-7t4ij7"><div class="stat-icon emerald svelte-7t4ij7">`),z(s,{size:24}),s.push(`<!----></div> <div class="stat-content svelte-7t4ij7"><div class="stat-value svelte-7t4ij7">${l(o.subscribed.toLocaleString())}</div> <div class="stat-label svelte-7t4ij7">Active</div></div></div> <div class="stat-card svelte-7t4ij7"><div class="stat-icon slate svelte-7t4ij7">`),x(s,{size:24}),s.push(`<!----></div> <div class="stat-content svelte-7t4ij7"><div class="stat-value svelte-7t4ij7">${l(o.unsubscribed.toLocaleString())}</div> <div class="stat-label svelte-7t4ij7">Unsubscribed</div></div></div> <div class="stat-card svelte-7t4ij7"><div class="stat-icon red svelte-7t4ij7">`),N(s,{size:24}),s.push(`<!----></div> <div class="stat-content svelte-7t4ij7"><div class="stat-value svelte-7t4ij7">${l(o.bounced.toLocaleString())}</div> <div class="stat-label svelte-7t4ij7">Bounced</div></div></div></div> <div class="filters-bar svelte-7t4ij7"><div class="search-box svelte-7t4ij7">`),R(s,{size:18}),s.push(`<!----> <input type="text" placeholder="Search by email or name..."${c("value",g)} class="svelte-7t4ij7"/></div> <div class="filter-group svelte-7t4ij7">`),s.select({value:m,onchange:C,class:""},t=>{t.option({value:"all"},i=>{i.push("All Status")}),t.option({value:"subscribed"},i=>{i.push("Subscribed")}),t.option({value:"unsubscribed"},i=>{i.push("Unsubscribed")}),t.option({value:"bounced"},i=>{i.push("Bounced")}),t.option({value:"complained"},i=>{i.push("Complained")})},"svelte-7t4ij7"),s.push('</div> <button class="btn-icon svelte-7t4ij7">'),I(s,{size:18}),s.push("<!----></button> "),u.size>0?(s.push("<!--[-->"),s.push(`<div class="bulk-actions svelte-7t4ij7"><span>${l(u.size)} selected</span> <button class="btn-danger small svelte-7t4ij7">`),k(s,{size:16}),s.push("<!----> Delete</button></div>")):s.push("<!--[!-->"),s.push('<!--]--></div> <div class="table-container svelte-7t4ij7">'),b)s.push("<!--[-->"),s.push('<div class="loading-state svelte-7t4ij7"><div class="spinner svelte-7t4ij7"></div> <p>Loading subscribers...</p></div>');else{if(s.push("<!--[!-->"),v.length===0)s.push("<!--[-->"),s.push('<div class="empty-state svelte-7t4ij7">'),n(s,{size:48,stroke:1}),s.push('<!----> <h3 class="svelte-7t4ij7">No subscribers found</h3> <p class="svelte-7t4ij7">Add your first subscriber or import from a CSV file</p> <button class="btn-primary svelte-7t4ij7">'),_(s,{size:18}),s.push("<!----> Add Subscriber</button></div>");else{s.push("<!--[!-->"),s.push(`<table class="subscribers-table svelte-7t4ij7"><thead><tr><th class="checkbox-col svelte-7t4ij7"><input type="checkbox"${c("checked",u.size===v.length,!0)}/></th><th class="svelte-7t4ij7">Subscriber</th><th class="svelte-7t4ij7">Status</th><th class="svelte-7t4ij7">Tags</th><th class="svelte-7t4ij7">Email Score</th><th class="svelte-7t4ij7">Subscribed</th><th class="svelte-7t4ij7">Last Activity</th><th class="svelte-7t4ij7"></th></tr></thead><tbody class="svelte-7t4ij7"><!--[-->`);const t=w(v);for(let i=0,E=t.length;i<E;i++){let a=t[i];s.push(`<tr class="svelte-7t4ij7"><td class="checkbox-col svelte-7t4ij7"><input type="checkbox"${c("checked",u.has(a.id),!0)}/></td><td class="svelte-7t4ij7"><div class="subscriber-info svelte-7t4ij7"><div class="subscriber-avatar svelte-7t4ij7">${l((a.first_name?.[0]||a.email[0]).toUpperCase())}</div> <div><div class="subscriber-name svelte-7t4ij7">${l(a.first_name||"")} ${l(a.last_name||"")}</div> <div class="subscriber-email svelte-7t4ij7">${l(a.email)}</div></div></div></td><td class="svelte-7t4ij7"><span${K(`status-badge ${L(D(a.status))}`,"svelte-7t4ij7")}>${l(a.status)}</span></td><td class="svelte-7t4ij7"><div class="tags-list svelte-7t4ij7"><!--[-->`);const S=w(a.tags.slice(0,3));for(let h=0,P=S.length;h<P;h++){let T=S[h];s.push(`<span class="tag svelte-7t4ij7">${l(T)}</span>`)}s.push("<!--]--> "),a.tags.length>3?(s.push("<!--[-->"),s.push(`<span class="tag more svelte-7t4ij7">+${l(a.tags.length-3)}</span>`)):s.push("<!--[!-->"),s.push(`<!--]--></div></td><td class="svelte-7t4ij7"><div class="score-bar svelte-7t4ij7"><div class="score-fill svelte-7t4ij7"${Q(`width: ${L(a.email_score)}%`)}></div> <span class="svelte-7t4ij7">${l(a.email_score)}</span></div></td><td class="svelte-7t4ij7">${l(y(a.subscribed_at))}</td><td class="svelte-7t4ij7">${l(y(a.last_opened_at||a.last_clicked_at))}</td><td class="svelte-7t4ij7"><div class="row-actions svelte-7t4ij7">`),a.status==="subscribed"?(s.push("<!--[-->"),s.push('<button class="btn-icon small svelte-7t4ij7" title="Unsubscribe">'),x(s,{size:16}),s.push("<!----></button>")):(s.push("<!--[!-->"),a.status==="unsubscribed"?(s.push("<!--[-->"),s.push('<button class="btn-icon small svelte-7t4ij7" title="Resubscribe">'),z(s,{size:16}),s.push("<!----></button>")):s.push("<!--[!-->"),s.push("<!--]-->")),s.push('<!--]--> <button class="btn-icon small danger svelte-7t4ij7" title="Delete">'),k(s,{size:16}),s.push("<!----></button></div></td></tr>")}s.push("<!--]--></tbody></table> "),d>1?(s.push("<!--[-->"),s.push(`<div class="pagination svelte-7t4ij7"><button class="btn-secondary small svelte-7t4ij7"${c("disabled",e===1,!0)}>Previous</button> <span class="page-info svelte-7t4ij7">Page ${l(e)} of ${l(d)} (${l(p.toLocaleString())} total)</span> <button class="btn-secondary small svelte-7t4ij7"${c("disabled",e===d,!0)}>Next</button></div>`)):s.push("<!--[!-->"),s.push("<!--]-->")}s.push("<!--]-->")}s.push("<!--]--></div></div> "),s.push("<!--[!-->"),s.push("<!--]-->")})}export{W as default};
