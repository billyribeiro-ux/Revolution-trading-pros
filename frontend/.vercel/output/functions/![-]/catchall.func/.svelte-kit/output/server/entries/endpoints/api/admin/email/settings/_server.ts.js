import{json as r}from"@sveltejs/kit";let e={provider:"smtp",host:process.env.SMTP_HOST||"",port:parseInt(process.env.SMTP_PORT||"587"),username:process.env.SMTP_USERNAME||"",password:process.env.SMTP_PASSWORD||"",encryption:process.env.SMTP_ENCRYPTION||"tls",from_address:process.env.SMTP_FROM_ADDRESS||"",from_name:process.env.SMTP_FROM_NAME||"Revolution Trading Pros"};const n=async({locals:o})=>{try{return r({...e,password:e.password?"••••••••":""})}catch{return r({error:"Failed to load email settings"},{status:500})}},p=async({request:o,locals:t})=>{try{const s=await o.json();return!s.host||!s.port||!s.from_address||!s.from_name?r({success:!1,error:"Missing required fields"},{status:400}):(e={provider:s.provider||"smtp",host:s.host,port:parseInt(s.port),username:s.username||"",password:s.password&&s.password!=="••••••••"?s.password:e.password,encryption:s.encryption||"tls",from_address:s.from_address,from_name:s.from_name},r({success:!0,message:"Settings saved successfully!"}))}catch{return r({success:!1,error:"Failed to save settings"},{status:500})}};export{n as GET,p as POST};
