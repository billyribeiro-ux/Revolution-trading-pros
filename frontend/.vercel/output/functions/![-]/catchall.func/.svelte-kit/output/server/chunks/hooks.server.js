import{sequence as i}from"@sveltejs/kit/hooks";const n=async({event:r,resolve:a})=>{const s=await a(r),e=new Headers(s.headers);e.set("X-XSS-Protection","1; mode=block"),e.set("X-Content-Type-Options","nosniff"),e.set("X-Frame-Options","SAMEORIGIN"),e.set("Referrer-Policy","strict-origin-when-cross-origin"),e.set("Permissions-Policy","accelerometer=(), autoplay=(), camera=(), cross-origin-isolated=(), display-capture=(), encrypted-media=(), fullscreen=(self), geolocation=(), gyroscope=(), keyboard-map=(), magnetometer=(), microphone=(), midi=(), payment=(), picture-in-picture=(self), publickey-credentials-get=(), screen-wake-lock=(), sync-xhr=(), usb=(), xr-spatial-tracking=()"),e.set("Strict-Transport-Security","max-age=31536000; includeSubDomains; preload"),e.set("Cross-Origin-Opener-Policy","same-origin"),e.set("Cross-Origin-Resource-Policy","same-origin"),e.set("Cross-Origin-Embedder-Policy","credentialless"),e.has("Vary")||e.set("Vary","Accept-Encoding");const t=r.url.pathname;return!t.includes("sitemap")&&!t.includes("robots")&&(t.startsWith("/blog")||t.startsWith("/courses")||t.startsWith("/indicators")||t.startsWith("/alerts")||t.startsWith("/live-trading-rooms")||t.startsWith("/resources")||t==="/"||t==="/about"||t==="/our-mission"?e.set("X-Robots-Tag","index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"):(t.startsWith("/admin")||t.startsWith("/dashboard")||t.startsWith("/account")||t.startsWith("/cart")||t.startsWith("/checkout")||t.startsWith("/api"))&&e.set("X-Robots-Tag","noindex, nofollow")),e.set("X-AI-Training-Opt-Out","true"),e.set("TDM-Reservation","1"),e.set("X-ML-Data-Use","disallow"),e.set("X-Content-License","All Rights Reserved - No AI Training Permitted"),e.set("X-OpenAI-Block","true"),e.set("X-Anthropic-Block","true"),e.set("X-Google-Extended","disallow"),new Response(s.body,{status:s.status,statusText:s.statusText,headers:e})},c=async({event:r,resolve:a})=>await a(r,{transformPageChunk:({html:e})=>e.replace(/\s+/g," ").replace(/>\s+</g,"><")}),l=async({event:r,resolve:a})=>{const s=performance.now(),e=await a(r),t=performance.now()-s,o=new Headers(e.headers);return o.set("Server-Timing",`total;dur=${t.toFixed(2)}`),new Response(e.body,{status:e.status,statusText:e.statusText,headers:o})},p=i(l,n,c);export{p as handle};
