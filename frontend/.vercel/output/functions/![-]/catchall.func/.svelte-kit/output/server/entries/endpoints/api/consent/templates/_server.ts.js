import{json as o,error as s}from"@sveltejs/kit";const a=new Map,u={templateId:"minimal-dark",customTemplates:[],updatedAt:new Date().toISOString()},p=async({url:r})=>{try{const e=r.searchParams.get("siteId")||"default",t=a.get(e)||u;return o({success:!0,config:t})}catch{throw s(500,"Internal server error")}},I=async({request:r,url:e})=>{try{const t=e.searchParams.get("siteId")||"default",c=await r.json(),{templateId:i,customization:n,customTemplates:m,updatedBy:l}=c;if(!i)throw s(400,"Missing required field: templateId");const d={templateId:i,customization:n,customTemplates:m||[],updatedAt:new Date().toISOString(),updatedBy:l};return a.set(t,d),o({success:!0,message:"Template configuration saved",config:d})}catch(t){throw t&&typeof t=="object"&&"status"in t?t:s(500,"Internal server error")}},f=async({request:r,url:e})=>{try{const t=e.searchParams.get("siteId")||"default",c=await r.json(),n={...a.get(t)||u,...c,updatedAt:new Date().toISOString()};return a.set(t,n),o({success:!0,message:"Template configuration updated",config:n})}catch{throw s(500,"Internal server error")}},h=async({url:r})=>{try{const e=r.searchParams.get("siteId")||"default";return a.delete(e),o({success:!0,message:"Template configuration reset to default"})}catch{throw s(500,"Internal server error")}};export{h as DELETE,p as GET,I as POST,f as PUT};
