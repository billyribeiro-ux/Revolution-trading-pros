import{z as h,A}from"./vendor-svelte.js";const l=5,a=4e3;function I(){const{subscribe:u,update:c,set:y}=A({toasts:[]});let b=0;const o=new Map;function w(){return`toast-${Date.now()}-${++b}`}function n(s){const e=w(),i={...s,id:e};if(c(t=>{let r=[...t.toasts,i];return r.length>l&&(r.slice(0,r.length-l).forEach(g=>{const T=o.get(g.id);T&&(clearTimeout(T),o.delete(g.id))}),r=r.slice(-l)),{toasts:r}}),s.duration>0){const t=setTimeout(()=>{d(e)},s.duration);o.set(e,t)}return e}function d(s){const e=o.get(s);e&&(clearTimeout(e),o.delete(s)),c(i=>({toasts:i.toasts.filter(t=>t.id!==s)}))}function p(){o.forEach(s=>clearTimeout(s)),o.clear(),y({toasts:[]})}function m(s,e){if(c(i=>({toasts:i.toasts.map(t=>t.id===s?{...t,...e}:t)})),e.duration&&e.duration>0){const i=o.get(s);i&&clearTimeout(i);const t=setTimeout(()=>{d(s)},e.duration);o.set(s,t)}}return{subscribe:u,success(s,e=a){return n({type:"success",message:s,duration:e,dismissible:!0})},error(s,e=6e3){return n({type:"error",message:s,duration:e,dismissible:!0})},warning(s,e=5e3){return n({type:"warning",message:s,duration:e,dismissible:!0})},info(s,e=a){return n({type:"info",message:s,duration:e,dismissible:!0})},loading(s){return n({type:"loading",message:s,duration:0,dismissible:!1})},show(s){return n({type:s.type??"info",message:s.message,duration:s.duration??a,dismissible:s.dismissible??!0})},update:m,async promise(s,e){const i=n({type:"loading",message:e.loading,duration:0,dismissible:!1});try{const t=await s,r=typeof e.success=="function"?e.success(t):e.success;return m(i,{type:"success",message:r,duration:a,dismissible:!0}),t}catch(t){const r=typeof e.error=="function"?e.error(t):e.error;throw m(i,{type:"error",message:r,duration:6e3,dismissible:!0}),t}},dismiss:d,dismissAll:p}}const f=I(),v=h(f,u=>u.toasts),{success:D,error:E,warning:R,info:x,loading:O,show:U,dismiss:_,dismissAll:$,promise:z}=f;f.dismiss;export{f as a,v as t};
