import{s as u,k as E,w as g,$ as R,c,a0 as f,e as t,J as y,a1 as L,au as A,d as _,b as I,f as d,bZ as P,b_ as j,Z as B,bQ as J,b$ as N,ah as w,v as Q,a4 as V,a as z,F as Z,r as x,c0 as q,aa as W,u as G}from"../../../../chunks/vendor-svelte.js";import"@sveltejs/kit/internal";import"@sveltejs/kit/internal/server";import{m as p}from"../../../../chunks/members.js";import"../../../../chunks/client.js";import"../../../../chunks/auth.js";import"../../../../chunks/toast.js";function es(S,H){S.component(s=>{var o;let h=u(o??={},"$membersStore",p).members,l=u(o??={},"$membersStore",p).stats;u(o??={},"$membersStore",p).services;let i=u(o??={},"$membersStore",p).pagination,k=u(o??={},"$membersStore",p).loading,C="",r=!1,b=new Set,M=!1;function T(e){switch(e){case"active":return"bg-emerald-500/20 text-emerald-400 border-emerald-500/30";case"trial":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"churned":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-slate-500/20 text-slate-400 border-slate-500/30"}}function m(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function U(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function D(e){return e.first_name&&e.last_name?`${e.first_name[0]}${e.last_name[0]}`.toUpperCase():e.name?.slice(0,2).toUpperCase()||"U"}if(E("b5zv64",s,e=>{e.title(v=>{v.push("<title>Members Management | Revolution Trading Pros</title>")})}),s.push('<div class="members-page svelte-b5zv64">'),s.push("<!--[!-->"),s.push('<!--]--> <div class="page-header svelte-b5zv64"><div class="header-content svelte-b5zv64"><div class="header-title svelte-b5zv64"><div class="title-icon svelte-b5zv64">'),g(s,{size:32}),s.push('<!----></div> <div><h1 class="svelte-b5zv64">Members Command Center</h1> <p class="svelte-b5zv64">Enterprise-grade member lifecycle management</p></div></div> <div class="header-actions svelte-b5zv64"><button class="btn-secondary svelte-b5zv64">'),R(s,{size:18}),s.push(`<!----> Import</button> <button class="btn-secondary svelte-b5zv64"${c("disabled",M,!0)}>`),f(s,{size:18}),s.push(`<!----> ${t("Export")}</button> <button class="btn-secondary svelte-b5zv64">`),y(s,{size:18}),s.push('<!----> Win-Back</button> <button class="btn-primary svelte-b5zv64">'),L(s,{size:18}),s.push("<!----> Refresh</button></div></div></div> "),l){s.push("<!--[-->"),s.push('<div class="stats-grid svelte-b5zv64"><div class="stat-card gradient-purple svelte-b5zv64"><div class="stat-icon svelte-b5zv64">'),g(s,{size:28}),s.push(`<!----></div> <div class="stat-content"><div class="stat-label svelte-b5zv64">Total Members</div> <div class="stat-value svelte-b5zv64">${t(l.overview.total_members.toLocaleString())}</div> <div class="stat-change positive svelte-b5zv64">`),A(s,{size:14}),s.push(`<!----> +${t(l.overview.new_this_month)} this month</div></div> <div class="stat-sparkline svelte-b5zv64"><!--[-->`);const e=_(l.growth_trend.slice(-6));for(let v=0,n=e.length;v<n;v++){let a=e[v];s.push(`<div class="sparkline-bar svelte-b5zv64"${I(`height: ${d(a.new/Math.max(...l.growth_trend.map(F=>F.new))*100)}%`)}></div>`)}s.push('<!--]--></div></div> <div class="stat-card gradient-emerald svelte-b5zv64"><div class="stat-icon svelte-b5zv64">'),P(s,{size:28}),s.push(`<!----></div> <div class="stat-content"><div class="stat-label svelte-b5zv64">Active Subscribers</div> <div class="stat-value svelte-b5zv64">${t(l.subscriptions.active.toLocaleString())}</div> <div class="stat-change neutral svelte-b5zv64">`),j(s,{size:14}),s.push(`<!----> ${t(l.subscriptions.trial)} in trial</div></div> <div class="stat-ring svelte-b5zv64"><svg viewBox="0 0 36 36" class="svelte-b5zv64"><circle cx="18" cy="18" r="16" fill="none" stroke="currentColor" stroke-opacity="0.2" stroke-width="3"></circle><circle cx="18" cy="18" r="16" fill="none" stroke="currentColor" stroke-width="3"${c("stroke-dasharray",`${d(l.subscriptions.active/l.overview.total_members*100)} 100`)} stroke-linecap="round" transform="rotate(-90 18 18)"></circle></svg> <span class="svelte-b5zv64">${t(Math.round(l.subscriptions.active/l.overview.total_members*100))}%</span></div></div> <div class="stat-card gradient-gold svelte-b5zv64"><div class="stat-icon svelte-b5zv64">`),B(s,{size:28}),s.push(`<!----></div> <div class="stat-content"><div class="stat-label svelte-b5zv64">Monthly Revenue</div> <div class="stat-value svelte-b5zv64">${t(m(l.revenue.mrr))}</div> <div class="stat-change neutral svelte-b5zv64">`),J(s,{size:14}),s.push(`<!----> ${t(m(l.revenue.avg_ltv))} avg LTV</div></div> <div class="stat-glow svelte-b5zv64"></div></div> <div class="stat-card gradient-red svelte-b5zv64"><div class="stat-icon svelte-b5zv64">`),N(s,{size:28}),s.push(`<!----></div> <div class="stat-content"><div class="stat-label svelte-b5zv64">Churn Rate</div> <div class="stat-value svelte-b5zv64">${t(l.subscriptions.churn_rate)}%</div> <div class="stat-change negative svelte-b5zv64">`),y(s,{size:14}),s.push(`<!----> ${t(l.subscriptions.churned)} churned</div></div> <button class="stat-action svelte-b5zv64">Recover `),w(s,{size:14}),s.push("<!----></button></div></div>")}else s.push("<!--[!-->");if(s.push("<!--]--> "),l?.top_services&&l.top_services.length>0){s.push("<!--[-->"),s.push('<div class="top-services-section svelte-b5zv64"><h3 class="svelte-b5zv64">Top Services by Members</h3> <div class="services-grid svelte-b5zv64"><!--[-->');const e=_(l.top_services);for(let v=0,n=e.length;v<n;v++){let a=e[v];s.push('<button class="service-card svelte-b5zv64"><div class="service-icon svelte-b5zv64">'),Q(s,{size:20}),s.push(`<!----></div> <div class="service-info"><div class="service-name svelte-b5zv64">${t(a.name)}</div> <div class="service-type svelte-b5zv64">${t(a.type)}</div></div> <div class="service-count svelte-b5zv64">${t(a.members_count)}</div></button>`)}s.push("<!--]--></div></div>")}else s.push("<!--[!-->");if(s.push('<!--]--> <div class="toolbar svelte-b5zv64"><div class="search-box svelte-b5zv64">'),V(s,{size:18}),s.push(`<!----> <input id="search-members" type="text" placeholder="Search members by name or email..."${c("value",C)} class="svelte-b5zv64"/></div> <div class="toolbar-actions svelte-b5zv64"><button${z("filter-toggle svelte-b5zv64",void 0,{active:r})}${c("aria-expanded",r)} aria-label="Toggle filters">`),Z(s,{size:18}),s.push("<!----> Filters</button> "),b.size>0?(s.push("<!--[-->"),s.push('<button class="btn-email svelte-b5zv64">'),x(s,{size:18}),s.push(`<!----> Email (${t(b.size)})</button>`)):s.push("<!--[!-->"),s.push('<!--]--> <button class="btn-export svelte-b5zv64">'),f(s,{size:18}),s.push("<!----> Export</button></div></div> "),s.push("<!--[!-->"),s.push('<!--]--> <div class="members-table-container svelte-b5zv64">'),k)s.push("<!--[-->"),s.push('<div class="loading-state svelte-b5zv64"><div class="loader svelte-b5zv64"></div> <p>Loading members...</p></div>');else{if(s.push("<!--[!-->"),h.length===0)s.push("<!--[-->"),s.push('<div class="empty-state svelte-b5zv64">'),g(s,{size:64,stroke:1}),s.push('<!----> <h3 class="svelte-b5zv64">No members found</h3> <p>Try adjusting your filters or search query</p></div>');else{s.push("<!--[!-->"),s.push(`<table class="members-table svelte-b5zv64"><thead class="svelte-b5zv64"><tr><th class="checkbox-col svelte-b5zv64"><input type="checkbox"${c("checked",b.size===h.length&&h.length>0,!0)} aria-label="Select all members" class="svelte-b5zv64"/></th><th class="svelte-b5zv64">Member</th><th class="svelte-b5zv64">Status</th><th class="svelte-b5zv64">Current Plan</th><th class="svelte-b5zv64">Total Spent</th><th class="svelte-b5zv64">Joined</th><th class="svelte-b5zv64">Actions</th></tr></thead><tbody class="svelte-b5zv64"><!--[-->`);const e=_(h);for(let v=0,n=e.length;v<n;v++){let a=e[v];s.push(`<tr${z("svelte-b5zv64",void 0,{selected:b.has(a.id)})}><td class="checkbox-col svelte-b5zv64"><input type="checkbox"${c("checked",b.has(a.id),!0)}${c("aria-label",`Select ${d(a.name)}`)} class="svelte-b5zv64"/></td><td class="svelte-b5zv64"><div class="member-info svelte-b5zv64"><div class="member-avatar svelte-b5zv64" style="background: linear-gradient(135deg, #6366f1, #8b5cf6)">${t(D(a))}</div> <div class="member-details"><div class="member-name svelte-b5zv64">${t(a.name)}</div> <div class="member-email svelte-b5zv64">${t(a.email)}</div></div></div></td><td class="svelte-b5zv64"><span${z(`status-badge ${d(T(a.status))}`,"svelte-b5zv64")}>${t(a.status_label)}</span></td><td class="svelte-b5zv64"><span class="plan-name svelte-b5zv64">${t(a.current_plan||"-")}</span></td><td class="svelte-b5zv64"><span${z("spending svelte-b5zv64",void 0,{whale:a.total_spent>=5e3,high:a.total_spent>=1e3&&a.total_spent<5e3})}>${t(m(a.total_spent))}</span></td><td class="svelte-b5zv64"><span class="date svelte-b5zv64">${t(U(a.joined_at))}</span></td><td class="svelte-b5zv64"><div class="actions svelte-b5zv64"><button class="action-btn svelte-b5zv64" title="View Details">`),w(s,{size:16}),s.push('<!----></button> <button class="action-btn svelte-b5zv64" title="Send Email">'),x(s,{size:16}),s.push("<!----></button></div></td></tr>")}s.push("<!--]--></tbody></table> "),i?(s.push("<!--[-->"),s.push(`<div class="pagination svelte-b5zv64"><div class="pagination-info svelte-b5zv64">Showing ${t((i.current_page-1)*i.per_page+1)} to ${t(Math.min(i.current_page*i.per_page,i.total))} of ${t(i.total)} members</div> <div class="pagination-controls svelte-b5zv64"><button class="page-btn svelte-b5zv64"${c("disabled",i.current_page===1,!0)}>`),q(s,{size:18}),s.push(`<!----></button> <span class="page-indicator svelte-b5zv64">Page ${t(i.current_page)} of ${t(i.last_page)}</span> <button class="page-btn svelte-b5zv64"${c("disabled",i.current_page===i.last_page,!0)}>`),W(s,{size:18}),s.push("<!----></button></div></div>")):s.push("<!--[!-->"),s.push("<!--]-->")}s.push("<!--]-->")}s.push("<!--]--></div></div> "),s.push("<!--[!-->"),s.push("<!--]--> "),s.push("<!--[!-->"),s.push("<!--]-->"),o&&G(o)})}export{es as default};
