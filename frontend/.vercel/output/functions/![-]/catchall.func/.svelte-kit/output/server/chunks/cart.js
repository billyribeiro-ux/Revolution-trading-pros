import{z as d,A as l,an as m}from"./vendor-svelte.js";function p(){return{items:[]}}function f(){const{subscribe:s,set:u,update:i}=l(p());return{subscribe:s,addItem:e=>{let r=!1;return i(t=>(t.items.findIndex(a=>a.id===e.id&&a.interval===e.interval)>=0?r=!1:(t.items.push({...e,quantity:1}),r=!0),t)),r},hasItem:(e,r)=>m({subscribe:s}).items.some(n=>n.id===e&&n.interval===r),hasAnyVariant:e=>m({subscribe:s}).items.find(t=>t.id===e),removeItem:(e,r)=>{i(t=>(t.items=t.items.filter(n=>!(n.id===e&&n.interval===r)),t))},updateQuantity:(e,r,t)=>{i(n=>{const a=n.items.find(o=>o.id===e&&o.interval===t);return a&&(r<=0?n.items=n.items.filter(o=>!(o.id===e&&o.interval===t)):a.quantity=Math.min(r,1)),n})},applyCoupon:(e,r)=>{i(t=>(t.items=t.items.map(n=>({...n,couponCode:e,discount:r})),t))},removeCoupon:()=>{i(e=>(e.items=e.items.map(r=>{const{couponCode:t,discount:n,...a}=r;return a}),e))},clearCart:()=>{u({items:[]})},getItemCount:e=>e.items.reduce((r,t)=>r+t.quantity,0),getTotal:e=>e.items.reduce((r,t)=>r+t.price*t.quantity,0)}}const c=f(),C=d(c,s=>s.items.reduce((u,i)=>u+i.quantity,0)),y=d(c,s=>s.items.reduce((u,i)=>u+i.price*i.quantity,0)),I=d(C,s=>s>0);export{c as a,y as b,C as c,I as h};
