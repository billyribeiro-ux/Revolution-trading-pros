import{k as b,ab as _,e,ac as w,d as k}from"../../../../../chunks/vendor-svelte.js";import{B as D,C as l}from"../../../../../chunks/Card.js";import{a as h,B as m}from"../../../../../chunks/toast2.js";import{T as R}from"../../../../../chunks/Table.js";import"../../../../../chunks/toast.js";import"../../../../../chunks/BatchOperations.svelte_svelte_type_style_lang.js";import"../../../../../chunks/AnimatedNumber.svelte_svelte_type_style_lang.js";import"../../../../../chunks/OfflineIndicator.svelte_svelte_type_style_lang.js";import"isomorphic-dompurify";import"@sveltejs/kit/internal";import"clsx";import"@sveltejs/kit/internal/server";import"../../../../../chunks/connections.js";import{s as d}from"../../../../../chunks/seo.js";function N(x,T){x.component(s=>{let p=[],c=!0,i={total:0,resolved:0,unresolved:0,total_hits:0};async function g(){try{c=!0,p=await d.list404s()||[]}catch{h({type:"error",message:"Failed to load 404 errors"})}finally{c=!1}}async function f(){try{i=await d.get404Stats()}catch{}}async function v(t=!0){if(confirm(t?"Delete all resolved 404 errors?":"Delete all 404 errors? This action cannot be undone."))try{await d.bulkDelete404s(t),h({type:"success",message:"404 errors deleted successfully"}),await g(),await f()}catch{h({type:"error",message:"Failed to delete 404 errors"})}}b("1b5w1ws",s,t=>{t.title(a=>{a.push("<title>404 Errors | Revolution Admin</title>")})}),s.push('<div><div class="flex items-center justify-between mb-6"><div><h1 class="text-3xl font-bold text-gray-900">404 Error Monitor</h1> <p class="text-gray-600 mt-1">Track and fix broken links on your site</p></div> '),D(s,{variant:"danger",onclick:()=>v(!0),children:t=>{_(t,{size:20}),t.push("<!----> Delete Resolved")}}),s.push('<!----></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">'),l(s,{children:t=>{t.push(`<p class="text-sm text-gray-600">Total 404s</p> <p class="text-2xl font-bold mt-1">${e(i.total)}</p>`)}}),s.push("<!----> "),l(s,{children:t=>{t.push(`<p class="text-sm text-gray-600">Unresolved</p> <p class="text-2xl font-bold mt-1 text-red-600">${e(i.unresolved)}</p>`)}}),s.push("<!----> "),l(s,{children:t=>{t.push(`<p class="text-sm text-gray-600">Resolved</p> <p class="text-2xl font-bold mt-1 text-green-600">${e(i.resolved)}</p>`)}}),s.push("<!----> "),l(s,{children:t=>{t.push(`<p class="text-sm text-gray-600">Total Hits</p> <p class="text-2xl font-bold mt-1">${e(i.total_hits)}</p>`)}}),s.push("<!----></div> "),c?(s.push("<!--[-->"),l(s,{children:t=>{t.push('<div class="text-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading 404 errors...</p></div>')}})):(s.push("<!--[!-->"),p.length===0?(s.push("<!--[-->"),l(s,{children:t=>{t.push('<div class="text-center py-12">'),w(t,{size:48,class:"mx-auto text-green-500 mb-4"}),t.push('<!----> <p class="text-gray-500">No 404 errors found. Great job!</p></div>')}})):(s.push("<!--[!-->"),l(s,{padding:!1,children:t=>{R(t,{headers:["URL","Hit Count","Status","First Seen","Last Seen"],children:a=>{a.push("<!--[-->");const n=k(p);for(let r=0,y=n.length;r<y;r++){let o=n[r];a.push(`<tr><td class="font-mono text-sm max-w-md truncate">${e(o.url)}</td><td>`),m(a,{variant:o.hit_count>10?"danger":"warning",children:u=>{u.push(`<!---->${e(o.hit_count)} hits`)}}),a.push("<!----></td><td>"),m(a,{variant:o.is_resolved?"success":"danger",children:u=>{u.push(`<!---->${e(o.is_resolved?"Resolved":"Active")}`)}}),a.push(`<!----></td><td class="text-gray-600 text-sm">${e(new Date(o.first_seen_at).toLocaleDateString())}</td><td class="text-gray-600 text-sm">${e(new Date(o.last_seen_at).toLocaleDateString())}</td></tr>`)}a.push("<!--]-->")}})}}),s.push("<!----> "),l(s,{class:"mt-6",children:t=>{t.push('<h3 class="text-lg font-bold text-gray-900 mb-4">Recommended Actions</h3> <ul class="space-y-2 text-gray-700"><li class="flex items-start gap-2"><span class="text-blue-600 mt-1">→</span> <span>Review high-traffic 404s and create redirects to relevant content</span></li> <li class="flex items-start gap-2"><span class="text-blue-600 mt-1">→</span> <span>Check internal links that may be pointing to these broken URLs</span></li> <li class="flex items-start gap-2"><span class="text-blue-600 mt-1">→</span> <span>Consider creating content for frequently accessed missing pages</span></li></ul>')}}),s.push("<!---->")),s.push("<!--]-->")),s.push("<!--]--></div>")})}export{N as default};
