import{k as A,d as y,e as a,c as h,a as w,f as _}from"../../../../../chunks/vendor-svelte.js";import{P as C,a as N}from"../../../../../chunks/PeriodSelector.js";function z(E,D){E.component(t=>{let d=[],n=[],r=!0,p=null,c="7d",g="",b="",i=1,u=1,m=0;const v={page_view:"bg-blue-100 text-blue-700",click:"bg-green-100 text-green-700",form_submit:"bg-purple-100 text-purple-700",purchase:"bg-yellow-100 text-yellow-700",signup:"bg-pink-100 text-pink-700",login:"bg-cyan-100 text-cyan-700",error:"bg-red-100 text-red-700",custom:"bg-gray-100 text-gray-700"};async function f(){r=!0,p=null;try{const e=await N.getEvents({period:c,event_type:g||void 0,search:b||void 0,page:i});d=e.events,n=e.event_types||[],u=e.pagination?.total_pages||1,m=e.pagination?.total||0}catch(e){p=e instanceof Error?e.message:"Failed to load events"}finally{r=!1}}function S(e){c=e,i=1,f()}function P(){i=1,f()}function k(e){return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function j(e){return!e||Object.keys(e).length===0?"-":JSON.stringify(e).slice(0,100)+(JSON.stringify(e).length>100?"...":"")}if(A("ijow4t",t,e=>{e.title(l=>{l.push("<title>Event Explorer | Analytics</title>")})}),t.push('<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="mb-8"><h1 class="text-2xl font-bold text-gray-900">Event Explorer</h1> <p class="text-sm text-gray-500 mt-1">Browse and analyze tracked events</p></div> <div class="bg-white rounded-xl border border-gray-200 p-4 mb-6"><div class="flex flex-wrap items-center gap-4">'),C(t,{value:c,onchange:S}),t.push("<!----> "),t.select({value:g,onchange:P,class:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e=>{e.option({value:""},o=>{o.push("All Event Types")}),e.push("<!--[-->");const l=y(n);for(let o=0,s=l.length;o<s;o++){let x=l[o];e.option({value:x.name},T=>{T.push(`${a(x.name)} (${a(x.count)})`)})}e.push("<!--]-->")}),t.push(` <div class="flex-1 min-w-[200px]"><div class="relative"><input type="text"${h("value",b)} placeholder="Search events..." class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"/> <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">üîç</span></div></div> <button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium">Search</button></div></div> `),n.length>0){t.push("<!--[-->"),t.push('<div class="bg-white rounded-xl border border-gray-200 p-6 mb-6"><h3 class="text-lg font-semibold text-gray-900 mb-4">Event Distribution</h3> <div class="flex flex-wrap gap-2"><!--[-->');const e=y(n.slice(0,12));for(let l=0,o=e.length;l<o;l++){let s=e[l];t.push(`<button${w(`px-3 py-2 rounded-lg text-sm font-medium transition-all ${_(g===s.name?"bg-blue-600 text-white":v[s.name]||"bg-gray-100 text-gray-700 hover:bg-gray-200")}`)}>${a(s.name)} <span class="ml-2 opacity-75">${a(s.count.toLocaleString())}</span></button>`)}t.push("<!--]--></div></div>")}else t.push("<!--[!-->");if(t.push(`<!--]--> <div class="bg-white rounded-xl border border-gray-200 overflow-hidden"><div class="p-4 border-b border-gray-100 flex items-center justify-between"><h3 class="font-semibold text-gray-900">Events <span class="text-sm font-normal text-gray-500">(${a(m.toLocaleString())} total)</span></h3> <button class="px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50">Export CSV</button></div> `),r)t.push("<!--[-->"),t.push('<div class="flex items-center justify-center py-20"><div class="w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"></div></div>');else{if(t.push("<!--[!-->"),p)t.push("<!--[-->"),t.push(`<div class="p-6 text-center text-red-600"><p>${a(p)}</p> <button class="mt-4 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Retry</button></div>`);else{if(t.push("<!--[!-->"),d.length===0)t.push("<!--[-->"),t.push('<div class="p-12 text-center"><div class="text-4xl mb-4">‚ö°</div> <h3 class="text-lg font-medium text-gray-900 mb-2">No Events Found</h3> <p class="text-gray-500">Try adjusting your filters or time range</p></div>');else{t.push("<!--[!-->"),t.push('<div class="overflow-x-auto"><table class="w-full text-sm"><thead class="bg-gray-50"><tr><th class="text-left py-3 px-4 font-medium text-gray-600">Event</th><th class="text-left py-3 px-4 font-medium text-gray-600">User</th><th class="text-left py-3 px-4 font-medium text-gray-600">Page</th><th class="text-left py-3 px-4 font-medium text-gray-600">Properties</th><th class="text-left py-3 px-4 font-medium text-gray-600">Source</th><th class="text-right py-3 px-4 font-medium text-gray-600">Time</th></tr></thead><tbody class="divide-y divide-gray-100"><!--[-->');const e=y(d);for(let l=0,o=e.length;l<o;l++){let s=e[l];t.push(`<tr class="hover:bg-gray-50 cursor-pointer"><td class="py-3 px-4"><span${w(`px-2 py-1 rounded text-xs font-medium ${_(v[s.event_type]||"bg-gray-100 text-gray-700")}`)}>${a(s.event_name)}</span></td><td class="py-3 px-4">`),s.user_id?(t.push("<!--[-->"),t.push(`<span class="text-gray-900">${a(s.user_id)}</span>`)):(t.push("<!--[!-->"),t.push('<span class="text-gray-400 italic">Anonymous</span>')),t.push(`<!--]--></td><td class="py-3 px-4 max-w-[200px] truncate text-gray-600">${a(s.page_path||"-")}</td><td class="py-3 px-4 max-w-[200px] truncate text-gray-500 font-mono text-xs">${a(j(s.properties||{}))}</td><td class="py-3 px-4"><span class="text-xs text-gray-500 capitalize">${a(s.channel||"-")}</span></td><td class="py-3 px-4 text-right text-gray-500 whitespace-nowrap">${a(k(s.created_at))}</td></tr>`)}t.push("<!--]--></tbody></table></div> "),u>1?(t.push("<!--[-->"),t.push(`<div class="p-4 border-t border-gray-100 flex items-center justify-between"><p class="text-sm text-gray-500">Page ${a(i)} of ${a(u)}</p> <div class="flex items-center gap-2"><button${h("disabled",i===1,!0)} class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Previous</button> <button${h("disabled",i===u,!0)} class="px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">Next</button></div></div>`)):t.push("<!--[!-->"),t.push("<!--]-->")}t.push("<!--]-->")}t.push("<!--]-->")}t.push("<!--]--></div></div>")})}export{z as default};
