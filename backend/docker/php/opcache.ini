;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; OPcache Configuration for Laravel 12 + Octane + FrankenPHP
; December 2025 - Maximum performance with JIT compilation
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[opcache]
; Enable OPcache
opcache.enable = 1
opcache.enable_cli = 1

; Memory configuration
; Increase for large Laravel applications
opcache.memory_consumption = 256
opcache.interned_strings_buffer = 64
opcache.max_accelerated_files = 30000

; Validation settings
; In production with Octane, we don't need to revalidate
opcache.validate_timestamps = 0
opcache.revalidate_freq = 0
opcache.revalidate_path = 0

; Optimization settings
opcache.optimization_level = 0x7FFEBFFF
opcache.save_comments = 1
opcache.fast_shutdown = 1
opcache.enable_file_override = 1

; Preloading (Laravel 12 compatible)
; Uncomment and set path if using preloading
; opcache.preload = /app/bootstrap/cache/opcache.php
; opcache.preload_user = laravel

; JIT Compilation (PHP 8.3+)
; tracing mode provides best performance for web applications
opcache.jit = tracing
opcache.jit_buffer_size = 128M
opcache.jit_debug = 0
opcache.jit_bisect_limit = 0

; Error handling
opcache.log_verbosity_level = 1
opcache.error_log = /dev/stderr

; File cache for faster restarts
opcache.file_cache = /tmp/opcache
opcache.file_cache_only = 0
opcache.file_cache_consistency_checks = 0
opcache.file_cache_fallback = 1
