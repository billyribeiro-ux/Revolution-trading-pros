###############################################################################
# REVOLUTION TRADING PROS - ENVIRONMENT CONFIGURATION
#
# Stack: Laravel 12 + Octane + FrankenPHP (December 2025)
#
# Copy this file to .env and configure for your environment.
# NEVER commit .env to version control.
#
# Required variables are marked with [REQUIRED]
# Production-specific variables are marked with [PRODUCTION]
###############################################################################

#------------------------------------------------------------------------------
# APPLICATION SETTINGS
#------------------------------------------------------------------------------

# [REQUIRED] Application name displayed in UI and emails
APP_NAME="Revolution Trading Pros"

# [REQUIRED] Environment: local, staging, production
APP_ENV=local

# [REQUIRED] Application encryption key - generate with: php artisan key:generate
# SECURITY: Never share or commit this value
APP_KEY=

# [PRODUCTION] MUST be false in production to prevent sensitive data exposure
APP_DEBUG=true

# [REQUIRED] Base URL of your application (no trailing slash)
APP_URL=http://localhost:8000

# Timezone for date/time operations
APP_TIMEZONE=UTC

# Default locale settings
APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

# Maintenance mode driver: file, cache
APP_MAINTENANCE_DRIVER=file

#------------------------------------------------------------------------------
# OCTANE CONFIGURATION (FrankenPHP - December 2025)
#------------------------------------------------------------------------------
# FrankenPHP provides sub-millisecond response times by keeping Laravel in memory
# Performance: 0.88ms (FrankenPHP) vs 2.61ms (RoadRunner) vs 4.94ms (Swoole)

# Octane server: frankenphp, swoole, roadrunner
OCTANE_SERVER=frankenphp

# Number of worker processes (auto = CPU cores)
OCTANE_WORKERS=auto

# Number of task workers for concurrent operations
OCTANE_TASK_WORKERS=auto

# Max requests before worker restart (prevents memory leaks)
OCTANE_MAX_REQUESTS=1000

# Enable HTTPS in Octane (disable if behind load balancer)
OCTANE_HTTPS=false

# Enable Octane in-memory cache
OCTANE_CACHE_ENABLED=true

# Keep database connections persistent across requests
OCTANE_PERSISTENT_DB=true

# Concurrent task limit
OCTANE_CONCURRENT_TASKS=10

#------------------------------------------------------------------------------
# HORIZON CONFIGURATION (Queue Management)
#------------------------------------------------------------------------------
# Dashboard: /horizon (protected by admin middleware)

# Horizon dashboard path
HORIZON_PATH=horizon

# Horizon Redis prefix
HORIZON_PREFIX=rtp_horizon:

# Horizon domain (null = same as app)
HORIZON_DOMAIN=

#------------------------------------------------------------------------------
# PULSE CONFIGURATION (Performance Monitoring)
#------------------------------------------------------------------------------
# Dashboard: /pulse (protected by admin middleware)

# Enable/disable Pulse recording
PULSE_ENABLED=true

# Pulse dashboard path
PULSE_PATH=pulse

# Pulse domain (null = same as app)
PULSE_DOMAIN=

# Storage driver: database, redis
PULSE_STORAGE_DRIVER=database

# Ingest driver: storage (sync), redis (async - recommended for high traffic)
PULSE_INGEST_DRIVER=storage

# Database connection for Pulse (null = default)
PULSE_DB_CONNECTION=

# Redis connection for Pulse
PULSE_REDIS_CONNECTION=default

# Slow query threshold (ms)
PULSE_SLOW_QUERY_THRESHOLD=100

# Slow job threshold (ms)
PULSE_SLOW_JOB_THRESHOLD=1000

# Slow outgoing request threshold (ms)
PULSE_SLOW_OUTGOING_THRESHOLD=500

# Sample rates (0-1, where 1 = 100%)
PULSE_REQUESTS_SAMPLE_RATE=1
PULSE_SLOW_QUERIES_SAMPLE_RATE=1
PULSE_CACHE_SAMPLE_RATE=0.1
PULSE_USER_REQUESTS_SAMPLE_RATE=1

#------------------------------------------------------------------------------
# REVERB CONFIGURATION (WebSocket Server)
#------------------------------------------------------------------------------
# Real-time broadcasting for live updates

BROADCAST_CONNECTION=reverb

# Reverb server host
REVERB_HOST=localhost

# Reverb server port
REVERB_PORT=8080

# Reverb scheme (http or https)
REVERB_SCHEME=http

# Reverb application credentials
REVERB_APP_ID=revolution-trading
REVERB_APP_KEY=your-reverb-key
REVERB_APP_SECRET=your-reverb-secret

# Allowed origins (comma-separated)
REVERB_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Frontend WebSocket configuration
VITE_REVERB_APP_KEY="${REVERB_APP_KEY}"
VITE_REVERB_HOST="${REVERB_HOST}"
VITE_REVERB_PORT="${REVERB_PORT}"
VITE_REVERB_SCHEME="${REVERB_SCHEME}"

#------------------------------------------------------------------------------
# SECURITY SETTINGS
#------------------------------------------------------------------------------

# Bcrypt hashing rounds (10-12 recommended, higher = more secure but slower)
BCRYPT_ROUNDS=12

# [PRODUCTION] Session encryption - MUST be true in production
SESSION_ENCRYPT=false

# [PRODUCTION] Secure cookies - MUST be true when using HTTPS
SESSION_SECURE_COOKIE=false

# [PRODUCTION] SameSite cookie policy: lax, strict, none
SESSION_SAME_SITE=lax

# CORS allowed origins (comma-separated for multiple)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# Sanctum stateful domains for SPA authentication
SANCTUM_STATEFUL_DOMAINS=localhost,localhost:5173,localhost:3000

# Rate limiting (requests per minute)
RATE_LIMIT_API=60
RATE_LIMIT_AUTH=5

#------------------------------------------------------------------------------
# DATABASE CONFIGURATION
#------------------------------------------------------------------------------

# Database driver: sqlite, mysql, pgsql, sqlsrv
DB_CONNECTION=pgsql

# PostgreSQL Settings (recommended for production)
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=revolution_trading
DB_USERNAME=laravel
DB_PASSWORD=secret

# [PRODUCTION] Enable SSL for database connections
# DB_SSLMODE=require

# [PRODUCTION] Neon Serverless PostgreSQL
# DATABASE_URL=postgres://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require

#------------------------------------------------------------------------------
# CACHE & REDIS CONFIGURATION
#------------------------------------------------------------------------------

# Cache driver: file, database, redis, memcached, array
CACHE_STORE=redis

# Cache prefix to avoid collisions in shared environments
CACHE_PREFIX=rtp_

# Redis Configuration
REDIS_CLIENT=predis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379
REDIS_CACHE_DB=1

# [PRODUCTION] Upstash Redis (Edge-optimized)
# REDIS_URL=rediss://default:xxx@xxx.upstash.io:6379

# Memcached Configuration
MEMCACHED_HOST=127.0.0.1

#------------------------------------------------------------------------------
# SESSION CONFIGURATION
#------------------------------------------------------------------------------

# Session driver: file, cookie, database, redis, memcached, array
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_PATH=/
SESSION_DOMAIN=null

#------------------------------------------------------------------------------
# QUEUE CONFIGURATION
#------------------------------------------------------------------------------

# Queue driver: sync, database, redis, sqs, beanstalkd
QUEUE_CONNECTION=redis

# Queue retry settings
QUEUE_RETRY_AFTER=90
QUEUE_FAILED_DRIVER=database

#------------------------------------------------------------------------------
# MAIL CONFIGURATION
#------------------------------------------------------------------------------

# Mail driver: smtp, ses, mailgun, postmark, sendmail, log, array
MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="noreply@example.com"
MAIL_FROM_NAME="${APP_NAME}"

# [PRODUCTION] Postmark (recommended for transactional)
# MAIL_MAILER=postmark
# POSTMARK_TOKEN=your-postmark-token

# [PRODUCTION] AWS SES (recommended for bulk)
# MAIL_MAILER=ses
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_DEFAULT_REGION=us-east-1

#------------------------------------------------------------------------------
# INBOUND EMAIL CONFIGURATION (CRM Pro)
#------------------------------------------------------------------------------
# Receive and process inbound emails via webhook from email providers

# Postmark Inbound (recommended - already integrated for outbound)
# Configure in Postmark: Servers > Inbound > Add Webhook
POSTMARK_INBOUND_SIGNATURE_KEY=

# Reply-to address pattern for conversation threading
# Use {hash} placeholder for automatic mailbox routing
INBOUND_EMAIL_ADDRESS_PATTERN=reply+{hash}@mail.yourdomain.com

# Spam score threshold (0-10, emails above this are auto-marked spam)
INBOUND_EMAIL_SPAM_THRESHOLD=5.0

# Maximum attachment size in MB
INBOUND_EMAIL_MAX_ATTACHMENT_SIZE_MB=25

# Auto-create contacts for unknown senders
INBOUND_EMAIL_AUTO_CREATE_CONTACTS=true

# Default lifecycle stage for auto-created contacts
INBOUND_EMAIL_DEFAULT_LIFECYCLE_STAGE=lead

# Enable virus scanning for attachments (requires ClamAV)
INBOUND_EMAIL_VIRUS_SCANNING=true

# Storage disk for attachments: r2, s3, local
INBOUND_EMAIL_ATTACHMENTS_DISK=r2

# AWS SES Inbound (via SNS)
# Configure receipt rules in SES to send to SNS topic
SES_INBOUND_SNS_TOPIC_ARN=

#------------------------------------------------------------------------------
# FILE STORAGE CONFIGURATION
#------------------------------------------------------------------------------

FILESYSTEM_DISK=local

# AWS S3 Configuration
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_URL=
AWS_USE_PATH_STYLE_ENDPOINT=false

# CDN Configuration (BunnyCDN)
BUNNY_API_KEY=
BUNNY_STORAGE_ZONE=
BUNNY_CDN_HOSTNAME=

#------------------------------------------------------------------------------
# CLOUDFLARE R2 STORAGE (RECOMMENDED)
#------------------------------------------------------------------------------
# S3-compatible storage with FREE bandwidth. Get credentials at:
# https://dash.cloudflare.com > R2 > Manage R2 API Tokens

R2_ACCESS_KEY_ID=
R2_SECRET_ACCESS_KEY=
R2_BUCKET=revolution-trading-media
R2_ENDPOINT=https://YOUR_ACCOUNT_ID.r2.cloudflarestorage.com
R2_PUBLIC_URL=https://pub-YOUR_HASH.r2.dev

#------------------------------------------------------------------------------
# SHARP IMAGE SERVICE
#------------------------------------------------------------------------------
# High-performance Node.js image processing (10x faster than PHP)
# Run: cd image-service && npm start

SHARP_SERVICE_ENABLED=true
SHARP_SERVICE_URL=http://localhost:3001
SHARP_SERVICE_TIMEOUT=60

# Default media disk: local, public, media, r2
MEDIA_DISK=local

#------------------------------------------------------------------------------
# PAYMENT GATEWAY CONFIGURATION
#------------------------------------------------------------------------------

# Stripe
STRIPE_KEY=
STRIPE_SECRET=
STRIPE_WEBHOOK_SECRET=

# PayPal
PAYPAL_CLIENT_ID=
PAYPAL_CLIENT_SECRET=
PAYPAL_MODE=sandbox

#------------------------------------------------------------------------------
# LOGGING CONFIGURATION
#------------------------------------------------------------------------------

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

# [PRODUCTION] Use stderr for container logging
# LOG_CHANNEL=stderr

# [PRODUCTION] Slack webhook for critical errors
# LOG_SLACK_WEBHOOK_URL=

#------------------------------------------------------------------------------
# SEARCH CONFIGURATION
#------------------------------------------------------------------------------

# Search driver: database, meilisearch, algolia
SCOUT_DRIVER=database

# Meilisearch
MEILISEARCH_HOST=http://localhost:7700
MEILISEARCH_KEY=

#------------------------------------------------------------------------------
# ANALYTICS & MONITORING
#------------------------------------------------------------------------------

# Sentry Error Tracking
SENTRY_LARAVEL_DSN=

# Application Performance Monitoring
APM_ENABLED=false

#------------------------------------------------------------------------------
# FEATURE FLAGS
#------------------------------------------------------------------------------

FEATURE_REGISTRATION=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_API_RATE_LIMITING=true

#------------------------------------------------------------------------------
# AI SERVICES
#------------------------------------------------------------------------------

OPENAI_API_KEY=
OPENAI_ORGANIZATION=

#------------------------------------------------------------------------------
# VITE / FRONTEND
#------------------------------------------------------------------------------

VITE_APP_NAME="${APP_NAME}"
VITE_API_URL=http://localhost:8000/api

#------------------------------------------------------------------------------
# DOCKER COMPOSE (Local Development)
#------------------------------------------------------------------------------
# Used by docker-compose.yml for local development

# Application port
APP_PORT=8000

# Database port (external)
DB_PORT=5432

# Redis port (external)
REDIS_PORT=6379

# Meilisearch port
MEILISEARCH_PORT=7700

# Mailpit ports
MAIL_PORT=1025
MAIL_DASHBOARD=8025
